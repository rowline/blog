function lp(t,o){for(var u=0;u<o.length;u++){const p=o[u];if(typeof p!="string"&&!Array.isArray(p)){for(const _ in p)if(_!=="default"&&!(_ in t)){const x=Object.getOwnPropertyDescriptor(p,_);x&&Object.defineProperty(t,_,x.get?x:{enumerable:!0,get:()=>p[_]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var gw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function el(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $m={exports:{}},T5={},Zm={exports:{}},hn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P2=Symbol.for("react.element"),yw=Symbol.for("react.portal"),vw=Symbol.for("react.fragment"),xw=Symbol.for("react.strict_mode"),ww=Symbol.for("react.profiler"),bw=Symbol.for("react.provider"),Tw=Symbol.for("react.context"),Ew=Symbol.for("react.forward_ref"),Sw=Symbol.for("react.suspense"),Mw=Symbol.for("react.memo"),Cw=Symbol.for("react.lazy"),N8=Symbol.iterator;function Pw(t){return t===null||typeof t!="object"?null:(t=N8&&t[N8]||t["@@iterator"],typeof t=="function"?t:null)}var qm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Wm=Object.assign,Hm={};function Xc(t,o,u){this.props=t,this.context=o,this.refs=Hm,this.updater=u||qm}Xc.prototype.isReactComponent={};Xc.prototype.setState=function(t,o){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,o,"setState")};Xc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Xm(){}Xm.prototype=Xc.prototype;function cp(t,o,u){this.props=t,this.context=o,this.refs=Hm,this.updater=u||qm}var up=cp.prototype=new Xm;up.constructor=cp;Wm(up,Xc.prototype);up.isPureReactComponent=!0;var j8=Array.isArray,Km=Object.prototype.hasOwnProperty,hp={current:null},Ym={key:!0,ref:!0,__self:!0,__source:!0};function Jm(t,o,u){var p,_={},x=null,E=null;if(o!=null)for(p in o.ref!==void 0&&(E=o.ref),o.key!==void 0&&(x=""+o.key),o)Km.call(o,p)&&!Ym.hasOwnProperty(p)&&(_[p]=o[p]);var s=arguments.length-2;if(s===1)_.children=u;else if(1<s){for(var P=Array(s),R=0;R<s;R++)P[R]=arguments[R+2];_.children=P}if(t&&t.defaultProps)for(p in s=t.defaultProps,s)_[p]===void 0&&(_[p]=s[p]);return{$$typeof:P2,type:t,key:x,ref:E,props:_,_owner:hp.current}}function Aw(t,o){return{$$typeof:P2,type:t.type,key:o,ref:t.ref,props:t.props,_owner:t._owner}}function dp(t){return typeof t=="object"&&t!==null&&t.$$typeof===P2}function Iw(t){var o={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(u){return o[u]})}var V8=/\/+/g;function b4(t,o){return typeof t=="object"&&t!==null&&t.key!=null?Iw(""+t.key):o.toString(36)}function C3(t,o,u,p,_){var x=typeof t;(x==="undefined"||x==="boolean")&&(t=null);var E=!1;if(t===null)E=!0;else switch(x){case"string":case"number":E=!0;break;case"object":switch(t.$$typeof){case P2:case yw:E=!0}}if(E)return E=t,_=_(E),t=p===""?"."+b4(E,0):p,j8(_)?(u="",t!=null&&(u=t.replace(V8,"$&/")+"/"),C3(_,o,u,"",function(R){return R})):_!=null&&(dp(_)&&(_=Aw(_,u+(!_.key||E&&E.key===_.key?"":(""+_.key).replace(V8,"$&/")+"/")+t)),o.push(_)),1;if(E=0,p=p===""?".":p+":",j8(t))for(var s=0;s<t.length;s++){x=t[s];var P=p+b4(x,s);E+=C3(x,o,u,P,_)}else if(P=Pw(t),typeof P=="function")for(t=P.call(t),s=0;!(x=t.next()).done;)x=x.value,P=p+b4(x,s++),E+=C3(x,o,u,P,_);else if(x==="object")throw o=String(t),Error("Objects are not valid as a React child (found: "+(o==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":o)+"). If you meant to render a collection of children, use an array instead.");return E}function s3(t,o,u){if(t==null)return t;var p=[],_=0;return C3(t,p,"","",function(x){return o.call(u,x,_++)}),p}function kw(t){if(t._status===-1){var o=t._result;o=o(),o.then(function(u){(t._status===0||t._status===-1)&&(t._status=1,t._result=u)},function(u){(t._status===0||t._status===-1)&&(t._status=2,t._result=u)}),t._status===-1&&(t._status=0,t._result=o)}if(t._status===1)return t._result.default;throw t._result}var di={current:null},P3={transition:null},zw={ReactCurrentDispatcher:di,ReactCurrentBatchConfig:P3,ReactCurrentOwner:hp};hn.Children={map:s3,forEach:function(t,o,u){s3(t,function(){o.apply(this,arguments)},u)},count:function(t){var o=0;return s3(t,function(){o++}),o},toArray:function(t){return s3(t,function(o){return o})||[]},only:function(t){if(!dp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};hn.Component=Xc;hn.Fragment=vw;hn.Profiler=ww;hn.PureComponent=cp;hn.StrictMode=xw;hn.Suspense=Sw;hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zw;hn.cloneElement=function(t,o,u){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var p=Wm({},t.props),_=t.key,x=t.ref,E=t._owner;if(o!=null){if(o.ref!==void 0&&(x=o.ref,E=hp.current),o.key!==void 0&&(_=""+o.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(P in o)Km.call(o,P)&&!Ym.hasOwnProperty(P)&&(p[P]=o[P]===void 0&&s!==void 0?s[P]:o[P])}var P=arguments.length-2;if(P===1)p.children=u;else if(1<P){s=Array(P);for(var R=0;R<P;R++)s[R]=arguments[R+2];p.children=s}return{$$typeof:P2,type:t.type,key:_,ref:x,props:p,_owner:E}};hn.createContext=function(t){return t={$$typeof:Tw,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:bw,_context:t},t.Consumer=t};hn.createElement=Jm;hn.createFactory=function(t){var o=Jm.bind(null,t);return o.type=t,o};hn.createRef=function(){return{current:null}};hn.forwardRef=function(t){return{$$typeof:Ew,render:t}};hn.isValidElement=dp;hn.lazy=function(t){return{$$typeof:Cw,_payload:{_status:-1,_result:t},_init:kw}};hn.memo=function(t,o){return{$$typeof:Mw,type:t,compare:o===void 0?null:o}};hn.startTransition=function(t){var o=P3.transition;P3.transition={};try{t()}finally{P3.transition=o}};hn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};hn.useCallback=function(t,o){return di.current.useCallback(t,o)};hn.useContext=function(t){return di.current.useContext(t)};hn.useDebugValue=function(){};hn.useDeferredValue=function(t){return di.current.useDeferredValue(t)};hn.useEffect=function(t,o){return di.current.useEffect(t,o)};hn.useId=function(){return di.current.useId()};hn.useImperativeHandle=function(t,o,u){return di.current.useImperativeHandle(t,o,u)};hn.useInsertionEffect=function(t,o){return di.current.useInsertionEffect(t,o)};hn.useLayoutEffect=function(t,o){return di.current.useLayoutEffect(t,o)};hn.useMemo=function(t,o){return di.current.useMemo(t,o)};hn.useReducer=function(t,o,u){return di.current.useReducer(t,o,u)};hn.useRef=function(t){return di.current.useRef(t)};hn.useState=function(t){return di.current.useState(t)};hn.useSyncExternalStore=function(t,o,u){return di.current.useSyncExternalStore(t,o,u)};hn.useTransition=function(){return di.current.useTransition()};hn.version="18.2.0";Zm.exports=hn;var Ue=Zm.exports;const Gs=el(Ue),Lw=lp({__proto__:null,default:Gs},[Ue]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dw=Ue,Rw=Symbol.for("react.element"),Fw=Symbol.for("react.fragment"),Bw=Object.prototype.hasOwnProperty,Ow=Dw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Uw={key:!0,ref:!0,__self:!0,__source:!0};function Qm(t,o,u){var p,_={},x=null,E=null;u!==void 0&&(x=""+u),o.key!==void 0&&(x=""+o.key),o.ref!==void 0&&(E=o.ref);for(p in o)Bw.call(o,p)&&!Uw.hasOwnProperty(p)&&(_[p]=o[p]);if(t&&t.defaultProps)for(p in o=t.defaultProps,o)_[p]===void 0&&(_[p]=o[p]);return{$$typeof:Rw,type:t,key:x,ref:E,props:_,_owner:Ow.current}}T5.Fragment=Fw;T5.jsx=Qm;T5.jsxs=Qm;$m.exports=T5;var PC=$m.exports,G8={},e_={exports:{}},Wi={},t_={exports:{}},n_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function o(Ce,st){var ht=Ce.length;Ce.push(st);e:for(;0<ht;){var Tt=ht-1>>>1,Rt=Ce[Tt];if(0<_(Rt,st))Ce[Tt]=st,Ce[ht]=Rt,ht=Tt;else break e}}function u(Ce){return Ce.length===0?null:Ce[0]}function p(Ce){if(Ce.length===0)return null;var st=Ce[0],ht=Ce.pop();if(ht!==st){Ce[0]=ht;e:for(var Tt=0,Rt=Ce.length,Nt=Rt>>>1;Tt<Nt;){var Yt=2*(Tt+1)-1,Yn=Ce[Yt],In=Yt+1,Nn=Ce[In];if(0>_(Yn,ht))In<Rt&&0>_(Nn,Yn)?(Ce[Tt]=Nn,Ce[In]=ht,Tt=In):(Ce[Tt]=Yn,Ce[Yt]=ht,Tt=Yt);else if(In<Rt&&0>_(Nn,ht))Ce[Tt]=Nn,Ce[In]=ht,Tt=In;else break e}}return st}function _(Ce,st){var ht=Ce.sortIndex-st.sortIndex;return ht!==0?ht:Ce.id-st.id}if(typeof performance=="object"&&typeof performance.now=="function"){var x=performance;t.unstable_now=function(){return x.now()}}else{var E=Date,s=E.now();t.unstable_now=function(){return E.now()-s}}var P=[],R=[],U=1,V=null,q=3,ve=!1,we=!1,xe=!1,Ie=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function se(Ce){for(var st=u(R);st!==null;){if(st.callback===null)p(R);else if(st.startTime<=Ce)p(R),st.sortIndex=st.expirationTime,o(P,st);else break;st=u(R)}}function Se(Ce){if(xe=!1,se(Ce),!we)if(u(P)!==null)we=!0,Je(Be);else{var st=u(R);st!==null&&Xe(Se,st.startTime-Ce)}}function Be(Ce,st){we=!1,xe&&(xe=!1,te(lt),lt=-1),ve=!0;var ht=q;try{for(se(st),V=u(P);V!==null&&(!(V.expirationTime>st)||Ce&&!Ut());){var Tt=V.callback;if(typeof Tt=="function"){V.callback=null,q=V.priorityLevel;var Rt=Tt(V.expirationTime<=st);st=t.unstable_now(),typeof Rt=="function"?V.callback=Rt:V===u(P)&&p(P),se(st)}else p(P);V=u(P)}if(V!==null)var Nt=!0;else{var Yt=u(R);Yt!==null&&Xe(Se,Yt.startTime-st),Nt=!1}return Nt}finally{V=null,q=ht,ve=!1}}var ye=!1,Ye=null,lt=-1,Me=5,Mt=-1;function Ut(){return!(t.unstable_now()-Mt<Me)}function bt(){if(Ye!==null){var Ce=t.unstable_now();Mt=Ce;var st=!0;try{st=Ye(!0,Ce)}finally{st?Bt():(ye=!1,Ye=null)}}else ye=!1}var Bt;if(typeof ne=="function")Bt=function(){ne(bt)};else if(typeof MessageChannel<"u"){var Ke=new MessageChannel,Ge=Ke.port2;Ke.port1.onmessage=bt,Bt=function(){Ge.postMessage(null)}}else Bt=function(){Ie(bt,0)};function Je(Ce){Ye=Ce,ye||(ye=!0,Bt())}function Xe(Ce,st){lt=Ie(function(){Ce(t.unstable_now())},st)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Ce){Ce.callback=null},t.unstable_continueExecution=function(){we||ve||(we=!0,Je(Be))},t.unstable_forceFrameRate=function(Ce){0>Ce||125<Ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Me=0<Ce?Math.floor(1e3/Ce):5},t.unstable_getCurrentPriorityLevel=function(){return q},t.unstable_getFirstCallbackNode=function(){return u(P)},t.unstable_next=function(Ce){switch(q){case 1:case 2:case 3:var st=3;break;default:st=q}var ht=q;q=st;try{return Ce()}finally{q=ht}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Ce,st){switch(Ce){case 1:case 2:case 3:case 4:case 5:break;default:Ce=3}var ht=q;q=Ce;try{return st()}finally{q=ht}},t.unstable_scheduleCallback=function(Ce,st,ht){var Tt=t.unstable_now();switch(typeof ht=="object"&&ht!==null?(ht=ht.delay,ht=typeof ht=="number"&&0<ht?Tt+ht:Tt):ht=Tt,Ce){case 1:var Rt=-1;break;case 2:Rt=250;break;case 5:Rt=1073741823;break;case 4:Rt=1e4;break;default:Rt=5e3}return Rt=ht+Rt,Ce={id:U++,callback:st,priorityLevel:Ce,startTime:ht,expirationTime:Rt,sortIndex:-1},ht>Tt?(Ce.sortIndex=ht,o(R,Ce),u(P)===null&&Ce===u(R)&&(xe?(te(lt),lt=-1):xe=!0,Xe(Se,ht-Tt))):(Ce.sortIndex=Rt,o(P,Ce),we||ve||(we=!0,Je(Be))),Ce},t.unstable_shouldYield=Ut,t.unstable_wrapCallback=function(Ce){var st=q;return function(){var ht=q;q=st;try{return Ce.apply(this,arguments)}finally{q=ht}}}})(n_);t_.exports=n_;var Nw=t_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r_=Ue,qi=Nw;function ut(t){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+t,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+t+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i_=new Set,s2={};function o1(t,o){Bc(t,o),Bc(t+"Capture",o)}function Bc(t,o){for(s2[t]=o,t=0;t<o.length;t++)i_.add(o[t])}var Hs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),i6=Object.prototype.hasOwnProperty,jw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$8={},Z8={};function Vw(t){return i6.call(Z8,t)?!0:i6.call($8,t)?!1:jw.test(t)?Z8[t]=!0:($8[t]=!0,!1)}function Gw(t,o,u,p){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return p?!1:u!==null?!u.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function $w(t,o,u,p){if(o===null||typeof o>"u"||Gw(t,o,u,p))return!0;if(p)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function pi(t,o,u,p,_,x,E){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=p,this.attributeNamespace=_,this.mustUseProperty=u,this.propertyName=t,this.type=o,this.sanitizeURL=x,this.removeEmptyString=E}var $r={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){$r[t]=new pi(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var o=t[0];$r[o]=new pi(o,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){$r[t]=new pi(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){$r[t]=new pi(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){$r[t]=new pi(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){$r[t]=new pi(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){$r[t]=new pi(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){$r[t]=new pi(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){$r[t]=new pi(t,5,!1,t.toLowerCase(),null,!1,!1)});var pp=/[\-:]([a-z])/g;function fp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var o=t.replace(pp,fp);$r[o]=new pi(o,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var o=t.replace(pp,fp);$r[o]=new pi(o,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var o=t.replace(pp,fp);$r[o]=new pi(o,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){$r[t]=new pi(t,1,!1,t.toLowerCase(),null,!1,!1)});$r.xlinkHref=new pi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){$r[t]=new pi(t,1,!1,t.toLowerCase(),null,!0,!0)});function mp(t,o,u,p){var _=$r.hasOwnProperty(o)?$r[o]:null;(_!==null?_.type!==0:p||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&($w(o,u,_,p)&&(u=null),p||_===null?Vw(o)&&(u===null?t.removeAttribute(o):t.setAttribute(o,""+u)):_.mustUseProperty?t[_.propertyName]=u===null?_.type===3?!1:"":u:(o=_.attributeName,p=_.attributeNamespace,u===null?t.removeAttribute(o):(_=_.type,u=_===3||_===4&&u===!0?"":""+u,p?t.setAttributeNS(p,o,u):t.setAttribute(o,u))))}var Js=r_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,a3=Symbol.for("react.element"),pc=Symbol.for("react.portal"),fc=Symbol.for("react.fragment"),_p=Symbol.for("react.strict_mode"),o6=Symbol.for("react.profiler"),o_=Symbol.for("react.provider"),s_=Symbol.for("react.context"),gp=Symbol.for("react.forward_ref"),s6=Symbol.for("react.suspense"),a6=Symbol.for("react.suspense_list"),yp=Symbol.for("react.memo"),Fa=Symbol.for("react.lazy"),a_=Symbol.for("react.offscreen"),q8=Symbol.iterator;function A0(t){return t===null||typeof t!="object"?null:(t=q8&&t[q8]||t["@@iterator"],typeof t=="function"?t:null)}var cr=Object.assign,T4;function $0(t){if(T4===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);T4=o&&o[1]||""}return`
`+T4+t}var E4=!1;function S4(t,o){if(!t||E4)return"";E4=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(R){var p=R}Reflect.construct(t,[],o)}else{try{o.call()}catch(R){p=R}t.call(o.prototype)}else{try{throw Error()}catch(R){p=R}t()}}catch(R){if(R&&p&&typeof R.stack=="string"){for(var _=R.stack.split(`
`),x=p.stack.split(`
`),E=_.length-1,s=x.length-1;1<=E&&0<=s&&_[E]!==x[s];)s--;for(;1<=E&&0<=s;E--,s--)if(_[E]!==x[s]){if(E!==1||s!==1)do if(E--,s--,0>s||_[E]!==x[s]){var P=`
`+_[E].replace(" at new "," at ");return t.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",t.displayName)),P}while(1<=E&&0<=s);break}}}finally{E4=!1,Error.prepareStackTrace=u}return(t=t?t.displayName||t.name:"")?$0(t):""}function Zw(t){switch(t.tag){case 5:return $0(t.type);case 16:return $0("Lazy");case 13:return $0("Suspense");case 19:return $0("SuspenseList");case 0:case 2:case 15:return t=S4(t.type,!1),t;case 11:return t=S4(t.type.render,!1),t;case 1:return t=S4(t.type,!0),t;default:return""}}function l6(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case fc:return"Fragment";case pc:return"Portal";case o6:return"Profiler";case _p:return"StrictMode";case s6:return"Suspense";case a6:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case s_:return(t.displayName||"Context")+".Consumer";case o_:return(t._context.displayName||"Context")+".Provider";case gp:var o=t.render;return t=t.displayName,t||(t=o.displayName||o.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case yp:return o=t.displayName||null,o!==null?o:l6(t.type)||"Memo";case Fa:o=t._payload,t=t._init;try{return l6(t(o))}catch{}}return null}function qw(t){var o=t.type;switch(t.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=o.render,t=t.displayName||t.name||"",o.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return l6(o);case 8:return o===_p?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Ya(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function l_(t){var o=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ww(t){var o=l_(t)?"checked":"value",u=Object.getOwnPropertyDescriptor(t.constructor.prototype,o),p=""+t[o];if(!t.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var _=u.get,x=u.set;return Object.defineProperty(t,o,{configurable:!0,get:function(){return _.call(this)},set:function(E){p=""+E,x.call(this,E)}}),Object.defineProperty(t,o,{enumerable:u.enumerable}),{getValue:function(){return p},setValue:function(E){p=""+E},stopTracking:function(){t._valueTracker=null,delete t[o]}}}}function l3(t){t._valueTracker||(t._valueTracker=Ww(t))}function c_(t){if(!t)return!1;var o=t._valueTracker;if(!o)return!0;var u=o.getValue(),p="";return t&&(p=l_(t)?t.checked?"true":"false":t.value),t=p,t!==u?(o.setValue(t),!0):!1}function V3(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function c6(t,o){var u=o.checked;return cr({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??t._wrapperState.initialChecked})}function W8(t,o){var u=o.defaultValue==null?"":o.defaultValue,p=o.checked!=null?o.checked:o.defaultChecked;u=Ya(o.value!=null?o.value:u),t._wrapperState={initialChecked:p,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function u_(t,o){o=o.checked,o!=null&&mp(t,"checked",o,!1)}function u6(t,o){u_(t,o);var u=Ya(o.value),p=o.type;if(u!=null)p==="number"?(u===0&&t.value===""||t.value!=u)&&(t.value=""+u):t.value!==""+u&&(t.value=""+u);else if(p==="submit"||p==="reset"){t.removeAttribute("value");return}o.hasOwnProperty("value")?h6(t,o.type,u):o.hasOwnProperty("defaultValue")&&h6(t,o.type,Ya(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(t.defaultChecked=!!o.defaultChecked)}function H8(t,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var p=o.type;if(!(p!=="submit"&&p!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+t._wrapperState.initialValue,u||o===t.value||(t.value=o),t.defaultValue=o}u=t.name,u!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,u!==""&&(t.name=u)}function h6(t,o,u){(o!=="number"||V3(t.ownerDocument)!==t)&&(u==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+u&&(t.defaultValue=""+u))}var Z0=Array.isArray;function Pc(t,o,u,p){if(t=t.options,o){o={};for(var _=0;_<u.length;_++)o["$"+u[_]]=!0;for(u=0;u<t.length;u++)_=o.hasOwnProperty("$"+t[u].value),t[u].selected!==_&&(t[u].selected=_),_&&p&&(t[u].defaultSelected=!0)}else{for(u=""+Ya(u),o=null,_=0;_<t.length;_++){if(t[_].value===u){t[_].selected=!0,p&&(t[_].defaultSelected=!0);return}o!==null||t[_].disabled||(o=t[_])}o!==null&&(o.selected=!0)}}function d6(t,o){if(o.dangerouslySetInnerHTML!=null)throw Error(ut(91));return cr({},o,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function X8(t,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(ut(92));if(Z0(u)){if(1<u.length)throw Error(ut(93));u=u[0]}o=u}o==null&&(o=""),u=o}t._wrapperState={initialValue:Ya(u)}}function h_(t,o){var u=Ya(o.value),p=Ya(o.defaultValue);u!=null&&(u=""+u,u!==t.value&&(t.value=u),o.defaultValue==null&&t.defaultValue!==u&&(t.defaultValue=u)),p!=null&&(t.defaultValue=""+p)}function K8(t){var o=t.textContent;o===t._wrapperState.initialValue&&o!==""&&o!==null&&(t.value=o)}function d_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function p6(t,o){return t==null||t==="http://www.w3.org/1999/xhtml"?d_(o):t==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var c3,p_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,p,_){MSApp.execUnsafeLocalFunction(function(){return t(o,u,p,_)})}:t}(function(t,o){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=o;else{for(c3=c3||document.createElement("div"),c3.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=c3.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;o.firstChild;)t.appendChild(o.firstChild)}});function a2(t,o){if(o){var u=t.firstChild;if(u&&u===t.lastChild&&u.nodeType===3){u.nodeValue=o;return}}t.textContent=o}var X0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Hw=["Webkit","ms","Moz","O"];Object.keys(X0).forEach(function(t){Hw.forEach(function(o){o=o+t.charAt(0).toUpperCase()+t.substring(1),X0[o]=X0[t]})});function f_(t,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||X0.hasOwnProperty(t)&&X0[t]?(""+o).trim():o+"px"}function m_(t,o){t=t.style;for(var u in o)if(o.hasOwnProperty(u)){var p=u.indexOf("--")===0,_=f_(u,o[u],p);u==="float"&&(u="cssFloat"),p?t.setProperty(u,_):t[u]=_}}var Xw=cr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function f6(t,o){if(o){if(Xw[t]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(ut(137,t));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(ut(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(ut(61))}if(o.style!=null&&typeof o.style!="object")throw Error(ut(62))}}function m6(t,o){if(t.indexOf("-")===-1)return typeof o.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _6=null;function vp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var g6=null,Ac=null,Ic=null;function Y8(t){if(t=k2(t)){if(typeof g6!="function")throw Error(ut(280));var o=t.stateNode;o&&(o=P5(o),g6(t.stateNode,t.type,o))}}function __(t){Ac?Ic?Ic.push(t):Ic=[t]:Ac=t}function g_(){if(Ac){var t=Ac,o=Ic;if(Ic=Ac=null,Y8(t),o)for(t=0;t<o.length;t++)Y8(o[t])}}function y_(t,o){return t(o)}function v_(){}var M4=!1;function x_(t,o,u){if(M4)return t(o,u);M4=!0;try{return y_(t,o,u)}finally{M4=!1,(Ac!==null||Ic!==null)&&(v_(),g_())}}function l2(t,o){var u=t.stateNode;if(u===null)return null;var p=P5(u);if(p===null)return null;u=p[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(t=t.type,p=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!p;break e;default:t=!1}if(t)return null;if(u&&typeof u!="function")throw Error(ut(231,o,typeof u));return u}var y6=!1;if(Hs)try{var I0={};Object.defineProperty(I0,"passive",{get:function(){y6=!0}}),window.addEventListener("test",I0,I0),window.removeEventListener("test",I0,I0)}catch{y6=!1}function Kw(t,o,u,p,_,x,E,s,P){var R=Array.prototype.slice.call(arguments,3);try{o.apply(u,R)}catch(U){this.onError(U)}}var K0=!1,G3=null,$3=!1,v6=null,Yw={onError:function(t){K0=!0,G3=t}};function Jw(t,o,u,p,_,x,E,s,P){K0=!1,G3=null,Kw.apply(Yw,arguments)}function Qw(t,o,u,p,_,x,E,s,P){if(Jw.apply(this,arguments),K0){if(K0){var R=G3;K0=!1,G3=null}else throw Error(ut(198));$3||($3=!0,v6=R)}}function s1(t){var o=t,u=t;if(t.alternate)for(;o.return;)o=o.return;else{t=o;do o=t,o.flags&4098&&(u=o.return),t=o.return;while(t)}return o.tag===3?u:null}function w_(t){if(t.tag===13){var o=t.memoizedState;if(o===null&&(t=t.alternate,t!==null&&(o=t.memoizedState)),o!==null)return o.dehydrated}return null}function J8(t){if(s1(t)!==t)throw Error(ut(188))}function eb(t){var o=t.alternate;if(!o){if(o=s1(t),o===null)throw Error(ut(188));return o!==t?null:t}for(var u=t,p=o;;){var _=u.return;if(_===null)break;var x=_.alternate;if(x===null){if(p=_.return,p!==null){u=p;continue}break}if(_.child===x.child){for(x=_.child;x;){if(x===u)return J8(_),t;if(x===p)return J8(_),o;x=x.sibling}throw Error(ut(188))}if(u.return!==p.return)u=_,p=x;else{for(var E=!1,s=_.child;s;){if(s===u){E=!0,u=_,p=x;break}if(s===p){E=!0,p=_,u=x;break}s=s.sibling}if(!E){for(s=x.child;s;){if(s===u){E=!0,u=x,p=_;break}if(s===p){E=!0,p=x,u=_;break}s=s.sibling}if(!E)throw Error(ut(189))}}if(u.alternate!==p)throw Error(ut(190))}if(u.tag!==3)throw Error(ut(188));return u.stateNode.current===u?t:o}function b_(t){return t=eb(t),t!==null?T_(t):null}function T_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var o=T_(t);if(o!==null)return o;t=t.sibling}return null}var E_=qi.unstable_scheduleCallback,Q8=qi.unstable_cancelCallback,tb=qi.unstable_shouldYield,nb=qi.unstable_requestPaint,gr=qi.unstable_now,rb=qi.unstable_getCurrentPriorityLevel,xp=qi.unstable_ImmediatePriority,S_=qi.unstable_UserBlockingPriority,Z3=qi.unstable_NormalPriority,ib=qi.unstable_LowPriority,M_=qi.unstable_IdlePriority,E5=null,_s=null;function ob(t){if(_s&&typeof _s.onCommitFiberRoot=="function")try{_s.onCommitFiberRoot(E5,t,void 0,(t.current.flags&128)===128)}catch{}}var Xo=Math.clz32?Math.clz32:lb,sb=Math.log,ab=Math.LN2;function lb(t){return t>>>=0,t===0?32:31-(sb(t)/ab|0)|0}var u3=64,h3=4194304;function q0(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function q3(t,o){var u=t.pendingLanes;if(u===0)return 0;var p=0,_=t.suspendedLanes,x=t.pingedLanes,E=u&268435455;if(E!==0){var s=E&~_;s!==0?p=q0(s):(x&=E,x!==0&&(p=q0(x)))}else E=u&~_,E!==0?p=q0(E):x!==0&&(p=q0(x));if(p===0)return 0;if(o!==0&&o!==p&&!(o&_)&&(_=p&-p,x=o&-o,_>=x||_===16&&(x&4194240)!==0))return o;if(p&4&&(p|=u&16),o=t.entangledLanes,o!==0)for(t=t.entanglements,o&=p;0<o;)u=31-Xo(o),_=1<<u,p|=t[u],o&=~_;return p}function cb(t,o){switch(t){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ub(t,o){for(var u=t.suspendedLanes,p=t.pingedLanes,_=t.expirationTimes,x=t.pendingLanes;0<x;){var E=31-Xo(x),s=1<<E,P=_[E];P===-1?(!(s&u)||s&p)&&(_[E]=cb(s,o)):P<=o&&(t.expiredLanes|=s),x&=~s}}function x6(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function C_(){var t=u3;return u3<<=1,!(u3&4194240)&&(u3=64),t}function C4(t){for(var o=[],u=0;31>u;u++)o.push(t);return o}function A2(t,o,u){t.pendingLanes|=o,o!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,o=31-Xo(o),t[o]=u}function hb(t,o){var u=t.pendingLanes&~o;t.pendingLanes=o,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=o,t.mutableReadLanes&=o,t.entangledLanes&=o,o=t.entanglements;var p=t.eventTimes;for(t=t.expirationTimes;0<u;){var _=31-Xo(u),x=1<<_;o[_]=0,p[_]=-1,t[_]=-1,u&=~x}}function wp(t,o){var u=t.entangledLanes|=o;for(t=t.entanglements;u;){var p=31-Xo(u),_=1<<p;_&o|t[p]&o&&(t[p]|=o),u&=~_}}var Ln=0;function P_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var A_,bp,I_,k_,z_,w6=!1,d3=[],Va=null,Ga=null,$a=null,c2=new Map,u2=new Map,Oa=[],db="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function e9(t,o){switch(t){case"focusin":case"focusout":Va=null;break;case"dragenter":case"dragleave":Ga=null;break;case"mouseover":case"mouseout":$a=null;break;case"pointerover":case"pointerout":c2.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":u2.delete(o.pointerId)}}function k0(t,o,u,p,_,x){return t===null||t.nativeEvent!==x?(t={blockedOn:o,domEventName:u,eventSystemFlags:p,nativeEvent:x,targetContainers:[_]},o!==null&&(o=k2(o),o!==null&&bp(o)),t):(t.eventSystemFlags|=p,o=t.targetContainers,_!==null&&o.indexOf(_)===-1&&o.push(_),t)}function pb(t,o,u,p,_){switch(o){case"focusin":return Va=k0(Va,t,o,u,p,_),!0;case"dragenter":return Ga=k0(Ga,t,o,u,p,_),!0;case"mouseover":return $a=k0($a,t,o,u,p,_),!0;case"pointerover":var x=_.pointerId;return c2.set(x,k0(c2.get(x)||null,t,o,u,p,_)),!0;case"gotpointercapture":return x=_.pointerId,u2.set(x,k0(u2.get(x)||null,t,o,u,p,_)),!0}return!1}function L_(t){var o=ql(t.target);if(o!==null){var u=s1(o);if(u!==null){if(o=u.tag,o===13){if(o=w_(u),o!==null){t.blockedOn=o,z_(t.priority,function(){I_(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){t.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}t.blockedOn=null}function A3(t){if(t.blockedOn!==null)return!1;for(var o=t.targetContainers;0<o.length;){var u=b6(t.domEventName,t.eventSystemFlags,o[0],t.nativeEvent);if(u===null){u=t.nativeEvent;var p=new u.constructor(u.type,u);_6=p,u.target.dispatchEvent(p),_6=null}else return o=k2(u),o!==null&&bp(o),t.blockedOn=u,!1;o.shift()}return!0}function t9(t,o,u){A3(t)&&u.delete(o)}function fb(){w6=!1,Va!==null&&A3(Va)&&(Va=null),Ga!==null&&A3(Ga)&&(Ga=null),$a!==null&&A3($a)&&($a=null),c2.forEach(t9),u2.forEach(t9)}function z0(t,o){t.blockedOn===o&&(t.blockedOn=null,w6||(w6=!0,qi.unstable_scheduleCallback(qi.unstable_NormalPriority,fb)))}function h2(t){function o(_){return z0(_,t)}if(0<d3.length){z0(d3[0],t);for(var u=1;u<d3.length;u++){var p=d3[u];p.blockedOn===t&&(p.blockedOn=null)}}for(Va!==null&&z0(Va,t),Ga!==null&&z0(Ga,t),$a!==null&&z0($a,t),c2.forEach(o),u2.forEach(o),u=0;u<Oa.length;u++)p=Oa[u],p.blockedOn===t&&(p.blockedOn=null);for(;0<Oa.length&&(u=Oa[0],u.blockedOn===null);)L_(u),u.blockedOn===null&&Oa.shift()}var kc=Js.ReactCurrentBatchConfig,W3=!0;function mb(t,o,u,p){var _=Ln,x=kc.transition;kc.transition=null;try{Ln=1,Tp(t,o,u,p)}finally{Ln=_,kc.transition=x}}function _b(t,o,u,p){var _=Ln,x=kc.transition;kc.transition=null;try{Ln=4,Tp(t,o,u,p)}finally{Ln=_,kc.transition=x}}function Tp(t,o,u,p){if(W3){var _=b6(t,o,u,p);if(_===null)B4(t,o,p,H3,u),e9(t,p);else if(pb(_,t,o,u,p))p.stopPropagation();else if(e9(t,p),o&4&&-1<db.indexOf(t)){for(;_!==null;){var x=k2(_);if(x!==null&&A_(x),x=b6(t,o,u,p),x===null&&B4(t,o,p,H3,u),x===_)break;_=x}_!==null&&p.stopPropagation()}else B4(t,o,p,null,u)}}var H3=null;function b6(t,o,u,p){if(H3=null,t=vp(p),t=ql(t),t!==null)if(o=s1(t),o===null)t=null;else if(u=o.tag,u===13){if(t=w_(o),t!==null)return t;t=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;t=null}else o!==t&&(t=null);return H3=t,null}function D_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rb()){case xp:return 1;case S_:return 4;case Z3:case ib:return 16;case M_:return 536870912;default:return 16}default:return 16}}var Na=null,Ep=null,I3=null;function R_(){if(I3)return I3;var t,o=Ep,u=o.length,p,_="value"in Na?Na.value:Na.textContent,x=_.length;for(t=0;t<u&&o[t]===_[t];t++);var E=u-t;for(p=1;p<=E&&o[u-p]===_[x-p];p++);return I3=_.slice(t,1<p?1-p:void 0)}function k3(t){var o=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&o===13&&(t=13)):t=o,t===10&&(t=13),32<=t||t===13?t:0}function p3(){return!0}function n9(){return!1}function Hi(t){function o(u,p,_,x,E){this._reactName=u,this._targetInst=_,this.type=p,this.nativeEvent=x,this.target=E,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(u=t[s],this[s]=u?u(x):x[s]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?p3:n9,this.isPropagationStopped=n9,this}return cr(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=p3)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=p3)},persist:function(){},isPersistent:p3}),o}var Kc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sp=Hi(Kc),I2=cr({},Kc,{view:0,detail:0}),gb=Hi(I2),P4,A4,L0,S5=cr({},I2,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==L0&&(L0&&t.type==="mousemove"?(P4=t.screenX-L0.screenX,A4=t.screenY-L0.screenY):A4=P4=0,L0=t),P4)},movementY:function(t){return"movementY"in t?t.movementY:A4}}),r9=Hi(S5),yb=cr({},S5,{dataTransfer:0}),vb=Hi(yb),xb=cr({},I2,{relatedTarget:0}),I4=Hi(xb),wb=cr({},Kc,{animationName:0,elapsedTime:0,pseudoElement:0}),bb=Hi(wb),Tb=cr({},Kc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Eb=Hi(Tb),Sb=cr({},Kc,{data:0}),i9=Hi(Sb),Mb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ab(t){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(t):(t=Pb[t])?!!o[t]:!1}function Mp(){return Ab}var Ib=cr({},I2,{key:function(t){if(t.key){var o=Mb[t.key]||t.key;if(o!=="Unidentified")return o}return t.type==="keypress"?(t=k3(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Cb[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mp,charCode:function(t){return t.type==="keypress"?k3(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?k3(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),kb=Hi(Ib),zb=cr({},S5,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),o9=Hi(zb),Lb=cr({},I2,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mp}),Db=Hi(Lb),Rb=cr({},Kc,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fb=Hi(Rb),Bb=cr({},S5,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ob=Hi(Bb),Ub=[9,13,27,32],Cp=Hs&&"CompositionEvent"in window,Y0=null;Hs&&"documentMode"in document&&(Y0=document.documentMode);var Nb=Hs&&"TextEvent"in window&&!Y0,F_=Hs&&(!Cp||Y0&&8<Y0&&11>=Y0),s9=String.fromCharCode(32),a9=!1;function B_(t,o){switch(t){case"keyup":return Ub.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function O_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var mc=!1;function jb(t,o){switch(t){case"compositionend":return O_(o);case"keypress":return o.which!==32?null:(a9=!0,s9);case"textInput":return t=o.data,t===s9&&a9?null:t;default:return null}}function Vb(t,o){if(mc)return t==="compositionend"||!Cp&&B_(t,o)?(t=R_(),I3=Ep=Na=null,mc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return F_&&o.locale!=="ko"?null:o.data;default:return null}}var Gb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function l9(t){var o=t&&t.nodeName&&t.nodeName.toLowerCase();return o==="input"?!!Gb[t.type]:o==="textarea"}function U_(t,o,u,p){__(p),o=X3(o,"onChange"),0<o.length&&(u=new Sp("onChange","change",null,u,p),t.push({event:u,listeners:o}))}var J0=null,d2=null;function $b(t){K_(t,0)}function M5(t){var o=yc(t);if(c_(o))return t}function Zb(t,o){if(t==="change")return o}var N_=!1;if(Hs){var k4;if(Hs){var z4="oninput"in document;if(!z4){var c9=document.createElement("div");c9.setAttribute("oninput","return;"),z4=typeof c9.oninput=="function"}k4=z4}else k4=!1;N_=k4&&(!document.documentMode||9<document.documentMode)}function u9(){J0&&(J0.detachEvent("onpropertychange",j_),d2=J0=null)}function j_(t){if(t.propertyName==="value"&&M5(d2)){var o=[];U_(o,d2,t,vp(t)),x_($b,o)}}function qb(t,o,u){t==="focusin"?(u9(),J0=o,d2=u,J0.attachEvent("onpropertychange",j_)):t==="focusout"&&u9()}function Wb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return M5(d2)}function Hb(t,o){if(t==="click")return M5(o)}function Xb(t,o){if(t==="input"||t==="change")return M5(o)}function Kb(t,o){return t===o&&(t!==0||1/t===1/o)||t!==t&&o!==o}var Yo=typeof Object.is=="function"?Object.is:Kb;function p2(t,o){if(Yo(t,o))return!0;if(typeof t!="object"||t===null||typeof o!="object"||o===null)return!1;var u=Object.keys(t),p=Object.keys(o);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var _=u[p];if(!i6.call(o,_)||!Yo(t[_],o[_]))return!1}return!0}function h9(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function d9(t,o){var u=h9(t);t=0;for(var p;u;){if(u.nodeType===3){if(p=t+u.textContent.length,t<=o&&p>=o)return{node:u,offset:o-t};t=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=h9(u)}}function V_(t,o){return t&&o?t===o?!0:t&&t.nodeType===3?!1:o&&o.nodeType===3?V_(t,o.parentNode):"contains"in t?t.contains(o):t.compareDocumentPosition?!!(t.compareDocumentPosition(o)&16):!1:!1}function G_(){for(var t=window,o=V3();o instanceof t.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)t=o.contentWindow;else break;o=V3(t.document)}return o}function Pp(t){var o=t&&t.nodeName&&t.nodeName.toLowerCase();return o&&(o==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||o==="textarea"||t.contentEditable==="true")}function Yb(t){var o=G_(),u=t.focusedElem,p=t.selectionRange;if(o!==u&&u&&u.ownerDocument&&V_(u.ownerDocument.documentElement,u)){if(p!==null&&Pp(u)){if(o=p.start,t=p.end,t===void 0&&(t=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(t,u.value.length);else if(t=(o=u.ownerDocument||document)&&o.defaultView||window,t.getSelection){t=t.getSelection();var _=u.textContent.length,x=Math.min(p.start,_);p=p.end===void 0?x:Math.min(p.end,_),!t.extend&&x>p&&(_=p,p=x,x=_),_=d9(u,x);var E=d9(u,p);_&&E&&(t.rangeCount!==1||t.anchorNode!==_.node||t.anchorOffset!==_.offset||t.focusNode!==E.node||t.focusOffset!==E.offset)&&(o=o.createRange(),o.setStart(_.node,_.offset),t.removeAllRanges(),x>p?(t.addRange(o),t.extend(E.node,E.offset)):(o.setEnd(E.node,E.offset),t.addRange(o)))}}for(o=[],t=u;t=t.parentNode;)t.nodeType===1&&o.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)t=o[u],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Jb=Hs&&"documentMode"in document&&11>=document.documentMode,_c=null,T6=null,Q0=null,E6=!1;function p9(t,o,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;E6||_c==null||_c!==V3(p)||(p=_c,"selectionStart"in p&&Pp(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Q0&&p2(Q0,p)||(Q0=p,p=X3(T6,"onSelect"),0<p.length&&(o=new Sp("onSelect","select",null,o,u),t.push({event:o,listeners:p}),o.target=_c)))}function f3(t,o){var u={};return u[t.toLowerCase()]=o.toLowerCase(),u["Webkit"+t]="webkit"+o,u["Moz"+t]="moz"+o,u}var gc={animationend:f3("Animation","AnimationEnd"),animationiteration:f3("Animation","AnimationIteration"),animationstart:f3("Animation","AnimationStart"),transitionend:f3("Transition","TransitionEnd")},L4={},$_={};Hs&&($_=document.createElement("div").style,"AnimationEvent"in window||(delete gc.animationend.animation,delete gc.animationiteration.animation,delete gc.animationstart.animation),"TransitionEvent"in window||delete gc.transitionend.transition);function C5(t){if(L4[t])return L4[t];if(!gc[t])return t;var o=gc[t],u;for(u in o)if(o.hasOwnProperty(u)&&u in $_)return L4[t]=o[u];return t}var Z_=C5("animationend"),q_=C5("animationiteration"),W_=C5("animationstart"),H_=C5("transitionend"),X_=new Map,f9="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tl(t,o){X_.set(t,o),o1(o,[t])}for(var D4=0;D4<f9.length;D4++){var R4=f9[D4],Qb=R4.toLowerCase(),eT=R4[0].toUpperCase()+R4.slice(1);tl(Qb,"on"+eT)}tl(Z_,"onAnimationEnd");tl(q_,"onAnimationIteration");tl(W_,"onAnimationStart");tl("dblclick","onDoubleClick");tl("focusin","onFocus");tl("focusout","onBlur");tl(H_,"onTransitionEnd");Bc("onMouseEnter",["mouseout","mouseover"]);Bc("onMouseLeave",["mouseout","mouseover"]);Bc("onPointerEnter",["pointerout","pointerover"]);Bc("onPointerLeave",["pointerout","pointerover"]);o1("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));o1("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));o1("onBeforeInput",["compositionend","keypress","textInput","paste"]);o1("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));o1("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));o1("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var W0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tT=new Set("cancel close invalid load scroll toggle".split(" ").concat(W0));function m9(t,o,u){var p=t.type||"unknown-event";t.currentTarget=u,Qw(p,o,void 0,t),t.currentTarget=null}function K_(t,o){o=(o&4)!==0;for(var u=0;u<t.length;u++){var p=t[u],_=p.event;p=p.listeners;e:{var x=void 0;if(o)for(var E=p.length-1;0<=E;E--){var s=p[E],P=s.instance,R=s.currentTarget;if(s=s.listener,P!==x&&_.isPropagationStopped())break e;m9(_,s,R),x=P}else for(E=0;E<p.length;E++){if(s=p[E],P=s.instance,R=s.currentTarget,s=s.listener,P!==x&&_.isPropagationStopped())break e;m9(_,s,R),x=P}}}if($3)throw t=v6,$3=!1,v6=null,t}function Zn(t,o){var u=o[A6];u===void 0&&(u=o[A6]=new Set);var p=t+"__bubble";u.has(p)||(Y_(o,t,2,!1),u.add(p))}function F4(t,o,u){var p=0;o&&(p|=4),Y_(u,t,p,o)}var m3="_reactListening"+Math.random().toString(36).slice(2);function f2(t){if(!t[m3]){t[m3]=!0,i_.forEach(function(u){u!=="selectionchange"&&(tT.has(u)||F4(u,!1,t),F4(u,!0,t))});var o=t.nodeType===9?t:t.ownerDocument;o===null||o[m3]||(o[m3]=!0,F4("selectionchange",!1,o))}}function Y_(t,o,u,p){switch(D_(o)){case 1:var _=mb;break;case 4:_=_b;break;default:_=Tp}u=_.bind(null,o,u,t),_=void 0,!y6||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(_=!0),p?_!==void 0?t.addEventListener(o,u,{capture:!0,passive:_}):t.addEventListener(o,u,!0):_!==void 0?t.addEventListener(o,u,{passive:_}):t.addEventListener(o,u,!1)}function B4(t,o,u,p,_){var x=p;if(!(o&1)&&!(o&2)&&p!==null)e:for(;;){if(p===null)return;var E=p.tag;if(E===3||E===4){var s=p.stateNode.containerInfo;if(s===_||s.nodeType===8&&s.parentNode===_)break;if(E===4)for(E=p.return;E!==null;){var P=E.tag;if((P===3||P===4)&&(P=E.stateNode.containerInfo,P===_||P.nodeType===8&&P.parentNode===_))return;E=E.return}for(;s!==null;){if(E=ql(s),E===null)return;if(P=E.tag,P===5||P===6){p=x=E;continue e}s=s.parentNode}}p=p.return}x_(function(){var R=x,U=vp(u),V=[];e:{var q=X_.get(t);if(q!==void 0){var ve=Sp,we=t;switch(t){case"keypress":if(k3(u)===0)break e;case"keydown":case"keyup":ve=kb;break;case"focusin":we="focus",ve=I4;break;case"focusout":we="blur",ve=I4;break;case"beforeblur":case"afterblur":ve=I4;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ve=r9;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ve=vb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ve=Db;break;case Z_:case q_:case W_:ve=bb;break;case H_:ve=Fb;break;case"scroll":ve=gb;break;case"wheel":ve=Ob;break;case"copy":case"cut":case"paste":ve=Eb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ve=o9}var xe=(o&4)!==0,Ie=!xe&&t==="scroll",te=xe?q!==null?q+"Capture":null:q;xe=[];for(var ne=R,se;ne!==null;){se=ne;var Se=se.stateNode;if(se.tag===5&&Se!==null&&(se=Se,te!==null&&(Se=l2(ne,te),Se!=null&&xe.push(m2(ne,Se,se)))),Ie)break;ne=ne.return}0<xe.length&&(q=new ve(q,we,null,u,U),V.push({event:q,listeners:xe}))}}if(!(o&7)){e:{if(q=t==="mouseover"||t==="pointerover",ve=t==="mouseout"||t==="pointerout",q&&u!==_6&&(we=u.relatedTarget||u.fromElement)&&(ql(we)||we[Xs]))break e;if((ve||q)&&(q=U.window===U?U:(q=U.ownerDocument)?q.defaultView||q.parentWindow:window,ve?(we=u.relatedTarget||u.toElement,ve=R,we=we?ql(we):null,we!==null&&(Ie=s1(we),we!==Ie||we.tag!==5&&we.tag!==6)&&(we=null)):(ve=null,we=R),ve!==we)){if(xe=r9,Se="onMouseLeave",te="onMouseEnter",ne="mouse",(t==="pointerout"||t==="pointerover")&&(xe=o9,Se="onPointerLeave",te="onPointerEnter",ne="pointer"),Ie=ve==null?q:yc(ve),se=we==null?q:yc(we),q=new xe(Se,ne+"leave",ve,u,U),q.target=Ie,q.relatedTarget=se,Se=null,ql(U)===R&&(xe=new xe(te,ne+"enter",we,u,U),xe.target=se,xe.relatedTarget=Ie,Se=xe),Ie=Se,ve&&we)t:{for(xe=ve,te=we,ne=0,se=xe;se;se=sc(se))ne++;for(se=0,Se=te;Se;Se=sc(Se))se++;for(;0<ne-se;)xe=sc(xe),ne--;for(;0<se-ne;)te=sc(te),se--;for(;ne--;){if(xe===te||te!==null&&xe===te.alternate)break t;xe=sc(xe),te=sc(te)}xe=null}else xe=null;ve!==null&&_9(V,q,ve,xe,!1),we!==null&&Ie!==null&&_9(V,Ie,we,xe,!0)}}e:{if(q=R?yc(R):window,ve=q.nodeName&&q.nodeName.toLowerCase(),ve==="select"||ve==="input"&&q.type==="file")var Be=Zb;else if(l9(q))if(N_)Be=Xb;else{Be=Wb;var ye=qb}else(ve=q.nodeName)&&ve.toLowerCase()==="input"&&(q.type==="checkbox"||q.type==="radio")&&(Be=Hb);if(Be&&(Be=Be(t,R))){U_(V,Be,u,U);break e}ye&&ye(t,q,R),t==="focusout"&&(ye=q._wrapperState)&&ye.controlled&&q.type==="number"&&h6(q,"number",q.value)}switch(ye=R?yc(R):window,t){case"focusin":(l9(ye)||ye.contentEditable==="true")&&(_c=ye,T6=R,Q0=null);break;case"focusout":Q0=T6=_c=null;break;case"mousedown":E6=!0;break;case"contextmenu":case"mouseup":case"dragend":E6=!1,p9(V,u,U);break;case"selectionchange":if(Jb)break;case"keydown":case"keyup":p9(V,u,U)}var Ye;if(Cp)e:{switch(t){case"compositionstart":var lt="onCompositionStart";break e;case"compositionend":lt="onCompositionEnd";break e;case"compositionupdate":lt="onCompositionUpdate";break e}lt=void 0}else mc?B_(t,u)&&(lt="onCompositionEnd"):t==="keydown"&&u.keyCode===229&&(lt="onCompositionStart");lt&&(F_&&u.locale!=="ko"&&(mc||lt!=="onCompositionStart"?lt==="onCompositionEnd"&&mc&&(Ye=R_()):(Na=U,Ep="value"in Na?Na.value:Na.textContent,mc=!0)),ye=X3(R,lt),0<ye.length&&(lt=new i9(lt,t,null,u,U),V.push({event:lt,listeners:ye}),Ye?lt.data=Ye:(Ye=O_(u),Ye!==null&&(lt.data=Ye)))),(Ye=Nb?jb(t,u):Vb(t,u))&&(R=X3(R,"onBeforeInput"),0<R.length&&(U=new i9("onBeforeInput","beforeinput",null,u,U),V.push({event:U,listeners:R}),U.data=Ye))}K_(V,o)})}function m2(t,o,u){return{instance:t,listener:o,currentTarget:u}}function X3(t,o){for(var u=o+"Capture",p=[];t!==null;){var _=t,x=_.stateNode;_.tag===5&&x!==null&&(_=x,x=l2(t,u),x!=null&&p.unshift(m2(t,x,_)),x=l2(t,o),x!=null&&p.push(m2(t,x,_))),t=t.return}return p}function sc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function _9(t,o,u,p,_){for(var x=o._reactName,E=[];u!==null&&u!==p;){var s=u,P=s.alternate,R=s.stateNode;if(P!==null&&P===p)break;s.tag===5&&R!==null&&(s=R,_?(P=l2(u,x),P!=null&&E.unshift(m2(u,P,s))):_||(P=l2(u,x),P!=null&&E.push(m2(u,P,s)))),u=u.return}E.length!==0&&t.push({event:o,listeners:E})}var nT=/\r\n?/g,rT=/\u0000|\uFFFD/g;function g9(t){return(typeof t=="string"?t:""+t).replace(nT,`
`).replace(rT,"")}function _3(t,o,u){if(o=g9(o),g9(t)!==o&&u)throw Error(ut(425))}function K3(){}var S6=null,M6=null;function C6(t,o){return t==="textarea"||t==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var P6=typeof setTimeout=="function"?setTimeout:void 0,iT=typeof clearTimeout=="function"?clearTimeout:void 0,y9=typeof Promise=="function"?Promise:void 0,oT=typeof queueMicrotask=="function"?queueMicrotask:typeof y9<"u"?function(t){return y9.resolve(null).then(t).catch(sT)}:P6;function sT(t){setTimeout(function(){throw t})}function O4(t,o){var u=o,p=0;do{var _=u.nextSibling;if(t.removeChild(u),_&&_.nodeType===8)if(u=_.data,u==="/$"){if(p===0){t.removeChild(_),h2(o);return}p--}else u!=="$"&&u!=="$?"&&u!=="$!"||p++;u=_}while(u);h2(o)}function Za(t){for(;t!=null;t=t.nextSibling){var o=t.nodeType;if(o===1||o===3)break;if(o===8){if(o=t.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return t}function v9(t){t=t.previousSibling;for(var o=0;t;){if(t.nodeType===8){var u=t.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return t;o--}else u==="/$"&&o++}t=t.previousSibling}return null}var Yc=Math.random().toString(36).slice(2),ms="__reactFiber$"+Yc,_2="__reactProps$"+Yc,Xs="__reactContainer$"+Yc,A6="__reactEvents$"+Yc,aT="__reactListeners$"+Yc,lT="__reactHandles$"+Yc;function ql(t){var o=t[ms];if(o)return o;for(var u=t.parentNode;u;){if(o=u[Xs]||u[ms]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(t=v9(t);t!==null;){if(u=t[ms])return u;t=v9(t)}return o}t=u,u=t.parentNode}return null}function k2(t){return t=t[ms]||t[Xs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function yc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ut(33))}function P5(t){return t[_2]||null}var I6=[],vc=-1;function nl(t){return{current:t}}function qn(t){0>vc||(t.current=I6[vc],I6[vc]=null,vc--)}function Un(t,o){vc++,I6[vc]=t.current,t.current=o}var Ja={},oi=nl(Ja),Ai=nl(!1),Ql=Ja;function Oc(t,o){var u=t.type.contextTypes;if(!u)return Ja;var p=t.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===o)return p.__reactInternalMemoizedMaskedChildContext;var _={},x;for(x in u)_[x]=o[x];return p&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=_),_}function Ii(t){return t=t.childContextTypes,t!=null}function Y3(){qn(Ai),qn(oi)}function x9(t,o,u){if(oi.current!==Ja)throw Error(ut(168));Un(oi,o),Un(Ai,u)}function J_(t,o,u){var p=t.stateNode;if(o=o.childContextTypes,typeof p.getChildContext!="function")return u;p=p.getChildContext();for(var _ in p)if(!(_ in o))throw Error(ut(108,qw(t)||"Unknown",_));return cr({},u,p)}function J3(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ja,Ql=oi.current,Un(oi,t),Un(Ai,Ai.current),!0}function w9(t,o,u){var p=t.stateNode;if(!p)throw Error(ut(169));u?(t=J_(t,o,Ql),p.__reactInternalMemoizedMergedChildContext=t,qn(Ai),qn(oi),Un(oi,t)):qn(Ai),Un(Ai,u)}var Vs=null,A5=!1,U4=!1;function Q_(t){Vs===null?Vs=[t]:Vs.push(t)}function cT(t){A5=!0,Q_(t)}function rl(){if(!U4&&Vs!==null){U4=!0;var t=0,o=Ln;try{var u=Vs;for(Ln=1;t<u.length;t++){var p=u[t];do p=p(!0);while(p!==null)}Vs=null,A5=!1}catch(_){throw Vs!==null&&(Vs=Vs.slice(t+1)),E_(xp,rl),_}finally{Ln=o,U4=!1}}return null}var xc=[],wc=0,Q3=null,e5=0,po=[],fo=0,e1=null,$s=1,Zs="";function $l(t,o){xc[wc++]=e5,xc[wc++]=Q3,Q3=t,e5=o}function eg(t,o,u){po[fo++]=$s,po[fo++]=Zs,po[fo++]=e1,e1=t;var p=$s;t=Zs;var _=32-Xo(p)-1;p&=~(1<<_),u+=1;var x=32-Xo(o)+_;if(30<x){var E=_-_%5;x=(p&(1<<E)-1).toString(32),p>>=E,_-=E,$s=1<<32-Xo(o)+_|u<<_|p,Zs=x+t}else $s=1<<x|u<<_|p,Zs=t}function Ap(t){t.return!==null&&($l(t,1),eg(t,1,0))}function Ip(t){for(;t===Q3;)Q3=xc[--wc],xc[wc]=null,e5=xc[--wc],xc[wc]=null;for(;t===e1;)e1=po[--fo],po[fo]=null,Zs=po[--fo],po[fo]=null,$s=po[--fo],po[fo]=null}var Zi=null,$i=null,Xn=!1,Wo=null;function tg(t,o){var u=mo(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=t,o=t.deletions,o===null?(t.deletions=[u],t.flags|=16):o.push(u)}function b9(t,o){switch(t.tag){case 5:var u=t.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(t.stateNode=o,Zi=t,$i=Za(o.firstChild),!0):!1;case 6:return o=t.pendingProps===""||o.nodeType!==3?null:o,o!==null?(t.stateNode=o,Zi=t,$i=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=e1!==null?{id:$s,overflow:Zs}:null,t.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=mo(18,null,null,0),u.stateNode=o,u.return=t,t.child=u,Zi=t,$i=null,!0):!1;default:return!1}}function k6(t){return(t.mode&1)!==0&&(t.flags&128)===0}function z6(t){if(Xn){var o=$i;if(o){var u=o;if(!b9(t,o)){if(k6(t))throw Error(ut(418));o=Za(u.nextSibling);var p=Zi;o&&b9(t,o)?tg(p,u):(t.flags=t.flags&-4097|2,Xn=!1,Zi=t)}}else{if(k6(t))throw Error(ut(418));t.flags=t.flags&-4097|2,Xn=!1,Zi=t}}}function T9(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Zi=t}function g3(t){if(t!==Zi)return!1;if(!Xn)return T9(t),Xn=!0,!1;var o;if((o=t.tag!==3)&&!(o=t.tag!==5)&&(o=t.type,o=o!=="head"&&o!=="body"&&!C6(t.type,t.memoizedProps)),o&&(o=$i)){if(k6(t))throw ng(),Error(ut(418));for(;o;)tg(t,o),o=Za(o.nextSibling)}if(T9(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ut(317));e:{for(t=t.nextSibling,o=0;t;){if(t.nodeType===8){var u=t.data;if(u==="/$"){if(o===0){$i=Za(t.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}t=t.nextSibling}$i=null}}else $i=Zi?Za(t.stateNode.nextSibling):null;return!0}function ng(){for(var t=$i;t;)t=Za(t.nextSibling)}function Uc(){$i=Zi=null,Xn=!1}function kp(t){Wo===null?Wo=[t]:Wo.push(t)}var uT=Js.ReactCurrentBatchConfig;function $o(t,o){if(t&&t.defaultProps){o=cr({},o),t=t.defaultProps;for(var u in t)o[u]===void 0&&(o[u]=t[u]);return o}return o}var t5=nl(null),n5=null,bc=null,zp=null;function Lp(){zp=bc=n5=null}function Dp(t){var o=t5.current;qn(t5),t._currentValue=o}function L6(t,o,u){for(;t!==null;){var p=t.alternate;if((t.childLanes&o)!==o?(t.childLanes|=o,p!==null&&(p.childLanes|=o)):p!==null&&(p.childLanes&o)!==o&&(p.childLanes|=o),t===u)break;t=t.return}}function zc(t,o){n5=t,zp=bc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&o&&(Pi=!0),t.firstContext=null)}function yo(t){var o=t._currentValue;if(zp!==t)if(t={context:t,memoizedValue:o,next:null},bc===null){if(n5===null)throw Error(ut(308));bc=t,n5.dependencies={lanes:0,firstContext:t}}else bc=bc.next=t;return o}var Wl=null;function Rp(t){Wl===null?Wl=[t]:Wl.push(t)}function rg(t,o,u,p){var _=o.interleaved;return _===null?(u.next=u,Rp(o)):(u.next=_.next,_.next=u),o.interleaved=u,Ks(t,p)}function Ks(t,o){t.lanes|=o;var u=t.alternate;for(u!==null&&(u.lanes|=o),u=t,t=t.return;t!==null;)t.childLanes|=o,u=t.alternate,u!==null&&(u.childLanes|=o),u=t,t=t.return;return u.tag===3?u.stateNode:null}var Ba=!1;function Fp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ig(t,o){t=t.updateQueue,o.updateQueue===t&&(o.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function qs(t,o){return{eventTime:t,lane:o,tag:0,payload:null,callback:null,next:null}}function qa(t,o,u){var p=t.updateQueue;if(p===null)return null;if(p=p.shared,_n&2){var _=p.pending;return _===null?o.next=o:(o.next=_.next,_.next=o),p.pending=o,Ks(t,u)}return _=p.interleaved,_===null?(o.next=o,Rp(p)):(o.next=_.next,_.next=o),p.interleaved=o,Ks(t,u)}function z3(t,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var p=o.lanes;p&=t.pendingLanes,u|=p,o.lanes=u,wp(t,u)}}function E9(t,o){var u=t.updateQueue,p=t.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var _=null,x=null;if(u=u.firstBaseUpdate,u!==null){do{var E={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};x===null?_=x=E:x=x.next=E,u=u.next}while(u!==null);x===null?_=x=o:x=x.next=o}else _=x=o;u={baseState:p.baseState,firstBaseUpdate:_,lastBaseUpdate:x,shared:p.shared,effects:p.effects},t.updateQueue=u;return}t=u.lastBaseUpdate,t===null?u.firstBaseUpdate=o:t.next=o,u.lastBaseUpdate=o}function r5(t,o,u,p){var _=t.updateQueue;Ba=!1;var x=_.firstBaseUpdate,E=_.lastBaseUpdate,s=_.shared.pending;if(s!==null){_.shared.pending=null;var P=s,R=P.next;P.next=null,E===null?x=R:E.next=R,E=P;var U=t.alternate;U!==null&&(U=U.updateQueue,s=U.lastBaseUpdate,s!==E&&(s===null?U.firstBaseUpdate=R:s.next=R,U.lastBaseUpdate=P))}if(x!==null){var V=_.baseState;E=0,U=R=P=null,s=x;do{var q=s.lane,ve=s.eventTime;if((p&q)===q){U!==null&&(U=U.next={eventTime:ve,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var we=t,xe=s;switch(q=o,ve=u,xe.tag){case 1:if(we=xe.payload,typeof we=="function"){V=we.call(ve,V,q);break e}V=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=xe.payload,q=typeof we=="function"?we.call(ve,V,q):we,q==null)break e;V=cr({},V,q);break e;case 2:Ba=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,q=_.effects,q===null?_.effects=[s]:q.push(s))}else ve={eventTime:ve,lane:q,tag:s.tag,payload:s.payload,callback:s.callback,next:null},U===null?(R=U=ve,P=V):U=U.next=ve,E|=q;if(s=s.next,s===null){if(s=_.shared.pending,s===null)break;q=s,s=q.next,q.next=null,_.lastBaseUpdate=q,_.shared.pending=null}}while(1);if(U===null&&(P=V),_.baseState=P,_.firstBaseUpdate=R,_.lastBaseUpdate=U,o=_.shared.interleaved,o!==null){_=o;do E|=_.lane,_=_.next;while(_!==o)}else x===null&&(_.shared.lanes=0);n1|=E,t.lanes=E,t.memoizedState=V}}function S9(t,o,u){if(t=o.effects,o.effects=null,t!==null)for(o=0;o<t.length;o++){var p=t[o],_=p.callback;if(_!==null){if(p.callback=null,p=u,typeof _!="function")throw Error(ut(191,_));_.call(p)}}}var og=new r_.Component().refs;function D6(t,o,u,p){o=t.memoizedState,u=u(p,o),u=u==null?o:cr({},o,u),t.memoizedState=u,t.lanes===0&&(t.updateQueue.baseState=u)}var I5={isMounted:function(t){return(t=t._reactInternals)?s1(t)===t:!1},enqueueSetState:function(t,o,u){t=t._reactInternals;var p=hi(),_=Ha(t),x=qs(p,_);x.payload=o,u!=null&&(x.callback=u),o=qa(t,x,_),o!==null&&(Ko(o,t,_,p),z3(o,t,_))},enqueueReplaceState:function(t,o,u){t=t._reactInternals;var p=hi(),_=Ha(t),x=qs(p,_);x.tag=1,x.payload=o,u!=null&&(x.callback=u),o=qa(t,x,_),o!==null&&(Ko(o,t,_,p),z3(o,t,_))},enqueueForceUpdate:function(t,o){t=t._reactInternals;var u=hi(),p=Ha(t),_=qs(u,p);_.tag=2,o!=null&&(_.callback=o),o=qa(t,_,p),o!==null&&(Ko(o,t,p,u),z3(o,t,p))}};function M9(t,o,u,p,_,x,E){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(p,x,E):o.prototype&&o.prototype.isPureReactComponent?!p2(u,p)||!p2(_,x):!0}function sg(t,o,u){var p=!1,_=Ja,x=o.contextType;return typeof x=="object"&&x!==null?x=yo(x):(_=Ii(o)?Ql:oi.current,p=o.contextTypes,x=(p=p!=null)?Oc(t,_):Ja),o=new o(u,x),t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=I5,t.stateNode=o,o._reactInternals=t,p&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=_,t.__reactInternalMemoizedMaskedChildContext=x),o}function C9(t,o,u,p){t=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,p),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,p),o.state!==t&&I5.enqueueReplaceState(o,o.state,null)}function R6(t,o,u,p){var _=t.stateNode;_.props=u,_.state=t.memoizedState,_.refs=og,Fp(t);var x=o.contextType;typeof x=="object"&&x!==null?_.context=yo(x):(x=Ii(o)?Ql:oi.current,_.context=Oc(t,x)),_.state=t.memoizedState,x=o.getDerivedStateFromProps,typeof x=="function"&&(D6(t,o,x,u),_.state=t.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(o=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),o!==_.state&&I5.enqueueReplaceState(_,_.state,null),r5(t,u,_,p),_.state=t.memoizedState),typeof _.componentDidMount=="function"&&(t.flags|=4194308)}function D0(t,o,u){if(t=u.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(ut(309));var p=u.stateNode}if(!p)throw Error(ut(147,t));var _=p,x=""+t;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===x?o.ref:(o=function(E){var s=_.refs;s===og&&(s=_.refs={}),E===null?delete s[x]:s[x]=E},o._stringRef=x,o)}if(typeof t!="string")throw Error(ut(284));if(!u._owner)throw Error(ut(290,t))}return t}function y3(t,o){throw t=Object.prototype.toString.call(o),Error(ut(31,t==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":t))}function P9(t){var o=t._init;return o(t._payload)}function ag(t){function o(te,ne){if(t){var se=te.deletions;se===null?(te.deletions=[ne],te.flags|=16):se.push(ne)}}function u(te,ne){if(!t)return null;for(;ne!==null;)o(te,ne),ne=ne.sibling;return null}function p(te,ne){for(te=new Map;ne!==null;)ne.key!==null?te.set(ne.key,ne):te.set(ne.index,ne),ne=ne.sibling;return te}function _(te,ne){return te=Xa(te,ne),te.index=0,te.sibling=null,te}function x(te,ne,se){return te.index=se,t?(se=te.alternate,se!==null?(se=se.index,se<ne?(te.flags|=2,ne):se):(te.flags|=2,ne)):(te.flags|=1048576,ne)}function E(te){return t&&te.alternate===null&&(te.flags|=2),te}function s(te,ne,se,Se){return ne===null||ne.tag!==6?(ne=q4(se,te.mode,Se),ne.return=te,ne):(ne=_(ne,se),ne.return=te,ne)}function P(te,ne,se,Se){var Be=se.type;return Be===fc?U(te,ne,se.props.children,Se,se.key):ne!==null&&(ne.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===Fa&&P9(Be)===ne.type)?(Se=_(ne,se.props),Se.ref=D0(te,ne,se),Se.return=te,Se):(Se=O3(se.type,se.key,se.props,null,te.mode,Se),Se.ref=D0(te,ne,se),Se.return=te,Se)}function R(te,ne,se,Se){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==se.containerInfo||ne.stateNode.implementation!==se.implementation?(ne=W4(se,te.mode,Se),ne.return=te,ne):(ne=_(ne,se.children||[]),ne.return=te,ne)}function U(te,ne,se,Se,Be){return ne===null||ne.tag!==7?(ne=Jl(se,te.mode,Se,Be),ne.return=te,ne):(ne=_(ne,se),ne.return=te,ne)}function V(te,ne,se){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return ne=q4(""+ne,te.mode,se),ne.return=te,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case a3:return se=O3(ne.type,ne.key,ne.props,null,te.mode,se),se.ref=D0(te,null,ne),se.return=te,se;case pc:return ne=W4(ne,te.mode,se),ne.return=te,ne;case Fa:var Se=ne._init;return V(te,Se(ne._payload),se)}if(Z0(ne)||A0(ne))return ne=Jl(ne,te.mode,se,null),ne.return=te,ne;y3(te,ne)}return null}function q(te,ne,se,Se){var Be=ne!==null?ne.key:null;if(typeof se=="string"&&se!==""||typeof se=="number")return Be!==null?null:s(te,ne,""+se,Se);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case a3:return se.key===Be?P(te,ne,se,Se):null;case pc:return se.key===Be?R(te,ne,se,Se):null;case Fa:return Be=se._init,q(te,ne,Be(se._payload),Se)}if(Z0(se)||A0(se))return Be!==null?null:U(te,ne,se,Se,null);y3(te,se)}return null}function ve(te,ne,se,Se,Be){if(typeof Se=="string"&&Se!==""||typeof Se=="number")return te=te.get(se)||null,s(ne,te,""+Se,Be);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case a3:return te=te.get(Se.key===null?se:Se.key)||null,P(ne,te,Se,Be);case pc:return te=te.get(Se.key===null?se:Se.key)||null,R(ne,te,Se,Be);case Fa:var ye=Se._init;return ve(te,ne,se,ye(Se._payload),Be)}if(Z0(Se)||A0(Se))return te=te.get(se)||null,U(ne,te,Se,Be,null);y3(ne,Se)}return null}function we(te,ne,se,Se){for(var Be=null,ye=null,Ye=ne,lt=ne=0,Me=null;Ye!==null&&lt<se.length;lt++){Ye.index>lt?(Me=Ye,Ye=null):Me=Ye.sibling;var Mt=q(te,Ye,se[lt],Se);if(Mt===null){Ye===null&&(Ye=Me);break}t&&Ye&&Mt.alternate===null&&o(te,Ye),ne=x(Mt,ne,lt),ye===null?Be=Mt:ye.sibling=Mt,ye=Mt,Ye=Me}if(lt===se.length)return u(te,Ye),Xn&&$l(te,lt),Be;if(Ye===null){for(;lt<se.length;lt++)Ye=V(te,se[lt],Se),Ye!==null&&(ne=x(Ye,ne,lt),ye===null?Be=Ye:ye.sibling=Ye,ye=Ye);return Xn&&$l(te,lt),Be}for(Ye=p(te,Ye);lt<se.length;lt++)Me=ve(Ye,te,lt,se[lt],Se),Me!==null&&(t&&Me.alternate!==null&&Ye.delete(Me.key===null?lt:Me.key),ne=x(Me,ne,lt),ye===null?Be=Me:ye.sibling=Me,ye=Me);return t&&Ye.forEach(function(Ut){return o(te,Ut)}),Xn&&$l(te,lt),Be}function xe(te,ne,se,Se){var Be=A0(se);if(typeof Be!="function")throw Error(ut(150));if(se=Be.call(se),se==null)throw Error(ut(151));for(var ye=Be=null,Ye=ne,lt=ne=0,Me=null,Mt=se.next();Ye!==null&&!Mt.done;lt++,Mt=se.next()){Ye.index>lt?(Me=Ye,Ye=null):Me=Ye.sibling;var Ut=q(te,Ye,Mt.value,Se);if(Ut===null){Ye===null&&(Ye=Me);break}t&&Ye&&Ut.alternate===null&&o(te,Ye),ne=x(Ut,ne,lt),ye===null?Be=Ut:ye.sibling=Ut,ye=Ut,Ye=Me}if(Mt.done)return u(te,Ye),Xn&&$l(te,lt),Be;if(Ye===null){for(;!Mt.done;lt++,Mt=se.next())Mt=V(te,Mt.value,Se),Mt!==null&&(ne=x(Mt,ne,lt),ye===null?Be=Mt:ye.sibling=Mt,ye=Mt);return Xn&&$l(te,lt),Be}for(Ye=p(te,Ye);!Mt.done;lt++,Mt=se.next())Mt=ve(Ye,te,lt,Mt.value,Se),Mt!==null&&(t&&Mt.alternate!==null&&Ye.delete(Mt.key===null?lt:Mt.key),ne=x(Mt,ne,lt),ye===null?Be=Mt:ye.sibling=Mt,ye=Mt);return t&&Ye.forEach(function(bt){return o(te,bt)}),Xn&&$l(te,lt),Be}function Ie(te,ne,se,Se){if(typeof se=="object"&&se!==null&&se.type===fc&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case a3:e:{for(var Be=se.key,ye=ne;ye!==null;){if(ye.key===Be){if(Be=se.type,Be===fc){if(ye.tag===7){u(te,ye.sibling),ne=_(ye,se.props.children),ne.return=te,te=ne;break e}}else if(ye.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===Fa&&P9(Be)===ye.type){u(te,ye.sibling),ne=_(ye,se.props),ne.ref=D0(te,ye,se),ne.return=te,te=ne;break e}u(te,ye);break}else o(te,ye);ye=ye.sibling}se.type===fc?(ne=Jl(se.props.children,te.mode,Se,se.key),ne.return=te,te=ne):(Se=O3(se.type,se.key,se.props,null,te.mode,Se),Se.ref=D0(te,ne,se),Se.return=te,te=Se)}return E(te);case pc:e:{for(ye=se.key;ne!==null;){if(ne.key===ye)if(ne.tag===4&&ne.stateNode.containerInfo===se.containerInfo&&ne.stateNode.implementation===se.implementation){u(te,ne.sibling),ne=_(ne,se.children||[]),ne.return=te,te=ne;break e}else{u(te,ne);break}else o(te,ne);ne=ne.sibling}ne=W4(se,te.mode,Se),ne.return=te,te=ne}return E(te);case Fa:return ye=se._init,Ie(te,ne,ye(se._payload),Se)}if(Z0(se))return we(te,ne,se,Se);if(A0(se))return xe(te,ne,se,Se);y3(te,se)}return typeof se=="string"&&se!==""||typeof se=="number"?(se=""+se,ne!==null&&ne.tag===6?(u(te,ne.sibling),ne=_(ne,se),ne.return=te,te=ne):(u(te,ne),ne=q4(se,te.mode,Se),ne.return=te,te=ne),E(te)):u(te,ne)}return Ie}var Nc=ag(!0),lg=ag(!1),z2={},gs=nl(z2),g2=nl(z2),y2=nl(z2);function Hl(t){if(t===z2)throw Error(ut(174));return t}function Bp(t,o){switch(Un(y2,o),Un(g2,t),Un(gs,z2),t=o.nodeType,t){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:p6(null,"");break;default:t=t===8?o.parentNode:o,o=t.namespaceURI||null,t=t.tagName,o=p6(o,t)}qn(gs),Un(gs,o)}function jc(){qn(gs),qn(g2),qn(y2)}function cg(t){Hl(y2.current);var o=Hl(gs.current),u=p6(o,t.type);o!==u&&(Un(g2,t),Un(gs,u))}function Op(t){g2.current===t&&(qn(gs),qn(g2))}var ar=nl(0);function i5(t){for(var o=t;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break;for(;o.sibling===null;){if(o.return===null||o.return===t)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var N4=[];function Up(){for(var t=0;t<N4.length;t++)N4[t]._workInProgressVersionPrimary=null;N4.length=0}var L3=Js.ReactCurrentDispatcher,j4=Js.ReactCurrentBatchConfig,t1=0,lr=null,Ar=null,Fr=null,o5=!1,e2=!1,v2=0,hT=0;function ti(){throw Error(ut(321))}function Np(t,o){if(o===null)return!1;for(var u=0;u<o.length&&u<t.length;u++)if(!Yo(t[u],o[u]))return!1;return!0}function jp(t,o,u,p,_,x){if(t1=x,lr=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,L3.current=t===null||t.memoizedState===null?mT:_T,t=u(p,_),e2){x=0;do{if(e2=!1,v2=0,25<=x)throw Error(ut(301));x+=1,Fr=Ar=null,o.updateQueue=null,L3.current=gT,t=u(p,_)}while(e2)}if(L3.current=s5,o=Ar!==null&&Ar.next!==null,t1=0,Fr=Ar=lr=null,o5=!1,o)throw Error(ut(300));return t}function Vp(){var t=v2!==0;return v2=0,t}function fs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fr===null?lr.memoizedState=Fr=t:Fr=Fr.next=t,Fr}function vo(){if(Ar===null){var t=lr.alternate;t=t!==null?t.memoizedState:null}else t=Ar.next;var o=Fr===null?lr.memoizedState:Fr.next;if(o!==null)Fr=o,Ar=t;else{if(t===null)throw Error(ut(310));Ar=t,t={memoizedState:Ar.memoizedState,baseState:Ar.baseState,baseQueue:Ar.baseQueue,queue:Ar.queue,next:null},Fr===null?lr.memoizedState=Fr=t:Fr=Fr.next=t}return Fr}function x2(t,o){return typeof o=="function"?o(t):o}function V4(t){var o=vo(),u=o.queue;if(u===null)throw Error(ut(311));u.lastRenderedReducer=t;var p=Ar,_=p.baseQueue,x=u.pending;if(x!==null){if(_!==null){var E=_.next;_.next=x.next,x.next=E}p.baseQueue=_=x,u.pending=null}if(_!==null){x=_.next,p=p.baseState;var s=E=null,P=null,R=x;do{var U=R.lane;if((t1&U)===U)P!==null&&(P=P.next={lane:0,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null}),p=R.hasEagerState?R.eagerState:t(p,R.action);else{var V={lane:U,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null};P===null?(s=P=V,E=p):P=P.next=V,lr.lanes|=U,n1|=U}R=R.next}while(R!==null&&R!==x);P===null?E=p:P.next=s,Yo(p,o.memoizedState)||(Pi=!0),o.memoizedState=p,o.baseState=E,o.baseQueue=P,u.lastRenderedState=p}if(t=u.interleaved,t!==null){_=t;do x=_.lane,lr.lanes|=x,n1|=x,_=_.next;while(_!==t)}else _===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function G4(t){var o=vo(),u=o.queue;if(u===null)throw Error(ut(311));u.lastRenderedReducer=t;var p=u.dispatch,_=u.pending,x=o.memoizedState;if(_!==null){u.pending=null;var E=_=_.next;do x=t(x,E.action),E=E.next;while(E!==_);Yo(x,o.memoizedState)||(Pi=!0),o.memoizedState=x,o.baseQueue===null&&(o.baseState=x),u.lastRenderedState=x}return[x,p]}function ug(){}function hg(t,o){var u=lr,p=vo(),_=o(),x=!Yo(p.memoizedState,_);if(x&&(p.memoizedState=_,Pi=!0),p=p.queue,Gp(fg.bind(null,u,p,t),[t]),p.getSnapshot!==o||x||Fr!==null&&Fr.memoizedState.tag&1){if(u.flags|=2048,w2(9,pg.bind(null,u,p,_,o),void 0,null),Br===null)throw Error(ut(349));t1&30||dg(u,o,_)}return _}function dg(t,o,u){t.flags|=16384,t={getSnapshot:o,value:u},o=lr.updateQueue,o===null?(o={lastEffect:null,stores:null},lr.updateQueue=o,o.stores=[t]):(u=o.stores,u===null?o.stores=[t]:u.push(t))}function pg(t,o,u,p){o.value=u,o.getSnapshot=p,mg(o)&&_g(t)}function fg(t,o,u){return u(function(){mg(o)&&_g(t)})}function mg(t){var o=t.getSnapshot;t=t.value;try{var u=o();return!Yo(t,u)}catch{return!0}}function _g(t){var o=Ks(t,1);o!==null&&Ko(o,t,1,-1)}function A9(t){var o=fs();return typeof t=="function"&&(t=t()),o.memoizedState=o.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:x2,lastRenderedState:t},o.queue=t,t=t.dispatch=fT.bind(null,lr,t),[o.memoizedState,t]}function w2(t,o,u,p){return t={tag:t,create:o,destroy:u,deps:p,next:null},o=lr.updateQueue,o===null?(o={lastEffect:null,stores:null},lr.updateQueue=o,o.lastEffect=t.next=t):(u=o.lastEffect,u===null?o.lastEffect=t.next=t:(p=u.next,u.next=t,t.next=p,o.lastEffect=t)),t}function gg(){return vo().memoizedState}function D3(t,o,u,p){var _=fs();lr.flags|=t,_.memoizedState=w2(1|o,u,void 0,p===void 0?null:p)}function k5(t,o,u,p){var _=vo();p=p===void 0?null:p;var x=void 0;if(Ar!==null){var E=Ar.memoizedState;if(x=E.destroy,p!==null&&Np(p,E.deps)){_.memoizedState=w2(o,u,x,p);return}}lr.flags|=t,_.memoizedState=w2(1|o,u,x,p)}function I9(t,o){return D3(8390656,8,t,o)}function Gp(t,o){return k5(2048,8,t,o)}function yg(t,o){return k5(4,2,t,o)}function vg(t,o){return k5(4,4,t,o)}function xg(t,o){if(typeof o=="function")return t=t(),o(t),function(){o(null)};if(o!=null)return t=t(),o.current=t,function(){o.current=null}}function wg(t,o,u){return u=u!=null?u.concat([t]):null,k5(4,4,xg.bind(null,o,t),u)}function $p(){}function bg(t,o){var u=vo();o=o===void 0?null:o;var p=u.memoizedState;return p!==null&&o!==null&&Np(o,p[1])?p[0]:(u.memoizedState=[t,o],t)}function Tg(t,o){var u=vo();o=o===void 0?null:o;var p=u.memoizedState;return p!==null&&o!==null&&Np(o,p[1])?p[0]:(t=t(),u.memoizedState=[t,o],t)}function Eg(t,o,u){return t1&21?(Yo(u,o)||(u=C_(),lr.lanes|=u,n1|=u,t.baseState=!0),o):(t.baseState&&(t.baseState=!1,Pi=!0),t.memoizedState=u)}function dT(t,o){var u=Ln;Ln=u!==0&&4>u?u:4,t(!0);var p=j4.transition;j4.transition={};try{t(!1),o()}finally{Ln=u,j4.transition=p}}function Sg(){return vo().memoizedState}function pT(t,o,u){var p=Ha(t);if(u={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null},Mg(t))Cg(o,u);else if(u=rg(t,o,u,p),u!==null){var _=hi();Ko(u,t,p,_),Pg(u,o,p)}}function fT(t,o,u){var p=Ha(t),_={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null};if(Mg(t))Cg(o,_);else{var x=t.alternate;if(t.lanes===0&&(x===null||x.lanes===0)&&(x=o.lastRenderedReducer,x!==null))try{var E=o.lastRenderedState,s=x(E,u);if(_.hasEagerState=!0,_.eagerState=s,Yo(s,E)){var P=o.interleaved;P===null?(_.next=_,Rp(o)):(_.next=P.next,P.next=_),o.interleaved=_;return}}catch{}finally{}u=rg(t,o,_,p),u!==null&&(_=hi(),Ko(u,t,p,_),Pg(u,o,p))}}function Mg(t){var o=t.alternate;return t===lr||o!==null&&o===lr}function Cg(t,o){e2=o5=!0;var u=t.pending;u===null?o.next=o:(o.next=u.next,u.next=o),t.pending=o}function Pg(t,o,u){if(u&4194240){var p=o.lanes;p&=t.pendingLanes,u|=p,o.lanes=u,wp(t,u)}}var s5={readContext:yo,useCallback:ti,useContext:ti,useEffect:ti,useImperativeHandle:ti,useInsertionEffect:ti,useLayoutEffect:ti,useMemo:ti,useReducer:ti,useRef:ti,useState:ti,useDebugValue:ti,useDeferredValue:ti,useTransition:ti,useMutableSource:ti,useSyncExternalStore:ti,useId:ti,unstable_isNewReconciler:!1},mT={readContext:yo,useCallback:function(t,o){return fs().memoizedState=[t,o===void 0?null:o],t},useContext:yo,useEffect:I9,useImperativeHandle:function(t,o,u){return u=u!=null?u.concat([t]):null,D3(4194308,4,xg.bind(null,o,t),u)},useLayoutEffect:function(t,o){return D3(4194308,4,t,o)},useInsertionEffect:function(t,o){return D3(4,2,t,o)},useMemo:function(t,o){var u=fs();return o=o===void 0?null:o,t=t(),u.memoizedState=[t,o],t},useReducer:function(t,o,u){var p=fs();return o=u!==void 0?u(o):o,p.memoizedState=p.baseState=o,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:o},p.queue=t,t=t.dispatch=pT.bind(null,lr,t),[p.memoizedState,t]},useRef:function(t){var o=fs();return t={current:t},o.memoizedState=t},useState:A9,useDebugValue:$p,useDeferredValue:function(t){return fs().memoizedState=t},useTransition:function(){var t=A9(!1),o=t[0];return t=dT.bind(null,t[1]),fs().memoizedState=t,[o,t]},useMutableSource:function(){},useSyncExternalStore:function(t,o,u){var p=lr,_=fs();if(Xn){if(u===void 0)throw Error(ut(407));u=u()}else{if(u=o(),Br===null)throw Error(ut(349));t1&30||dg(p,o,u)}_.memoizedState=u;var x={value:u,getSnapshot:o};return _.queue=x,I9(fg.bind(null,p,x,t),[t]),p.flags|=2048,w2(9,pg.bind(null,p,x,u,o),void 0,null),u},useId:function(){var t=fs(),o=Br.identifierPrefix;if(Xn){var u=Zs,p=$s;u=(p&~(1<<32-Xo(p)-1)).toString(32)+u,o=":"+o+"R"+u,u=v2++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=hT++,o=":"+o+"r"+u.toString(32)+":";return t.memoizedState=o},unstable_isNewReconciler:!1},_T={readContext:yo,useCallback:bg,useContext:yo,useEffect:Gp,useImperativeHandle:wg,useInsertionEffect:yg,useLayoutEffect:vg,useMemo:Tg,useReducer:V4,useRef:gg,useState:function(){return V4(x2)},useDebugValue:$p,useDeferredValue:function(t){var o=vo();return Eg(o,Ar.memoizedState,t)},useTransition:function(){var t=V4(x2)[0],o=vo().memoizedState;return[t,o]},useMutableSource:ug,useSyncExternalStore:hg,useId:Sg,unstable_isNewReconciler:!1},gT={readContext:yo,useCallback:bg,useContext:yo,useEffect:Gp,useImperativeHandle:wg,useInsertionEffect:yg,useLayoutEffect:vg,useMemo:Tg,useReducer:G4,useRef:gg,useState:function(){return G4(x2)},useDebugValue:$p,useDeferredValue:function(t){var o=vo();return Ar===null?o.memoizedState=t:Eg(o,Ar.memoizedState,t)},useTransition:function(){var t=G4(x2)[0],o=vo().memoizedState;return[t,o]},useMutableSource:ug,useSyncExternalStore:hg,useId:Sg,unstable_isNewReconciler:!1};function Vc(t,o){try{var u="",p=o;do u+=Zw(p),p=p.return;while(p);var _=u}catch(x){_=`
Error generating stack: `+x.message+`
`+x.stack}return{value:t,source:o,stack:_,digest:null}}function $4(t,o,u){return{value:t,source:null,stack:u??null,digest:o??null}}function F6(t,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var yT=typeof WeakMap=="function"?WeakMap:Map;function Ag(t,o,u){u=qs(-1,u),u.tag=3,u.payload={element:null};var p=o.value;return u.callback=function(){l5||(l5=!0,q6=p),F6(t,o)},u}function Ig(t,o,u){u=qs(-1,u),u.tag=3;var p=t.type.getDerivedStateFromError;if(typeof p=="function"){var _=o.value;u.payload=function(){return p(_)},u.callback=function(){F6(t,o)}}var x=t.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(u.callback=function(){F6(t,o),typeof p!="function"&&(Wa===null?Wa=new Set([this]):Wa.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})}),u}function k9(t,o,u){var p=t.pingCache;if(p===null){p=t.pingCache=new yT;var _=new Set;p.set(o,_)}else _=p.get(o),_===void 0&&(_=new Set,p.set(o,_));_.has(u)||(_.add(u),t=zT.bind(null,t,o,u),o.then(t,t))}function z9(t){do{var o;if((o=t.tag===13)&&(o=t.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return t;t=t.return}while(t!==null);return null}function L9(t,o,u,p,_){return t.mode&1?(t.flags|=65536,t.lanes=_,t):(t===o?t.flags|=65536:(t.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=qs(-1,1),o.tag=2,qa(u,o,1))),u.lanes|=1),t)}var vT=Js.ReactCurrentOwner,Pi=!1;function ci(t,o,u,p){o.child=t===null?lg(o,null,u,p):Nc(o,t.child,u,p)}function D9(t,o,u,p,_){u=u.render;var x=o.ref;return zc(o,_),p=jp(t,o,u,p,x,_),u=Vp(),t!==null&&!Pi?(o.updateQueue=t.updateQueue,o.flags&=-2053,t.lanes&=~_,Ys(t,o,_)):(Xn&&u&&Ap(o),o.flags|=1,ci(t,o,p,_),o.child)}function R9(t,o,u,p,_){if(t===null){var x=u.type;return typeof x=="function"&&!Jp(x)&&x.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=x,kg(t,o,x,p,_)):(t=O3(u.type,null,p,o,o.mode,_),t.ref=o.ref,t.return=o,o.child=t)}if(x=t.child,!(t.lanes&_)){var E=x.memoizedProps;if(u=u.compare,u=u!==null?u:p2,u(E,p)&&t.ref===o.ref)return Ys(t,o,_)}return o.flags|=1,t=Xa(x,p),t.ref=o.ref,t.return=o,o.child=t}function kg(t,o,u,p,_){if(t!==null){var x=t.memoizedProps;if(p2(x,p)&&t.ref===o.ref)if(Pi=!1,o.pendingProps=p=x,(t.lanes&_)!==0)t.flags&131072&&(Pi=!0);else return o.lanes=t.lanes,Ys(t,o,_)}return B6(t,o,u,p,_)}function zg(t,o,u){var p=o.pendingProps,_=p.children,x=t!==null?t.memoizedState:null;if(p.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Un(Ec,ji),ji|=u;else{if(!(u&1073741824))return t=x!==null?x.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:t,cachePool:null,transitions:null},o.updateQueue=null,Un(Ec,ji),ji|=t,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=x!==null?x.baseLanes:u,Un(Ec,ji),ji|=p}else x!==null?(p=x.baseLanes|u,o.memoizedState=null):p=u,Un(Ec,ji),ji|=p;return ci(t,o,_,u),o.child}function Lg(t,o){var u=o.ref;(t===null&&u!==null||t!==null&&t.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function B6(t,o,u,p,_){var x=Ii(u)?Ql:oi.current;return x=Oc(o,x),zc(o,_),u=jp(t,o,u,p,x,_),p=Vp(),t!==null&&!Pi?(o.updateQueue=t.updateQueue,o.flags&=-2053,t.lanes&=~_,Ys(t,o,_)):(Xn&&p&&Ap(o),o.flags|=1,ci(t,o,u,_),o.child)}function F9(t,o,u,p,_){if(Ii(u)){var x=!0;J3(o)}else x=!1;if(zc(o,_),o.stateNode===null)R3(t,o),sg(o,u,p),R6(o,u,p,_),p=!0;else if(t===null){var E=o.stateNode,s=o.memoizedProps;E.props=s;var P=E.context,R=u.contextType;typeof R=="object"&&R!==null?R=yo(R):(R=Ii(u)?Ql:oi.current,R=Oc(o,R));var U=u.getDerivedStateFromProps,V=typeof U=="function"||typeof E.getSnapshotBeforeUpdate=="function";V||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(s!==p||P!==R)&&C9(o,E,p,R),Ba=!1;var q=o.memoizedState;E.state=q,r5(o,p,E,_),P=o.memoizedState,s!==p||q!==P||Ai.current||Ba?(typeof U=="function"&&(D6(o,u,U,p),P=o.memoizedState),(s=Ba||M9(o,u,s,p,q,P,R))?(V||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(o.flags|=4194308)):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=p,o.memoizedState=P),E.props=p,E.state=P,E.context=R,p=s):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),p=!1)}else{E=o.stateNode,ig(t,o),s=o.memoizedProps,R=o.type===o.elementType?s:$o(o.type,s),E.props=R,V=o.pendingProps,q=E.context,P=u.contextType,typeof P=="object"&&P!==null?P=yo(P):(P=Ii(u)?Ql:oi.current,P=Oc(o,P));var ve=u.getDerivedStateFromProps;(U=typeof ve=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(s!==V||q!==P)&&C9(o,E,p,P),Ba=!1,q=o.memoizedState,E.state=q,r5(o,p,E,_);var we=o.memoizedState;s!==V||q!==we||Ai.current||Ba?(typeof ve=="function"&&(D6(o,u,ve,p),we=o.memoizedState),(R=Ba||M9(o,u,R,p,q,we,P)||!1)?(U||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(p,we,P),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(p,we,P)),typeof E.componentDidUpdate=="function"&&(o.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof E.componentDidUpdate!="function"||s===t.memoizedProps&&q===t.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&q===t.memoizedState||(o.flags|=1024),o.memoizedProps=p,o.memoizedState=we),E.props=p,E.state=we,E.context=P,p=R):(typeof E.componentDidUpdate!="function"||s===t.memoizedProps&&q===t.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&q===t.memoizedState||(o.flags|=1024),p=!1)}return O6(t,o,u,p,x,_)}function O6(t,o,u,p,_,x){Lg(t,o);var E=(o.flags&128)!==0;if(!p&&!E)return _&&w9(o,u,!1),Ys(t,o,x);p=o.stateNode,vT.current=o;var s=E&&typeof u.getDerivedStateFromError!="function"?null:p.render();return o.flags|=1,t!==null&&E?(o.child=Nc(o,t.child,null,x),o.child=Nc(o,null,s,x)):ci(t,o,s,x),o.memoizedState=p.state,_&&w9(o,u,!0),o.child}function Dg(t){var o=t.stateNode;o.pendingContext?x9(t,o.pendingContext,o.pendingContext!==o.context):o.context&&x9(t,o.context,!1),Bp(t,o.containerInfo)}function B9(t,o,u,p,_){return Uc(),kp(_),o.flags|=256,ci(t,o,u,p),o.child}var U6={dehydrated:null,treeContext:null,retryLane:0};function N6(t){return{baseLanes:t,cachePool:null,transitions:null}}function Rg(t,o,u){var p=o.pendingProps,_=ar.current,x=!1,E=(o.flags&128)!==0,s;if((s=E)||(s=t!==null&&t.memoizedState===null?!1:(_&2)!==0),s?(x=!0,o.flags&=-129):(t===null||t.memoizedState!==null)&&(_|=1),Un(ar,_&1),t===null)return z6(o),t=o.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(o.mode&1?t.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(E=p.children,t=p.fallback,x?(p=o.mode,x=o.child,E={mode:"hidden",children:E},!(p&1)&&x!==null?(x.childLanes=0,x.pendingProps=E):x=D5(E,p,0,null),t=Jl(t,p,u,null),x.return=o,t.return=o,x.sibling=t,o.child=x,o.child.memoizedState=N6(u),o.memoizedState=U6,t):Zp(o,E));if(_=t.memoizedState,_!==null&&(s=_.dehydrated,s!==null))return xT(t,o,E,p,s,_,u);if(x){x=p.fallback,E=o.mode,_=t.child,s=_.sibling;var P={mode:"hidden",children:p.children};return!(E&1)&&o.child!==_?(p=o.child,p.childLanes=0,p.pendingProps=P,o.deletions=null):(p=Xa(_,P),p.subtreeFlags=_.subtreeFlags&14680064),s!==null?x=Xa(s,x):(x=Jl(x,E,u,null),x.flags|=2),x.return=o,p.return=o,p.sibling=x,o.child=p,p=x,x=o.child,E=t.child.memoizedState,E=E===null?N6(u):{baseLanes:E.baseLanes|u,cachePool:null,transitions:E.transitions},x.memoizedState=E,x.childLanes=t.childLanes&~u,o.memoizedState=U6,p}return x=t.child,t=x.sibling,p=Xa(x,{mode:"visible",children:p.children}),!(o.mode&1)&&(p.lanes=u),p.return=o,p.sibling=null,t!==null&&(u=o.deletions,u===null?(o.deletions=[t],o.flags|=16):u.push(t)),o.child=p,o.memoizedState=null,p}function Zp(t,o){return o=D5({mode:"visible",children:o},t.mode,0,null),o.return=t,t.child=o}function v3(t,o,u,p){return p!==null&&kp(p),Nc(o,t.child,null,u),t=Zp(o,o.pendingProps.children),t.flags|=2,o.memoizedState=null,t}function xT(t,o,u,p,_,x,E){if(u)return o.flags&256?(o.flags&=-257,p=$4(Error(ut(422))),v3(t,o,E,p)):o.memoizedState!==null?(o.child=t.child,o.flags|=128,null):(x=p.fallback,_=o.mode,p=D5({mode:"visible",children:p.children},_,0,null),x=Jl(x,_,E,null),x.flags|=2,p.return=o,x.return=o,p.sibling=x,o.child=p,o.mode&1&&Nc(o,t.child,null,E),o.child.memoizedState=N6(E),o.memoizedState=U6,x);if(!(o.mode&1))return v3(t,o,E,null);if(_.data==="$!"){if(p=_.nextSibling&&_.nextSibling.dataset,p)var s=p.dgst;return p=s,x=Error(ut(419)),p=$4(x,p,void 0),v3(t,o,E,p)}if(s=(E&t.childLanes)!==0,Pi||s){if(p=Br,p!==null){switch(E&-E){case 4:_=2;break;case 16:_=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:_=32;break;case 536870912:_=268435456;break;default:_=0}_=_&(p.suspendedLanes|E)?0:_,_!==0&&_!==x.retryLane&&(x.retryLane=_,Ks(t,_),Ko(p,t,_,-1))}return Yp(),p=$4(Error(ut(421))),v3(t,o,E,p)}return _.data==="$?"?(o.flags|=128,o.child=t.child,o=LT.bind(null,t),_._reactRetry=o,null):(t=x.treeContext,$i=Za(_.nextSibling),Zi=o,Xn=!0,Wo=null,t!==null&&(po[fo++]=$s,po[fo++]=Zs,po[fo++]=e1,$s=t.id,Zs=t.overflow,e1=o),o=Zp(o,p.children),o.flags|=4096,o)}function O9(t,o,u){t.lanes|=o;var p=t.alternate;p!==null&&(p.lanes|=o),L6(t.return,o,u)}function Z4(t,o,u,p,_){var x=t.memoizedState;x===null?t.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:_}:(x.isBackwards=o,x.rendering=null,x.renderingStartTime=0,x.last=p,x.tail=u,x.tailMode=_)}function Fg(t,o,u){var p=o.pendingProps,_=p.revealOrder,x=p.tail;if(ci(t,o,p.children,u),p=ar.current,p&2)p=p&1|2,o.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=o.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&O9(t,u,o);else if(t.tag===19)O9(t,u,o);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===o)break e;for(;t.sibling===null;){if(t.return===null||t.return===o)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}p&=1}if(Un(ar,p),!(o.mode&1))o.memoizedState=null;else switch(_){case"forwards":for(u=o.child,_=null;u!==null;)t=u.alternate,t!==null&&i5(t)===null&&(_=u),u=u.sibling;u=_,u===null?(_=o.child,o.child=null):(_=u.sibling,u.sibling=null),Z4(o,!1,_,u,x);break;case"backwards":for(u=null,_=o.child,o.child=null;_!==null;){if(t=_.alternate,t!==null&&i5(t)===null){o.child=_;break}t=_.sibling,_.sibling=u,u=_,_=t}Z4(o,!0,u,null,x);break;case"together":Z4(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function R3(t,o){!(o.mode&1)&&t!==null&&(t.alternate=null,o.alternate=null,o.flags|=2)}function Ys(t,o,u){if(t!==null&&(o.dependencies=t.dependencies),n1|=o.lanes,!(u&o.childLanes))return null;if(t!==null&&o.child!==t.child)throw Error(ut(153));if(o.child!==null){for(t=o.child,u=Xa(t,t.pendingProps),o.child=u,u.return=o;t.sibling!==null;)t=t.sibling,u=u.sibling=Xa(t,t.pendingProps),u.return=o;u.sibling=null}return o.child}function wT(t,o,u){switch(o.tag){case 3:Dg(o),Uc();break;case 5:cg(o);break;case 1:Ii(o.type)&&J3(o);break;case 4:Bp(o,o.stateNode.containerInfo);break;case 10:var p=o.type._context,_=o.memoizedProps.value;Un(t5,p._currentValue),p._currentValue=_;break;case 13:if(p=o.memoizedState,p!==null)return p.dehydrated!==null?(Un(ar,ar.current&1),o.flags|=128,null):u&o.child.childLanes?Rg(t,o,u):(Un(ar,ar.current&1),t=Ys(t,o,u),t!==null?t.sibling:null);Un(ar,ar.current&1);break;case 19:if(p=(u&o.childLanes)!==0,t.flags&128){if(p)return Fg(t,o,u);o.flags|=128}if(_=o.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),Un(ar,ar.current),p)break;return null;case 22:case 23:return o.lanes=0,zg(t,o,u)}return Ys(t,o,u)}var Bg,j6,Og,Ug;Bg=function(t,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)t.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}};j6=function(){};Og=function(t,o,u,p){var _=t.memoizedProps;if(_!==p){t=o.stateNode,Hl(gs.current);var x=null;switch(u){case"input":_=c6(t,_),p=c6(t,p),x=[];break;case"select":_=cr({},_,{value:void 0}),p=cr({},p,{value:void 0}),x=[];break;case"textarea":_=d6(t,_),p=d6(t,p),x=[];break;default:typeof _.onClick!="function"&&typeof p.onClick=="function"&&(t.onclick=K3)}f6(u,p);var E;u=null;for(R in _)if(!p.hasOwnProperty(R)&&_.hasOwnProperty(R)&&_[R]!=null)if(R==="style"){var s=_[R];for(E in s)s.hasOwnProperty(E)&&(u||(u={}),u[E]="")}else R!=="dangerouslySetInnerHTML"&&R!=="children"&&R!=="suppressContentEditableWarning"&&R!=="suppressHydrationWarning"&&R!=="autoFocus"&&(s2.hasOwnProperty(R)?x||(x=[]):(x=x||[]).push(R,null));for(R in p){var P=p[R];if(s=_!=null?_[R]:void 0,p.hasOwnProperty(R)&&P!==s&&(P!=null||s!=null))if(R==="style")if(s){for(E in s)!s.hasOwnProperty(E)||P&&P.hasOwnProperty(E)||(u||(u={}),u[E]="");for(E in P)P.hasOwnProperty(E)&&s[E]!==P[E]&&(u||(u={}),u[E]=P[E])}else u||(x||(x=[]),x.push(R,u)),u=P;else R==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,s=s?s.__html:void 0,P!=null&&s!==P&&(x=x||[]).push(R,P)):R==="children"?typeof P!="string"&&typeof P!="number"||(x=x||[]).push(R,""+P):R!=="suppressContentEditableWarning"&&R!=="suppressHydrationWarning"&&(s2.hasOwnProperty(R)?(P!=null&&R==="onScroll"&&Zn("scroll",t),x||s===P||(x=[])):(x=x||[]).push(R,P))}u&&(x=x||[]).push("style",u);var R=x;(o.updateQueue=R)&&(o.flags|=4)}};Ug=function(t,o,u,p){u!==p&&(o.flags|=4)};function R0(t,o){if(!Xn)switch(t.tailMode){case"hidden":o=t.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?t.tail=null:u.sibling=null;break;case"collapsed":u=t.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?o||t.tail===null?t.tail=null:t.tail.sibling=null:p.sibling=null}}function ni(t){var o=t.alternate!==null&&t.alternate.child===t.child,u=0,p=0;if(o)for(var _=t.child;_!==null;)u|=_.lanes|_.childLanes,p|=_.subtreeFlags&14680064,p|=_.flags&14680064,_.return=t,_=_.sibling;else for(_=t.child;_!==null;)u|=_.lanes|_.childLanes,p|=_.subtreeFlags,p|=_.flags,_.return=t,_=_.sibling;return t.subtreeFlags|=p,t.childLanes=u,o}function bT(t,o,u){var p=o.pendingProps;switch(Ip(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ni(o),null;case 1:return Ii(o.type)&&Y3(),ni(o),null;case 3:return p=o.stateNode,jc(),qn(Ai),qn(oi),Up(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(t===null||t.child===null)&&(g3(o)?o.flags|=4:t===null||t.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,Wo!==null&&(X6(Wo),Wo=null))),j6(t,o),ni(o),null;case 5:Op(o);var _=Hl(y2.current);if(u=o.type,t!==null&&o.stateNode!=null)Og(t,o,u,p,_),t.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!p){if(o.stateNode===null)throw Error(ut(166));return ni(o),null}if(t=Hl(gs.current),g3(o)){p=o.stateNode,u=o.type;var x=o.memoizedProps;switch(p[ms]=o,p[_2]=x,t=(o.mode&1)!==0,u){case"dialog":Zn("cancel",p),Zn("close",p);break;case"iframe":case"object":case"embed":Zn("load",p);break;case"video":case"audio":for(_=0;_<W0.length;_++)Zn(W0[_],p);break;case"source":Zn("error",p);break;case"img":case"image":case"link":Zn("error",p),Zn("load",p);break;case"details":Zn("toggle",p);break;case"input":W8(p,x),Zn("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!x.multiple},Zn("invalid",p);break;case"textarea":X8(p,x),Zn("invalid",p)}f6(u,x),_=null;for(var E in x)if(x.hasOwnProperty(E)){var s=x[E];E==="children"?typeof s=="string"?p.textContent!==s&&(x.suppressHydrationWarning!==!0&&_3(p.textContent,s,t),_=["children",s]):typeof s=="number"&&p.textContent!==""+s&&(x.suppressHydrationWarning!==!0&&_3(p.textContent,s,t),_=["children",""+s]):s2.hasOwnProperty(E)&&s!=null&&E==="onScroll"&&Zn("scroll",p)}switch(u){case"input":l3(p),H8(p,x,!0);break;case"textarea":l3(p),K8(p);break;case"select":case"option":break;default:typeof x.onClick=="function"&&(p.onclick=K3)}p=_,o.updateQueue=p,p!==null&&(o.flags|=4)}else{E=_.nodeType===9?_:_.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=d_(u)),t==="http://www.w3.org/1999/xhtml"?u==="script"?(t=E.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof p.is=="string"?t=E.createElement(u,{is:p.is}):(t=E.createElement(u),u==="select"&&(E=t,p.multiple?E.multiple=!0:p.size&&(E.size=p.size))):t=E.createElementNS(t,u),t[ms]=o,t[_2]=p,Bg(t,o,!1,!1),o.stateNode=t;e:{switch(E=m6(u,p),u){case"dialog":Zn("cancel",t),Zn("close",t),_=p;break;case"iframe":case"object":case"embed":Zn("load",t),_=p;break;case"video":case"audio":for(_=0;_<W0.length;_++)Zn(W0[_],t);_=p;break;case"source":Zn("error",t),_=p;break;case"img":case"image":case"link":Zn("error",t),Zn("load",t),_=p;break;case"details":Zn("toggle",t),_=p;break;case"input":W8(t,p),_=c6(t,p),Zn("invalid",t);break;case"option":_=p;break;case"select":t._wrapperState={wasMultiple:!!p.multiple},_=cr({},p,{value:void 0}),Zn("invalid",t);break;case"textarea":X8(t,p),_=d6(t,p),Zn("invalid",t);break;default:_=p}f6(u,_),s=_;for(x in s)if(s.hasOwnProperty(x)){var P=s[x];x==="style"?m_(t,P):x==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,P!=null&&p_(t,P)):x==="children"?typeof P=="string"?(u!=="textarea"||P!=="")&&a2(t,P):typeof P=="number"&&a2(t,""+P):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(s2.hasOwnProperty(x)?P!=null&&x==="onScroll"&&Zn("scroll",t):P!=null&&mp(t,x,P,E))}switch(u){case"input":l3(t),H8(t,p,!1);break;case"textarea":l3(t),K8(t);break;case"option":p.value!=null&&t.setAttribute("value",""+Ya(p.value));break;case"select":t.multiple=!!p.multiple,x=p.value,x!=null?Pc(t,!!p.multiple,x,!1):p.defaultValue!=null&&Pc(t,!!p.multiple,p.defaultValue,!0);break;default:typeof _.onClick=="function"&&(t.onclick=K3)}switch(u){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return ni(o),null;case 6:if(t&&o.stateNode!=null)Ug(t,o,t.memoizedProps,p);else{if(typeof p!="string"&&o.stateNode===null)throw Error(ut(166));if(u=Hl(y2.current),Hl(gs.current),g3(o)){if(p=o.stateNode,u=o.memoizedProps,p[ms]=o,(x=p.nodeValue!==u)&&(t=Zi,t!==null))switch(t.tag){case 3:_3(p.nodeValue,u,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&_3(p.nodeValue,u,(t.mode&1)!==0)}x&&(o.flags|=4)}else p=(u.nodeType===9?u:u.ownerDocument).createTextNode(p),p[ms]=o,o.stateNode=p}return ni(o),null;case 13:if(qn(ar),p=o.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Xn&&$i!==null&&o.mode&1&&!(o.flags&128))ng(),Uc(),o.flags|=98560,x=!1;else if(x=g3(o),p!==null&&p.dehydrated!==null){if(t===null){if(!x)throw Error(ut(318));if(x=o.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(ut(317));x[ms]=o}else Uc(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;ni(o),x=!1}else Wo!==null&&(X6(Wo),Wo=null),x=!0;if(!x)return o.flags&65536?o:null}return o.flags&128?(o.lanes=u,o):(p=p!==null,p!==(t!==null&&t.memoizedState!==null)&&p&&(o.child.flags|=8192,o.mode&1&&(t===null||ar.current&1?Ir===0&&(Ir=3):Yp())),o.updateQueue!==null&&(o.flags|=4),ni(o),null);case 4:return jc(),j6(t,o),t===null&&f2(o.stateNode.containerInfo),ni(o),null;case 10:return Dp(o.type._context),ni(o),null;case 17:return Ii(o.type)&&Y3(),ni(o),null;case 19:if(qn(ar),x=o.memoizedState,x===null)return ni(o),null;if(p=(o.flags&128)!==0,E=x.rendering,E===null)if(p)R0(x,!1);else{if(Ir!==0||t!==null&&t.flags&128)for(t=o.child;t!==null;){if(E=i5(t),E!==null){for(o.flags|=128,R0(x,!1),p=E.updateQueue,p!==null&&(o.updateQueue=p,o.flags|=4),o.subtreeFlags=0,p=u,u=o.child;u!==null;)x=u,t=p,x.flags&=14680066,E=x.alternate,E===null?(x.childLanes=0,x.lanes=t,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=E.childLanes,x.lanes=E.lanes,x.child=E.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=E.memoizedProps,x.memoizedState=E.memoizedState,x.updateQueue=E.updateQueue,x.type=E.type,t=E.dependencies,x.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),u=u.sibling;return Un(ar,ar.current&1|2),o.child}t=t.sibling}x.tail!==null&&gr()>Gc&&(o.flags|=128,p=!0,R0(x,!1),o.lanes=4194304)}else{if(!p)if(t=i5(E),t!==null){if(o.flags|=128,p=!0,u=t.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),R0(x,!0),x.tail===null&&x.tailMode==="hidden"&&!E.alternate&&!Xn)return ni(o),null}else 2*gr()-x.renderingStartTime>Gc&&u!==1073741824&&(o.flags|=128,p=!0,R0(x,!1),o.lanes=4194304);x.isBackwards?(E.sibling=o.child,o.child=E):(u=x.last,u!==null?u.sibling=E:o.child=E,x.last=E)}return x.tail!==null?(o=x.tail,x.rendering=o,x.tail=o.sibling,x.renderingStartTime=gr(),o.sibling=null,u=ar.current,Un(ar,p?u&1|2:u&1),o):(ni(o),null);case 22:case 23:return Kp(),p=o.memoizedState!==null,t!==null&&t.memoizedState!==null!==p&&(o.flags|=8192),p&&o.mode&1?ji&1073741824&&(ni(o),o.subtreeFlags&6&&(o.flags|=8192)):ni(o),null;case 24:return null;case 25:return null}throw Error(ut(156,o.tag))}function TT(t,o){switch(Ip(o),o.tag){case 1:return Ii(o.type)&&Y3(),t=o.flags,t&65536?(o.flags=t&-65537|128,o):null;case 3:return jc(),qn(Ai),qn(oi),Up(),t=o.flags,t&65536&&!(t&128)?(o.flags=t&-65537|128,o):null;case 5:return Op(o),null;case 13:if(qn(ar),t=o.memoizedState,t!==null&&t.dehydrated!==null){if(o.alternate===null)throw Error(ut(340));Uc()}return t=o.flags,t&65536?(o.flags=t&-65537|128,o):null;case 19:return qn(ar),null;case 4:return jc(),null;case 10:return Dp(o.type._context),null;case 22:case 23:return Kp(),null;case 24:return null;default:return null}}var x3=!1,ii=!1,ET=typeof WeakSet=="function"?WeakSet:Set,At=null;function Tc(t,o){var u=t.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(p){dr(t,o,p)}else u.current=null}function V6(t,o,u){try{u()}catch(p){dr(t,o,p)}}var U9=!1;function ST(t,o){if(S6=W3,t=G_(),Pp(t)){if("selectionStart"in t)var u={start:t.selectionStart,end:t.selectionEnd};else e:{u=(u=t.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var _=p.anchorOffset,x=p.focusNode;p=p.focusOffset;try{u.nodeType,x.nodeType}catch{u=null;break e}var E=0,s=-1,P=-1,R=0,U=0,V=t,q=null;t:for(;;){for(var ve;V!==u||_!==0&&V.nodeType!==3||(s=E+_),V!==x||p!==0&&V.nodeType!==3||(P=E+p),V.nodeType===3&&(E+=V.nodeValue.length),(ve=V.firstChild)!==null;)q=V,V=ve;for(;;){if(V===t)break t;if(q===u&&++R===_&&(s=E),q===x&&++U===p&&(P=E),(ve=V.nextSibling)!==null)break;V=q,q=V.parentNode}V=ve}u=s===-1||P===-1?null:{start:s,end:P}}else u=null}u=u||{start:0,end:0}}else u=null;for(M6={focusedElem:t,selectionRange:u},W3=!1,At=o;At!==null;)if(o=At,t=o.child,(o.subtreeFlags&1028)!==0&&t!==null)t.return=o,At=t;else for(;At!==null;){o=At;try{var we=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(we!==null){var xe=we.memoizedProps,Ie=we.memoizedState,te=o.stateNode,ne=te.getSnapshotBeforeUpdate(o.elementType===o.type?xe:$o(o.type,xe),Ie);te.__reactInternalSnapshotBeforeUpdate=ne}break;case 3:var se=o.stateNode.containerInfo;se.nodeType===1?se.textContent="":se.nodeType===9&&se.documentElement&&se.removeChild(se.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ut(163))}}catch(Se){dr(o,o.return,Se)}if(t=o.sibling,t!==null){t.return=o.return,At=t;break}At=o.return}return we=U9,U9=!1,we}function t2(t,o,u){var p=o.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var _=p=p.next;do{if((_.tag&t)===t){var x=_.destroy;_.destroy=void 0,x!==void 0&&V6(o,u,x)}_=_.next}while(_!==p)}}function z5(t,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&t)===t){var p=u.create;u.destroy=p()}u=u.next}while(u!==o)}}function G6(t){var o=t.ref;if(o!==null){var u=t.stateNode;switch(t.tag){case 5:t=u;break;default:t=u}typeof o=="function"?o(t):o.current=t}}function Ng(t){var o=t.alternate;o!==null&&(t.alternate=null,Ng(o)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(o=t.stateNode,o!==null&&(delete o[ms],delete o[_2],delete o[A6],delete o[aT],delete o[lT])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function jg(t){return t.tag===5||t.tag===3||t.tag===4}function N9(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||jg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function $6(t,o,u){var p=t.tag;if(p===5||p===6)t=t.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(t,o):u.insertBefore(t,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(t,u)):(o=u,o.appendChild(t)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=K3));else if(p!==4&&(t=t.child,t!==null))for($6(t,o,u),t=t.sibling;t!==null;)$6(t,o,u),t=t.sibling}function Z6(t,o,u){var p=t.tag;if(p===5||p===6)t=t.stateNode,o?u.insertBefore(t,o):u.appendChild(t);else if(p!==4&&(t=t.child,t!==null))for(Z6(t,o,u),t=t.sibling;t!==null;)Z6(t,o,u),t=t.sibling}var Vr=null,Zo=!1;function za(t,o,u){for(u=u.child;u!==null;)Vg(t,o,u),u=u.sibling}function Vg(t,o,u){if(_s&&typeof _s.onCommitFiberUnmount=="function")try{_s.onCommitFiberUnmount(E5,u)}catch{}switch(u.tag){case 5:ii||Tc(u,o);case 6:var p=Vr,_=Zo;Vr=null,za(t,o,u),Vr=p,Zo=_,Vr!==null&&(Zo?(t=Vr,u=u.stateNode,t.nodeType===8?t.parentNode.removeChild(u):t.removeChild(u)):Vr.removeChild(u.stateNode));break;case 18:Vr!==null&&(Zo?(t=Vr,u=u.stateNode,t.nodeType===8?O4(t.parentNode,u):t.nodeType===1&&O4(t,u),h2(t)):O4(Vr,u.stateNode));break;case 4:p=Vr,_=Zo,Vr=u.stateNode.containerInfo,Zo=!0,za(t,o,u),Vr=p,Zo=_;break;case 0:case 11:case 14:case 15:if(!ii&&(p=u.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){_=p=p.next;do{var x=_,E=x.destroy;x=x.tag,E!==void 0&&(x&2||x&4)&&V6(u,o,E),_=_.next}while(_!==p)}za(t,o,u);break;case 1:if(!ii&&(Tc(u,o),p=u.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=u.memoizedProps,p.state=u.memoizedState,p.componentWillUnmount()}catch(s){dr(u,o,s)}za(t,o,u);break;case 21:za(t,o,u);break;case 22:u.mode&1?(ii=(p=ii)||u.memoizedState!==null,za(t,o,u),ii=p):za(t,o,u);break;default:za(t,o,u)}}function j9(t){var o=t.updateQueue;if(o!==null){t.updateQueue=null;var u=t.stateNode;u===null&&(u=t.stateNode=new ET),o.forEach(function(p){var _=DT.bind(null,t,p);u.has(p)||(u.add(p),p.then(_,_))})}}function Go(t,o){var u=o.deletions;if(u!==null)for(var p=0;p<u.length;p++){var _=u[p];try{var x=t,E=o,s=E;e:for(;s!==null;){switch(s.tag){case 5:Vr=s.stateNode,Zo=!1;break e;case 3:Vr=s.stateNode.containerInfo,Zo=!0;break e;case 4:Vr=s.stateNode.containerInfo,Zo=!0;break e}s=s.return}if(Vr===null)throw Error(ut(160));Vg(x,E,_),Vr=null,Zo=!1;var P=_.alternate;P!==null&&(P.return=null),_.return=null}catch(R){dr(_,o,R)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Gg(o,t),o=o.sibling}function Gg(t,o){var u=t.alternate,p=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Go(o,t),ps(t),p&4){try{t2(3,t,t.return),z5(3,t)}catch(xe){dr(t,t.return,xe)}try{t2(5,t,t.return)}catch(xe){dr(t,t.return,xe)}}break;case 1:Go(o,t),ps(t),p&512&&u!==null&&Tc(u,u.return);break;case 5:if(Go(o,t),ps(t),p&512&&u!==null&&Tc(u,u.return),t.flags&32){var _=t.stateNode;try{a2(_,"")}catch(xe){dr(t,t.return,xe)}}if(p&4&&(_=t.stateNode,_!=null)){var x=t.memoizedProps,E=u!==null?u.memoizedProps:x,s=t.type,P=t.updateQueue;if(t.updateQueue=null,P!==null)try{s==="input"&&x.type==="radio"&&x.name!=null&&u_(_,x),m6(s,E);var R=m6(s,x);for(E=0;E<P.length;E+=2){var U=P[E],V=P[E+1];U==="style"?m_(_,V):U==="dangerouslySetInnerHTML"?p_(_,V):U==="children"?a2(_,V):mp(_,U,V,R)}switch(s){case"input":u6(_,x);break;case"textarea":h_(_,x);break;case"select":var q=_._wrapperState.wasMultiple;_._wrapperState.wasMultiple=!!x.multiple;var ve=x.value;ve!=null?Pc(_,!!x.multiple,ve,!1):q!==!!x.multiple&&(x.defaultValue!=null?Pc(_,!!x.multiple,x.defaultValue,!0):Pc(_,!!x.multiple,x.multiple?[]:"",!1))}_[_2]=x}catch(xe){dr(t,t.return,xe)}}break;case 6:if(Go(o,t),ps(t),p&4){if(t.stateNode===null)throw Error(ut(162));_=t.stateNode,x=t.memoizedProps;try{_.nodeValue=x}catch(xe){dr(t,t.return,xe)}}break;case 3:if(Go(o,t),ps(t),p&4&&u!==null&&u.memoizedState.isDehydrated)try{h2(o.containerInfo)}catch(xe){dr(t,t.return,xe)}break;case 4:Go(o,t),ps(t);break;case 13:Go(o,t),ps(t),_=t.child,_.flags&8192&&(x=_.memoizedState!==null,_.stateNode.isHidden=x,!x||_.alternate!==null&&_.alternate.memoizedState!==null||(Hp=gr())),p&4&&j9(t);break;case 22:if(U=u!==null&&u.memoizedState!==null,t.mode&1?(ii=(R=ii)||U,Go(o,t),ii=R):Go(o,t),ps(t),p&8192){if(R=t.memoizedState!==null,(t.stateNode.isHidden=R)&&!U&&t.mode&1)for(At=t,U=t.child;U!==null;){for(V=At=U;At!==null;){switch(q=At,ve=q.child,q.tag){case 0:case 11:case 14:case 15:t2(4,q,q.return);break;case 1:Tc(q,q.return);var we=q.stateNode;if(typeof we.componentWillUnmount=="function"){p=q,u=q.return;try{o=p,we.props=o.memoizedProps,we.state=o.memoizedState,we.componentWillUnmount()}catch(xe){dr(p,u,xe)}}break;case 5:Tc(q,q.return);break;case 22:if(q.memoizedState!==null){G9(V);continue}}ve!==null?(ve.return=q,At=ve):G9(V)}U=U.sibling}e:for(U=null,V=t;;){if(V.tag===5){if(U===null){U=V;try{_=V.stateNode,R?(x=_.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none"):(s=V.stateNode,P=V.memoizedProps.style,E=P!=null&&P.hasOwnProperty("display")?P.display:null,s.style.display=f_("display",E))}catch(xe){dr(t,t.return,xe)}}}else if(V.tag===6){if(U===null)try{V.stateNode.nodeValue=R?"":V.memoizedProps}catch(xe){dr(t,t.return,xe)}}else if((V.tag!==22&&V.tag!==23||V.memoizedState===null||V===t)&&V.child!==null){V.child.return=V,V=V.child;continue}if(V===t)break e;for(;V.sibling===null;){if(V.return===null||V.return===t)break e;U===V&&(U=null),V=V.return}U===V&&(U=null),V.sibling.return=V.return,V=V.sibling}}break;case 19:Go(o,t),ps(t),p&4&&j9(t);break;case 21:break;default:Go(o,t),ps(t)}}function ps(t){var o=t.flags;if(o&2){try{e:{for(var u=t.return;u!==null;){if(jg(u)){var p=u;break e}u=u.return}throw Error(ut(160))}switch(p.tag){case 5:var _=p.stateNode;p.flags&32&&(a2(_,""),p.flags&=-33);var x=N9(t);Z6(t,x,_);break;case 3:case 4:var E=p.stateNode.containerInfo,s=N9(t);$6(t,s,E);break;default:throw Error(ut(161))}}catch(P){dr(t,t.return,P)}t.flags&=-3}o&4096&&(t.flags&=-4097)}function MT(t,o,u){At=t,$g(t)}function $g(t,o,u){for(var p=(t.mode&1)!==0;At!==null;){var _=At,x=_.child;if(_.tag===22&&p){var E=_.memoizedState!==null||x3;if(!E){var s=_.alternate,P=s!==null&&s.memoizedState!==null||ii;s=x3;var R=ii;if(x3=E,(ii=P)&&!R)for(At=_;At!==null;)E=At,P=E.child,E.tag===22&&E.memoizedState!==null?$9(_):P!==null?(P.return=E,At=P):$9(_);for(;x!==null;)At=x,$g(x),x=x.sibling;At=_,x3=s,ii=R}V9(t)}else _.subtreeFlags&8772&&x!==null?(x.return=_,At=x):V9(t)}}function V9(t){for(;At!==null;){var o=At;if(o.flags&8772){var u=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:ii||z5(5,o);break;case 1:var p=o.stateNode;if(o.flags&4&&!ii)if(u===null)p.componentDidMount();else{var _=o.elementType===o.type?u.memoizedProps:$o(o.type,u.memoizedProps);p.componentDidUpdate(_,u.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var x=o.updateQueue;x!==null&&S9(o,x,p);break;case 3:var E=o.updateQueue;if(E!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}S9(o,E,u)}break;case 5:var s=o.stateNode;if(u===null&&o.flags&4){u=s;var P=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":P.autoFocus&&u.focus();break;case"img":P.src&&(u.src=P.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var R=o.alternate;if(R!==null){var U=R.memoizedState;if(U!==null){var V=U.dehydrated;V!==null&&h2(V)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ut(163))}ii||o.flags&512&&G6(o)}catch(q){dr(o,o.return,q)}}if(o===t){At=null;break}if(u=o.sibling,u!==null){u.return=o.return,At=u;break}At=o.return}}function G9(t){for(;At!==null;){var o=At;if(o===t){At=null;break}var u=o.sibling;if(u!==null){u.return=o.return,At=u;break}At=o.return}}function $9(t){for(;At!==null;){var o=At;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{z5(4,o)}catch(P){dr(o,u,P)}break;case 1:var p=o.stateNode;if(typeof p.componentDidMount=="function"){var _=o.return;try{p.componentDidMount()}catch(P){dr(o,_,P)}}var x=o.return;try{G6(o)}catch(P){dr(o,x,P)}break;case 5:var E=o.return;try{G6(o)}catch(P){dr(o,E,P)}}}catch(P){dr(o,o.return,P)}if(o===t){At=null;break}var s=o.sibling;if(s!==null){s.return=o.return,At=s;break}At=o.return}}var CT=Math.ceil,a5=Js.ReactCurrentDispatcher,qp=Js.ReactCurrentOwner,_o=Js.ReactCurrentBatchConfig,_n=0,Br=null,Tr=null,Gr=0,ji=0,Ec=nl(0),Ir=0,b2=null,n1=0,L5=0,Wp=0,n2=null,Ci=null,Hp=0,Gc=1/0,js=null,l5=!1,q6=null,Wa=null,w3=!1,ja=null,c5=0,r2=0,W6=null,F3=-1,B3=0;function hi(){return _n&6?gr():F3!==-1?F3:F3=gr()}function Ha(t){return t.mode&1?_n&2&&Gr!==0?Gr&-Gr:uT.transition!==null?(B3===0&&(B3=C_()),B3):(t=Ln,t!==0||(t=window.event,t=t===void 0?16:D_(t.type)),t):1}function Ko(t,o,u,p){if(50<r2)throw r2=0,W6=null,Error(ut(185));A2(t,u,p),(!(_n&2)||t!==Br)&&(t===Br&&(!(_n&2)&&(L5|=u),Ir===4&&Ua(t,Gr)),ki(t,p),u===1&&_n===0&&!(o.mode&1)&&(Gc=gr()+500,A5&&rl()))}function ki(t,o){var u=t.callbackNode;ub(t,o);var p=q3(t,t===Br?Gr:0);if(p===0)u!==null&&Q8(u),t.callbackNode=null,t.callbackPriority=0;else if(o=p&-p,t.callbackPriority!==o){if(u!=null&&Q8(u),o===1)t.tag===0?cT(Z9.bind(null,t)):Q_(Z9.bind(null,t)),oT(function(){!(_n&6)&&rl()}),u=null;else{switch(P_(p)){case 1:u=xp;break;case 4:u=S_;break;case 16:u=Z3;break;case 536870912:u=M_;break;default:u=Z3}u=Jg(u,Zg.bind(null,t))}t.callbackPriority=o,t.callbackNode=u}}function Zg(t,o){if(F3=-1,B3=0,_n&6)throw Error(ut(327));var u=t.callbackNode;if(Lc()&&t.callbackNode!==u)return null;var p=q3(t,t===Br?Gr:0);if(p===0)return null;if(p&30||p&t.expiredLanes||o)o=u5(t,p);else{o=p;var _=_n;_n|=2;var x=Wg();(Br!==t||Gr!==o)&&(js=null,Gc=gr()+500,Yl(t,o));do try{IT();break}catch(s){qg(t,s)}while(1);Lp(),a5.current=x,_n=_,Tr!==null?o=0:(Br=null,Gr=0,o=Ir)}if(o!==0){if(o===2&&(_=x6(t),_!==0&&(p=_,o=H6(t,_))),o===1)throw u=b2,Yl(t,0),Ua(t,p),ki(t,gr()),u;if(o===6)Ua(t,p);else{if(_=t.current.alternate,!(p&30)&&!PT(_)&&(o=u5(t,p),o===2&&(x=x6(t),x!==0&&(p=x,o=H6(t,x))),o===1))throw u=b2,Yl(t,0),Ua(t,p),ki(t,gr()),u;switch(t.finishedWork=_,t.finishedLanes=p,o){case 0:case 1:throw Error(ut(345));case 2:Zl(t,Ci,js);break;case 3:if(Ua(t,p),(p&130023424)===p&&(o=Hp+500-gr(),10<o)){if(q3(t,0)!==0)break;if(_=t.suspendedLanes,(_&p)!==p){hi(),t.pingedLanes|=t.suspendedLanes&_;break}t.timeoutHandle=P6(Zl.bind(null,t,Ci,js),o);break}Zl(t,Ci,js);break;case 4:if(Ua(t,p),(p&4194240)===p)break;for(o=t.eventTimes,_=-1;0<p;){var E=31-Xo(p);x=1<<E,E=o[E],E>_&&(_=E),p&=~x}if(p=_,p=gr()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*CT(p/1960))-p,10<p){t.timeoutHandle=P6(Zl.bind(null,t,Ci,js),p);break}Zl(t,Ci,js);break;case 5:Zl(t,Ci,js);break;default:throw Error(ut(329))}}}return ki(t,gr()),t.callbackNode===u?Zg.bind(null,t):null}function H6(t,o){var u=n2;return t.current.memoizedState.isDehydrated&&(Yl(t,o).flags|=256),t=u5(t,o),t!==2&&(o=Ci,Ci=u,o!==null&&X6(o)),t}function X6(t){Ci===null?Ci=t:Ci.push.apply(Ci,t)}function PT(t){for(var o=t;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var p=0;p<u.length;p++){var _=u[p],x=_.getSnapshot;_=_.value;try{if(!Yo(x(),_))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===t)break;for(;o.sibling===null;){if(o.return===null||o.return===t)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ua(t,o){for(o&=~Wp,o&=~L5,t.suspendedLanes|=o,t.pingedLanes&=~o,t=t.expirationTimes;0<o;){var u=31-Xo(o),p=1<<u;t[u]=-1,o&=~p}}function Z9(t){if(_n&6)throw Error(ut(327));Lc();var o=q3(t,0);if(!(o&1))return ki(t,gr()),null;var u=u5(t,o);if(t.tag!==0&&u===2){var p=x6(t);p!==0&&(o=p,u=H6(t,p))}if(u===1)throw u=b2,Yl(t,0),Ua(t,o),ki(t,gr()),u;if(u===6)throw Error(ut(345));return t.finishedWork=t.current.alternate,t.finishedLanes=o,Zl(t,Ci,js),ki(t,gr()),null}function Xp(t,o){var u=_n;_n|=1;try{return t(o)}finally{_n=u,_n===0&&(Gc=gr()+500,A5&&rl())}}function r1(t){ja!==null&&ja.tag===0&&!(_n&6)&&Lc();var o=_n;_n|=1;var u=_o.transition,p=Ln;try{if(_o.transition=null,Ln=1,t)return t()}finally{Ln=p,_o.transition=u,_n=o,!(_n&6)&&rl()}}function Kp(){ji=Ec.current,qn(Ec)}function Yl(t,o){t.finishedWork=null,t.finishedLanes=0;var u=t.timeoutHandle;if(u!==-1&&(t.timeoutHandle=-1,iT(u)),Tr!==null)for(u=Tr.return;u!==null;){var p=u;switch(Ip(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&Y3();break;case 3:jc(),qn(Ai),qn(oi),Up();break;case 5:Op(p);break;case 4:jc();break;case 13:qn(ar);break;case 19:qn(ar);break;case 10:Dp(p.type._context);break;case 22:case 23:Kp()}u=u.return}if(Br=t,Tr=t=Xa(t.current,null),Gr=ji=o,Ir=0,b2=null,Wp=L5=n1=0,Ci=n2=null,Wl!==null){for(o=0;o<Wl.length;o++)if(u=Wl[o],p=u.interleaved,p!==null){u.interleaved=null;var _=p.next,x=u.pending;if(x!==null){var E=x.next;x.next=_,p.next=E}u.pending=p}Wl=null}return t}function qg(t,o){do{var u=Tr;try{if(Lp(),L3.current=s5,o5){for(var p=lr.memoizedState;p!==null;){var _=p.queue;_!==null&&(_.pending=null),p=p.next}o5=!1}if(t1=0,Fr=Ar=lr=null,e2=!1,v2=0,qp.current=null,u===null||u.return===null){Ir=1,b2=o,Tr=null;break}e:{var x=t,E=u.return,s=u,P=o;if(o=Gr,s.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){var R=P,U=s,V=U.tag;if(!(U.mode&1)&&(V===0||V===11||V===15)){var q=U.alternate;q?(U.updateQueue=q.updateQueue,U.memoizedState=q.memoizedState,U.lanes=q.lanes):(U.updateQueue=null,U.memoizedState=null)}var ve=z9(E);if(ve!==null){ve.flags&=-257,L9(ve,E,s,x,o),ve.mode&1&&k9(x,R,o),o=ve,P=R;var we=o.updateQueue;if(we===null){var xe=new Set;xe.add(P),o.updateQueue=xe}else we.add(P);break e}else{if(!(o&1)){k9(x,R,o),Yp();break e}P=Error(ut(426))}}else if(Xn&&s.mode&1){var Ie=z9(E);if(Ie!==null){!(Ie.flags&65536)&&(Ie.flags|=256),L9(Ie,E,s,x,o),kp(Vc(P,s));break e}}x=P=Vc(P,s),Ir!==4&&(Ir=2),n2===null?n2=[x]:n2.push(x),x=E;do{switch(x.tag){case 3:x.flags|=65536,o&=-o,x.lanes|=o;var te=Ag(x,P,o);E9(x,te);break e;case 1:s=P;var ne=x.type,se=x.stateNode;if(!(x.flags&128)&&(typeof ne.getDerivedStateFromError=="function"||se!==null&&typeof se.componentDidCatch=="function"&&(Wa===null||!Wa.has(se)))){x.flags|=65536,o&=-o,x.lanes|=o;var Se=Ig(x,s,o);E9(x,Se);break e}}x=x.return}while(x!==null)}Xg(u)}catch(Be){o=Be,Tr===u&&u!==null&&(Tr=u=u.return);continue}break}while(1)}function Wg(){var t=a5.current;return a5.current=s5,t===null?s5:t}function Yp(){(Ir===0||Ir===3||Ir===2)&&(Ir=4),Br===null||!(n1&268435455)&&!(L5&268435455)||Ua(Br,Gr)}function u5(t,o){var u=_n;_n|=2;var p=Wg();(Br!==t||Gr!==o)&&(js=null,Yl(t,o));do try{AT();break}catch(_){qg(t,_)}while(1);if(Lp(),_n=u,a5.current=p,Tr!==null)throw Error(ut(261));return Br=null,Gr=0,Ir}function AT(){for(;Tr!==null;)Hg(Tr)}function IT(){for(;Tr!==null&&!tb();)Hg(Tr)}function Hg(t){var o=Yg(t.alternate,t,ji);t.memoizedProps=t.pendingProps,o===null?Xg(t):Tr=o,qp.current=null}function Xg(t){var o=t;do{var u=o.alternate;if(t=o.return,o.flags&32768){if(u=TT(u,o),u!==null){u.flags&=32767,Tr=u;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ir=6,Tr=null;return}}else if(u=bT(u,o,ji),u!==null){Tr=u;return}if(o=o.sibling,o!==null){Tr=o;return}Tr=o=t}while(o!==null);Ir===0&&(Ir=5)}function Zl(t,o,u){var p=Ln,_=_o.transition;try{_o.transition=null,Ln=1,kT(t,o,u,p)}finally{_o.transition=_,Ln=p}return null}function kT(t,o,u,p){do Lc();while(ja!==null);if(_n&6)throw Error(ut(327));u=t.finishedWork;var _=t.finishedLanes;if(u===null)return null;if(t.finishedWork=null,t.finishedLanes=0,u===t.current)throw Error(ut(177));t.callbackNode=null,t.callbackPriority=0;var x=u.lanes|u.childLanes;if(hb(t,x),t===Br&&(Tr=Br=null,Gr=0),!(u.subtreeFlags&2064)&&!(u.flags&2064)||w3||(w3=!0,Jg(Z3,function(){return Lc(),null})),x=(u.flags&15990)!==0,u.subtreeFlags&15990||x){x=_o.transition,_o.transition=null;var E=Ln;Ln=1;var s=_n;_n|=4,qp.current=null,ST(t,u),Gg(u,t),Yb(M6),W3=!!S6,M6=S6=null,t.current=u,MT(u),nb(),_n=s,Ln=E,_o.transition=x}else t.current=u;if(w3&&(w3=!1,ja=t,c5=_),x=t.pendingLanes,x===0&&(Wa=null),ob(u.stateNode),ki(t,gr()),o!==null)for(p=t.onRecoverableError,u=0;u<o.length;u++)_=o[u],p(_.value,{componentStack:_.stack,digest:_.digest});if(l5)throw l5=!1,t=q6,q6=null,t;return c5&1&&t.tag!==0&&Lc(),x=t.pendingLanes,x&1?t===W6?r2++:(r2=0,W6=t):r2=0,rl(),null}function Lc(){if(ja!==null){var t=P_(c5),o=_o.transition,u=Ln;try{if(_o.transition=null,Ln=16>t?16:t,ja===null)var p=!1;else{if(t=ja,ja=null,c5=0,_n&6)throw Error(ut(331));var _=_n;for(_n|=4,At=t.current;At!==null;){var x=At,E=x.child;if(At.flags&16){var s=x.deletions;if(s!==null){for(var P=0;P<s.length;P++){var R=s[P];for(At=R;At!==null;){var U=At;switch(U.tag){case 0:case 11:case 15:t2(8,U,x)}var V=U.child;if(V!==null)V.return=U,At=V;else for(;At!==null;){U=At;var q=U.sibling,ve=U.return;if(Ng(U),U===R){At=null;break}if(q!==null){q.return=ve,At=q;break}At=ve}}}var we=x.alternate;if(we!==null){var xe=we.child;if(xe!==null){we.child=null;do{var Ie=xe.sibling;xe.sibling=null,xe=Ie}while(xe!==null)}}At=x}}if(x.subtreeFlags&2064&&E!==null)E.return=x,At=E;else e:for(;At!==null;){if(x=At,x.flags&2048)switch(x.tag){case 0:case 11:case 15:t2(9,x,x.return)}var te=x.sibling;if(te!==null){te.return=x.return,At=te;break e}At=x.return}}var ne=t.current;for(At=ne;At!==null;){E=At;var se=E.child;if(E.subtreeFlags&2064&&se!==null)se.return=E,At=se;else e:for(E=ne;At!==null;){if(s=At,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:z5(9,s)}}catch(Be){dr(s,s.return,Be)}if(s===E){At=null;break e}var Se=s.sibling;if(Se!==null){Se.return=s.return,At=Se;break e}At=s.return}}if(_n=_,rl(),_s&&typeof _s.onPostCommitFiberRoot=="function")try{_s.onPostCommitFiberRoot(E5,t)}catch{}p=!0}return p}finally{Ln=u,_o.transition=o}}return!1}function q9(t,o,u){o=Vc(u,o),o=Ag(t,o,1),t=qa(t,o,1),o=hi(),t!==null&&(A2(t,1,o),ki(t,o))}function dr(t,o,u){if(t.tag===3)q9(t,t,u);else for(;o!==null;){if(o.tag===3){q9(o,t,u);break}else if(o.tag===1){var p=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Wa===null||!Wa.has(p))){t=Vc(u,t),t=Ig(o,t,1),o=qa(o,t,1),t=hi(),o!==null&&(A2(o,1,t),ki(o,t));break}}o=o.return}}function zT(t,o,u){var p=t.pingCache;p!==null&&p.delete(o),o=hi(),t.pingedLanes|=t.suspendedLanes&u,Br===t&&(Gr&u)===u&&(Ir===4||Ir===3&&(Gr&130023424)===Gr&&500>gr()-Hp?Yl(t,0):Wp|=u),ki(t,o)}function Kg(t,o){o===0&&(t.mode&1?(o=h3,h3<<=1,!(h3&130023424)&&(h3=4194304)):o=1);var u=hi();t=Ks(t,o),t!==null&&(A2(t,o,u),ki(t,u))}function LT(t){var o=t.memoizedState,u=0;o!==null&&(u=o.retryLane),Kg(t,u)}function DT(t,o){var u=0;switch(t.tag){case 13:var p=t.stateNode,_=t.memoizedState;_!==null&&(u=_.retryLane);break;case 19:p=t.stateNode;break;default:throw Error(ut(314))}p!==null&&p.delete(o),Kg(t,u)}var Yg;Yg=function(t,o,u){if(t!==null)if(t.memoizedProps!==o.pendingProps||Ai.current)Pi=!0;else{if(!(t.lanes&u)&&!(o.flags&128))return Pi=!1,wT(t,o,u);Pi=!!(t.flags&131072)}else Pi=!1,Xn&&o.flags&1048576&&eg(o,e5,o.index);switch(o.lanes=0,o.tag){case 2:var p=o.type;R3(t,o),t=o.pendingProps;var _=Oc(o,oi.current);zc(o,u),_=jp(null,o,p,t,_,u);var x=Vp();return o.flags|=1,typeof _=="object"&&_!==null&&typeof _.render=="function"&&_.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Ii(p)?(x=!0,J3(o)):x=!1,o.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,Fp(o),_.updater=I5,o.stateNode=_,_._reactInternals=o,R6(o,p,t,u),o=O6(null,o,p,!0,x,u)):(o.tag=0,Xn&&x&&Ap(o),ci(null,o,_,u),o=o.child),o;case 16:p=o.elementType;e:{switch(R3(t,o),t=o.pendingProps,_=p._init,p=_(p._payload),o.type=p,_=o.tag=FT(p),t=$o(p,t),_){case 0:o=B6(null,o,p,t,u);break e;case 1:o=F9(null,o,p,t,u);break e;case 11:o=D9(null,o,p,t,u);break e;case 14:o=R9(null,o,p,$o(p.type,t),u);break e}throw Error(ut(306,p,""))}return o;case 0:return p=o.type,_=o.pendingProps,_=o.elementType===p?_:$o(p,_),B6(t,o,p,_,u);case 1:return p=o.type,_=o.pendingProps,_=o.elementType===p?_:$o(p,_),F9(t,o,p,_,u);case 3:e:{if(Dg(o),t===null)throw Error(ut(387));p=o.pendingProps,x=o.memoizedState,_=x.element,ig(t,o),r5(o,p,null,u);var E=o.memoizedState;if(p=E.element,x.isDehydrated)if(x={element:p,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},o.updateQueue.baseState=x,o.memoizedState=x,o.flags&256){_=Vc(Error(ut(423)),o),o=B9(t,o,p,u,_);break e}else if(p!==_){_=Vc(Error(ut(424)),o),o=B9(t,o,p,u,_);break e}else for($i=Za(o.stateNode.containerInfo.firstChild),Zi=o,Xn=!0,Wo=null,u=lg(o,null,p,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Uc(),p===_){o=Ys(t,o,u);break e}ci(t,o,p,u)}o=o.child}return o;case 5:return cg(o),t===null&&z6(o),p=o.type,_=o.pendingProps,x=t!==null?t.memoizedProps:null,E=_.children,C6(p,_)?E=null:x!==null&&C6(p,x)&&(o.flags|=32),Lg(t,o),ci(t,o,E,u),o.child;case 6:return t===null&&z6(o),null;case 13:return Rg(t,o,u);case 4:return Bp(o,o.stateNode.containerInfo),p=o.pendingProps,t===null?o.child=Nc(o,null,p,u):ci(t,o,p,u),o.child;case 11:return p=o.type,_=o.pendingProps,_=o.elementType===p?_:$o(p,_),D9(t,o,p,_,u);case 7:return ci(t,o,o.pendingProps,u),o.child;case 8:return ci(t,o,o.pendingProps.children,u),o.child;case 12:return ci(t,o,o.pendingProps.children,u),o.child;case 10:e:{if(p=o.type._context,_=o.pendingProps,x=o.memoizedProps,E=_.value,Un(t5,p._currentValue),p._currentValue=E,x!==null)if(Yo(x.value,E)){if(x.children===_.children&&!Ai.current){o=Ys(t,o,u);break e}}else for(x=o.child,x!==null&&(x.return=o);x!==null;){var s=x.dependencies;if(s!==null){E=x.child;for(var P=s.firstContext;P!==null;){if(P.context===p){if(x.tag===1){P=qs(-1,u&-u),P.tag=2;var R=x.updateQueue;if(R!==null){R=R.shared;var U=R.pending;U===null?P.next=P:(P.next=U.next,U.next=P),R.pending=P}}x.lanes|=u,P=x.alternate,P!==null&&(P.lanes|=u),L6(x.return,u,o),s.lanes|=u;break}P=P.next}}else if(x.tag===10)E=x.type===o.type?null:x.child;else if(x.tag===18){if(E=x.return,E===null)throw Error(ut(341));E.lanes|=u,s=E.alternate,s!==null&&(s.lanes|=u),L6(E,u,o),E=x.sibling}else E=x.child;if(E!==null)E.return=x;else for(E=x;E!==null;){if(E===o){E=null;break}if(x=E.sibling,x!==null){x.return=E.return,E=x;break}E=E.return}x=E}ci(t,o,_.children,u),o=o.child}return o;case 9:return _=o.type,p=o.pendingProps.children,zc(o,u),_=yo(_),p=p(_),o.flags|=1,ci(t,o,p,u),o.child;case 14:return p=o.type,_=$o(p,o.pendingProps),_=$o(p.type,_),R9(t,o,p,_,u);case 15:return kg(t,o,o.type,o.pendingProps,u);case 17:return p=o.type,_=o.pendingProps,_=o.elementType===p?_:$o(p,_),R3(t,o),o.tag=1,Ii(p)?(t=!0,J3(o)):t=!1,zc(o,u),sg(o,p,_),R6(o,p,_,u),O6(null,o,p,!0,t,u);case 19:return Fg(t,o,u);case 22:return zg(t,o,u)}throw Error(ut(156,o.tag))};function Jg(t,o){return E_(t,o)}function RT(t,o,u,p){this.tag=t,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mo(t,o,u,p){return new RT(t,o,u,p)}function Jp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function FT(t){if(typeof t=="function")return Jp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===gp)return 11;if(t===yp)return 14}return 2}function Xa(t,o){var u=t.alternate;return u===null?(u=mo(t.tag,o,t.key,t.mode),u.elementType=t.elementType,u.type=t.type,u.stateNode=t.stateNode,u.alternate=t,t.alternate=u):(u.pendingProps=o,u.type=t.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=t.flags&14680064,u.childLanes=t.childLanes,u.lanes=t.lanes,u.child=t.child,u.memoizedProps=t.memoizedProps,u.memoizedState=t.memoizedState,u.updateQueue=t.updateQueue,o=t.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=t.sibling,u.index=t.index,u.ref=t.ref,u}function O3(t,o,u,p,_,x){var E=2;if(p=t,typeof t=="function")Jp(t)&&(E=1);else if(typeof t=="string")E=5;else e:switch(t){case fc:return Jl(u.children,_,x,o);case _p:E=8,_|=8;break;case o6:return t=mo(12,u,o,_|2),t.elementType=o6,t.lanes=x,t;case s6:return t=mo(13,u,o,_),t.elementType=s6,t.lanes=x,t;case a6:return t=mo(19,u,o,_),t.elementType=a6,t.lanes=x,t;case a_:return D5(u,_,x,o);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case o_:E=10;break e;case s_:E=9;break e;case gp:E=11;break e;case yp:E=14;break e;case Fa:E=16,p=null;break e}throw Error(ut(130,t==null?t:typeof t,""))}return o=mo(E,u,o,_),o.elementType=t,o.type=p,o.lanes=x,o}function Jl(t,o,u,p){return t=mo(7,t,p,o),t.lanes=u,t}function D5(t,o,u,p){return t=mo(22,t,p,o),t.elementType=a_,t.lanes=u,t.stateNode={isHidden:!1},t}function q4(t,o,u){return t=mo(6,t,null,o),t.lanes=u,t}function W4(t,o,u){return o=mo(4,t.children!==null?t.children:[],t.key,o),o.lanes=u,o.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},o}function BT(t,o,u,p,_){this.tag=o,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=C4(0),this.expirationTimes=C4(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=C4(0),this.identifierPrefix=p,this.onRecoverableError=_,this.mutableSourceEagerHydrationData=null}function Qp(t,o,u,p,_,x,E,s,P){return t=new BT(t,o,u,s,P),o===1?(o=1,x===!0&&(o|=8)):o=0,x=mo(3,null,null,o),t.current=x,x.stateNode=t,x.memoizedState={element:p,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fp(x),t}function OT(t,o,u){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pc,key:p==null?null:""+p,children:t,containerInfo:o,implementation:u}}function Qg(t){if(!t)return Ja;t=t._reactInternals;e:{if(s1(t)!==t||t.tag!==1)throw Error(ut(170));var o=t;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Ii(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(ut(171))}if(t.tag===1){var u=t.type;if(Ii(u))return J_(t,u,o)}return o}function ey(t,o,u,p,_,x,E,s,P){return t=Qp(u,p,!0,t,_,x,E,s,P),t.context=Qg(null),u=t.current,p=hi(),_=Ha(u),x=qs(p,_),x.callback=o??null,qa(u,x,_),t.current.lanes=_,A2(t,_,p),ki(t,p),t}function R5(t,o,u,p){var _=o.current,x=hi(),E=Ha(_);return u=Qg(u),o.context===null?o.context=u:o.pendingContext=u,o=qs(x,E),o.payload={element:t},p=p===void 0?null:p,p!==null&&(o.callback=p),t=qa(_,o,E),t!==null&&(Ko(t,_,E,x),z3(t,_,E)),E}function h5(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function W9(t,o){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var u=t.retryLane;t.retryLane=u!==0&&u<o?u:o}}function e7(t,o){W9(t,o),(t=t.alternate)&&W9(t,o)}function UT(){return null}var ty=typeof reportError=="function"?reportError:function(t){console.error(t)};function t7(t){this._internalRoot=t}F5.prototype.render=t7.prototype.render=function(t){var o=this._internalRoot;if(o===null)throw Error(ut(409));R5(t,o,null,null)};F5.prototype.unmount=t7.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var o=t.containerInfo;r1(function(){R5(null,t,null,null)}),o[Xs]=null}};function F5(t){this._internalRoot=t}F5.prototype.unstable_scheduleHydration=function(t){if(t){var o=k_();t={blockedOn:null,target:t,priority:o};for(var u=0;u<Oa.length&&o!==0&&o<Oa[u].priority;u++);Oa.splice(u,0,t),u===0&&L_(t)}};function n7(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function B5(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function H9(){}function NT(t,o,u,p,_){if(_){if(typeof p=="function"){var x=p;p=function(){var R=h5(E);x.call(R)}}var E=ey(o,p,t,0,null,!1,!1,"",H9);return t._reactRootContainer=E,t[Xs]=E.current,f2(t.nodeType===8?t.parentNode:t),r1(),E}for(;_=t.lastChild;)t.removeChild(_);if(typeof p=="function"){var s=p;p=function(){var R=h5(P);s.call(R)}}var P=Qp(t,0,!1,null,null,!1,!1,"",H9);return t._reactRootContainer=P,t[Xs]=P.current,f2(t.nodeType===8?t.parentNode:t),r1(function(){R5(o,P,u,p)}),P}function O5(t,o,u,p,_){var x=u._reactRootContainer;if(x){var E=x;if(typeof _=="function"){var s=_;_=function(){var P=h5(E);s.call(P)}}R5(o,E,t,_)}else E=NT(u,o,t,_,p);return h5(E)}A_=function(t){switch(t.tag){case 3:var o=t.stateNode;if(o.current.memoizedState.isDehydrated){var u=q0(o.pendingLanes);u!==0&&(wp(o,u|1),ki(o,gr()),!(_n&6)&&(Gc=gr()+500,rl()))}break;case 13:r1(function(){var p=Ks(t,1);if(p!==null){var _=hi();Ko(p,t,1,_)}}),e7(t,1)}};bp=function(t){if(t.tag===13){var o=Ks(t,134217728);if(o!==null){var u=hi();Ko(o,t,134217728,u)}e7(t,134217728)}};I_=function(t){if(t.tag===13){var o=Ha(t),u=Ks(t,o);if(u!==null){var p=hi();Ko(u,t,o,p)}e7(t,o)}};k_=function(){return Ln};z_=function(t,o){var u=Ln;try{return Ln=t,o()}finally{Ln=u}};g6=function(t,o,u){switch(o){case"input":if(u6(t,u),o=u.name,u.type==="radio"&&o!=null){for(u=t;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var p=u[o];if(p!==t&&p.form===t.form){var _=P5(p);if(!_)throw Error(ut(90));c_(p),u6(p,_)}}}break;case"textarea":h_(t,u);break;case"select":o=u.value,o!=null&&Pc(t,!!u.multiple,o,!1)}};y_=Xp;v_=r1;var jT={usingClientEntryPoint:!1,Events:[k2,yc,P5,__,g_,Xp]},F0={findFiberByHostInstance:ql,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},VT={bundleType:F0.bundleType,version:F0.version,rendererPackageName:F0.rendererPackageName,rendererConfig:F0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Js.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=b_(t),t===null?null:t.stateNode},findFiberByHostInstance:F0.findFiberByHostInstance||UT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var b3=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!b3.isDisabled&&b3.supportsFiber)try{E5=b3.inject(VT),_s=b3}catch{}}Wi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jT;Wi.createPortal=function(t,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!n7(o))throw Error(ut(200));return OT(t,o,null,u)};Wi.createRoot=function(t,o){if(!n7(t))throw Error(ut(299));var u=!1,p="",_=ty;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(_=o.onRecoverableError)),o=Qp(t,1,!1,null,null,u,!1,p,_),t[Xs]=o.current,f2(t.nodeType===8?t.parentNode:t),new t7(o)};Wi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var o=t._reactInternals;if(o===void 0)throw typeof t.render=="function"?Error(ut(188)):(t=Object.keys(t).join(","),Error(ut(268,t)));return t=b_(o),t=t===null?null:t.stateNode,t};Wi.flushSync=function(t){return r1(t)};Wi.hydrate=function(t,o,u){if(!B5(o))throw Error(ut(200));return O5(null,t,o,!0,u)};Wi.hydrateRoot=function(t,o,u){if(!n7(t))throw Error(ut(405));var p=u!=null&&u.hydratedSources||null,_=!1,x="",E=ty;if(u!=null&&(u.unstable_strictMode===!0&&(_=!0),u.identifierPrefix!==void 0&&(x=u.identifierPrefix),u.onRecoverableError!==void 0&&(E=u.onRecoverableError)),o=ey(o,null,t,1,u??null,_,!1,x,E),t[Xs]=o.current,f2(t),p)for(t=0;t<p.length;t++)u=p[t],_=u._getVersion,_=_(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,_]:o.mutableSourceEagerHydrationData.push(u,_);return new F5(o)};Wi.render=function(t,o,u){if(!B5(o))throw Error(ut(200));return O5(null,t,o,!1,u)};Wi.unmountComponentAtNode=function(t){if(!B5(t))throw Error(ut(40));return t._reactRootContainer?(r1(function(){O5(null,null,t,!1,function(){t._reactRootContainer=null,t[Xs]=null})}),!0):!1};Wi.unstable_batchedUpdates=Xp;Wi.unstable_renderSubtreeIntoContainer=function(t,o,u,p){if(!B5(u))throw Error(ut(200));if(t==null||t._reactInternals===void 0)throw Error(ut(38));return O5(t,o,u,!1,p)};Wi.version="18.2.0-next-9e3b772b8-20220608";function ny(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ny)}catch(t){console.error(t)}}ny(),e_.exports=Wi;var L2=e_.exports;const GT=el(L2),$T=lp({__proto__:null,default:GT},[L2]);var X9=L2;G8.createRoot=X9.createRoot,G8.hydrateRoot=X9.hydrateRoot;/**
 * @remix-run/router v1.15.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pr(){return pr=Object.assign?Object.assign.bind():function(t){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var p in u)Object.prototype.hasOwnProperty.call(u,p)&&(t[p]=u[p])}return t},pr.apply(this,arguments)}var _r;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(_r||(_r={}));const K9="popstate";function ZT(t){t===void 0&&(t={});function o(p,_){let{pathname:x,search:E,hash:s}=p.location;return T2("",{pathname:x,search:E,hash:s},_.state&&_.state.usr||null,_.state&&_.state.key||"default")}function u(p,_){return typeof _=="string"?_:i1(_)}return WT(o,u,null,t)}function cn(t,o){if(t===!1||t===null||typeof t>"u")throw new Error(o)}function $c(t,o){if(!t){typeof console<"u"&&console.warn(o);try{throw new Error(o)}catch{}}}function qT(){return Math.random().toString(36).substr(2,8)}function Y9(t,o){return{usr:t.state,key:t.key,idx:o}}function T2(t,o,u,p){return u===void 0&&(u=null),pr({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof o=="string"?Qs(o):o,{state:u,key:o&&o.key||p||qT()})}function i1(t){let{pathname:o="/",search:u="",hash:p=""}=t;return u&&u!=="?"&&(o+=u.charAt(0)==="?"?u:"?"+u),p&&p!=="#"&&(o+=p.charAt(0)==="#"?p:"#"+p),o}function Qs(t){let o={};if(t){let u=t.indexOf("#");u>=0&&(o.hash=t.substr(u),t=t.substr(0,u));let p=t.indexOf("?");p>=0&&(o.search=t.substr(p),t=t.substr(0,p)),t&&(o.pathname=t)}return o}function WT(t,o,u,p){p===void 0&&(p={});let{window:_=document.defaultView,v5Compat:x=!1}=p,E=_.history,s=_r.Pop,P=null,R=U();R==null&&(R=0,E.replaceState(pr({},E.state,{idx:R}),""));function U(){return(E.state||{idx:null}).idx}function V(){s=_r.Pop;let Ie=U(),te=Ie==null?null:Ie-R;R=Ie,P&&P({action:s,location:xe.location,delta:te})}function q(Ie,te){s=_r.Push;let ne=T2(xe.location,Ie,te);u&&u(ne,Ie),R=U()+1;let se=Y9(ne,R),Se=xe.createHref(ne);try{E.pushState(se,"",Se)}catch(Be){if(Be instanceof DOMException&&Be.name==="DataCloneError")throw Be;_.location.assign(Se)}x&&P&&P({action:s,location:xe.location,delta:1})}function ve(Ie,te){s=_r.Replace;let ne=T2(xe.location,Ie,te);u&&u(ne,Ie),R=U();let se=Y9(ne,R),Se=xe.createHref(ne);E.replaceState(se,"",Se),x&&P&&P({action:s,location:xe.location,delta:0})}function we(Ie){let te=_.location.origin!=="null"?_.location.origin:_.location.href,ne=typeof Ie=="string"?Ie:i1(Ie);return ne=ne.replace(/ $/,"%20"),cn(te,"No window.location.(origin|href) available to create URL for href: "+ne),new URL(ne,te)}let xe={get action(){return s},get location(){return t(_,E)},listen(Ie){if(P)throw new Error("A history only accepts one active listener");return _.addEventListener(K9,V),P=Ie,()=>{_.removeEventListener(K9,V),P=null}},createHref(Ie){return o(_,Ie)},createURL:we,encodeLocation(Ie){let te=we(Ie);return{pathname:te.pathname,search:te.search,hash:te.hash}},push:q,replace:ve,go(Ie){return E.go(Ie)}};return xe}var hr;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(hr||(hr={}));const HT=new Set(["lazy","caseSensitive","path","id","index","children"]);function XT(t){return t.index===!0}function K6(t,o,u,p){return u===void 0&&(u=[]),p===void 0&&(p={}),t.map((_,x)=>{let E=[...u,x],s=typeof _.id=="string"?_.id:E.join("-");if(cn(_.index!==!0||!_.children,"Cannot specify children on an index route"),cn(!p[s],'Found a route id collision on id "'+s+`".  Route id's must be globally unique within Data Router usages`),XT(_)){let P=pr({},_,o(_),{id:s});return p[s]=P,P}else{let P=pr({},_,o(_),{id:s,children:void 0});return p[s]=P,_.children&&(P.children=K6(_.children,o,E,p)),P}})}function Sc(t,o,u){u===void 0&&(u="/");let p=typeof o=="string"?Qs(o):o,_=Jc(p.pathname||"/",u);if(_==null)return null;let x=ry(t);YT(x);let E=null;for(let s=0;E==null&&s<x.length;++s){let P=cE(_);E=sE(x[s],P)}return E}function KT(t,o){let{route:u,pathname:p,params:_}=t;return{id:u.id,pathname:p,params:_,data:o[u.id],handle:u.handle}}function ry(t,o,u,p){o===void 0&&(o=[]),u===void 0&&(u=[]),p===void 0&&(p="");let _=(x,E,s)=>{let P={relativePath:s===void 0?x.path||"":s,caseSensitive:x.caseSensitive===!0,childrenIndex:E,route:x};P.relativePath.startsWith("/")&&(cn(P.relativePath.startsWith(p),'Absolute route path "'+P.relativePath+'" nested under path '+('"'+p+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),P.relativePath=P.relativePath.slice(p.length));let R=Ws([p,P.relativePath]),U=u.concat(P);x.children&&x.children.length>0&&(cn(x.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+R+'".')),ry(x.children,o,U,R)),!(x.path==null&&!x.index)&&o.push({path:R,score:iE(R,x.index),routesMeta:U})};return t.forEach((x,E)=>{var s;if(x.path===""||!((s=x.path)!=null&&s.includes("?")))_(x,E);else for(let P of iy(x.path))_(x,E,P)}),o}function iy(t){let o=t.split("/");if(o.length===0)return[];let[u,...p]=o,_=u.endsWith("?"),x=u.replace(/\?$/,"");if(p.length===0)return _?[x,""]:[x];let E=iy(p.join("/")),s=[];return s.push(...E.map(P=>P===""?x:[x,P].join("/"))),_&&s.push(...E),s.map(P=>t.startsWith("/")&&P===""?"/":P)}function YT(t){t.sort((o,u)=>o.score!==u.score?u.score-o.score:oE(o.routesMeta.map(p=>p.childrenIndex),u.routesMeta.map(p=>p.childrenIndex)))}const JT=/^:[\w-]+$/,QT=3,eE=2,tE=1,nE=10,rE=-2,J9=t=>t==="*";function iE(t,o){let u=t.split("/"),p=u.length;return u.some(J9)&&(p+=rE),o&&(p+=eE),u.filter(_=>!J9(_)).reduce((_,x)=>_+(JT.test(x)?QT:x===""?tE:nE),p)}function oE(t,o){return t.length===o.length&&t.slice(0,-1).every((p,_)=>p===o[_])?t[t.length-1]-o[o.length-1]:0}function sE(t,o){let{routesMeta:u}=t,p={},_="/",x=[];for(let E=0;E<u.length;++E){let s=u[E],P=E===u.length-1,R=_==="/"?o:o.slice(_.length)||"/",U=aE({path:s.relativePath,caseSensitive:s.caseSensitive,end:P},R);if(!U)return null;Object.assign(p,U.params);let V=s.route;x.push({params:p,pathname:Ws([_,U.pathname]),pathnameBase:dE(Ws([_,U.pathnameBase])),route:V}),U.pathnameBase!=="/"&&(_=Ws([_,U.pathnameBase]))}return x}function aE(t,o){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[u,p]=lE(t.path,t.caseSensitive,t.end),_=o.match(u);if(!_)return null;let x=_[0],E=x.replace(/(.)\/+$/,"$1"),s=_.slice(1);return{params:p.reduce((R,U,V)=>{let{paramName:q,isOptional:ve}=U;if(q==="*"){let xe=s[V]||"";E=x.slice(0,x.length-xe.length).replace(/(.)\/+$/,"$1")}const we=s[V];return ve&&!we?R[q]=void 0:R[q]=(we||"").replace(/%2F/g,"/"),R},{}),pathname:x,pathnameBase:E,pattern:t}}function lE(t,o,u){o===void 0&&(o=!1),u===void 0&&(u=!0),$c(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let p=[],_="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(E,s,P)=>(p.push({paramName:s,isOptional:P!=null}),P?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(p.push({paramName:"*"}),_+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):u?_+="\\/*$":t!==""&&t!=="/"&&(_+="(?:(?=\\/|$))"),[new RegExp(_,o?void 0:"i"),p]}function cE(t){try{return t.split("/").map(o=>decodeURIComponent(o).replace(/\//g,"%2F")).join("/")}catch(o){return $c(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+o+").")),t}}function Jc(t,o){if(o==="/")return t;if(!t.toLowerCase().startsWith(o.toLowerCase()))return null;let u=o.endsWith("/")?o.length-1:o.length,p=t.charAt(u);return p&&p!=="/"?null:t.slice(u)||"/"}function uE(t,o){o===void 0&&(o="/");let{pathname:u,search:p="",hash:_=""}=typeof t=="string"?Qs(t):t;return{pathname:u?u.startsWith("/")?u:hE(u,o):o,search:pE(p),hash:fE(_)}}function hE(t,o){let u=o.replace(/\/+$/,"").split("/");return t.split("/").forEach(_=>{_===".."?u.length>1&&u.pop():_!=="."&&u.push(_)}),u.length>1?u.join("/"):"/"}function H4(t,o,u,p){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+o+"` field ["+JSON.stringify(p)+"].  Please separate it out to the ")+("`to."+u+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function oy(t){return t.filter((o,u)=>u===0||o.route.path&&o.route.path.length>0)}function r7(t,o){let u=oy(t);return o?u.map((p,_)=>_===t.length-1?p.pathname:p.pathnameBase):u.map(p=>p.pathnameBase)}function i7(t,o,u,p){p===void 0&&(p=!1);let _;typeof t=="string"?_=Qs(t):(_=pr({},t),cn(!_.pathname||!_.pathname.includes("?"),H4("?","pathname","search",_)),cn(!_.pathname||!_.pathname.includes("#"),H4("#","pathname","hash",_)),cn(!_.search||!_.search.includes("#"),H4("#","search","hash",_)));let x=t===""||_.pathname==="",E=x?"/":_.pathname,s;if(E==null)s=u;else{let V=o.length-1;if(!p&&E.startsWith("..")){let q=E.split("/");for(;q[0]==="..";)q.shift(),V-=1;_.pathname=q.join("/")}s=V>=0?o[V]:"/"}let P=uE(_,s),R=E&&E!=="/"&&E.endsWith("/"),U=(x||E===".")&&u.endsWith("/");return!P.pathname.endsWith("/")&&(R||U)&&(P.pathname+="/"),P}const Ws=t=>t.join("/").replace(/\/\/+/g,"/"),dE=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),pE=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,fE=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class o7{constructor(o,u,p,_){_===void 0&&(_=!1),this.status=o,this.statusText=u||"",this.internal=_,p instanceof Error?(this.data=p.toString(),this.error=p):this.data=p}}function sy(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ay=["post","put","patch","delete"],mE=new Set(ay),_E=["get",...ay],gE=new Set(_E),yE=new Set([301,302,303,307,308]),vE=new Set([307,308]),X4={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},xE={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},B0={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},ly=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wE=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),cy="remix-router-transitions";function bE(t){const o=t.window?t.window:typeof window<"u"?window:void 0,u=typeof o<"u"&&typeof o.document<"u"&&typeof o.document.createElement<"u",p=!u;cn(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let _;if(t.mapRouteProperties)_=t.mapRouteProperties;else if(t.detectErrorBoundary){let j=t.detectErrorBoundary;_=W=>({hasErrorBoundary:j(W)})}else _=wE;let x={},E=K6(t.routes,_,void 0,x),s,P=t.basename||"/",R=pr({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1},t.future),U=null,V=new Set,q=null,ve=null,we=null,xe=t.hydrationData!=null,Ie=Sc(E,t.history.location,P),te=null;if(Ie==null){let j=ho(404,{pathname:t.history.location.pathname}),{matches:W,route:re}=sm(E);Ie=W,te={[re.id]:j}}let ne,se=Ie.some(j=>j.route.lazy),Se=Ie.some(j=>j.route.loader);if(se)ne=!1;else if(!Se)ne=!0;else if(R.v7_partialHydration){let j=t.hydrationData?t.hydrationData.loaderData:null,W=t.hydrationData?t.hydrationData.errors:null,re=he=>he.route.loader?he.route.loader.hydrate===!0?!1:j&&j[he.route.id]!==void 0||W&&W[he.route.id]!==void 0:!0;if(W){let he=Ie.findIndex(le=>W[le.route.id]!==void 0);ne=Ie.slice(0,he+1).every(re)}else ne=Ie.every(re)}else ne=t.hydrationData!=null;let Be,ye={historyAction:t.history.action,location:t.history.location,matches:Ie,initialized:ne,navigation:X4,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||te,fetchers:new Map,blockers:new Map},Ye=_r.Pop,lt=!1,Me,Mt=!1,Ut=new Map,bt=null,Bt=!1,Ke=!1,Ge=[],Je=[],Xe=new Map,Ce=0,st=-1,ht=new Map,Tt=new Set,Rt=new Map,Nt=new Map,Yt=new Set,Yn=new Map,In=new Map,Nn=!1;function xo(){if(U=t.history.listen(j=>{let{action:W,location:re,delta:he}=j;if(Nn){Nn=!1;return}$c(In.size===0||he!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let le=Ji({currentLocation:ye.location,nextLocation:re,historyAction:W});if(le&&he!=null){Nn=!0,t.history.go(he*-1),gi(le,{state:"blocked",location:re,proceed(){gi(le,{state:"proceeding",proceed:void 0,reset:void 0,location:re}),t.history.go(he)},reset(){let be=new Map(ye.blockers);be.set(le,B0),Ft({blockers:be})}});return}return dn(W,re)}),u){LE(o,Ut);let j=()=>DE(o,Ut);o.addEventListener("pagehide",j),bt=()=>o.removeEventListener("pagehide",j)}return ye.initialized||dn(_r.Pop,ye.location,{initialHydration:!0}),Be}function wo(){U&&U(),bt&&bt(),V.clear(),Me&&Me.abort(),ye.fetchers.forEach((j,W)=>Er(W)),ye.blockers.forEach((j,W)=>Li(W))}function Jo(j){return V.add(j),()=>V.delete(j)}function Ft(j,W){W===void 0&&(W={}),ye=pr({},ye,j);let re=[],he=[];R.v7_fetcherPersist&&ye.fetchers.forEach((le,be)=>{le.state==="idle"&&(Yt.has(be)?he.push(be):re.push(be))}),[...V].forEach(le=>le(ye,{deletedFetchers:he,unstable_viewTransitionOpts:W.viewTransitionOpts,unstable_flushSync:W.flushSync===!0})),R.v7_fetcherPersist&&(re.forEach(le=>ye.fetchers.delete(le)),he.forEach(le=>Er(le)))}function fi(j,W,re){var he,le;let{flushSync:be}=re===void 0?{}:re,Oe=ye.actionData!=null&&ye.navigation.formMethod!=null&&qo(ye.navigation.formMethod)&&ye.navigation.state==="loading"&&((he=j.state)==null?void 0:he._isRedirect)!==!0,je;W.actionData?Object.keys(W.actionData).length>0?je=W.actionData:je=null:Oe?je=ye.actionData:je=null;let De=W.loaderData?om(ye.loaderData,W.loaderData,W.matches||[],W.errors):ye.loaderData,gt=ye.blockers;gt.size>0&&(gt=new Map(gt),gt.forEach((Et,Dt)=>gt.set(Dt,B0)));let It=lt===!0||ye.navigation.formMethod!=null&&qo(ye.navigation.formMethod)&&((le=j.state)==null?void 0:le._isRedirect)!==!0;s&&(E=s,s=void 0),Bt||Ye===_r.Pop||(Ye===_r.Push?t.history.push(j,j.state):Ye===_r.Replace&&t.history.replace(j,j.state));let pt;if(Ye===_r.Pop){let Et=Ut.get(ye.location.pathname);Et&&Et.has(j.pathname)?pt={currentLocation:ye.location,nextLocation:j}:Ut.has(j.pathname)&&(pt={currentLocation:j,nextLocation:ye.location})}else if(Mt){let Et=Ut.get(ye.location.pathname);Et?Et.add(j.pathname):(Et=new Set([j.pathname]),Ut.set(ye.location.pathname,Et)),pt={currentLocation:ye.location,nextLocation:j}}Ft(pr({},W,{actionData:je,loaderData:De,historyAction:Ye,location:j,initialized:!0,navigation:X4,revalidation:"idle",restoreScrollPosition:G(j,W.matches||ye.matches),preventScrollReset:It,blockers:gt}),{viewTransitionOpts:pt,flushSync:be===!0}),Ye=_r.Pop,lt=!1,Mt=!1,Bt=!1,Ke=!1,Ge=[],Je=[]}async function kr(j,W){if(typeof j=="number"){t.history.go(j);return}let re=Y6(ye.location,ye.matches,P,R.v7_prependBasename,j,R.v7_relativeSplatPath,W==null?void 0:W.fromRouteId,W==null?void 0:W.relative),{path:he,submission:le,error:be}=Q9(R.v7_normalizeFormMethod,!1,re,W),Oe=ye.location,je=T2(ye.location,he,W&&W.state);je=pr({},je,t.history.encodeLocation(je));let De=W&&W.replace!=null?W.replace:void 0,gt=_r.Push;De===!0?gt=_r.Replace:De===!1||le!=null&&qo(le.formMethod)&&le.formAction===ye.location.pathname+ye.location.search&&(gt=_r.Replace);let It=W&&"preventScrollReset"in W?W.preventScrollReset===!0:void 0,pt=(W&&W.unstable_flushSync)===!0,Et=Ji({currentLocation:Oe,nextLocation:je,historyAction:gt});if(Et){gi(Et,{state:"blocked",location:je,proceed(){gi(Et,{state:"proceeding",proceed:void 0,reset:void 0,location:je}),kr(j,W)},reset(){let Dt=new Map(ye.blockers);Dt.set(Et,B0),Ft({blockers:Dt})}});return}return await dn(gt,je,{submission:le,pendingError:be,preventScrollReset:It,replace:W&&W.replace,enableViewTransition:W&&W.unstable_viewTransition,flushSync:pt})}function vs(){if(_i(),Ft({revalidation:"loading"}),ye.navigation.state!=="submitting"){if(ye.navigation.state==="idle"){dn(ye.historyAction,ye.location,{startUninterruptedRevalidation:!0});return}dn(Ye||ye.historyAction,ye.navigation.location,{overrideNavigation:ye.navigation})}}async function dn(j,W,re){Me&&Me.abort(),Me=null,Ye=j,Bt=(re&&re.startUninterruptedRevalidation)===!0,N(ye.location,ye.matches),lt=(re&&re.preventScrollReset)===!0,Mt=(re&&re.enableViewTransition)===!0;let he=s||E,le=re&&re.overrideNavigation,be=Sc(he,W,P),Oe=(re&&re.flushSync)===!0;if(!be){let Dt=ho(404,{pathname:W.pathname}),{matches:tn,route:en}=sm(he);Qi(),fi(W,{matches:tn,loaderData:{},errors:{[en.id]:Dt}},{flushSync:Oe});return}if(ye.initialized&&!Ke&&CE(ye.location,W)&&!(re&&re.submission&&qo(re.submission.formMethod))){fi(W,{matches:be},{flushSync:Oe});return}Me=new AbortController;let je=U0(t.history,W,Me.signal,re&&re.submission),De,gt;if(re&&re.pendingError)gt={[i2(be).route.id]:re.pendingError};else if(re&&re.submission&&qo(re.submission.formMethod)){let Dt=await Zr(je,W,re.submission,be,{replace:re.replace,flushSync:Oe});if(Dt.shortCircuited)return;De=Dt.pendingActionData,gt=Dt.pendingActionError,le=K4(W,re.submission),Oe=!1,je=new Request(je.url,{signal:je.signal})}let{shortCircuited:It,loaderData:pt,errors:Et}=await ea(je,W,be,le,re&&re.submission,re&&re.fetcherSubmission,re&&re.replace,re&&re.initialHydration===!0,Oe,De,gt);It||(Me=null,fi(W,pr({matches:be},De?{actionData:De}:{},{loaderData:pt,errors:Et})))}async function Zr(j,W,re,he,le){le===void 0&&(le={}),_i();let be=kE(W,re);Ft({navigation:be},{flushSync:le.flushSync===!0});let Oe,je=Q6(he,W);if(!je.route.action&&!je.route.lazy)Oe={type:hr.error,error:ho(405,{method:j.method,pathname:W.pathname,routeId:je.route.id})};else if(Oe=await O0("action",j,je,he,x,_,P,R.v7_relativeSplatPath),j.signal.aborted)return{shortCircuited:!0};if(Kl(Oe)){let De;return le&&le.replace!=null?De=le.replace:De=Oe.location===ye.location.pathname+ye.location.search,await mi(ye,Oe,{submission:re,replace:De}),{shortCircuited:!0}}if(Mc(Oe)){let De=i2(he,je.route.id);return(le&&le.replace)!==!0&&(Ye=_r.Push),{pendingActionData:{},pendingActionError:{[De.route.id]:Oe.error}}}if(Xl(Oe))throw ho(400,{type:"defer-action"});return{pendingActionData:{[je.route.id]:Oe.data}}}async function ea(j,W,re,he,le,be,Oe,je,De,gt,It){let pt=he||K4(W,le),Et=le||be||cm(pt),Dt=s||E,[tn,en]=em(t.history,ye,re,Et,W,R.v7_partialHydration&&je===!0,Ke,Ge,Je,Yt,Rt,Tt,Dt,P,gt,It);if(Qi(nn=>!(re&&re.some(mn=>mn.route.id===nn))||tn&&tn.some(mn=>mn.route.id===nn)),st=++Ce,tn.length===0&&en.length===0){let nn=bo();return fi(W,pr({matches:re,loaderData:{},errors:It||null},gt?{actionData:gt}:{},nn?{fetchers:new Map(ye.fetchers)}:{}),{flushSync:De}),{shortCircuited:!0}}if(!Bt&&(!R.v7_partialHydration||!je)){en.forEach(mn=>{let fr=ye.fetchers.get(mn.key),Nr=N0(void 0,fr?fr.data:void 0);ye.fetchers.set(mn.key,Nr)});let nn=gt||ye.actionData;Ft(pr({navigation:pt},nn?Object.keys(nn).length===0?{actionData:null}:{actionData:nn}:{},en.length>0?{fetchers:new Map(ye.fetchers)}:{}),{flushSync:De})}en.forEach(nn=>{Xe.has(nn.key)&&qr(nn.key),nn.controller&&Xe.set(nn.key,nn.controller)});let jn=()=>en.forEach(nn=>qr(nn.key));Me&&Me.signal.addEventListener("abort",jn);let{results:Bn,loaderResults:Sr,fetcherResults:kn}=await Qo(ye.matches,re,tn,en,j);if(j.signal.aborted)return{shortCircuited:!0};Me&&Me.signal.removeEventListener("abort",jn),en.forEach(nn=>Xe.delete(nn.key));let Vn=am(Bn);if(Vn){if(Vn.idx>=tn.length){let nn=en[Vn.idx-tn.length].key;Tt.add(nn)}return await mi(ye,Vn.result,{replace:Oe}),{shortCircuited:!0}}let{loaderData:eo,errors:bs}=im(ye,re,tn,Sr,It,en,kn,Yn);Yn.forEach((nn,mn)=>{nn.subscribe(fr=>{(fr||nn.done)&&Yn.delete(mn)})}),R.v7_partialHydration&&je&&ye.errors&&Object.entries(ye.errors).filter(nn=>{let[mn]=nn;return!tn.some(fr=>fr.route.id===mn)}).forEach(nn=>{let[mn,fr]=nn;bs=Object.assign(bs||{},{[mn]:fr})});let na=bo(),Jt=es(st),ts=na||Jt||en.length>0;return pr({loaderData:eo,errors:bs},ts?{fetchers:new Map(ye.fetchers)}:{})}function zi(j,W,re,he){if(p)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Xe.has(j)&&qr(j);let le=(he&&he.unstable_flushSync)===!0,be=s||E,Oe=Y6(ye.location,ye.matches,P,R.v7_prependBasename,re,R.v7_relativeSplatPath,W,he==null?void 0:he.relative),je=Sc(be,Oe,P);if(!je){Xi(j,W,ho(404,{pathname:Oe}),{flushSync:le});return}let{path:De,submission:gt,error:It}=Q9(R.v7_normalizeFormMethod,!0,Oe,he);if(It){Xi(j,W,It,{flushSync:le});return}let pt=Q6(je,De);if(lt=(he&&he.preventScrollReset)===!0,gt&&qo(gt.formMethod)){Or(j,W,De,pt,je,le,gt);return}Rt.set(j,{routeId:W,path:De}),xs(j,W,De,pt,je,le,gt)}async function Or(j,W,re,he,le,be,Oe){if(_i(),Rt.delete(j),!he.route.action&&!he.route.lazy){let mn=ho(405,{method:Oe.formMethod,pathname:re,routeId:W});Xi(j,W,mn,{flushSync:be});return}let je=ye.fetchers.get(j);Ur(j,zE(Oe,je),{flushSync:be});let De=new AbortController,gt=U0(t.history,re,De.signal,Oe);Xe.set(j,De);let It=Ce,pt=await O0("action",gt,he,le,x,_,P,R.v7_relativeSplatPath);if(gt.signal.aborted){Xe.get(j)===De&&Xe.delete(j);return}if(R.v7_fetcherPersist&&Yt.has(j)){if(Kl(pt)||Mc(pt)){Ur(j,Ra(void 0));return}}else{if(Kl(pt))if(Xe.delete(j),st>It){Ur(j,Ra(void 0));return}else return Tt.add(j),Ur(j,N0(Oe)),mi(ye,pt,{fetcherSubmission:Oe});if(Mc(pt)){Xi(j,W,pt.error);return}}if(Xl(pt))throw ho(400,{type:"defer-action"});let Et=ye.navigation.location||ye.location,Dt=U0(t.history,Et,De.signal),tn=s||E,en=ye.navigation.state!=="idle"?Sc(tn,ye.navigation.location,P):ye.matches;cn(en,"Didn't find any matches after fetcher action");let jn=++Ce;ht.set(j,jn);let Bn=N0(Oe,pt.data);ye.fetchers.set(j,Bn);let[Sr,kn]=em(t.history,ye,en,Oe,Et,!1,Ke,Ge,Je,Yt,Rt,Tt,tn,P,{[he.route.id]:pt.data},void 0);kn.filter(mn=>mn.key!==j).forEach(mn=>{let fr=mn.key,Nr=ye.fetchers.get(fr),Di=N0(void 0,Nr?Nr.data:void 0);ye.fetchers.set(fr,Di),Xe.has(fr)&&qr(fr),mn.controller&&Xe.set(fr,mn.controller)}),Ft({fetchers:new Map(ye.fetchers)});let Vn=()=>kn.forEach(mn=>qr(mn.key));De.signal.addEventListener("abort",Vn);let{results:eo,loaderResults:bs,fetcherResults:na}=await Qo(ye.matches,en,Sr,kn,Dt);if(De.signal.aborted)return;De.signal.removeEventListener("abort",Vn),ht.delete(j),Xe.delete(j),kn.forEach(mn=>Xe.delete(mn.key));let Jt=am(eo);if(Jt){if(Jt.idx>=Sr.length){let mn=kn[Jt.idx-Sr.length].key;Tt.add(mn)}return mi(ye,Jt.result)}let{loaderData:ts,errors:nn}=im(ye,ye.matches,Sr,bs,void 0,kn,na,Yn);if(ye.fetchers.has(j)){let mn=Ra(pt.data);ye.fetchers.set(j,mn)}es(jn),ye.navigation.state==="loading"&&jn>st?(cn(Ye,"Expected pending action"),Me&&Me.abort(),fi(ye.navigation.location,{matches:en,loaderData:ts,errors:nn,fetchers:new Map(ye.fetchers)})):(Ft({errors:nn,loaderData:om(ye.loaderData,ts,en,nn),fetchers:new Map(ye.fetchers)}),Ke=!1)}async function xs(j,W,re,he,le,be,Oe){let je=ye.fetchers.get(j);Ur(j,N0(Oe,je?je.data:void 0),{flushSync:be});let De=new AbortController,gt=U0(t.history,re,De.signal);Xe.set(j,De);let It=Ce,pt=await O0("loader",gt,he,le,x,_,P,R.v7_relativeSplatPath);if(Xl(pt)&&(pt=await dy(pt,gt.signal,!0)||pt),Xe.get(j)===De&&Xe.delete(j),!gt.signal.aborted){if(Yt.has(j)){Ur(j,Ra(void 0));return}if(Kl(pt))if(st>It){Ur(j,Ra(void 0));return}else{Tt.add(j),await mi(ye,pt);return}if(Mc(pt)){Xi(j,W,pt.error);return}cn(!Xl(pt),"Unhandled fetcher deferred data"),Ur(j,Ra(pt.data))}}async function mi(j,W,re){let{submission:he,fetcherSubmission:le,replace:be}=re===void 0?{}:re;W.revalidate&&(Ke=!0);let Oe=T2(j.location,W.location,{_isRedirect:!0});if(cn(Oe,"Expected a location on the redirect navigation"),u){let Et=!1;if(W.reloadDocument)Et=!0;else if(ly.test(W.location)){const Dt=t.history.createURL(W.location);Et=Dt.origin!==o.location.origin||Jc(Dt.pathname,P)==null}if(Et){be?o.location.replace(W.location):o.location.assign(W.location);return}}Me=null;let je=be===!0?_r.Replace:_r.Push,{formMethod:De,formAction:gt,formEncType:It}=j.navigation;!he&&!le&&De&&gt&&It&&(he=cm(j.navigation));let pt=he||le;if(vE.has(W.status)&&pt&&qo(pt.formMethod))await dn(je,Oe,{submission:pr({},pt,{formAction:W.location}),preventScrollReset:lt});else{let Et=K4(Oe,he);await dn(je,Oe,{overrideNavigation:Et,fetcherSubmission:le,preventScrollReset:lt})}}async function Qo(j,W,re,he,le){let be=await Promise.all([...re.map(De=>O0("loader",le,De,W,x,_,P,R.v7_relativeSplatPath)),...he.map(De=>De.matches&&De.match&&De.controller?O0("loader",U0(t.history,De.path,De.controller.signal),De.match,De.matches,x,_,P,R.v7_relativeSplatPath):{type:hr.error,error:ho(404,{pathname:De.path})})]),Oe=be.slice(0,re.length),je=be.slice(re.length);return await Promise.all([lm(j,re,Oe,Oe.map(()=>le.signal),!1,ye.loaderData),lm(j,he.map(De=>De.match),je,he.map(De=>De.controller?De.controller.signal:null),!0)]),{results:be,loaderResults:Oe,fetcherResults:je}}function _i(){Ke=!0,Ge.push(...Qi()),Rt.forEach((j,W)=>{Xe.has(W)&&(Je.push(W),qr(W))})}function Ur(j,W,re){re===void 0&&(re={}),ye.fetchers.set(j,W),Ft({fetchers:new Map(ye.fetchers)},{flushSync:(re&&re.flushSync)===!0})}function Xi(j,W,re,he){he===void 0&&(he={});let le=i2(ye.matches,W);Er(j),Ft({errors:{[le.route.id]:re},fetchers:new Map(ye.fetchers)},{flushSync:(he&&he.flushSync)===!0})}function ws(j){return R.v7_fetcherPersist&&(Nt.set(j,(Nt.get(j)||0)+1),Yt.has(j)&&Yt.delete(j)),ye.fetchers.get(j)||xE}function Er(j){let W=ye.fetchers.get(j);Xe.has(j)&&!(W&&W.state==="loading"&&ht.has(j))&&qr(j),Rt.delete(j),ht.delete(j),Tt.delete(j),Yt.delete(j),ye.fetchers.delete(j)}function Ki(j){if(R.v7_fetcherPersist){let W=(Nt.get(j)||0)-1;W<=0?(Nt.delete(j),Yt.add(j)):Nt.set(j,W)}else Er(j);Ft({fetchers:new Map(ye.fetchers)})}function qr(j){let W=Xe.get(j);cn(W,"Expected fetch controller: "+j),W.abort(),Xe.delete(j)}function Yi(j){for(let W of j){let re=ws(W),he=Ra(re.data);ye.fetchers.set(W,he)}}function bo(){let j=[],W=!1;for(let re of Tt){let he=ye.fetchers.get(re);cn(he,"Expected fetcher: "+re),he.state==="loading"&&(Tt.delete(re),j.push(re),W=!0)}return Yi(j),W}function es(j){let W=[];for(let[re,he]of ht)if(he<j){let le=ye.fetchers.get(re);cn(le,"Expected fetcher: "+re),le.state==="loading"&&(qr(re),ht.delete(re),W.push(re))}return Yi(W),W.length>0}function To(j,W){let re=ye.blockers.get(j)||B0;return In.get(j)!==W&&In.set(j,W),re}function Li(j){ye.blockers.delete(j),In.delete(j)}function gi(j,W){let re=ye.blockers.get(j)||B0;cn(re.state==="unblocked"&&W.state==="blocked"||re.state==="blocked"&&W.state==="blocked"||re.state==="blocked"&&W.state==="proceeding"||re.state==="blocked"&&W.state==="unblocked"||re.state==="proceeding"&&W.state==="unblocked","Invalid blocker state transition: "+re.state+" -> "+W.state);let he=new Map(ye.blockers);he.set(j,W),Ft({blockers:he})}function Ji(j){let{currentLocation:W,nextLocation:re,historyAction:he}=j;if(In.size===0)return;In.size>1&&$c(!1,"A router only supports one blocker at a time");let le=Array.from(In.entries()),[be,Oe]=le[le.length-1],je=ye.blockers.get(be);if(!(je&&je.state==="proceeding")&&Oe({currentLocation:W,nextLocation:re,historyAction:he}))return be}function Qi(j){let W=[];return Yn.forEach((re,he)=>{(!j||j(he))&&(re.cancel(),W.push(he),Yn.delete(he))}),W}function ta(j,W,re){if(q=j,we=W,ve=re||null,!xe&&ye.navigation===X4){xe=!0;let he=G(ye.location,ye.matches);he!=null&&Ft({restoreScrollPosition:he})}return()=>{q=null,we=null,ve=null}}function ue(j,W){return ve&&ve(j,W.map(he=>KT(he,ye.loaderData)))||j.key}function N(j,W){if(q&&we){let re=ue(j,W);q[re]=we()}}function G(j,W){if(q){let re=ue(j,W),he=q[re];if(typeof he=="number")return he}return null}function ae(j){x={},s=K6(j,_,void 0,x)}return Be={get basename(){return P},get future(){return R},get state(){return ye},get routes(){return E},get window(){return o},initialize:xo,subscribe:Jo,enableScrollRestoration:ta,navigate:kr,fetch:zi,revalidate:vs,createHref:j=>t.history.createHref(j),encodeLocation:j=>t.history.encodeLocation(j),getFetcher:ws,deleteFetcher:Ki,dispose:wo,getBlocker:To,deleteBlocker:Li,_internalFetchControllers:Xe,_internalActiveDeferreds:Yn,_internalSetRoutes:ae},Be}function TE(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function Y6(t,o,u,p,_,x,E,s){let P,R;if(E){P=[];for(let V of o)if(P.push(V),V.route.id===E){R=V;break}}else P=o,R=o[o.length-1];let U=i7(_||".",r7(P,x),Jc(t.pathname,u)||t.pathname,s==="path");return _==null&&(U.search=t.search,U.hash=t.hash),(_==null||_===""||_===".")&&R&&R.route.index&&!s7(U.search)&&(U.search=U.search?U.search.replace(/^\?/,"?index&"):"?index"),p&&u!=="/"&&(U.pathname=U.pathname==="/"?u:Ws([u,U.pathname])),i1(U)}function Q9(t,o,u,p){if(!p||!TE(p))return{path:u};if(p.formMethod&&!IE(p.formMethod))return{path:u,error:ho(405,{method:p.formMethod})};let _=()=>({path:u,error:ho(400,{type:"invalid-body"})}),x=p.formMethod||"get",E=t?x.toUpperCase():x.toLowerCase(),s=hy(u);if(p.body!==void 0){if(p.formEncType==="text/plain"){if(!qo(E))return _();let q=typeof p.body=="string"?p.body:p.body instanceof FormData||p.body instanceof URLSearchParams?Array.from(p.body.entries()).reduce((ve,we)=>{let[xe,Ie]=we;return""+ve+xe+"="+Ie+`
`},""):String(p.body);return{path:u,submission:{formMethod:E,formAction:s,formEncType:p.formEncType,formData:void 0,json:void 0,text:q}}}else if(p.formEncType==="application/json"){if(!qo(E))return _();try{let q=typeof p.body=="string"?JSON.parse(p.body):p.body;return{path:u,submission:{formMethod:E,formAction:s,formEncType:p.formEncType,formData:void 0,json:q,text:void 0}}}catch{return _()}}}cn(typeof FormData=="function","FormData is not available in this environment");let P,R;if(p.formData)P=J6(p.formData),R=p.formData;else if(p.body instanceof FormData)P=J6(p.body),R=p.body;else if(p.body instanceof URLSearchParams)P=p.body,R=rm(P);else if(p.body==null)P=new URLSearchParams,R=new FormData;else try{P=new URLSearchParams(p.body),R=rm(P)}catch{return _()}let U={formMethod:E,formAction:s,formEncType:p&&p.formEncType||"application/x-www-form-urlencoded",formData:R,json:void 0,text:void 0};if(qo(U.formMethod))return{path:u,submission:U};let V=Qs(u);return o&&V.search&&s7(V.search)&&P.append("index",""),V.search="?"+P,{path:i1(V),submission:U}}function EE(t,o){let u=t;if(o){let p=t.findIndex(_=>_.route.id===o);p>=0&&(u=t.slice(0,p))}return u}function em(t,o,u,p,_,x,E,s,P,R,U,V,q,ve,we,xe){let Ie=xe?Object.values(xe)[0]:we?Object.values(we)[0]:void 0,te=t.createURL(o.location),ne=t.createURL(_),se=xe?Object.keys(xe)[0]:void 0,Be=EE(u,se).filter((Ye,lt)=>{let{route:Me}=Ye;if(Me.lazy)return!0;if(Me.loader==null)return!1;if(x)return Me.loader.hydrate?!0:o.loaderData[Me.id]===void 0&&(!o.errors||o.errors[Me.id]===void 0);if(SE(o.loaderData,o.matches[lt],Ye)||s.some(bt=>bt===Ye.route.id))return!0;let Mt=o.matches[lt],Ut=Ye;return tm(Ye,pr({currentUrl:te,currentParams:Mt.params,nextUrl:ne,nextParams:Ut.params},p,{actionResult:Ie,defaultShouldRevalidate:E||te.pathname+te.search===ne.pathname+ne.search||te.search!==ne.search||uy(Mt,Ut)}))}),ye=[];return U.forEach((Ye,lt)=>{if(x||!u.some(Bt=>Bt.route.id===Ye.routeId)||R.has(lt))return;let Me=Sc(q,Ye.path,ve);if(!Me){ye.push({key:lt,routeId:Ye.routeId,path:Ye.path,matches:null,match:null,controller:null});return}let Mt=o.fetchers.get(lt),Ut=Q6(Me,Ye.path),bt=!1;V.has(lt)?bt=!1:P.includes(lt)?bt=!0:Mt&&Mt.state!=="idle"&&Mt.data===void 0?bt=E:bt=tm(Ut,pr({currentUrl:te,currentParams:o.matches[o.matches.length-1].params,nextUrl:ne,nextParams:u[u.length-1].params},p,{actionResult:Ie,defaultShouldRevalidate:E})),bt&&ye.push({key:lt,routeId:Ye.routeId,path:Ye.path,matches:Me,match:Ut,controller:new AbortController})}),[Be,ye]}function SE(t,o,u){let p=!o||u.route.id!==o.route.id,_=t[u.route.id]===void 0;return p||_}function uy(t,o){let u=t.route.path;return t.pathname!==o.pathname||u!=null&&u.endsWith("*")&&t.params["*"]!==o.params["*"]}function tm(t,o){if(t.route.shouldRevalidate){let u=t.route.shouldRevalidate(o);if(typeof u=="boolean")return u}return o.defaultShouldRevalidate}async function nm(t,o,u){if(!t.lazy)return;let p=await t.lazy();if(!t.lazy)return;let _=u[t.id];cn(_,"No route found in manifest");let x={};for(let E in p){let P=_[E]!==void 0&&E!=="hasErrorBoundary";$c(!P,'Route "'+_.id+'" has a static property "'+E+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+E+'" will be ignored.')),!P&&!HT.has(E)&&(x[E]=p[E])}Object.assign(_,x),Object.assign(_,pr({},o(_),{lazy:void 0}))}async function O0(t,o,u,p,_,x,E,s,P){P===void 0&&(P={});let R,U,V,q=xe=>{let Ie,te=new Promise((ne,se)=>Ie=se);return V=()=>Ie(),o.signal.addEventListener("abort",V),Promise.race([xe({request:o,params:u.params,context:P.requestContext}),te])};try{let xe=u.route[t];if(u.route.lazy)if(xe){let Ie,te=await Promise.all([q(xe).catch(ne=>{Ie=ne}),nm(u.route,x,_)]);if(Ie)throw Ie;U=te[0]}else if(await nm(u.route,x,_),xe=u.route[t],xe)U=await q(xe);else if(t==="action"){let Ie=new URL(o.url),te=Ie.pathname+Ie.search;throw ho(405,{method:o.method,pathname:te,routeId:u.route.id})}else return{type:hr.data,data:void 0};else if(xe)U=await q(xe);else{let Ie=new URL(o.url),te=Ie.pathname+Ie.search;throw ho(404,{pathname:te})}cn(U!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+u.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(xe){R=hr.error,U=xe}finally{V&&o.signal.removeEventListener("abort",V)}if(AE(U)){let xe=U.status;if(yE.has(xe)){let te=U.headers.get("Location");if(cn(te,"Redirects returned/thrown from loaders/actions must have a Location header"),!ly.test(te))te=Y6(new URL(o.url),p.slice(0,p.indexOf(u)+1),E,!0,te,s);else if(!P.isStaticRequest){let ne=new URL(o.url),se=te.startsWith("//")?new URL(ne.protocol+te):new URL(te),Se=Jc(se.pathname,E)!=null;se.origin===ne.origin&&Se&&(te=se.pathname+se.search+se.hash)}if(P.isStaticRequest)throw U.headers.set("Location",te),U;return{type:hr.redirect,status:xe,location:te,revalidate:U.headers.get("X-Remix-Revalidate")!==null,reloadDocument:U.headers.get("X-Remix-Reload-Document")!==null}}if(P.isRouteRequest)throw{type:R===hr.error?hr.error:hr.data,response:U};let Ie;try{let te=U.headers.get("Content-Type");te&&/\bapplication\/json\b/.test(te)?U.body==null?Ie=null:Ie=await U.json():Ie=await U.text()}catch(te){return{type:hr.error,error:te}}return R===hr.error?{type:R,error:new o7(xe,U.statusText,Ie),headers:U.headers}:{type:hr.data,data:Ie,statusCode:U.status,headers:U.headers}}if(R===hr.error)return{type:R,error:U};if(PE(U)){var ve,we;return{type:hr.deferred,deferredData:U,statusCode:(ve=U.init)==null?void 0:ve.status,headers:((we=U.init)==null?void 0:we.headers)&&new Headers(U.init.headers)}}return{type:hr.data,data:U}}function U0(t,o,u,p){let _=t.createURL(hy(o)).toString(),x={signal:u};if(p&&qo(p.formMethod)){let{formMethod:E,formEncType:s}=p;x.method=E.toUpperCase(),s==="application/json"?(x.headers=new Headers({"Content-Type":s}),x.body=JSON.stringify(p.json)):s==="text/plain"?x.body=p.text:s==="application/x-www-form-urlencoded"&&p.formData?x.body=J6(p.formData):x.body=p.formData}return new Request(_,x)}function J6(t){let o=new URLSearchParams;for(let[u,p]of t.entries())o.append(u,typeof p=="string"?p:p.name);return o}function rm(t){let o=new FormData;for(let[u,p]of t.entries())o.append(u,p);return o}function ME(t,o,u,p,_){let x={},E=null,s,P=!1,R={};return u.forEach((U,V)=>{let q=o[V].route.id;if(cn(!Kl(U),"Cannot handle redirect results in processLoaderData"),Mc(U)){let ve=i2(t,q),we=U.error;p&&(we=Object.values(p)[0],p=void 0),E=E||{},E[ve.route.id]==null&&(E[ve.route.id]=we),x[q]=void 0,P||(P=!0,s=sy(U.error)?U.error.status:500),U.headers&&(R[q]=U.headers)}else Xl(U)?(_.set(q,U.deferredData),x[q]=U.deferredData.data):x[q]=U.data,U.statusCode!=null&&U.statusCode!==200&&!P&&(s=U.statusCode),U.headers&&(R[q]=U.headers)}),p&&(E=p,x[Object.keys(p)[0]]=void 0),{loaderData:x,errors:E,statusCode:s||200,loaderHeaders:R}}function im(t,o,u,p,_,x,E,s){let{loaderData:P,errors:R}=ME(o,u,p,_,s);for(let U=0;U<x.length;U++){let{key:V,match:q,controller:ve}=x[U];cn(E!==void 0&&E[U]!==void 0,"Did not find corresponding fetcher result");let we=E[U];if(!(ve&&ve.signal.aborted))if(Mc(we)){let xe=i2(t.matches,q==null?void 0:q.route.id);R&&R[xe.route.id]||(R=pr({},R,{[xe.route.id]:we.error})),t.fetchers.delete(V)}else if(Kl(we))cn(!1,"Unhandled fetcher revalidation redirect");else if(Xl(we))cn(!1,"Unhandled fetcher deferred data");else{let xe=Ra(we.data);t.fetchers.set(V,xe)}}return{loaderData:P,errors:R}}function om(t,o,u,p){let _=pr({},o);for(let x of u){let E=x.route.id;if(o.hasOwnProperty(E)?o[E]!==void 0&&(_[E]=o[E]):t[E]!==void 0&&x.route.loader&&(_[E]=t[E]),p&&p.hasOwnProperty(E))break}return _}function i2(t,o){return(o?t.slice(0,t.findIndex(p=>p.route.id===o)+1):[...t]).reverse().find(p=>p.route.hasErrorBoundary===!0)||t[0]}function sm(t){let o=t.length===1?t[0]:t.find(u=>u.index||!u.path||u.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:o}],route:o}}function ho(t,o){let{pathname:u,routeId:p,method:_,type:x}=o===void 0?{}:o,E="Unknown Server Error",s="Unknown @remix-run/router error";return t===400?(E="Bad Request",_&&u&&p?s="You made a "+_+' request to "'+u+'" but '+('did not provide a `loader` for route "'+p+'", ')+"so there is no way to handle the request.":x==="defer-action"?s="defer() is not supported in actions":x==="invalid-body"&&(s="Unable to encode submission body")):t===403?(E="Forbidden",s='Route "'+p+'" does not match URL "'+u+'"'):t===404?(E="Not Found",s='No route matches URL "'+u+'"'):t===405&&(E="Method Not Allowed",_&&u&&p?s="You made a "+_.toUpperCase()+' request to "'+u+'" but '+('did not provide an `action` for route "'+p+'", ')+"so there is no way to handle the request.":_&&(s='Invalid request method "'+_.toUpperCase()+'"')),new o7(t||500,E,new Error(s),!0)}function am(t){for(let o=t.length-1;o>=0;o--){let u=t[o];if(Kl(u))return{result:u,idx:o}}}function hy(t){let o=typeof t=="string"?Qs(t):t;return i1(pr({},o,{hash:""}))}function CE(t,o){return t.pathname!==o.pathname||t.search!==o.search?!1:t.hash===""?o.hash!=="":t.hash===o.hash?!0:o.hash!==""}function Xl(t){return t.type===hr.deferred}function Mc(t){return t.type===hr.error}function Kl(t){return(t&&t.type)===hr.redirect}function PE(t){let o=t;return o&&typeof o=="object"&&typeof o.data=="object"&&typeof o.subscribe=="function"&&typeof o.cancel=="function"&&typeof o.resolveData=="function"}function AE(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function IE(t){return gE.has(t.toLowerCase())}function qo(t){return mE.has(t.toLowerCase())}async function lm(t,o,u,p,_,x){for(let E=0;E<u.length;E++){let s=u[E],P=o[E];if(!P)continue;let R=t.find(V=>V.route.id===P.route.id),U=R!=null&&!uy(R,P)&&(x&&x[P.route.id])!==void 0;if(Xl(s)&&(_||U)){let V=p[E];cn(V,"Expected an AbortSignal for revalidating fetcher deferred result"),await dy(s,V,_).then(q=>{q&&(u[E]=q||u[E])})}}}async function dy(t,o,u){if(u===void 0&&(u=!1),!await t.deferredData.resolveData(o)){if(u)try{return{type:hr.data,data:t.deferredData.unwrappedData}}catch(_){return{type:hr.error,error:_}}return{type:hr.data,data:t.deferredData.data}}}function s7(t){return new URLSearchParams(t).getAll("index").some(o=>o==="")}function Q6(t,o){let u=typeof o=="string"?Qs(o).search:o.search;if(t[t.length-1].route.index&&s7(u||""))return t[t.length-1];let p=oy(t);return p[p.length-1]}function cm(t){let{formMethod:o,formAction:u,formEncType:p,text:_,formData:x,json:E}=t;if(!(!o||!u||!p)){if(_!=null)return{formMethod:o,formAction:u,formEncType:p,formData:void 0,json:void 0,text:_};if(x!=null)return{formMethod:o,formAction:u,formEncType:p,formData:x,json:void 0,text:void 0};if(E!==void 0)return{formMethod:o,formAction:u,formEncType:p,formData:void 0,json:E,text:void 0}}}function K4(t,o){return o?{state:"loading",location:t,formMethod:o.formMethod,formAction:o.formAction,formEncType:o.formEncType,formData:o.formData,json:o.json,text:o.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function kE(t,o){return{state:"submitting",location:t,formMethod:o.formMethod,formAction:o.formAction,formEncType:o.formEncType,formData:o.formData,json:o.json,text:o.text}}function N0(t,o){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:o}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:o}}function zE(t,o){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:o?o.data:void 0}}function Ra(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function LE(t,o){try{let u=t.sessionStorage.getItem(cy);if(u){let p=JSON.parse(u);for(let[_,x]of Object.entries(p||{}))x&&Array.isArray(x)&&o.set(_,new Set(x||[]))}}catch{}}function DE(t,o){if(o.size>0){let u={};for(let[p,_]of o)u[p]=[..._];try{t.sessionStorage.setItem(cy,JSON.stringify(u))}catch(p){$c(!1,"Failed to save applied view transitions in sessionStorage ("+p+").")}}}/**
 * React Router v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function E2(){return E2=Object.assign?Object.assign.bind():function(t){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var p in u)Object.prototype.hasOwnProperty.call(u,p)&&(t[p]=u[p])}return t},E2.apply(this,arguments)}const U5=Ue.createContext(null),py=Ue.createContext(null),a1=Ue.createContext(null),N5=Ue.createContext(null),l1=Ue.createContext({outlet:null,matches:[],isDataRoute:!1}),fy=Ue.createContext(null);function RE(t,o){let{relative:u}=o===void 0?{}:o;D2()||cn(!1);let{basename:p,navigator:_}=Ue.useContext(a1),{hash:x,pathname:E,search:s}=_y(t,{relative:u}),P=E;return p!=="/"&&(P=E==="/"?p:Ws([p,E])),_.createHref({pathname:P,search:s,hash:x})}function D2(){return Ue.useContext(N5)!=null}function j5(){return D2()||cn(!1),Ue.useContext(N5).location}function my(t){Ue.useContext(a1).static||Ue.useLayoutEffect(t)}function FE(){let{isDataRoute:t}=Ue.useContext(l1);return t?HE():BE()}function BE(){D2()||cn(!1);let t=Ue.useContext(U5),{basename:o,future:u,navigator:p}=Ue.useContext(a1),{matches:_}=Ue.useContext(l1),{pathname:x}=j5(),E=JSON.stringify(r7(_,u.v7_relativeSplatPath)),s=Ue.useRef(!1);return my(()=>{s.current=!0}),Ue.useCallback(function(R,U){if(U===void 0&&(U={}),!s.current)return;if(typeof R=="number"){p.go(R);return}let V=i7(R,JSON.parse(E),x,U.relative==="path");t==null&&o!=="/"&&(V.pathname=V.pathname==="/"?o:Ws([o,V.pathname])),(U.replace?p.replace:p.push)(V,U.state,U)},[o,p,E,x,t])}function _y(t,o){let{relative:u}=o===void 0?{}:o,{future:p}=Ue.useContext(a1),{matches:_}=Ue.useContext(l1),{pathname:x}=j5(),E=JSON.stringify(r7(_,p.v7_relativeSplatPath));return Ue.useMemo(()=>i7(t,JSON.parse(E),x,u==="path"),[t,E,x,u])}function OE(t,o,u,p){D2()||cn(!1);let{navigator:_}=Ue.useContext(a1),{matches:x}=Ue.useContext(l1),E=x[x.length-1],s=E?E.params:{};E&&E.pathname;let P=E?E.pathnameBase:"/";E&&E.route;let R=j5(),U;if(o){var V;let Ie=typeof o=="string"?Qs(o):o;P==="/"||(V=Ie.pathname)!=null&&V.startsWith(P)||cn(!1),U=Ie}else U=R;let q=U.pathname||"/",ve=q;if(P!=="/"){let Ie=P.replace(/^\//,"").split("/");ve="/"+q.replace(/^\//,"").split("/").slice(Ie.length).join("/")}let we=Sc(t,{pathname:ve}),xe=GE(we&&we.map(Ie=>Object.assign({},Ie,{params:Object.assign({},s,Ie.params),pathname:Ws([P,_.encodeLocation?_.encodeLocation(Ie.pathname).pathname:Ie.pathname]),pathnameBase:Ie.pathnameBase==="/"?P:Ws([P,_.encodeLocation?_.encodeLocation(Ie.pathnameBase).pathname:Ie.pathnameBase])})),x,u,p);return o&&xe?Ue.createElement(N5.Provider,{value:{location:E2({pathname:"/",search:"",hash:"",state:null,key:"default"},U),navigationType:_r.Pop}},xe):xe}function UE(){let t=WE(),o=sy(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),u=t instanceof Error?t.stack:null,_={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},x=null;return Ue.createElement(Ue.Fragment,null,Ue.createElement("h2",null,"Unexpected Application Error!"),Ue.createElement("h3",{style:{fontStyle:"italic"}},o),u?Ue.createElement("pre",{style:_},u):null,x)}const NE=Ue.createElement(UE,null);class jE extends Ue.Component{constructor(o){super(o),this.state={location:o.location,revalidation:o.revalidation,error:o.error}}static getDerivedStateFromError(o){return{error:o}}static getDerivedStateFromProps(o,u){return u.location!==o.location||u.revalidation!=="idle"&&o.revalidation==="idle"?{error:o.error,location:o.location,revalidation:o.revalidation}:{error:o.error!==void 0?o.error:u.error,location:u.location,revalidation:o.revalidation||u.revalidation}}componentDidCatch(o,u){console.error("React Router caught the following error during render",o,u)}render(){return this.state.error!==void 0?Ue.createElement(l1.Provider,{value:this.props.routeContext},Ue.createElement(fy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function VE(t){let{routeContext:o,match:u,children:p}=t,_=Ue.useContext(U5);return _&&_.static&&_.staticContext&&(u.route.errorElement||u.route.ErrorBoundary)&&(_.staticContext._deepestRenderedBoundaryId=u.route.id),Ue.createElement(l1.Provider,{value:o},p)}function GE(t,o,u,p){var _;if(o===void 0&&(o=[]),u===void 0&&(u=null),p===void 0&&(p=null),t==null){var x;if((x=u)!=null&&x.errors)t=u.matches;else return null}let E=t,s=(_=u)==null?void 0:_.errors;if(s!=null){let U=E.findIndex(V=>V.route.id&&(s==null?void 0:s[V.route.id]));U>=0||cn(!1),E=E.slice(0,Math.min(E.length,U+1))}let P=!1,R=-1;if(u&&p&&p.v7_partialHydration)for(let U=0;U<E.length;U++){let V=E[U];if((V.route.HydrateFallback||V.route.hydrateFallbackElement)&&(R=U),V.route.id){let{loaderData:q,errors:ve}=u,we=V.route.loader&&q[V.route.id]===void 0&&(!ve||ve[V.route.id]===void 0);if(V.route.lazy||we){P=!0,R>=0?E=E.slice(0,R+1):E=[E[0]];break}}}return E.reduceRight((U,V,q)=>{let ve,we=!1,xe=null,Ie=null;u&&(ve=s&&V.route.id?s[V.route.id]:void 0,xe=V.route.errorElement||NE,P&&(R<0&&q===0?(XE("route-fallback",!1),we=!0,Ie=null):R===q&&(we=!0,Ie=V.route.hydrateFallbackElement||null)));let te=o.concat(E.slice(0,q+1)),ne=()=>{let se;return ve?se=xe:we?se=Ie:V.route.Component?se=Ue.createElement(V.route.Component,null):V.route.element?se=V.route.element:se=U,Ue.createElement(VE,{match:V,routeContext:{outlet:U,matches:te,isDataRoute:u!=null},children:se})};return u&&(V.route.ErrorBoundary||V.route.errorElement||q===0)?Ue.createElement(jE,{location:u.location,revalidation:u.revalidation,component:xe,error:ve,children:ne(),routeContext:{outlet:null,matches:te,isDataRoute:!0}}):ne()},null)}var gy=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(gy||{}),d5=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(d5||{});function $E(t){let o=Ue.useContext(U5);return o||cn(!1),o}function ZE(t){let o=Ue.useContext(py);return o||cn(!1),o}function qE(t){let o=Ue.useContext(l1);return o||cn(!1),o}function yy(t){let o=qE(),u=o.matches[o.matches.length-1];return u.route.id||cn(!1),u.route.id}function WE(){var t;let o=Ue.useContext(fy),u=ZE(d5.UseRouteError),p=yy(d5.UseRouteError);return o!==void 0?o:(t=u.errors)==null?void 0:t[p]}function HE(){let{router:t}=$E(gy.UseNavigateStable),o=yy(d5.UseNavigateStable),u=Ue.useRef(!1);return my(()=>{u.current=!0}),Ue.useCallback(function(_,x){x===void 0&&(x={}),u.current&&(typeof _=="number"?t.navigate(_):t.navigate(_,E2({fromRouteId:o},x)))},[t,o])}const um={};function XE(t,o,u){!o&&!um[t]&&(um[t]=!0)}function KE(t){let{basename:o="/",children:u=null,location:p,navigationType:_=_r.Pop,navigator:x,static:E=!1,future:s}=t;D2()&&cn(!1);let P=o.replace(/^\/*/,"/"),R=Ue.useMemo(()=>({basename:P,navigator:x,static:E,future:E2({v7_relativeSplatPath:!1},s)}),[P,s,x,E]);typeof p=="string"&&(p=Qs(p));let{pathname:U="/",search:V="",hash:q="",state:ve=null,key:we="default"}=p,xe=Ue.useMemo(()=>{let Ie=Jc(U,P);return Ie==null?null:{location:{pathname:Ie,search:V,hash:q,state:ve,key:we},navigationType:_}},[P,U,V,q,ve,we,_]);return xe==null?null:Ue.createElement(a1.Provider,{value:R},Ue.createElement(N5.Provider,{children:u,value:xe}))}new Promise(()=>{});function YE(t){let o={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(o,{element:Ue.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(o,{hydrateFallbackElement:Ue.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(o,{errorElement:Ue.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),o}/**
 * React Router DOM v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function S2(){return S2=Object.assign?Object.assign.bind():function(t){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var p in u)Object.prototype.hasOwnProperty.call(u,p)&&(t[p]=u[p])}return t},S2.apply(this,arguments)}function JE(t,o){if(t==null)return{};var u={},p=Object.keys(t),_,x;for(x=0;x<p.length;x++)_=p[x],!(o.indexOf(_)>=0)&&(u[_]=t[_]);return u}function QE(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function eS(t,o){return t.button===0&&(!o||o==="_self")&&!QE(t)}const tS=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],nS="6";try{window.__reactRouterVersion=nS}catch{}function AC(t,o){return bE({basename:o==null?void 0:o.basename,future:S2({},o==null?void 0:o.future,{v7_prependBasename:!0}),history:ZT({window:o==null?void 0:o.window}),hydrationData:(o==null?void 0:o.hydrationData)||rS(),routes:t,mapRouteProperties:YE,window:o==null?void 0:o.window}).initialize()}function rS(){var t;let o=(t=window)==null?void 0:t.__staticRouterHydrationData;return o&&o.errors&&(o=S2({},o,{errors:iS(o.errors)})),o}function iS(t){if(!t)return null;let o=Object.entries(t),u={};for(let[p,_]of o)if(_&&_.__type==="RouteErrorResponse")u[p]=new o7(_.status,_.statusText,_.data,_.internal===!0);else if(_&&_.__type==="Error"){if(_.__subType){let x=window[_.__subType];if(typeof x=="function")try{let E=new x(_.message);E.stack="",u[p]=E}catch{}}if(u[p]==null){let x=new Error(_.message);x.stack="",u[p]=x}}else u[p]=_;return u}const oS=Ue.createContext({isTransitioning:!1}),sS=Ue.createContext(new Map),aS="startTransition",hm=Lw[aS],lS="flushSync",dm=$T[lS];function cS(t){hm?hm(t):t()}function j0(t){dm?dm(t):t()}class uS{constructor(){this.status="pending",this.promise=new Promise((o,u)=>{this.resolve=p=>{this.status==="pending"&&(this.status="resolved",o(p))},this.reject=p=>{this.status==="pending"&&(this.status="rejected",u(p))}})}}function IC(t){let{fallbackElement:o,router:u,future:p}=t,[_,x]=Ue.useState(u.state),[E,s]=Ue.useState(),[P,R]=Ue.useState({isTransitioning:!1}),[U,V]=Ue.useState(),[q,ve]=Ue.useState(),[we,xe]=Ue.useState(),Ie=Ue.useRef(new Map),{v7_startTransition:te}=p||{},ne=Ue.useCallback(Ye=>{te?cS(Ye):Ye()},[te]),se=Ue.useCallback((Ye,lt)=>{let{deletedFetchers:Me,unstable_flushSync:Mt,unstable_viewTransitionOpts:Ut}=lt;Me.forEach(Bt=>Ie.current.delete(Bt)),Ye.fetchers.forEach((Bt,Ke)=>{Bt.data!==void 0&&Ie.current.set(Ke,Bt.data)});let bt=u.window==null||typeof u.window.document.startViewTransition!="function";if(!Ut||bt){Mt?j0(()=>x(Ye)):ne(()=>x(Ye));return}if(Mt){j0(()=>{q&&(U&&U.resolve(),q.skipTransition()),R({isTransitioning:!0,flushSync:!0,currentLocation:Ut.currentLocation,nextLocation:Ut.nextLocation})});let Bt=u.window.document.startViewTransition(()=>{j0(()=>x(Ye))});Bt.finished.finally(()=>{j0(()=>{V(void 0),ve(void 0),s(void 0),R({isTransitioning:!1})})}),j0(()=>ve(Bt));return}q?(U&&U.resolve(),q.skipTransition(),xe({state:Ye,currentLocation:Ut.currentLocation,nextLocation:Ut.nextLocation})):(s(Ye),R({isTransitioning:!0,flushSync:!1,currentLocation:Ut.currentLocation,nextLocation:Ut.nextLocation}))},[u.window,q,U,Ie,ne]);Ue.useLayoutEffect(()=>u.subscribe(se),[u,se]),Ue.useEffect(()=>{P.isTransitioning&&!P.flushSync&&V(new uS)},[P]),Ue.useEffect(()=>{if(U&&E&&u.window){let Ye=E,lt=U.promise,Me=u.window.document.startViewTransition(async()=>{ne(()=>x(Ye)),await lt});Me.finished.finally(()=>{V(void 0),ve(void 0),s(void 0),R({isTransitioning:!1})}),ve(Me)}},[ne,E,U,u.window]),Ue.useEffect(()=>{U&&E&&_.location.key===E.location.key&&U.resolve()},[U,q,_.location,E]),Ue.useEffect(()=>{!P.isTransitioning&&we&&(s(we.state),R({isTransitioning:!0,flushSync:!1,currentLocation:we.currentLocation,nextLocation:we.nextLocation}),xe(void 0))},[P.isTransitioning,we]),Ue.useEffect(()=>{},[]);let Se=Ue.useMemo(()=>({createHref:u.createHref,encodeLocation:u.encodeLocation,go:Ye=>u.navigate(Ye),push:(Ye,lt,Me)=>u.navigate(Ye,{state:lt,preventScrollReset:Me==null?void 0:Me.preventScrollReset}),replace:(Ye,lt,Me)=>u.navigate(Ye,{replace:!0,state:lt,preventScrollReset:Me==null?void 0:Me.preventScrollReset})}),[u]),Be=u.basename||"/",ye=Ue.useMemo(()=>({router:u,navigator:Se,static:!1,basename:Be}),[u,Se,Be]);return Ue.createElement(Ue.Fragment,null,Ue.createElement(U5.Provider,{value:ye},Ue.createElement(py.Provider,{value:_},Ue.createElement(sS.Provider,{value:Ie.current},Ue.createElement(oS.Provider,{value:P},Ue.createElement(KE,{basename:Be,location:_.location,navigationType:_.historyAction,navigator:Se,future:{v7_relativeSplatPath:u.future.v7_relativeSplatPath}},_.initialized||u.future.v7_partialHydration?Ue.createElement(hS,{routes:u.routes,future:u.future,state:_}):o))))),null)}function hS(t){let{routes:o,future:u,state:p}=t;return OE(o,void 0,p,u)}const dS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",pS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kC=Ue.forwardRef(function(o,u){let{onClick:p,relative:_,reloadDocument:x,replace:E,state:s,target:P,to:R,preventScrollReset:U,unstable_viewTransition:V}=o,q=JE(o,tS),{basename:ve}=Ue.useContext(a1),we,xe=!1;if(typeof R=="string"&&pS.test(R)&&(we=R,dS))try{let se=new URL(window.location.href),Se=R.startsWith("//")?new URL(se.protocol+R):new URL(R),Be=Jc(Se.pathname,ve);Se.origin===se.origin&&Be!=null?R=Be+Se.search+Se.hash:xe=!0}catch{}let Ie=RE(R,{relative:_}),te=fS(R,{replace:E,state:s,target:P,preventScrollReset:U,relative:_,unstable_viewTransition:V});function ne(se){p&&p(se),se.defaultPrevented||te(se)}return Ue.createElement("a",S2({},q,{href:we||Ie,onClick:xe||x?p:ne,ref:u,target:P}))});var pm;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(pm||(pm={}));var fm;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(fm||(fm={}));function fS(t,o){let{target:u,replace:p,state:_,preventScrollReset:x,relative:E,unstable_viewTransition:s}=o===void 0?{}:o,P=FE(),R=j5(),U=_y(t,{relative:E});return Ue.useCallback(V=>{if(eS(V,u)){V.preventDefault();let q=p!==void 0?p:i1(R)===i1(U);P(t,{replace:q,state:_,preventScrollReset:x,relative:E,unstable_viewTransition:s})}},[R,P,U,p,_,u,t,x,E,s])}var vy={exports:{}},mS="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",_S=mS,gS=_S;function xy(){}function wy(){}wy.resetWarningCache=xy;var yS=function(){function t(p,_,x,E,s,P){if(P!==gS){var R=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw R.name="Invariant Violation",R}}t.isRequired=t;function o(){return t}var u={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:o,element:t,elementType:t,instanceOf:o,node:t,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:wy,resetWarningCache:xy};return u.PropTypes=u,u};vy.exports=yS();var vS=vy.exports;const fn=el(vS);var xS=typeof Element<"u",wS=typeof Map=="function",bS=typeof Set=="function",TS=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function U3(t,o){if(t===o)return!0;if(t&&o&&typeof t=="object"&&typeof o=="object"){if(t.constructor!==o.constructor)return!1;var u,p,_;if(Array.isArray(t)){if(u=t.length,u!=o.length)return!1;for(p=u;p--!==0;)if(!U3(t[p],o[p]))return!1;return!0}var x;if(wS&&t instanceof Map&&o instanceof Map){if(t.size!==o.size)return!1;for(x=t.entries();!(p=x.next()).done;)if(!o.has(p.value[0]))return!1;for(x=t.entries();!(p=x.next()).done;)if(!U3(p.value[1],o.get(p.value[0])))return!1;return!0}if(bS&&t instanceof Set&&o instanceof Set){if(t.size!==o.size)return!1;for(x=t.entries();!(p=x.next()).done;)if(!o.has(p.value[0]))return!1;return!0}if(TS&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(o)){if(u=t.length,u!=o.length)return!1;for(p=u;p--!==0;)if(t[p]!==o[p])return!1;return!0}if(t.constructor===RegExp)return t.source===o.source&&t.flags===o.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof o.valueOf=="function")return t.valueOf()===o.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof o.toString=="function")return t.toString()===o.toString();if(_=Object.keys(t),u=_.length,u!==Object.keys(o).length)return!1;for(p=u;p--!==0;)if(!Object.prototype.hasOwnProperty.call(o,_[p]))return!1;if(xS&&t instanceof Element)return!1;for(p=u;p--!==0;)if(!((_[p]==="_owner"||_[p]==="__v"||_[p]==="__o")&&t.$$typeof)&&!U3(t[_[p]],o[_[p]]))return!1;return!0}return t!==t&&o!==o}var ES=function(o,u){try{return U3(o,u)}catch(p){if((p.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw p}};const SS=el(ES);var MS=function(t,o,u,p,_,x,E,s){if(!t){var P;if(o===void 0)P=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var R=[u,p,_,x,E,s],U=0;P=new Error(o.replace(/%s/g,function(){return R[U++]})),P.name="Invariant Violation"}throw P.framesToPop=1,P}},CS=MS;const mm=el(CS);var PS=function(o,u,p,_){var x=p?p.call(_,o,u):void 0;if(x!==void 0)return!!x;if(o===u)return!0;if(typeof o!="object"||!o||typeof u!="object"||!u)return!1;var E=Object.keys(o),s=Object.keys(u);if(E.length!==s.length)return!1;for(var P=Object.prototype.hasOwnProperty.bind(u),R=0;R<E.length;R++){var U=E[R];if(!P(U))return!1;var V=o[U],q=u[U];if(x=p?p.call(_,V,q,U):void 0,x===!1||x===void 0&&V!==q)return!1}return!0};const AS=el(PS);function mr(){return mr=Object.assign||function(t){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var p in u)Object.prototype.hasOwnProperty.call(u,p)&&(t[p]=u[p])}return t},mr.apply(this,arguments)}function a7(t,o){t.prototype=Object.create(o.prototype),t.prototype.constructor=t,ep(t,o)}function ep(t,o){return ep=Object.setPrototypeOf||function(u,p){return u.__proto__=p,u},ep(t,o)}function _m(t,o){if(t==null)return{};var u,p,_={},x=Object.keys(t);for(p=0;p<x.length;p++)o.indexOf(u=x[p])>=0||(_[u]=t[u]);return _}var qt={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title",FRAGMENT:"Symbol(react.fragment)"},IS={rel:["amphtml","canonical","alternate"]},kS={type:["application/ld+json"]},zS={charset:"",name:["robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]},gm=Object.keys(qt).map(function(t){return qt[t]}),p5={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},LS=Object.keys(p5).reduce(function(t,o){return t[p5[o]]=o,t},{}),Dc=function(t,o){for(var u=t.length-1;u>=0;u-=1){var p=t[u];if(Object.prototype.hasOwnProperty.call(p,o))return p[o]}return null},DS=function(t){var o=Dc(t,qt.TITLE),u=Dc(t,"titleTemplate");if(Array.isArray(o)&&(o=o.join("")),u&&o)return u.replace(/%s/g,function(){return o});var p=Dc(t,"defaultTitle");return o||p||void 0},RS=function(t){return Dc(t,"onChangeClientState")||function(){}},Y4=function(t,o){return o.filter(function(u){return u[t]!==void 0}).map(function(u){return u[t]}).reduce(function(u,p){return mr({},u,p)},{})},FS=function(t,o){return o.filter(function(u){return u[qt.BASE]!==void 0}).map(function(u){return u[qt.BASE]}).reverse().reduce(function(u,p){if(!u.length)for(var _=Object.keys(p),x=0;x<_.length;x+=1){var E=_[x].toLowerCase();if(t.indexOf(E)!==-1&&p[E])return u.concat(p)}return u},[])},V0=function(t,o,u){var p={};return u.filter(function(_){return!!Array.isArray(_[t])||(_[t]!==void 0&&console&&typeof console.warn=="function"&&console.warn("Helmet: "+t+' should be of type "Array". Instead found type "'+typeof _[t]+'"'),!1)}).map(function(_){return _[t]}).reverse().reduce(function(_,x){var E={};x.filter(function(V){for(var q,ve=Object.keys(V),we=0;we<ve.length;we+=1){var xe=ve[we],Ie=xe.toLowerCase();o.indexOf(Ie)===-1||q==="rel"&&V[q].toLowerCase()==="canonical"||Ie==="rel"&&V[Ie].toLowerCase()==="stylesheet"||(q=Ie),o.indexOf(xe)===-1||xe!=="innerHTML"&&xe!=="cssText"&&xe!=="itemprop"||(q=xe)}if(!q||!V[q])return!1;var te=V[q].toLowerCase();return p[q]||(p[q]={}),E[q]||(E[q]={}),!p[q][te]&&(E[q][te]=!0,!0)}).reverse().forEach(function(V){return _.push(V)});for(var s=Object.keys(E),P=0;P<s.length;P+=1){var R=s[P],U=mr({},p[R],E[R]);p[R]=U}return _},[]).reverse()},BS=function(t,o){if(Array.isArray(t)&&t.length){for(var u=0;u<t.length;u+=1)if(t[u][o])return!0}return!1},by=function(t){return Array.isArray(t)?t.join(""):t},J4=function(t,o){return Array.isArray(t)?t.reduce(function(u,p){return function(_,x){for(var E=Object.keys(_),s=0;s<E.length;s+=1)if(x[E[s]]&&x[E[s]].includes(_[E[s]]))return!0;return!1}(p,o)?u.priority.push(p):u.default.push(p),u},{priority:[],default:[]}):{default:t}},ym=function(t,o){var u;return mr({},t,((u={})[o]=void 0,u))},OS=[qt.NOSCRIPT,qt.SCRIPT,qt.STYLE],Q4=function(t,o){return o===void 0&&(o=!0),o===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},vm=function(t){return Object.keys(t).reduce(function(o,u){var p=t[u]!==void 0?u+'="'+t[u]+'"':""+u;return o?o+" "+p:p},"")},xm=function(t,o){return o===void 0&&(o={}),Object.keys(t).reduce(function(u,p){return u[p5[p]||p]=t[p],u},o)},N3=function(t,o){return o.map(function(u,p){var _,x=((_={key:p})["data-rh"]=!0,_);return Object.keys(u).forEach(function(E){var s=p5[E]||E;s==="innerHTML"||s==="cssText"?x.dangerouslySetInnerHTML={__html:u.innerHTML||u.cssText}:x[s]=u[E]}),Gs.createElement(t,x)})},uo=function(t,o,u){switch(t){case qt.TITLE:return{toComponent:function(){return _=o.titleAttributes,(x={key:p=o.title})["data-rh"]=!0,E=xm(_,x),[Gs.createElement(qt.TITLE,E,p)];var p,_,x,E},toString:function(){return function(p,_,x,E){var s=vm(x),P=by(_);return s?"<"+p+' data-rh="true" '+s+">"+Q4(P,E)+"</"+p+">":"<"+p+' data-rh="true">'+Q4(P,E)+"</"+p+">"}(t,o.title,o.titleAttributes,u)}};case"bodyAttributes":case"htmlAttributes":return{toComponent:function(){return xm(o)},toString:function(){return vm(o)}};default:return{toComponent:function(){return N3(t,o)},toString:function(){return function(p,_,x){return _.reduce(function(E,s){var P=Object.keys(s).filter(function(V){return!(V==="innerHTML"||V==="cssText")}).reduce(function(V,q){var ve=s[q]===void 0?q:q+'="'+Q4(s[q],x)+'"';return V?V+" "+ve:ve},""),R=s.innerHTML||s.cssText||"",U=OS.indexOf(p)===-1;return E+"<"+p+' data-rh="true" '+P+(U?"/>":">"+R+"</"+p+">")},"")}(t,o,u)}}}},tp=function(t){var o=t.baseTag,u=t.bodyAttributes,p=t.encode,_=t.htmlAttributes,x=t.noscriptTags,E=t.styleTags,s=t.title,P=s===void 0?"":s,R=t.titleAttributes,U=t.linkTags,V=t.metaTags,q=t.scriptTags,ve={toComponent:function(){},toString:function(){return""}};if(t.prioritizeSeoTags){var we=function(xe){var Ie=xe.linkTags,te=xe.scriptTags,ne=xe.encode,se=J4(xe.metaTags,zS),Se=J4(Ie,IS),Be=J4(te,kS);return{priorityMethods:{toComponent:function(){return[].concat(N3(qt.META,se.priority),N3(qt.LINK,Se.priority),N3(qt.SCRIPT,Be.priority))},toString:function(){return uo(qt.META,se.priority,ne)+" "+uo(qt.LINK,Se.priority,ne)+" "+uo(qt.SCRIPT,Be.priority,ne)}},metaTags:se.default,linkTags:Se.default,scriptTags:Be.default}}(t);ve=we.priorityMethods,U=we.linkTags,V=we.metaTags,q=we.scriptTags}return{priority:ve,base:uo(qt.BASE,o,p),bodyAttributes:uo("bodyAttributes",u,p),htmlAttributes:uo("htmlAttributes",_,p),link:uo(qt.LINK,U,p),meta:uo(qt.META,V,p),noscript:uo(qt.NOSCRIPT,x,p),script:uo(qt.SCRIPT,q,p),style:uo(qt.STYLE,E,p),title:uo(qt.TITLE,{title:P,titleAttributes:R},p)}},T3=[],np=function(t,o){var u=this;o===void 0&&(o=typeof document<"u"),this.instances=[],this.value={setHelmet:function(p){u.context.helmet=p},helmetInstances:{get:function(){return u.canUseDOM?T3:u.instances},add:function(p){(u.canUseDOM?T3:u.instances).push(p)},remove:function(p){var _=(u.canUseDOM?T3:u.instances).indexOf(p);(u.canUseDOM?T3:u.instances).splice(_,1)}}},this.context=t,this.canUseDOM=o,o||(t.helmet=tp({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))},Ty=Gs.createContext({}),US=fn.shape({setHelmet:fn.func,helmetInstances:fn.shape({get:fn.func,add:fn.func,remove:fn.func})}),NS=typeof document<"u",H0=function(t){function o(u){var p;return(p=t.call(this,u)||this).helmetData=new np(p.props.context,o.canUseDOM),p}return a7(o,t),o.prototype.render=function(){return Gs.createElement(Ty.Provider,{value:this.helmetData.value},this.props.children)},o}(Ue.Component);H0.canUseDOM=NS,H0.propTypes={context:fn.shape({helmet:fn.shape()}),children:fn.node.isRequired},H0.defaultProps={context:{}},H0.displayName="HelmetProvider";var ac=function(t,o){var u,p=document.head||document.querySelector(qt.HEAD),_=p.querySelectorAll(t+"[data-rh]"),x=[].slice.call(_),E=[];return o&&o.length&&o.forEach(function(s){var P=document.createElement(t);for(var R in s)Object.prototype.hasOwnProperty.call(s,R)&&(R==="innerHTML"?P.innerHTML=s.innerHTML:R==="cssText"?P.styleSheet?P.styleSheet.cssText=s.cssText:P.appendChild(document.createTextNode(s.cssText)):P.setAttribute(R,s[R]===void 0?"":s[R]));P.setAttribute("data-rh","true"),x.some(function(U,V){return u=V,P.isEqualNode(U)})?x.splice(u,1):E.push(P)}),x.forEach(function(s){return s.parentNode.removeChild(s)}),E.forEach(function(s){return p.appendChild(s)}),{oldTags:x,newTags:E}},e6=function(t,o){var u=document.getElementsByTagName(t)[0];if(u){for(var p=u.getAttribute("data-rh"),_=p?p.split(","):[],x=[].concat(_),E=Object.keys(o),s=0;s<E.length;s+=1){var P=E[s],R=o[P]||"";u.getAttribute(P)!==R&&u.setAttribute(P,R),_.indexOf(P)===-1&&_.push(P);var U=x.indexOf(P);U!==-1&&x.splice(U,1)}for(var V=x.length-1;V>=0;V-=1)u.removeAttribute(x[V]);_.length===x.length?u.removeAttribute("data-rh"):u.getAttribute("data-rh")!==E.join(",")&&u.setAttribute("data-rh",E.join(","))}},wm=function(t,o){var u=t.baseTag,p=t.htmlAttributes,_=t.linkTags,x=t.metaTags,E=t.noscriptTags,s=t.onChangeClientState,P=t.scriptTags,R=t.styleTags,U=t.title,V=t.titleAttributes;e6(qt.BODY,t.bodyAttributes),e6(qt.HTML,p),function(xe,Ie){xe!==void 0&&document.title!==xe&&(document.title=by(xe)),e6(qt.TITLE,Ie)}(U,V);var q={baseTag:ac(qt.BASE,u),linkTags:ac(qt.LINK,_),metaTags:ac(qt.META,x),noscriptTags:ac(qt.NOSCRIPT,E),scriptTags:ac(qt.SCRIPT,P),styleTags:ac(qt.STYLE,R)},ve={},we={};Object.keys(q).forEach(function(xe){var Ie=q[xe],te=Ie.newTags,ne=Ie.oldTags;te.length&&(ve[xe]=te),ne.length&&(we[xe]=q[xe].oldTags)}),o&&o(),s(t,ve,we)},G0=null,f5=function(t){function o(){for(var p,_=arguments.length,x=new Array(_),E=0;E<_;E++)x[E]=arguments[E];return(p=t.call.apply(t,[this].concat(x))||this).rendered=!1,p}a7(o,t);var u=o.prototype;return u.shouldComponentUpdate=function(p){return!AS(p,this.props)},u.componentDidUpdate=function(){this.emitChange()},u.componentWillUnmount=function(){this.props.context.helmetInstances.remove(this),this.emitChange()},u.emitChange=function(){var p,_,x=this.props.context,E=x.setHelmet,s=null,P=(p=x.helmetInstances.get().map(function(R){var U=mr({},R.props);return delete U.context,U}),{baseTag:FS(["href"],p),bodyAttributes:Y4("bodyAttributes",p),defer:Dc(p,"defer"),encode:Dc(p,"encodeSpecialCharacters"),htmlAttributes:Y4("htmlAttributes",p),linkTags:V0(qt.LINK,["rel","href"],p),metaTags:V0(qt.META,["name","charset","http-equiv","property","itemprop"],p),noscriptTags:V0(qt.NOSCRIPT,["innerHTML"],p),onChangeClientState:RS(p),scriptTags:V0(qt.SCRIPT,["src","innerHTML"],p),styleTags:V0(qt.STYLE,["cssText"],p),title:DS(p),titleAttributes:Y4("titleAttributes",p),prioritizeSeoTags:BS(p,"prioritizeSeoTags")});H0.canUseDOM?(_=P,G0&&cancelAnimationFrame(G0),_.defer?G0=requestAnimationFrame(function(){wm(_,function(){G0=null})}):(wm(_),G0=null)):tp&&(s=tp(P)),E(s)},u.init=function(){this.rendered||(this.rendered=!0,this.props.context.helmetInstances.add(this),this.emitChange())},u.render=function(){return this.init(),null},o}(Ue.Component);f5.propTypes={context:US.isRequired},f5.displayName="HelmetDispatcher";var jS=["children"],VS=["children"],t6=function(t){function o(){return t.apply(this,arguments)||this}a7(o,t);var u=o.prototype;return u.shouldComponentUpdate=function(p){return!SS(ym(this.props,"helmetData"),ym(p,"helmetData"))},u.mapNestedChildrenToProps=function(p,_){if(!_)return null;switch(p.type){case qt.SCRIPT:case qt.NOSCRIPT:return{innerHTML:_};case qt.STYLE:return{cssText:_};default:throw new Error("<"+p.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")}},u.flattenArrayTypeChildren=function(p){var _,x=p.child,E=p.arrayTypeChildren;return mr({},E,((_={})[x.type]=[].concat(E[x.type]||[],[mr({},p.newChildProps,this.mapNestedChildrenToProps(x,p.nestedChildren))]),_))},u.mapObjectTypeChildren=function(p){var _,x,E=p.child,s=p.newProps,P=p.newChildProps,R=p.nestedChildren;switch(E.type){case qt.TITLE:return mr({},s,((_={})[E.type]=R,_.titleAttributes=mr({},P),_));case qt.BODY:return mr({},s,{bodyAttributes:mr({},P)});case qt.HTML:return mr({},s,{htmlAttributes:mr({},P)});default:return mr({},s,((x={})[E.type]=mr({},P),x))}},u.mapArrayTypeChildrenToProps=function(p,_){var x=mr({},_);return Object.keys(p).forEach(function(E){var s;x=mr({},x,((s={})[E]=p[E],s))}),x},u.warnOnInvalidChildren=function(p,_){return mm(gm.some(function(x){return p.type===x}),typeof p.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":"Only elements types "+gm.join(", ")+" are allowed. Helmet does not support rendering <"+p.type+"> elements. Refer to our API for more information."),mm(!_||typeof _=="string"||Array.isArray(_)&&!_.some(function(x){return typeof x!="string"}),"Helmet expects a string as a child of <"+p.type+">. Did you forget to wrap your children in braces? ( <"+p.type+">{``}</"+p.type+"> ) Refer to our API for more information."),!0},u.mapChildrenToProps=function(p,_){var x=this,E={};return Gs.Children.forEach(p,function(s){if(s&&s.props){var P=s.props,R=P.children,U=_m(P,jS),V=Object.keys(U).reduce(function(ve,we){return ve[LS[we]||we]=U[we],ve},{}),q=s.type;switch(typeof q=="symbol"?q=q.toString():x.warnOnInvalidChildren(s,R),q){case qt.FRAGMENT:_=x.mapChildrenToProps(R,_);break;case qt.LINK:case qt.META:case qt.NOSCRIPT:case qt.SCRIPT:case qt.STYLE:E=x.flattenArrayTypeChildren({child:s,arrayTypeChildren:E,newChildProps:V,nestedChildren:R});break;default:_=x.mapObjectTypeChildren({child:s,newProps:_,newChildProps:V,nestedChildren:R})}}}),this.mapArrayTypeChildrenToProps(E,_)},u.render=function(){var p=this.props,_=p.children,x=_m(p,VS),E=mr({},x),s=x.helmetData;return _&&(E=this.mapChildrenToProps(_,E)),!s||s instanceof np||(s=new np(s.context,s.instances)),s?Gs.createElement(f5,mr({},E,{context:s.value,helmetData:void 0})):Gs.createElement(Ty.Consumer,null,function(P){return Gs.createElement(f5,mr({},E,{context:P}))})},o}(Ue.Component);t6.propTypes={base:fn.object,bodyAttributes:fn.object,children:fn.oneOfType([fn.arrayOf(fn.node),fn.node]),defaultTitle:fn.string,defer:fn.bool,encodeSpecialCharacters:fn.bool,htmlAttributes:fn.object,link:fn.arrayOf(fn.object),meta:fn.arrayOf(fn.object),noscript:fn.arrayOf(fn.object),onChangeClientState:fn.func,script:fn.arrayOf(fn.object),style:fn.arrayOf(fn.object),title:fn.string,titleAttributes:fn.object,titleTemplate:fn.string,prioritizeSeoTags:fn.bool,helmetData:fn.object},t6.defaultProps={defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1},t6.displayName="Helmet";var GS="@vercel/analytics",$S="0.1.11",ZS=()=>{window.va||(window.va=function(...o){(window.vaq=window.vaq||[]).push(o)})};function qS(){return typeof window<"u"}function WS(){try{const t="production";return t==="development"||t==="test"}catch{return!1}}function HS(t="auto"){return t==="auto"?WS()?"development":"production":t}var XS=(t={debug:!0})=>{var o;if(!qS())return;const u=HS(t.mode);ZS(),t.beforeSend&&((o=window.va)==null||o.call(window,"beforeSend",t.beforeSend));const p=u==="development"?"https://cdn.vercel-insights.com/v1/script.debug.js":"/_vercel/insights/script.js";if(document.head.querySelector(`script[src*="${p}"]`))return;const _=document.createElement("script");_.src=p,_.defer=!0,_.setAttribute("data-sdkn",GS),_.setAttribute("data-sdkv",$S),u==="development"&&t.debug===!1&&_.setAttribute("data-debug","false"),document.head.appendChild(_)};function zC({beforeSend:t,debug:o=!0,mode:u="auto"}){return Ue.useEffect(()=>{XS({beforeSend:t,debug:o,mode:u})},[t,o,u]),null}var Ey={exports:{}};(function(t){var o={};function u(x){return Math.floor(Math.abs(x)+.5)*(x>=0?1:-1)}function p(x,E,s){x=u(x*s),E=u(E*s);var P=(x-E)*2;P<0&&(P=-P-1);for(var R="";P>=32;)R+=String.fromCharCode((32|P&31)+63),P/=32;return R+=String.fromCharCode((P|0)+63),R}o.decode=function(x,E){for(var s=0,P=0,R=0,U=[],V=0,q=0,ve=null,we,xe,Ie=Math.pow(10,Number.isInteger(E)?E:5);s<x.length;){ve=null,V=1,q=0;do ve=x.charCodeAt(s++)-63,q+=(ve&31)*V,V*=32;while(ve>=32);we=q&1?(-q-1)/2:q/2,V=1,q=0;do ve=x.charCodeAt(s++)-63,q+=(ve&31)*V,V*=32;while(ve>=32);xe=q&1?(-q-1)/2:q/2,P+=we,R+=xe,U.push([P/Ie,R/Ie])}return U},o.encode=function(x,E){if(!x.length)return"";for(var s=Math.pow(10,Number.isInteger(E)?E:5),P=p(x[0][0],0,s)+p(x[0][1],0,s),R=1;R<x.length;R++){var U=x[R],V=x[R-1];P+=p(U[0],V[0],s),P+=p(U[1],V[1],s)}return P};function _(x){for(var E=[],s=0;s<x.length;s++){var P=x[s].slice();E.push([P[1],P[0]])}return E}o.fromGeoJSON=function(x,E){if(x&&x.type==="Feature"&&(x=x.geometry),!x||x.type!=="LineString")throw new Error("Input must be a GeoJSON LineString");return o.encode(_(x.coordinates),E)},o.toGeoJSON=function(x,E){var s=o.decode(x,E);return{type:"LineString",coordinates:_(s)}},t.exports&&(t.exports=o)})(Ey);var LC=Ey.exports;/* @preserve
 * gcoord 0.3.2, geographic coordinate library
 * Copyright (c) 2021 Jiulong Hu <me@hujiulong.com>
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var m5=function(){return m5=Object.assign||function(o){for(var u,p=1,_=arguments.length;p<_;p++){u=arguments[p];for(var x in u)Object.prototype.hasOwnProperty.call(u,x)&&(o[x]=u[x])}return o},m5.apply(this,arguments)},Vi=Math.sin,KS=Math.cos,l7=Math.sqrt,_5=Math.abs,ui=Math.PI,bm=6378245,Tm=.006693421622965823;function Sy(t,o){return t>=72.004&&t<=137.8347&&o>=.8293&&o<=55.8271}function YS(t,o){var u=-100+2*t+3*o+.2*o*o+.1*t*o+.2*l7(_5(t));return u+=(20*Vi(6*t*ui)+20*Vi(2*t*ui))*2/3,u+=(20*Vi(o*ui)+40*Vi(o/3*ui))*2/3,u+=(160*Vi(o/12*ui)+320*Vi(o*ui/30))*2/3,u}function JS(t,o){var u=300+t+2*o+.1*t*t+.1*t*o+.1*l7(_5(t));return u+=(20*Vi(6*t*ui)+20*Vi(2*t*ui))*2/3,u+=(20*Vi(t*ui)+40*Vi(t/3*ui))*2/3,u+=(150*Vi(t/12*ui)+300*Vi(t/30*ui))*2/3,u}function QS(t,o){var u=JS(t-105,o-35),p=YS(t-105,o-35),_=o/180*ui,x=Vi(_);x=1-Tm*x*x;var E=l7(x);return u=u*180/(bm/E*KS(_)*ui),p=p*180/(bm*(1-Tm)/(x*E)*ui),[u,p]}function Ka(t){var o=t[0],u=t[1];if(!Sy(o,u))return[o,u];var p=QS(o,u);return[o+p[0],u+p[1]]}function Zc(t){var o=t[0],u=t[1];if(!Sy(o,u))return[o,u];for(var p=[o,u],_=p[0],x=p[1],E=Ka([_,x]),s=E[0]-o,P=E[1]-u;_5(s)>1e-6||_5(P)>1e-6;)_-=s,x-=P,E=Ka([_,x]),s=E[0]-o,P=E[1]-u;return[_,x]}var g5=Math.sin,y5=Math.cos,My=Math.atan2,Cy=Math.sqrt,eM=Math.PI,v5=eM*3e3/180;function Rc(t){var o=t[0],u=t[1],p=o-.0065,_=u-.006,x=Cy(p*p+_*_)-2e-5*g5(_*v5),E=My(_,p)-3e-6*y5(p*v5),s=x*y5(E),P=x*g5(E);return[s,P]}function qc(t){var o=t[0],u=t[1],p=o,_=u,x=Cy(p*p+_*_)+2e-5*g5(_*v5),E=My(_,p)+3e-6*y5(p*v5),s=x*y5(E)+.0065,P=x*g5(E)+.006;return[s,P]}var Em=180/Math.PI,Sm=Math.PI/180,x5=6378137,La=20037508342789244e-9;function E3(t){return[t[0]*Em/x5,(Math.PI*.5-2*Math.atan(Math.exp(-t[1]/x5)))*Em]}function V5(t){var o=Math.abs(t[0])<=180?t[0]:t[0]-(t[0]<0?-1:1)*360,u=[x5*o*Sm,x5*Math.log(Math.tan(Math.PI*.25+.5*t[1]*Sm))];return u[0]>La&&(u[0]=La),u[0]<-La&&(u[0]=-La),u[1]>La&&(u[1]=La),u[1]<-La&&(u[1]=-La),u}var rp=Math.abs,Mm=[1289059486e-2,836237787e-2,5591021,348198983e-2,167804312e-2,0],Cm=[75,60,45,30,15,0],tM=[[1410526172116255e-23,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,173379812e-1],[-7435856389565537e-24,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,1026014486e-2],[-3030883460898826e-23,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,685681737e-2],[-1981981304930552e-23,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,448277706e-2],[309191371068437e-23,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,25551644e-1],[2890871144776878e-24,8983055095805407e-21,-3068298e-14,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]],nM=[[-.0015702102444,111320.7020616939,0x60e374c3105a3,-0x24bb4115e2e164,0x5cc55543bb0ae8,-0x7ce070193f3784,0x5e7ca61ddf8150,-0x261a578d8b24d0,0x665d60f3742ca,82.5],[.0008277824516172526,111320.7020463578,6477955746671607e-7,-4082003173641316e-6,1077490566351142e-5,-1517187553151559e-5,1205306533862167e-5,-5124939663577472e-6,9133119359512032e-7,67.5],[.00337398766765,111320.7020202162,4481351045890365e-9,-2339375119931662e-8,7968221547186455e-8,-1159649932797253e-7,9723671115602145e-8,-4366194633752821e-8,8477230501135234e-9,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837749470245e-9,992013.7397791013,-122195221711287e-8,1340652697009075e-9,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758690035394e-9,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]];function Py(t,o,u){var p=rp(o)/u[9],_=u[0]+u[1]*rp(t),x=u[2]+u[3]*p+u[4]*Math.pow(p,2)+u[5]*Math.pow(p,3)+u[6]*Math.pow(p,4)+u[7]*Math.pow(p,5)+u[8]*Math.pow(p,6);return _*=t<0?-1:1,x*=o<0?-1:1,[_,x]}function G5(t){for(var o=t[0],u=t[1],p=[],_=0;_<Cm.length;_++)if(rp(u)>Cm[_]){p=nM[_];break}return Py(o,u,p)}function S3(t){for(var o=t[0],u=t[1],p=[],_=0;_<Mm.length;_++)if(u>=Mm[_]){p=tM[_];break}return Py(o,u,p)}function Da(t,o){if(!t)throw new Error(o)}function Ay(t){return!!t&&Object.prototype.toString.call(t)==="[object Array]"}function Pm(t){return!isNaN(Number(t))&&t!==null&&!Ay(t)}function go(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];var u=t.length-1;return function(){for(var p=[],_=0;_<arguments.length;_++)p[_]=arguments[_];for(var x=u,E=t[u].apply(null,p);x--;)E=t[x].call(null,E);return E}}function Iy(t,o,u){if(u===void 0&&(u=!1),t!==null)for(var p,_,x,E,s,P,R,U=0,V=0,q,ve=t.type,we=ve==="FeatureCollection",xe=ve==="Feature",Ie=we?t.features.length:1,te=0;te<Ie;te++){R=we?t.features[te].geometry:xe?t.geometry:t,q=R?R.type==="GeometryCollection":!1,s=q?R.geometries.length:1;for(var ne=0;ne<s;ne++){var se=0,Se=0;if(E=q?R.geometries[ne]:R,E!==null){var Be=E.type;switch(U=u&&(Be==="Polygon"||Be==="MultiPolygon")?1:0,Be){case null:break;case"Point":if(P=E.coordinates,o(P,V,te,se,Se)===!1)return!1;V++,se++;break;case"LineString":case"MultiPoint":for(P=E.coordinates,p=0;p<P.length;p++){if(o(P[p],V,te,se,Se)===!1)return!1;V++,Be==="MultiPoint"&&se++}Be==="LineString"&&se++;break;case"Polygon":case"MultiLineString":for(P=E.coordinates,p=0;p<P.length;p++){for(_=0;_<P[p].length-U;_++){if(o(P[p][_],V,te,se,Se)===!1)return!1;V++}Be==="MultiLineString"&&se++,Be==="Polygon"&&Se++}Be==="Polygon"&&se++;break;case"MultiPolygon":for(P=E.coordinates,p=0;p<P.length;p++){for(Se=0,_=0;_<P[p].length;_++){for(x=0;x<P[p][_].length-U;x++){if(o(P[p][_][x],V,te,se,Se)===!1)return!1;V++}Se++}se++}break;case"GeometryCollection":for(p=0;p<E.geometries.length;p++)if(Iy(E.geometries[p],o,u)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}var lc,cc,uc,hc,dc,Kn;(function(t){t.WGS84="WGS84",t.WGS1984="WGS84",t.EPSG4326="WGS84",t.GCJ02="GCJ02",t.AMap="GCJ02",t.BD09="BD09",t.BD09LL="BD09",t.Baidu="BD09",t.BMap="BD09",t.BD09MC="BD09MC",t.BD09Meter="BD09MC",t.EPSG3857="EPSG3857",t.EPSG900913="EPSG3857",t.EPSG102100="EPSG3857",t.WebMercator="EPSG3857",t.WM="EPSG3857"})(Kn||(Kn={}));var rM={to:(lc={},lc[Kn.GCJ02]=Ka,lc[Kn.BD09]=go(qc,Ka),lc[Kn.BD09MC]=go(G5,qc,Ka),lc[Kn.EPSG3857]=V5,lc)},iM={to:(cc={},cc[Kn.WGS84]=Zc,cc[Kn.BD09]=qc,cc[Kn.BD09MC]=go(G5,qc),cc[Kn.EPSG3857]=go(V5,Zc),cc)},oM={to:(uc={},uc[Kn.WGS84]=go(Zc,Rc),uc[Kn.GCJ02]=Rc,uc[Kn.EPSG3857]=go(V5,Zc,Rc),uc[Kn.BD09MC]=G5,uc)},sM={to:(hc={},hc[Kn.WGS84]=E3,hc[Kn.GCJ02]=go(Ka,E3),hc[Kn.BD09]=go(qc,Ka,E3),hc[Kn.BD09MC]=go(G5,qc,Ka,E3),hc)},aM={to:(dc={},dc[Kn.WGS84]=go(Zc,Rc,S3),dc[Kn.GCJ02]=go(Rc,S3),dc[Kn.EPSG3857]=go(V5,Zc,Rc,S3),dc[Kn.BD09]=S3,dc)},lM={WGS84:rM,GCJ02:iM,BD09:oM,EPSG3857:sM,BD09MC:aM};function cM(t,o,u){if(Da(!!t,"The args[0] input coordinate is required"),Da(!!o,"The args[1] original coordinate system is required"),Da(!!u,"The args[2] target coordinate system is required"),o===u)return t;var p=lM[o];Da(!!p,"Invalid original coordinate system: "+o);var _=p.to[u];Da(!!_,"Invalid target coordinate system: "+u);var x=typeof t;if(Da(x==="string"||x==="object","Invalid input coordinate type: "+x),x==="string")try{t=JSON.parse(t)}catch{throw new Error("Invalid input coordinate: "+t)}var E=!1;Ay(t)&&(Da(t.length>=2,"Invalid input coordinate: "+t),Da(Pm(t[0])&&Pm(t[1]),"Invalid input coordinate: "+t),t=t.map(Number),E=!0);var s=_;return E?s(t):(Iy(t,function(P){var R;R=s(P),P[0]=R[0],P[1]=R[1]}),t)}var uM=m5(m5({},Kn),{CRSTypes:Kn,transform:cM});const DC=uM;function M2(t){"@babel/helpers - typeof";return M2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},M2(t)}function hM(t,o){if(M2(t)!="object"||!t)return t;var u=t[Symbol.toPrimitive];if(u!==void 0){var p=u.call(t,o||"default");if(M2(p)!="object")return p;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(t)}function dM(t){var o=hM(t,"string");return M2(o)=="symbol"?o:o+""}function sr(t,o,u){return o=dM(o),o in t?Object.defineProperty(t,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):t[o]=u,t}var ri=1e-6,Wc=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,o=arguments.length;o--;)t+=arguments[o]*arguments[o];return Math.sqrt(t)});function pM(){var t=new Wc(4);return Wc!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function fM(t,o,u){return t[0]=o[0]*u,t[1]=o[1]*u,t[2]=o[2]*u,t[3]=o[3]*u,t}function mM(t,o,u){var p=o[0],_=o[1],x=o[2],E=o[3];return t[0]=u[0]*p+u[4]*_+u[8]*x+u[12]*E,t[1]=u[1]*p+u[5]*_+u[9]*x+u[13]*E,t[2]=u[2]*p+u[6]*_+u[10]*x+u[14]*E,t[3]=u[3]*p+u[7]*_+u[11]*x+u[15]*E,t}(function(){var t=pM();return function(o,u,p,_,x,E){var s,P;for(u||(u=4),p||(p=0),_?P=Math.min(_*u+p,o.length):P=o.length,s=p;s<P;s+=u)t[0]=o[s],t[1]=o[s+1],t[2]=o[s+2],t[3]=o[s+3],x(t,t,E),o[s]=t[0],o[s+1]=t[1],o[s+2]=t[2],o[s+3]=t[3];return o}})();function j3(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Fc(t,o){const u=mM([],o,t);return fM(u,u,1/u[3]),u}function ip(t,o,u){return t<o?o:t>u?u:t}function _M(t){return Math.log(t)*Math.LOG2E}const gM=Math.log2||_M;function yM(t,o){var u=o[0],p=o[1],_=o[2],x=o[3],E=o[4],s=o[5],P=o[6],R=o[7],U=o[8],V=o[9],q=o[10],ve=o[11],we=o[12],xe=o[13],Ie=o[14],te=o[15],ne=u*s-p*E,se=u*P-_*E,Se=u*R-x*E,Be=p*P-_*s,ye=p*R-x*s,Ye=_*R-x*P,lt=U*xe-V*we,Me=U*Ie-q*we,Mt=U*te-ve*we,Ut=V*Ie-q*xe,bt=V*te-ve*xe,Bt=q*te-ve*Ie,Ke=ne*Bt-se*bt+Se*Ut+Be*Mt-ye*Me+Ye*lt;return Ke?(Ke=1/Ke,t[0]=(s*Bt-P*bt+R*Ut)*Ke,t[1]=(_*bt-p*Bt-x*Ut)*Ke,t[2]=(xe*Ye-Ie*ye+te*Be)*Ke,t[3]=(q*ye-V*Ye-ve*Be)*Ke,t[4]=(P*Mt-E*Bt-R*Me)*Ke,t[5]=(u*Bt-_*Mt+x*Me)*Ke,t[6]=(Ie*Se-we*Ye-te*se)*Ke,t[7]=(U*Ye-q*Se+ve*se)*Ke,t[8]=(E*bt-s*Mt+R*lt)*Ke,t[9]=(p*Mt-u*bt-x*lt)*Ke,t[10]=(we*ye-xe*Se+te*ne)*Ke,t[11]=(V*Se-U*ye-ve*ne)*Ke,t[12]=(s*Me-E*Ut-P*lt)*Ke,t[13]=(u*Ut-p*Me+_*lt)*Ke,t[14]=(xe*se-we*Be-Ie*ne)*Ke,t[15]=(U*Be-V*se+q*ne)*Ke,t):null}function n6(t,o,u){var p=o[0],_=o[1],x=o[2],E=o[3],s=o[4],P=o[5],R=o[6],U=o[7],V=o[8],q=o[9],ve=o[10],we=o[11],xe=o[12],Ie=o[13],te=o[14],ne=o[15],se=u[0],Se=u[1],Be=u[2],ye=u[3];return t[0]=se*p+Se*s+Be*V+ye*xe,t[1]=se*_+Se*P+Be*q+ye*Ie,t[2]=se*x+Se*R+Be*ve+ye*te,t[3]=se*E+Se*U+Be*we+ye*ne,se=u[4],Se=u[5],Be=u[6],ye=u[7],t[4]=se*p+Se*s+Be*V+ye*xe,t[5]=se*_+Se*P+Be*q+ye*Ie,t[6]=se*x+Se*R+Be*ve+ye*te,t[7]=se*E+Se*U+Be*we+ye*ne,se=u[8],Se=u[9],Be=u[10],ye=u[11],t[8]=se*p+Se*s+Be*V+ye*xe,t[9]=se*_+Se*P+Be*q+ye*Ie,t[10]=se*x+Se*R+Be*ve+ye*te,t[11]=se*E+Se*U+Be*we+ye*ne,se=u[12],Se=u[13],Be=u[14],ye=u[15],t[12]=se*p+Se*s+Be*V+ye*xe,t[13]=se*_+Se*P+Be*q+ye*Ie,t[14]=se*x+Se*R+Be*ve+ye*te,t[15]=se*E+Se*U+Be*we+ye*ne,t}function op(t,o,u){var p=u[0],_=u[1],x=u[2],E,s,P,R,U,V,q,ve,we,xe,Ie,te;return o===t?(t[12]=o[0]*p+o[4]*_+o[8]*x+o[12],t[13]=o[1]*p+o[5]*_+o[9]*x+o[13],t[14]=o[2]*p+o[6]*_+o[10]*x+o[14],t[15]=o[3]*p+o[7]*_+o[11]*x+o[15]):(E=o[0],s=o[1],P=o[2],R=o[3],U=o[4],V=o[5],q=o[6],ve=o[7],we=o[8],xe=o[9],Ie=o[10],te=o[11],t[0]=E,t[1]=s,t[2]=P,t[3]=R,t[4]=U,t[5]=V,t[6]=q,t[7]=ve,t[8]=we,t[9]=xe,t[10]=Ie,t[11]=te,t[12]=E*p+U*_+we*x+o[12],t[13]=s*p+V*_+xe*x+o[13],t[14]=P*p+q*_+Ie*x+o[14],t[15]=R*p+ve*_+te*x+o[15]),t}function ky(t,o,u){var p=u[0],_=u[1],x=u[2];return t[0]=o[0]*p,t[1]=o[1]*p,t[2]=o[2]*p,t[3]=o[3]*p,t[4]=o[4]*_,t[5]=o[5]*_,t[6]=o[6]*_,t[7]=o[7]*_,t[8]=o[8]*x,t[9]=o[9]*x,t[10]=o[10]*x,t[11]=o[11]*x,t[12]=o[12],t[13]=o[13],t[14]=o[14],t[15]=o[15],t}function vM(t,o,u){var p=Math.sin(u),_=Math.cos(u),x=o[4],E=o[5],s=o[6],P=o[7],R=o[8],U=o[9],V=o[10],q=o[11];return o!==t&&(t[0]=o[0],t[1]=o[1],t[2]=o[2],t[3]=o[3],t[12]=o[12],t[13]=o[13],t[14]=o[14],t[15]=o[15]),t[4]=x*_+R*p,t[5]=E*_+U*p,t[6]=s*_+V*p,t[7]=P*_+q*p,t[8]=R*_-x*p,t[9]=U*_-E*p,t[10]=V*_-s*p,t[11]=q*_-P*p,t}function xM(t,o,u){var p=Math.sin(u),_=Math.cos(u),x=o[0],E=o[1],s=o[2],P=o[3],R=o[4],U=o[5],V=o[6],q=o[7];return o!==t&&(t[8]=o[8],t[9]=o[9],t[10]=o[10],t[11]=o[11],t[12]=o[12],t[13]=o[13],t[14]=o[14],t[15]=o[15]),t[0]=x*_+R*p,t[1]=E*_+U*p,t[2]=s*_+V*p,t[3]=P*_+q*p,t[4]=R*_-x*p,t[5]=U*_-E*p,t[6]=V*_-s*p,t[7]=q*_-P*p,t}function wM(t,o,u,p,_){var x=1/Math.tan(o/2),E;return t[0]=x/u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=x,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,_!=null&&_!==1/0?(E=1/(p-_),t[10]=(_+p)*E,t[14]=2*_*p*E):(t[10]=-1,t[14]=-2*p),t}var bM=wM;function Am(t,o){var u=t[0],p=t[1],_=t[2],x=t[3],E=t[4],s=t[5],P=t[6],R=t[7],U=t[8],V=t[9],q=t[10],ve=t[11],we=t[12],xe=t[13],Ie=t[14],te=t[15],ne=o[0],se=o[1],Se=o[2],Be=o[3],ye=o[4],Ye=o[5],lt=o[6],Me=o[7],Mt=o[8],Ut=o[9],bt=o[10],Bt=o[11],Ke=o[12],Ge=o[13],Je=o[14],Xe=o[15];return Math.abs(u-ne)<=ri*Math.max(1,Math.abs(u),Math.abs(ne))&&Math.abs(p-se)<=ri*Math.max(1,Math.abs(p),Math.abs(se))&&Math.abs(_-Se)<=ri*Math.max(1,Math.abs(_),Math.abs(Se))&&Math.abs(x-Be)<=ri*Math.max(1,Math.abs(x),Math.abs(Be))&&Math.abs(E-ye)<=ri*Math.max(1,Math.abs(E),Math.abs(ye))&&Math.abs(s-Ye)<=ri*Math.max(1,Math.abs(s),Math.abs(Ye))&&Math.abs(P-lt)<=ri*Math.max(1,Math.abs(P),Math.abs(lt))&&Math.abs(R-Me)<=ri*Math.max(1,Math.abs(R),Math.abs(Me))&&Math.abs(U-Mt)<=ri*Math.max(1,Math.abs(U),Math.abs(Mt))&&Math.abs(V-Ut)<=ri*Math.max(1,Math.abs(V),Math.abs(Ut))&&Math.abs(q-bt)<=ri*Math.max(1,Math.abs(q),Math.abs(bt))&&Math.abs(ve-Bt)<=ri*Math.max(1,Math.abs(ve),Math.abs(Bt))&&Math.abs(we-Ke)<=ri*Math.max(1,Math.abs(we),Math.abs(Ke))&&Math.abs(xe-Ge)<=ri*Math.max(1,Math.abs(xe),Math.abs(Ge))&&Math.abs(Ie-Je)<=ri*Math.max(1,Math.abs(Ie),Math.abs(Je))&&Math.abs(te-Xe)<=ri*Math.max(1,Math.abs(te),Math.abs(Xe))}function TM(){var t=new Wc(2);return Wc!=Float32Array&&(t[0]=0,t[1]=0),t}function Im(t,o,u){return t[0]=o[0]+u[0],t[1]=o[1]+u[1],t}function EM(t,o){return t[0]=-o[0],t[1]=-o[1],t}function zy(t,o,u,p){var _=o[0],x=o[1];return t[0]=_+p*(u[0]-_),t[1]=x+p*(u[1]-x),t}(function(){var t=TM();return function(o,u,p,_,x,E){var s,P;for(u||(u=2),p||(p=0),_?P=Math.min(_*u+p,o.length):P=o.length,s=p;s<P;s+=u)t[0]=o[s],t[1]=o[s+1],x(t,t,E),o[s]=t[0],o[s+1]=t[1];return o}})();function SM(){var t=new Wc(3);return Wc!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function MM(t,o,u){return t[0]=o[0]+u[0],t[1]=o[1]+u[1],t[2]=o[2]+u[2],t}function CM(t,o,u){return t[0]=o[0]*u[0],t[1]=o[1]*u[1],t[2]=o[2]*u[2],t}function PM(t,o){return t[0]=-o[0],t[1]=-o[1],t[2]=-o[2],t}var AM=CM;(function(){var t=SM();return function(o,u,p,_,x,E){var s,P;for(u||(u=3),p||(p=0),_?P=Math.min(_*u+p,o.length):P=o.length,s=p;s<P;s+=u)t[0]=o[s],t[1]=o[s+1],t[2]=o[s+2],x(t,t,E),o[s]=t[0],o[s+1]=t[1],o[s+2]=t[2];return o}})();function Qa(t,o){if(!t)throw new Error(o||"@math.gl/web-mercator: assertion failed.")}const Ho=Math.PI,Ly=Ho/4,ys=Ho/180,sp=180/Ho,C2=512,km=4003e4,M3=85.051129,Dy=1.5;function IM(t){return Math.pow(2,t)}function Cc(t){const[o,u]=t;Qa(Number.isFinite(o)),Qa(Number.isFinite(u)&&u>=-90&&u<=90,"invalid latitude");const p=o*ys,_=u*ys,x=C2*(p+Ho)/(2*Ho),E=C2*(Ho+Math.log(Math.tan(Ly+_*.5)))/(2*Ho);return[x,E]}function o2(t){const[o,u]=t,p=o/C2*(2*Ho)-Ho,_=2*(Math.atan(Math.exp(u/C2*(2*Ho)-Ho))-Ly);return[p*sp,_*sp]}function kM(t){const{latitude:o,longitude:u,highPrecision:p=!1}=t;Qa(Number.isFinite(o)&&Number.isFinite(u));const _=C2,x=Math.cos(o*ys),E=_/360,s=E/x,P=_/km/x,R={unitsPerMeter:[P,P,P],metersPerUnit:[1/P,1/P,1/P],unitsPerDegree:[E,s,P],degreesPerUnit:[1/E,1/s,1/P]};if(p){const U=ys*Math.tan(o*ys)/x,V=E*U/2,q=_/km*U,ve=q/s*P;R.unitsPerDegree2=[0,V,q],R.unitsPerMeter2=[ve,0,ve]}return R}function zM(t){const{height:o,pitch:u,bearing:p,altitude:_,scale:x,center:E}=t,s=j3();op(s,s,[0,0,-_]),vM(s,s,-u*ys),xM(s,s,p*ys);const P=x/o;return ky(s,s,[P,P,P]),E&&op(s,s,PM([],E)),s}function LM(t){const{width:o,height:u,altitude:p,pitch:_=0,offset:x,center:E,scale:s,nearZMultiplier:P=1,farZMultiplier:R=1}=t;let{fovy:U=w5(Dy)}=t;p!==void 0&&(U=w5(p));const V=U*ys,q=_*ys,ve=Ry(U);let we=ve;E&&(we+=E[2]*s/Math.cos(q)/u);const xe=V*(.5+(x?x[1]:0)/u),Ie=Math.sin(xe)*we/Math.sin(ip(Math.PI/2-q-xe,.01,Math.PI-.01)),te=Math.sin(q)*Ie+we,ne=we*10,se=Math.min(te*R,ne);return{fov:V,aspect:o/u,focalDistance:ve,near:P,far:se}}function DM(t){const{fov:o,aspect:u,near:p,far:_}=LM(t);return bM([],o,u,p,_)}function w5(t){return 2*Math.atan(.5/t)*sp}function Ry(t){return .5/Math.tan(.5*t*ys)}function RM(t,o){const[u,p,_=0]=t;return Qa(Number.isFinite(u)&&Number.isFinite(p)&&Number.isFinite(_)),Fc(o,[u,p,_,1])}function zm(t,o,u=0){const[p,_,x]=t;if(Qa(Number.isFinite(p)&&Number.isFinite(_),"invalid pixel coordinate"),Number.isFinite(x))return Fc(o,[p,_,x,1]);const E=Fc(o,[p,_,0,1]),s=Fc(o,[p,_,1,1]),P=E[2],R=s[2],U=P===R?0:((u||0)-P)/(R-P);return zy([],E,s,U)}function FM(t){const{width:o,height:u,bounds:p,minExtent:_=0,maxZoom:x=24,offset:E=[0,0]}=t,[[s,P],[R,U]]=p,V=BM(t.padding),q=Cc([s,ip(U,-M3,M3)]),ve=Cc([R,ip(P,-M3,M3)]),we=[Math.max(Math.abs(ve[0]-q[0]),_),Math.max(Math.abs(ve[1]-q[1]),_)],xe=[o-V.left-V.right-Math.abs(E[0])*2,u-V.top-V.bottom-Math.abs(E[1])*2];Qa(xe[0]>0&&xe[1]>0);const Ie=xe[0]/we[0],te=xe[1]/we[1],ne=(V.right-V.left)/2/Ie,se=(V.top-V.bottom)/2/te,Se=[(ve[0]+q[0])/2+ne,(ve[1]+q[1])/2+se],Be=o2(Se),ye=Math.min(x,gM(Math.abs(Math.min(Ie,te))));return Qa(Number.isFinite(ye)),{longitude:Be[0],latitude:Be[1],zoom:ye}}function BM(t=0){return typeof t=="number"?{top:t,bottom:t,left:t,right:t}:(Qa(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}const Lm=Math.PI/180;function OM(t,o=0){const{width:u,height:p,unproject:_}=t,x={targetZ:o},E=_([0,p],x),s=_([u,p],x);let P,R;const U=t.fovy?.5*t.fovy*Lm:Math.atan(.5/t.altitude),V=(90-t.pitch)*Lm;return U>V-.01?(P=Dm(t,0,o),R=Dm(t,u,o)):(P=_([0,0],x),R=_([u,0],x)),[E,s,R,P]}function Dm(t,o,u){const{pixelUnprojectionMatrix:p}=t,_=Fc(p,[o,0,1,1]),x=Fc(p,[o,t.height,1,1]),s=(u*t.distanceScales.unitsPerMeter[2]-_[2])/(x[2]-_[2]),P=zy([],_,x,s),R=o2(P);return R.push(u),R}class ap{constructor(o={width:1,height:1}){sr(this,"latitude",void 0),sr(this,"longitude",void 0),sr(this,"zoom",void 0),sr(this,"pitch",void 0),sr(this,"bearing",void 0),sr(this,"altitude",void 0),sr(this,"fovy",void 0),sr(this,"meterOffset",void 0),sr(this,"center",void 0),sr(this,"width",void 0),sr(this,"height",void 0),sr(this,"scale",void 0),sr(this,"distanceScales",void 0),sr(this,"viewMatrix",void 0),sr(this,"projectionMatrix",void 0),sr(this,"viewProjectionMatrix",void 0),sr(this,"pixelProjectionMatrix",void 0),sr(this,"pixelUnprojectionMatrix",void 0),sr(this,"equals",te=>te instanceof ap?te.width===this.width&&te.height===this.height&&Am(te.projectionMatrix,this.projectionMatrix)&&Am(te.viewMatrix,this.viewMatrix):!1),sr(this,"project",(te,ne={})=>{const{topLeft:se=!0}=ne,Se=this.projectPosition(te),Be=RM(Se,this.pixelProjectionMatrix),[ye,Ye]=Be,lt=se?Ye:this.height-Ye;return te.length===2?[ye,lt]:[ye,lt,Be[2]]}),sr(this,"unproject",(te,ne={})=>{const{topLeft:se=!0,targetZ:Se=void 0}=ne,[Be,ye,Ye]=te,lt=se?ye:this.height-ye,Me=Se&&Se*this.distanceScales.unitsPerMeter[2],Mt=zm([Be,lt,Ye],this.pixelUnprojectionMatrix,Me),[Ut,bt,Bt]=this.unprojectPosition(Mt);return Number.isFinite(Ye)?[Ut,bt,Bt]:Number.isFinite(Se)?[Ut,bt,Se]:[Ut,bt]}),sr(this,"projectPosition",te=>{const[ne,se]=Cc(te),Se=(te[2]||0)*this.distanceScales.unitsPerMeter[2];return[ne,se,Se]}),sr(this,"unprojectPosition",te=>{const[ne,se]=o2(te),Se=(te[2]||0)*this.distanceScales.metersPerUnit[2];return[ne,se,Se]});let{width:u,height:p,altitude:_=null,fovy:x=null}=o;const{latitude:E=0,longitude:s=0,zoom:P=0,pitch:R=0,bearing:U=0,position:V=null,nearZMultiplier:q=.02,farZMultiplier:ve=1.01}=o;u=u||1,p=p||1,x===null&&_===null?(_=Dy,x=w5(_)):x===null?x=w5(_):_===null&&(_=Ry(x));const we=IM(P);_=Math.max(.75,_);const xe=kM({longitude:s,latitude:E}),Ie=Cc([s,E]);Ie.push(0),V&&MM(Ie,Ie,AM([],V,xe.unitsPerMeter)),this.projectionMatrix=DM({width:u,height:p,scale:we,center:Ie,pitch:R,fovy:x,nearZMultiplier:q,farZMultiplier:ve}),this.viewMatrix=zM({height:p,scale:we,center:Ie,pitch:R,bearing:U,altitude:_}),this.width=u,this.height=p,this.scale=we,this.latitude=E,this.longitude=s,this.zoom=P,this.pitch=R,this.bearing=U,this.altitude=_,this.fovy=x,this.center=Ie,this.meterOffset=V||[0,0,0],this.distanceScales=xe,this._initMatrices(),Object.freeze(this)}_initMatrices(){const{width:o,height:u,projectionMatrix:p,viewMatrix:_}=this,x=j3();n6(x,x,p),n6(x,x,_),this.viewProjectionMatrix=x;const E=j3();ky(E,E,[o/2,-u/2,1]),op(E,E,[1,-1,0]),n6(E,E,x);const s=yM(j3(),E);if(!s)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=E,this.pixelUnprojectionMatrix=s}projectFlat(o){return Cc(o)}unprojectFlat(o){return o2(o)}getMapCenterByLngLatPosition({lngLat:o,pos:u}){const p=zm(u,this.pixelUnprojectionMatrix),_=Cc(o),x=Im([],_,EM([],p)),E=Im([],this.center,x);return o2(E)}fitBounds(o,u={}){const{width:p,height:_}=this,{longitude:x,latitude:E,zoom:s}=FM(Object.assign({width:p,height:_,bounds:o},u));return new ap({width:p,height:_,longitude:x,latitude:E,zoom:s})}getBounds(o){const u=this.getBoundingRegion(o),p=Math.min(...u.map(s=>s[0])),_=Math.max(...u.map(s=>s[0])),x=Math.min(...u.map(s=>s[1])),E=Math.max(...u.map(s=>s[1]));return[[p,x],[_,E]]}getBoundingRegion(o={}){return OM(this,o.z||0)}getLocationAtPoint({lngLat:o,pos:u}){return this.getMapCenterByLngLatPosition({lngLat:o,pos:u})}}const UM="FeatureCollection",NM=[{type:"Feature",properties:{name:"",full_name:"",iso_a2:"ZW",iso_a3:"ZWE",iso_n3:"716"},geometry:{type:"Polygon",coordinates:[[[31.287891,-22.402051],[32.429785,-21.29707],[32.492383,-20.659766],[32.992773,-19.984863],[32.699707,-18.940918],[32.993066,-18.35957],[32.948047,-16.712305],[31.23623,-16.023633],[30.437793,-15.995313],[30.396094,-15.643066],[29.487305,-15.696777],[28.913086,-15.987793],[28.760547,-16.532129],[27.932227,-16.896191],[27.020801,-17.958398],[25.258789,-17.793555],[26.168066,-19.538281],[27.178223,-20.100977],[27.280762,-20.478711],[27.679297,-20.503027],[27.669434,-21.064258],[28.014063,-21.554199],[29.025586,-21.796875],[29.364844,-22.193945],[31.287891,-22.402051]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"ZM",iso_a3:"ZMB",iso_n3:"894"},geometry:{type:"Polygon",coordinates:[[[30.396094,-15.643066],[30.231836,-14.990332],[33.201758,-14.013379],[32.67041,-13.59043],[33.021582,-12.630469],[33.512305,-12.347754],[33.252344,-12.112598],[33.261328,-10.893359],[33.661523,-10.553125],[32.919922,-9.407422],[31.033398,-8.597656],[30.751172,-8.193652],[28.898145,-8.485449],[28.400684,-9.224805],[28.645508,-10.550195],[28.383398,-11.566699],[29.064355,-12.348828],[29.485547,-12.418457],[29.795117,-12.155469],[29.775195,-13.438086],[29.554199,-13.248926],[29.014258,-13.368848],[28.412891,-12.518066],[27.573828,-12.227051],[27.15918,-11.579199],[26.824023,-11.965234],[26.025977,-11.890137],[25.349414,-11.623047],[25.28877,-11.212402],[24.37793,-11.41709],[24.365723,-11.129883],[23.966504,-10.871777],[23.962988,-12.988477],[21.978906,-13.000977],[22.040234,-16.262793],[23.380664,-17.640625],[24.73291,-17.517773],[25.258789,-17.793555],[27.020801,-17.958398],[27.932227,-16.896191],[28.760547,-16.532129],[28.913086,-15.987793],[29.487305,-15.696777],[30.396094,-15.643066]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"YE",iso_a3:"YEM",iso_n3:"887"},geometry:{type:"MultiPolygon",coordinates:[[[[53.085645,16.648389],[51.977637,18.996143],[49.041992,18.581787],[48.172168,18.156934],[47.143555,16.94668],[46.727637,17.265576],[43.916992,17.324707],[43.417969,17.51626],[43.190918,17.359375],[43.165039,16.689404],[42.799316,16.371777],[42.657812,15.232812],[42.936426,14.938574],[43.231934,13.26709],[43.487598,12.698828],[44.005859,12.607666],[45.038672,12.815869],[45.657324,13.338721],[46.788867,13.465576],[47.989941,14.048096],[48.668359,14.050146],[49.349902,14.637793],[52.21748,15.655518],[52.327734,16.293555],[53.085645,16.648389]]],[[[53.763184,12.636816],[53.31582,12.533154],[53.718848,12.318994],[54.511133,12.552783],[53.763184,12.636816]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"VN",iso_a3:"VNM",iso_n3:"704"},geometry:{type:"MultiPolygon",coordinates:[[[[104.063965,10.39082],[103.849512,10.371094],[104.018457,10.029199],[104.063965,10.39082]]],[[[107.972656,21.507959],[106.663574,21.978906],[106.550391,22.501367],[106.780273,22.778906],[105.842969,22.922803],[105.275391,23.345215],[103.941504,22.540088],[103.32666,22.769775],[102.981934,22.448242],[102.470898,22.750928],[102.127441,22.379199],[102.662012,21.676025],[102.949609,21.681348],[102.851172,21.265918],[103.104492,20.89165],[103.635059,20.69707],[104.101367,20.945508],[104.583203,20.64668],[104.367773,20.441406],[104.92793,20.018115],[104.587891,19.61875],[104.032031,19.675146],[103.891602,19.30498],[105.146484,18.650977],[105.114551,18.405273],[106.502246,16.954102],[106.656445,16.492627],[107.396387,16.043018],[107.165918,15.80249],[107.653125,15.255225],[107.519434,14.705078],[107.331445,14.126611],[107.605469,13.437793],[107.506445,12.364551],[106.413867,11.948438],[106.399219,11.687012],[105.851465,11.63501],[106.163965,10.794922],[105.755078,10.98999],[105.045703,10.911377],[104.850586,10.534473],[104.426367,10.41123],[105.084473,9.995703],[104.77041,8.597656],[105.114355,8.629199],[106.168359,9.396729],[105.830957,10.000732],[106.484082,9.559424],[106.136426,10.22168],[106.595605,9.859863],[106.785254,10.116455],[106.464063,10.298291],[106.757422,10.295801],[106.605859,10.464941],[106.947461,10.400342],[107.006641,10.660547],[107.261523,10.398389],[108.001367,10.720361],[108.986719,11.336377],[109.198633,11.724854],[109.423926,12.955957],[108.821289,15.37793],[106.370508,17.746875],[106.499023,17.946436],[105.621777,18.966309],[105.984082,19.939062],[106.572852,20.392188],[106.683398,21.000293],[107.164746,20.94873],[107.972656,21.507959]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"VE",iso_a3:"VEN",iso_n3:"862"},geometry:{type:"MultiPolygon",coordinates:[[[[-63.849365,11.131006],[-64.402344,10.981592],[-63.917627,10.887549],[-63.849365,11.131006]]],[[[-60.017529,8.549316],[-61.304004,8.4104],[-61.618701,8.597461],[-61.247266,8.600342],[-60.79248,9.360742],[-61.588867,9.894531],[-61.735938,9.631201],[-62.0771,9.975049],[-62.32041,9.783057],[-62.550342,10.200439],[-62.740576,10.056152],[-62.913574,10.531494],[-61.879492,10.741016],[-64.298193,10.635156],[-63.731885,10.503418],[-65.129102,10.070068],[-65.851758,10.257764],[-66.247217,10.632227],[-68.139941,10.492725],[-68.398633,11.160986],[-68.827979,11.431738],[-69.631592,11.479932],[-70.003955,12.177881],[-70.286523,11.886035],[-69.804785,11.474219],[-71.469531,10.96416],[-71.494238,10.533203],[-71.052686,9.705811],[-71.241406,9.160449],[-71.619531,9.047949],[-72.112842,9.815576],[-71.594336,10.657373],[-71.956934,11.569922],[-71.319727,11.861914],[-71.958105,11.666406],[-72.690088,10.83584],[-73.366211,9.194141],[-72.796387,9.108984],[-72.390332,8.287061],[-72.471973,7.524268],[-72.006641,7.032617],[-70.129199,6.953613],[-69.427148,6.123975],[-67.481982,6.180273],[-67.855273,4.506885],[-67.311133,3.415869],[-67.859082,2.793604],[-67.21084,2.390137],[-66.876025,1.223047],[-66.347119,.767188],[-65.681445,.983447],[-65.473389,.69126],[-64.205029,1.529492],[-64.008496,1.931592],[-63.43252,2.155566],[-63.389258,2.411914],[-64.046582,2.502393],[-64.221094,3.587402],[-64.788672,4.276025],[-64.021484,3.929102],[-63.338672,3.943896],[-62.856982,3.593457],[-62.712109,4.01792],[-61.002832,4.535254],[-60.603857,4.949365],[-60.742139,5.202051],[-61.39082,5.93877],[-61.128711,6.214307],[-61.145605,6.694531],[-60.3521,7.002881],[-60.718652,7.535937],[-59.849072,8.248682],[-60.017529,8.549316]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"VA",iso_a3:"VAT",iso_n3:"336"},geometry:{type:"Polygon",coordinates:[[[12.43916,41.898389],[12.430566,41.905469],[12.430566,41.897559],[12.43916,41.898389]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"VU",iso_a3:"VUT",iso_n3:"548"},geometry:{type:"MultiPolygon",coordinates:[[[[166.745801,-14.826855],[166.567383,-14.641797],[166.631055,-15.406055],[166.758301,-15.631152],[167.093945,-15.580859],[167.075586,-14.935645],[166.810156,-15.157422],[166.745801,-14.826855]]],[[[167.4125,-16.095898],[167.199512,-15.885059],[167.449316,-16.55498],[167.836621,-16.449707],[167.4125,-16.095898]]],[[[168.29668,-16.336523],[168.163867,-16.081641],[167.929004,-16.228711],[168.29668,-16.336523]]],[[[168.445801,-17.542188],[168.158203,-17.710547],[168.524609,-17.798047],[168.445801,-17.542188]]],[[[167.911328,-15.435938],[168.002539,-15.283203],[167.674219,-15.451562],[167.911328,-15.435938]]],[[[169.491309,-19.540137],[169.247461,-19.344727],[169.347266,-19.623535],[169.491309,-19.540137]]],[[[169.334375,-18.940234],[169.01582,-18.64375],[168.986914,-18.871289],[169.334375,-18.940234]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"UZ",iso_a3:"UZB",iso_n3:"860"},geometry:{type:"Polygon",coordinates:[[[70.946777,42.248682],[69.153613,41.425244],[68.572656,40.622656],[68.291895,40.656104],[67.935742,41.196582],[66.709668,41.17915],[66.498633,41.994873],[66.00957,42.004883],[66.100293,42.99082],[65.803027,42.876953],[64.905469,43.714697],[61.990234,43.492139],[61.00791,44.393799],[58.555273,45.555371],[55.975684,44.994922],[55.977441,41.322217],[57.017969,41.263477],[56.964063,41.856543],[58.028906,42.487646],[58.474414,42.299365],[58.151563,42.628076],[58.589063,42.778467],[59.985156,42.211719],[60.089648,41.399414],[61.902832,41.093701],[62.483203,39.975635],[63.763672,39.160547],[65.612891,38.238574],[66.60625,37.986719],[66.522266,37.348486],[67.758984,37.172217],[68.350293,38.211035],[68.13252,38.927637],[67.357617,39.216699],[67.426172,39.465576],[68.463281,39.536719],[68.97207,40.089941],[68.630664,40.16709],[69.274902,40.198096],[69.357227,40.767383],[69.712891,40.656982],[70.401953,41.035107],[70.751074,40.721777],[70.371582,40.384131],[70.958008,40.238867],[71.69248,40.152344],[73.136914,40.810645],[72.187305,41.025928],[71.664941,41.541211],[71.393066,41.123389],[70.200879,41.514453],[71.228516,42.162891],[70.946777,42.248682]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"UY",iso_a3:"URY",iso_n3:"858"},geometry:{type:"Polygon",coordinates:[[[-53.370605,-33.742188],[-53.531348,-33.170898],[-53.125586,-32.736719],[-53.761719,-32.056836],[-55.603027,-30.850781],[-56.004687,-31.079199],[-56.044824,-30.777637],[-56.832715,-30.107227],[-57.608887,-30.187793],[-58.201172,-32.47168],[-58.092676,-32.967383],[-58.363525,-33.182324],[-58.438135,-33.719141],[-57.829102,-34.477344],[-57.170703,-34.452344],[-56.249951,-34.90127],[-54.902295,-34.932813],[-53.785303,-34.380371],[-53.370605,-33.742188]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"FM",iso_a3:"FSM",iso_n3:"583"},geometry:{type:"Polygon",coordinates:[[[158.314844,6.813672],[158.294629,6.951074],[158.134766,6.944824],[158.314844,6.813672]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"MH",iso_a3:"MHL",iso_n3:"584"},geometry:{type:"Polygon",coordinates:[[[171.101953,7.138232],[171.035742,7.156104],[171.235352,7.06875],[171.39375,7.110938],[171.101953,7.138232]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"MP",iso_a3:"MNP",iso_n3:"580"},geometry:{type:"Polygon",coordinates:[[[145.751953,15.133154],[145.821875,15.265381],[145.713184,15.215283],[145.751953,15.133154]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"VI",iso_a3:"VIR",iso_n3:"850"},geometry:{type:"Polygon",coordinates:[[[-64.765625,17.794336],[-64.889111,17.701709],[-64.580469,17.750195],[-64.765625,17.794336]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"GU",iso_a3:"GUM",iso_n3:"316"},geometry:{type:"Polygon",coordinates:[[[144.741797,13.259277],[144.875391,13.614648],[144.649316,13.428711],[144.741797,13.259277]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"AS",iso_a3:"ASM",iso_n3:"016"},geometry:{type:"Polygon",coordinates:[[[-170.72627,-14.351172],[-170.568115,-14.266797],[-170.820508,-14.312109],[-170.72627,-14.351172]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"PR",iso_a3:"PRI",iso_n3:"630"},geometry:{type:"Polygon",coordinates:[[[-66.129395,18.444922],[-67.158643,18.499219],[-67.196875,17.994189],[-65.970801,17.974365],[-65.62085,18.242334],[-66.129395,18.444922]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"US",iso_a3:"USA",iso_n3:"840"},geometry:{type:"MultiPolygon",coordinates:[[[[-171.463037,63.640039],[-171.631836,63.351221],[-170.848389,63.444385],[-169.676367,62.956104],[-168.761328,63.21377],[-170.299365,63.680615],[-171.463037,63.640039]]],[[[-166.135449,60.383545],[-167.436426,60.206641],[-166.14873,59.764111],[-165.591797,59.913135],[-166.135449,60.383545]]],[[[-152.898047,57.823926],[-153.841553,57.862842],[-153.687695,57.305127],[-154.116162,57.651221],[-154.673193,57.446094],[-154.338965,56.920898],[-154.24375,57.143018],[-153.793213,56.989502],[-154.027344,56.777979],[-152.679053,57.345117],[-152.940771,57.498096],[-152.216211,57.577002],[-152.898047,57.823926]]],[[[-130.025098,55.888232],[-130.097852,56.109277],[-131.824268,56.58999],[-133.401123,58.410889],[-135.475928,59.793262],[-137.438574,58.903125],[-139.185156,60.083594],[-139.079248,60.343701],[-141.002148,60.300244],[-141.002148,64.975537],[-141.002148,69.650781],[-143.218311,70.11626],[-145.197363,70.008691],[-149.269434,70.500781],[-151.944678,70.4521],[-152.491211,70.880957],[-154.195215,70.801123],[-155.166846,71.099219],[-155.973535,70.841992],[-155.579443,71.121094],[-156.470215,71.407666],[-157.909375,70.860107],[-159.680908,70.786768],[-159.865674,70.278857],[-160.117139,70.591211],[-162.073877,70.161963],[-161.880957,70.331738],[-163.86792,69.03667],[-166.209082,68.885352],[-166.786279,68.359619],[-164.125195,67.606738],[-163.531836,67.102588],[-161.719922,67.020557],[-161.856689,66.700342],[-160.360889,66.6125],[-160.231689,66.420264],[-161.591016,66.459521],[-162.361621,66.947314],[-161.916895,66.411816],[-161.034277,66.188818],[-163.695361,66.083838],[-163.638232,66.574658],[-164.460498,66.588428],[-168.088379,65.657764],[-166.157031,65.28584],[-166.928418,65.15708],[-166.142773,64.582764],[-163.144336,64.423828],[-163.203906,64.652002],[-162.807031,64.374219],[-161.759375,64.81626],[-160.855908,64.755615],[-161.490723,64.433789],[-160.778564,63.818945],[-161.099707,63.55791],[-162.282812,63.529199],[-163.287842,63.046436],[-164.409033,63.215039],[-164.757861,62.496729],[-166.078809,61.803125],[-165.565869,61.102344],[-165.273633,61.274854],[-164.868994,61.111768],[-165.114844,60.932812],[-163.749023,60.969727],[-163.420947,60.757422],[-164.372363,60.591846],[-164.805176,60.892041],[-165.353809,60.541211],[-163.680371,59.801514],[-162.570752,59.989746],[-162.684961,60.268945],[-161.962012,60.695361],[-162.421338,60.283984],[-161.828711,59.588623],[-161.981055,59.146143],[-161.644385,59.109668],[-162.144922,58.644238],[-160.363135,59.051172],[-158.950684,58.404541],[-158.809473,58.973877],[-158.080518,58.977441],[-158.503174,58.850342],[-158.190918,58.614258],[-156.808887,59.134277],[-157.523633,58.421338],[-157.193701,58.194189],[-157.610889,58.05083],[-157.461914,57.506201],[-158.320947,57.2979],[-158.675146,56.794873],[-160.302051,56.314111],[-160.291699,55.805078],[-161.697314,55.907227],[-163.278809,55.121826],[-163.335303,54.83916],[-163.131104,54.916553],[-163.119629,55.064697],[-162.674365,54.996582],[-162.630371,55.24668],[-162.073975,55.139307],[-161.516943,55.618408],[-161.381934,55.371289],[-159.771387,55.841113],[-159.659668,55.625928],[-158.275635,56.19624],[-158.414404,56.43584],[-156.629004,57.009961],[-156.435889,57.359961],[-154.247021,58.159424],[-153.437598,58.754834],[-154.17832,59.155566],[-152.660107,59.997217],[-153.025,60.295654],[-152.540918,60.26543],[-151.593506,60.979639],[-149.433545,61.500781],[-150.053271,61.171094],[-149.075098,60.876416],[-150.44126,61.023584],[-151.356445,60.722949],[-151.853223,59.78208],[-151.046484,59.771826],[-151.884619,59.386328],[-151.738184,59.188525],[-150.934521,59.249121],[-149.713867,59.91958],[-149.598047,59.770459],[-149.395264,60.105762],[-148.430713,59.989111],[-147.964111,60.484863],[-148.640137,60.489453],[-148.256738,60.675293],[-148.556152,60.827002],[-147.751855,61.218945],[-147.891113,60.889893],[-146.284912,61.112646],[-146.570459,60.72915],[-145.674902,60.651123],[-145.898877,60.478174],[-145.248291,60.380127],[-144.691113,60.669092],[-144.901318,60.335156],[-144.147217,60.016406],[-141.40874,60.117676],[-141.408301,59.902783],[-140.419824,59.710742],[-139.431445,60.012256],[-138.988086,59.83501],[-139.286719,59.610938],[-139.512305,59.953564],[-139.773291,59.527295],[-136.607422,58.243994],[-136.061475,58.452734],[-136.989014,59.034473],[-136.22583,58.765479],[-136.150049,59.048096],[-135.897559,58.400195],[-135.090234,58.24585],[-135.363672,59.419434],[-134.776123,58.453857],[-134.208838,58.232959],[-133.876758,58.518164],[-134.031104,58.072168],[-133.194336,57.877686],[-133.535205,57.832959],[-133.117041,57.566211],[-133.64873,57.642285],[-133.465869,57.172168],[-131.551367,56.206787],[-132.15542,55.599561],[-131.032764,56.088086],[-130.748193,55.318018],[-131.047852,55.157666],[-130.575342,54.769678],[-130.214062,55.025879],[-130.025098,55.888232]]],[[[-163.476025,54.980713],[-164.478613,54.906836],[-164.823438,54.419092],[-163.083252,54.668994],[-163.378955,54.815527],[-163.476025,54.980713]]],[[[-133.305078,55.54375],[-133.737109,55.496924],[-133.650195,55.269287],[-133.305078,55.54375]]],[[[-131.339746,55.079834],[-131.56543,55.264111],[-131.329541,54.887744],[-131.339746,55.079834]]],[[[-132.112354,56.109375],[-132.379834,56.498779],[-132.659912,56.078174],[-132.287305,55.929395],[-132.112354,56.109375]]],[[[-130.97915,55.48916],[-131.269238,55.955371],[-131.7625,55.16582],[-131.447559,55.408789],[-131.187891,55.206299],[-130.97915,55.48916]]],[[[-133.366211,57.003516],[-133.979443,57.00957],[-133.48418,56.451758],[-133.158154,56.495166],[-133.328955,56.830078],[-132.95918,56.677051],[-133.366211,57.003516]]],[[[-132.862256,54.894434],[-133.429053,55.303809],[-132.705811,54.68418],[-132.862256,54.894434]]],[[[-160.684912,55.314795],[-160.795068,55.145215],[-160.487549,55.184863],[-160.684912,55.314795]]],[[[-177.148193,51.716748],[-177.110059,51.92876],[-177.670215,51.701074],[-177.148193,51.716748]]],[[[-134.969775,57.351416],[-135.448682,57.534375],[-135.812305,57.009521],[-135.454932,57.249414],[-134.681885,56.216162],[-134.969775,57.351416]]],[[[-134.680273,58.16167],[-134.923486,58.354639],[-134.516016,57.042578],[-133.911133,57.352539],[-134.292334,58.044727],[-133.822754,57.628662],[-134.240088,58.143994],[-134.680273,58.16167]]],[[[-135.730371,58.244238],[-136.568604,57.972168],[-135.910791,57.446582],[-135.564209,57.666406],[-134.931494,57.481152],[-135.338477,57.768652],[-134.954688,58.015332],[-135.613232,57.991846],[-135.730371,58.244238]]],[[[-133.566113,56.339209],[-133.742529,55.964844],[-133.241504,55.920801],[-133.680176,55.785156],[-133.033398,55.589697],[-133.118555,55.327637],[-132.064746,54.713135],[-131.976416,55.208594],[-132.631299,55.473193],[-132.172705,55.480615],[-133.566113,56.339209]]],[[[-133.9896,56.844971],[-134.373682,56.838672],[-134.1896,56.076953],[-133.738379,56.650439],[-133.9896,56.844971]]],[[[-152.416943,58.360205],[-152.841113,58.416406],[-153.381348,58.087207],[-152.068896,58.17793],[-152.416943,58.360205]]],[[[-167.964355,53.345117],[-167.828076,53.507959],[-168.287695,53.500146],[-169.088916,52.832031],[-167.964355,53.345117]]],[[[-166.615332,53.900928],[-167.038086,53.942188],[-166.808984,53.646143],[-167.780859,53.300244],[-166.354541,53.673535],[-166.230859,53.932617],[-166.615332,53.900928]]],[[[-173.55332,52.136279],[-173.99248,52.12334],[-173.0229,52.07915],[-173.55332,52.136279]]],[[[-174.677393,52.03501],[-174.045605,52.367236],[-175.295557,52.022168],[-174.677393,52.03501]]],[[[-176.593311,51.866699],[-176.961621,51.603662],[-176.452344,51.735693],[-176.593311,51.866699]]],[[[-177.879053,51.649707],[-177.644482,51.82627],[-178.168262,51.903027],[-177.879053,51.649707]]],[[[172.811816,53.012988],[172.494824,52.937891],[172.935156,52.7521],[173.436035,52.852051],[172.811816,53.012988]]],[[[-155.581348,19.012012],[-154.804199,19.524463],[-155.831641,20.27583],[-156.048682,19.749951],[-155.881299,19.070508],[-155.581348,19.012012]]],[[[-156.486816,20.932568],[-156.697754,20.949072],[-156.408789,20.605176],[-155.989844,20.757129],[-156.486816,20.932568]]],[[[-157.799365,21.456641],[-157.9625,21.701367],[-158.273145,21.585254],[-158.110352,21.318604],[-157.6354,21.307617],[-157.799365,21.456641]]],[[[-159.372754,21.932373],[-159.352051,22.21958],[-159.78916,22.041797],[-159.372754,21.932373]]],[[[-74.708887,45.003857],[-76.151172,44.303955],[-76.819971,43.628809],[-78.72041,43.624951],[-79.171875,43.466553],[-79.036719,42.802344],[-82.690039,41.675195],[-83.149658,42.141943],[-82.545312,42.624707],[-82.137842,43.570898],[-82.551074,45.347363],[-83.592676,45.817139],[-83.615967,46.116846],[-83.977783,46.084912],[-84.149463,46.542773],[-84.561768,46.457373],[-84.875977,46.899902],[-88.378174,48.303076],[-89.455664,47.99624],[-90.916064,48.209131],[-91.518311,48.058301],[-92.99624,48.611816],[-94.620898,48.742627],[-95.155273,49.369678],[-95.162061,48.991748],[-97.529834,48.993164],[-106.483838,48.993115],[-114.585107,48.993066],[-122.78877,48.993018],[-122.241992,48.010742],[-122.353809,47.371582],[-122.701953,47.110889],[-123.027588,47.138916],[-122.577881,47.293164],[-122.532812,47.919727],[-123.139062,47.386084],[-122.656641,47.881152],[-122.778613,48.137598],[-124.709961,48.380371],[-124.139258,46.954688],[-123.842871,46.963184],[-124.112549,46.862695],[-124.072754,46.279443],[-123.220605,46.153613],[-123.989307,46.219385],[-124.14873,43.691748],[-124.539648,42.812891],[-124.071924,41.459521],[-124.324023,40.251953],[-122.998779,37.988623],[-122.521338,37.826416],[-122.393359,38.144824],[-121.525342,38.055908],[-122.314258,38.007324],[-122.070508,37.478271],[-122.445605,37.797998],[-122.499219,37.542627],[-121.807422,36.851221],[-121.877393,36.331055],[-120.659082,35.122412],[-120.644678,34.57998],[-118.506201,34.017383],[-118.410449,33.743945],[-117.467432,33.295508],[-117.128271,32.53335],[-114.724756,32.715332],[-114.835938,32.508301],[-111.041992,31.324219],[-108.214453,31.329443],[-108.211816,31.779346],[-106.44541,31.768408],[-104.978809,30.645947],[-104.110596,29.386133],[-103.168311,28.998193],[-102.614941,29.752344],[-101.440381,29.776855],[-99.505322,27.54834],[-99.107764,26.446924],[-97.14624,25.961475],[-97.485107,27.237402],[-97.768457,27.45752],[-97.439111,27.328271],[-97.156494,28.144336],[-96.421094,28.457324],[-96.640039,28.708789],[-96.011035,28.631934],[-96.234521,28.488965],[-95.273486,28.963867],[-94.888281,29.370557],[-95.022852,29.702344],[-94.52627,29.547949],[-94.759619,29.384277],[-93.890479,29.689355],[-93.841455,29.979736],[-93.826465,29.725146],[-92.26084,29.556836],[-91.893164,29.836035],[-91.248828,29.564209],[-91.290137,29.288965],[-90.751025,29.130859],[-90.379199,29.295117],[-90.212793,29.104932],[-90.159082,29.537158],[-89.376123,28.981348],[-89.015723,29.202881],[-89.720898,29.619287],[-89.354443,29.820215],[-89.400732,30.046045],[-90.175342,30.029102],[-90.331982,30.277588],[-88.135449,30.366602],[-88.011328,30.694189],[-87.790283,30.291797],[-88.005957,30.230908],[-87.281055,30.339258],[-86.997559,30.570312],[-87.201172,30.339258],[-86.257373,30.493018],[-86.454443,30.399121],[-85.603516,30.286768],[-85.318945,29.680225],[-84.309668,30.064746],[-83.694385,29.925977],[-82.651465,28.8875],[-82.843506,27.845996],[-82.405762,27.862891],[-82.7146,27.499609],[-82.441357,27.059668],[-82.242871,26.848877],[-82.013281,26.961572],[-81.715479,25.983154],[-80.94043,25.264209],[-81.110498,25.138037],[-80.484668,25.229834],[-80.126367,25.833496],[-80.050049,26.807715],[-80.838184,28.757666],[-80.456885,27.900684],[-80.524121,28.486084],[-81.249512,29.793799],[-81.516211,30.801807],[-81.380957,31.353271],[-80.694238,32.215723],[-80.802539,32.448047],[-80.579346,32.287305],[-80.63418,32.511719],[-79.940723,32.667139],[-78.841455,33.724072],[-78.01333,33.911816],[-77.953271,34.168994],[-77.927832,33.939746],[-77.412256,34.730811],[-76.439795,34.84292],[-76.974951,35.025195],[-77.070264,35.154639],[-76.77915,34.990332],[-76.512939,35.27041],[-77.03999,35.527393],[-76.173828,35.35415],[-75.758838,35.843262],[-76.083594,35.690527],[-76.069775,35.970312],[-76.726221,35.957617],[-76.733643,36.22915],[-76.559375,36.015332],[-76.147852,36.279297],[-75.820068,36.112842],[-75.946484,36.659082],[-75.53418,35.819092],[-75.999414,36.912646],[-76.487842,36.897021],[-77.250879,37.329199],[-76.283301,37.052686],[-76.757715,37.50542],[-76.453906,37.273535],[-76.305566,37.571484],[-76.549463,37.669141],[-77.111084,38.165674],[-76.49248,37.682227],[-76.344141,37.675684],[-76.264258,37.893555],[-77.273242,38.351758],[-77.2604,38.6],[-77.030371,38.889258],[-77.23252,38.407715],[-76.341162,38.087012],[-76.668555,38.5375],[-76.394092,38.368994],[-76.57041,39.269336],[-75.958936,39.585059],[-76.341162,38.709668],[-76.016943,38.625098],[-76.264648,38.436426],[-75.858691,38.362061],[-75.659277,37.953955],[-75.934375,37.151904],[-75.03877,38.426367],[-75.187109,38.591113],[-75.088672,38.777539],[-75.392188,39.092773],[-75.587598,39.640771],[-75.07417,39.983496],[-75.524219,39.490186],[-74.897021,39.145459],[-74.954297,38.949951],[-74.794482,39.001904],[-74.0646,39.993115],[-74.079932,39.788135],[-73.972266,40.400342],[-74.264209,40.528613],[-73.969922,41.249707],[-73.987109,40.751367],[-72.924707,41.285156],[-71.522852,41.378955],[-71.390137,41.795312],[-71.168555,41.489404],[-69.948633,41.677148],[-69.977881,41.961279],[-70.108936,42.07832],[-70.001416,41.826172],[-70.42666,41.757275],[-71.046191,42.331104],[-70.612939,42.623242],[-70.733105,43.07002],[-70.178809,43.766357],[-69.226074,43.986475],[-68.762695,44.570752],[-68.53252,44.258643],[-68.450586,44.507617],[-68.056641,44.384326],[-67.19126,44.675586],[-67.124854,45.169434],[-67.802246,45.727539],[-67.806787,47.082812],[-68.235498,47.345947],[-68.937207,47.21123],[-69.242871,47.462988],[-70.865039,45.270703],[-71.327295,45.290088],[-71.517529,45.007568],[-74.708887,45.003857]],[[-122.572754,48.156641],[-122.628613,48.384229],[-122.383154,47.923193],[-122.572754,48.156641]]],[[[-72.509766,40.986035],[-72.274121,41.153027],[-73.573828,40.919629],[-74.014893,40.581201],[-71.903223,41.060693],[-72.509766,40.986035]]],[[[-80.381836,25.142285],[-80.25708,25.347607],[-80.580566,24.954248],[-80.381836,25.142285]]],[[[-84.90791,29.642627],[-84.737158,29.732422],[-85.116748,29.632812],[-84.90791,29.642627]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"GS",iso_a3:"SGS",iso_n3:"239"},geometry:{type:"Polygon",coordinates:[[[-37.10332,-54.065625],[-38.017432,-54.008008],[-36.085498,-54.866797],[-35.798584,-54.763477],[-36.326465,-54.251172],[-37.10332,-54.065625]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"IO",iso_a3:"IOT",iso_n3:"086"},geometry:{type:"Polygon",coordinates:[[[72.491992,-7.377441],[72.445605,-7.22041],[72.447266,-7.395703],[72.349707,-7.263379],[72.429102,-7.435352],[72.491992,-7.377441]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"SH",iso_a3:"SHN",iso_n3:"654"},geometry:{type:"Polygon",coordinates:[[[-5.692139,-15.997754],[-5.707861,-15.906152],[-5.78252,-16.004004],[-5.692139,-15.997754]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"PN",iso_a3:"PCN",iso_n3:"612"},geometry:{type:"Polygon",coordinates:[[[-128.290088,-24.397363],[-128.330127,-24.323242],[-128.342188,-24.370703],[-128.290088,-24.397363]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"AI",iso_a3:"AIA",iso_n3:"660"},geometry:{type:"Polygon",coordinates:[[[-63.001221,18.221777],[-63.026025,18.269727],[-63.16001,18.171387],[-63.001221,18.221777]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"FK",iso_a3:"FLK",iso_n3:"238"},geometry:{type:"MultiPolygon",coordinates:[[[[-58.850195,-51.269922],[-59.570801,-51.925391],[-59.395654,-52.308008],[-59.19585,-52.017676],[-58.652783,-52.099219],[-57.791797,-51.636133],[-57.976514,-51.384375],[-58.271582,-51.574707],[-58.850195,-51.269922]]],[[[-60.28623,-51.461914],[-60.568457,-51.357812],[-60.245166,-51.638867],[-60.58252,-51.712695],[-60.238477,-51.771973],[-60.961426,-52.057324],[-60.686377,-52.188379],[-59.268066,-51.427539],[-60.28623,-51.461914]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"KY",iso_a3:"CYM",iso_n3:"136"},geometry:{type:"Polygon",coordinates:[[[-81.369531,19.348877],[-81.404785,19.278418],[-81.107129,19.305176],[-81.369531,19.348877]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"BM",iso_a3:"BMU",iso_n3:"060"},geometry:{type:"Polygon",coordinates:[[[-64.730273,32.293457],[-64.668311,32.381934],[-64.862842,32.273877],[-64.730273,32.293457]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"VG",iso_a3:"VGB",iso_n3:"092"},geometry:{type:"Polygon",coordinates:[[[-64.395215,18.4646],[-64.324658,18.51748],[-64.426074,18.513086],[-64.395215,18.4646]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"TC",iso_a3:"TCA",iso_n3:"796"},geometry:{type:"Polygon",coordinates:[[[-71.661426,21.765234],[-71.668359,21.833447],[-71.847656,21.843457],[-71.661426,21.765234]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"MS",iso_a3:"MSR",iso_n3:"500"},geometry:{type:"Polygon",coordinates:[[[-62.148438,16.740332],[-62.191357,16.804395],[-62.221631,16.699512],[-62.148438,16.740332]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"JE",iso_a3:"JEY",iso_n3:"832"},geometry:{type:"Polygon",coordinates:[[[-2.018652,49.23125],[-2.220508,49.266357],[-2.23584,49.176367],[-2.018652,49.23125]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"GG",iso_a3:"GGY",iso_n3:"831"},geometry:{type:"Polygon",coordinates:[[[-2.512305,49.494531],[-2.639014,49.450928],[-2.547363,49.428711],[-2.512305,49.494531]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"IM",iso_a3:"IMN",iso_n3:"833"},geometry:{type:"Polygon",coordinates:[[[-4.412061,54.185352],[-4.424707,54.407178],[-4.785352,54.073047],[-4.412061,54.185352]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"GB",iso_a3:"GBR",iso_n3:"826"},geometry:{type:"MultiPolygon",coordinates:[[[[-2.667676,51.622998],[-2.433057,51.740723],[-3.135986,51.205029],[-4.188184,51.188525],[-5.622119,50.050684],[-4.19458,50.393311],[-3.679785,50.239941],[-2.999414,50.716602],[-2.03584,50.603076],[-1.416455,50.896875],[.205078,50.763037],[.960156,50.925879],[1.414941,51.363281],[.424512,51.465625],[1.274414,51.845361],[1.743359,52.578516],[1.271289,52.924561],[.045898,52.905615],[.270996,53.335498],[-.659912,53.724023],[.115332,53.609277],[-.084375,54.118066],[-1.232422,54.703711],[-1.655371,55.570361],[-2.599316,56.027295],[-3.789062,56.095215],[-2.674268,56.253418],[-3.309961,56.363477],[-2.592676,56.561572],[-1.77793,57.49375],[-2.074072,57.702393],[-4.134521,57.577734],[-3.053076,58.634814],[-4.924658,58.588379],[-5.413184,58.069727],[-5.157227,57.881348],[-5.744922,57.668311],[-5.561914,57.232715],[-5.730615,56.853076],[-6.132764,56.718018],[-5.652441,56.531982],[-5.188379,56.758057],[-5.768213,55.362646],[-4.996973,56.23335],[-5.228223,55.886328],[-4.800293,56.15835],[-4.584082,55.938672],[-5.135498,54.85752],[-4.91123,54.689453],[-3.03623,54.953076],[-3.592041,54.564355],[-3.165967,54.12793],[-2.867578,54.177246],[-3.0646,53.512842],[-2.749512,53.310205],[-4.268555,53.144531],[-4.683057,52.806152],[-4.101465,52.915479],[-4.149365,52.32627],[-5.262305,51.880176],[-3.562354,51.413818],[-2.667676,51.622998]]],[[[-4.196777,53.321436],[-4.567871,53.386475],[-4.373047,53.13418],[-4.196777,53.321436]]],[[[-1.308105,60.5375],[-1.66377,60.28252],[-1.299463,59.878662],[-1.308105,60.5375]]],[[[-3.057422,59.029639],[-3.310352,59.130811],[-2.793018,58.906934],[-3.057422,59.029639]]],[[[-5.777881,56.344336],[-6.286328,56.611865],[-6.313428,56.293652],[-5.777881,56.344336]]],[[[-6.198682,58.363281],[-7.085254,58.182178],[-6.983105,57.75],[-6.198682,58.363281]]],[[[-6.144727,57.50498],[-6.305957,57.671973],[-6.761133,57.442383],[-5.949072,57.045166],[-5.672461,57.252686],[-6.135547,57.314258],[-6.144727,57.50498]]],[[[-6.218018,54.088721],[-5.47041,54.500195],[-6.035791,55.144531],[-7.218652,55.091992],[-8.118262,54.414258],[-7.606543,54.143848],[-7.007715,54.406689],[-6.649805,54.058643],[-6.218018,54.088721]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"AE",iso_a3:"ARE",iso_n3:"784"},geometry:{type:"Polygon",coordinates:[[[56.297852,25.650684],[56.080469,26.062646],[54.147949,24.171191],[52.118555,23.971094],[51.568359,24.286182],[52.555078,22.932812],[55.18584,22.704102],[55.468457,23.941113],[55.985156,24.063379],[55.76084,24.242676],[55.795703,24.868115],[56.000586,24.953223],[56.063867,24.73877],[56.387988,24.979199],[56.297852,25.650684]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"UA",iso_a3:"UKR",iso_n3:"804"},geometry:{type:"Polygon",coordinates:[[[38.214355,47.091455],[38.368848,47.609961],[39.778711,47.887549],[39.95791,48.268896],[39.644727,48.591211],[40.003613,48.82207],[39.686523,49.00791],[40.108789,49.251562],[40.080664,49.576855],[38.258594,50.052344],[38.046875,49.92002],[37.422852,50.411475],[36.619434,50.209229],[35.591113,50.36875],[35.311914,51.043896],[34.213867,51.255371],[34.397852,51.78042],[33.735254,52.344775],[31.763379,52.101074],[30.755273,51.895166],[30.544531,51.265039],[30.160742,51.477881],[29.346484,51.382568],[29.102051,51.627539],[28.73125,51.433398],[27.7,51.477979],[27.141992,51.752051],[25.267188,51.937744],[23.605273,51.51792],[24.089941,50.530469],[22.706152,49.606201],[22.852051,49.062744],[22.538672,49.072705],[22.131836,48.405322],[22.87666,47.947266],[23.202637,48.084521],[24.979102,47.724121],[26.618945,48.259863],[27.549219,48.477734],[29.125391,47.964551],[29.134863,47.489697],[30.131055,46.423096],[28.958398,46.458496],[28.947754,46.049951],[28.2125,45.450439],[29.705859,45.259912],[29.628418,45.722461],[30.219043,45.866748],[30.796289,46.552002],[31.563379,46.777295],[31.872852,46.649756],[31.75918,47.212842],[32.044336,46.64248],[32.578027,46.615625],[31.554883,46.554297],[32.008496,46.42998],[31.83125,46.281689],[33.594141,46.09624],[33.806667,46.208288],[35.001674,45.733383],[34.849609,46.189893],[35.230371,46.440625],[35.014551,46.106006],[35.827148,46.624316],[38.214355,47.091455]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"UG",iso_a3:"UGA",iso_n3:"800"},geometry:{type:"Polygon",coordinates:[[[33.903223,-1.002051],[33.943164,.173779],[34.978223,1.773633],[34.437695,3.650586],[33.976074,4.220215],[33.489355,3.755078],[32.997266,3.880176],[32.135938,3.519727],[31.798047,3.802637],[31.152344,3.785596],[30.838574,3.490723],[30.728613,2.455371],[31.252734,2.04458],[29.942871,.819238],[29.576953,-1.387891],[29.930078,-1.469922],[30.509961,-1.067285],[33.903223,-1.002051]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"TM",iso_a3:"TKM",iso_n3:"795"},geometry:{type:"Polygon",coordinates:[[[55.977441,41.322217],[55.434375,41.296289],[54.120996,42.335205],[53.055859,42.147754],[52.493848,41.780371],[52.850391,41.200293],[52.97002,41.976221],[53.804688,42.117627],[54.703711,41.071143],[54.377344,40.693262],[53.87002,40.648682],[52.943457,41.038086],[52.733691,40.39873],[53.035547,39.774414],[52.9875,39.987598],[53.487305,39.909375],[53.603125,39.546973],[53.235645,39.608545],[53.156641,39.26499],[53.70459,39.20957],[53.868652,38.949268],[53.91416,37.343555],[54.699414,37.470166],[55.380859,38.051123],[57.193555,38.216406],[58.261621,37.66582],[59.301758,37.510645],[60.341309,36.637646],[61.119629,36.642578],[61.262012,35.61958],[62.307813,35.170801],[62.688086,35.255322],[63.056641,35.445801],[63.12998,35.846191],[64.511035,36.340674],[64.816309,37.13208],[65.55498,37.251172],[65.765039,37.569141],[66.522266,37.348486],[66.60625,37.986719],[65.612891,38.238574],[63.763672,39.160547],[62.483203,39.975635],[61.902832,41.093701],[60.089648,41.399414],[59.985156,42.211719],[58.589063,42.778467],[58.151563,42.628076],[58.474414,42.299365],[58.028906,42.487646],[56.964063,41.856543],[57.017969,41.263477],[55.977441,41.322217]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"TR",iso_a3:"TUR",iso_n3:"792"},geometry:{type:"MultiPolygon",coordinates:[[[[41.510059,41.51748],[40.265234,40.961328],[39.426367,41.106445],[38.381055,40.924512],[36.405371,41.274609],[36.051758,41.682568],[35.297754,41.728516],[35.006445,42.063281],[33.381348,42.017578],[31.254883,41.107617],[29.148145,41.221045],[29.113867,40.937842],[29.849219,40.760107],[28.958008,40.630566],[29.007129,40.389746],[26.738086,40.400244],[26.181348,39.990088],[26.113086,39.467383],[26.899219,39.549658],[26.681836,39.292236],[27.013672,38.886865],[26.763672,38.709619],[27.144238,38.451953],[26.674219,38.335742],[26.441309,38.641211],[26.290723,38.277197],[27.232422,37.978662],[27.067969,37.65791],[27.535059,37.163867],[27.262988,36.976562],[28.242383,37.029053],[27.453906,36.712158],[28.969629,36.715332],[29.689062,36.156689],[30.446094,36.269873],[30.644043,36.865674],[31.240625,36.821729],[32.794824,36.035889],[33.694727,36.181982],[34.703613,36.816797],[35.393164,36.575195],[36.048926,36.910596],[35.892676,35.916553],[36.153613,35.833887],[36.636719,36.233984],[36.658594,36.802539],[37.436328,36.643311],[38.191699,36.901562],[39.356641,36.681592],[40.705664,37.097705],[42.202734,37.297266],[42.358984,37.108594],[42.774609,37.371875],[44.114453,37.301855],[44.281836,36.978027],[44.765137,37.142432],[44.589941,37.710352],[44.211328,37.908057],[44.449902,38.334229],[44.023242,39.377441],[44.389355,39.422119],[44.587109,39.768555],[44.817188,39.650439],[44.768262,39.703516],[43.666211,40.126367],[43.439453,41.107129],[42.754102,41.578906],[41.510059,41.51748]]],[[[28.014453,41.969043],[27.011719,42.058643],[26.320898,41.716553],[26.624902,41.401758],[26.038965,40.726758],[26.79209,40.626611],[26.202734,40.075391],[27.499414,40.973145],[28.95625,41.008203],[29.057227,41.229736],[28.197852,41.554492],[28.014453,41.969043]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"TN",iso_a3:"TUN",iso_n3:"788"},geometry:{type:"Polygon",coordinates:[[[11.50459,33.181934],[10.049023,34.056299],[11.120117,35.240283],[10.476562,36.175146],[11.053906,37.07251],[10.412305,36.731836],[10.196387,37.205859],[9.830273,37.135352],[9.687988,37.340381],[8.576563,36.937207],[8.207617,36.518945],[8.245605,34.734082],[7.500195,33.832471],[8.333398,32.543604],[9.044043,32.072363],[9.51875,30.229395],[10.216406,30.783203],[10.274609,31.684961],[11.50498,32.413672],[11.50459,33.181934]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"TT",iso_a3:"TTO",iso_n3:"780"},geometry:{type:"Polygon",coordinates:[[[-61.012109,10.134326],[-60.917627,10.840234],[-61.651172,10.718066],[-61.499316,10.268555],[-61.906104,10.069141],[-61.012109,10.134326]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"TO",iso_a3:"TON",iso_n3:"776"},geometry:{type:"Polygon",coordinates:[[[-175.161914,-21.169336],[-175.362354,-21.106836],[-175.156592,-21.263672],[-175.161914,-21.169336]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"TG",iso_a3:"TGO",iso_n3:"768"},geometry:{type:"Polygon",coordinates:[[[.900488,10.993262],[-.068604,11.115625],[-.086328,10.673047],[.380859,10.291846],[.233398,9.463525],[.525684,9.398486],[.372559,8.759277],[.686328,8.354883],[.525586,6.850928],[1.187207,6.089404],[1.622656,6.216797],[1.77793,6.294629],[1.530957,6.992432],[1.600195,9.050049],[1.330078,9.996973],[.763379,10.38667],[.900488,10.993262]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"TL",iso_a3:"TLS",iso_n3:"626"},geometry:{type:"MultiPolygon",coordinates:[[[[125.068164,-9.511914],[127.296094,-8.424512],[125.381836,-8.575391],[124.922266,-8.94248],[125.149023,-9.042578],[124.960156,-9.21377],[125.068164,-9.511914]]],[[[124.036328,-9.341602],[124.282324,-9.42793],[124.444434,-9.190332],[124.036328,-9.341602]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"TH",iso_a3:"THA",iso_n3:"764"},geometry:{type:"MultiPolygon",coordinates:[[[[98.409082,7.902051],[98.32207,8.166309],[98.296289,7.776074],[98.409082,7.902051]]],[[[100.122461,20.31665],[99.458887,20.363037],[99.485938,20.149854],[99.074219,20.099365],[98.916699,19.7729],[98.015039,19.749512],[97.745898,18.588184],[97.373926,18.517969],[98.660742,16.33042],[98.888281,16.351904],[98.202148,14.975928],[99.136816,13.716699],[99.123926,13.030762],[99.614746,11.781201],[98.757227,10.660937],[98.702539,10.190381],[98.241797,8.767871],[98.305469,8.226221],[98.703516,8.256738],[100.119141,6.441992],[100.261426,6.682715],[101.053516,6.242578],[101.113965,5.636768],[101.556055,5.907764],[101.873633,5.825293],[102.101074,6.242236],[101.497949,6.865283],[100.423535,7.187842],[100.160742,7.599268],[100.256641,7.774902],[100.545215,7.226904],[100.279395,8.268506],[99.835547,9.288379],[99.253906,9.265234],[99.165039,10.319824],[99.989062,12.170801],[99.990527,13.243457],[100.235645,13.484473],[100.962695,13.431982],[100.897754,12.653809],[101.835742,12.640381],[102.594141,12.203027],[102.933887,11.706689],[102.336328,13.560303],[103.199414,14.332617],[105.183301,14.34624],[105.497363,14.590674],[105.641016,15.656543],[104.819336,16.466064],[104.739648,17.46167],[103.949609,18.318994],[103.366992,18.42334],[102.680078,17.824121],[102.101465,18.210645],[100.955859,17.541113],[101.211914,19.54834],[100.513574,19.553467],[100.519531,20.17793],[100.122461,20.31665]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"TZ",iso_a3:"TZA",iso_n3:"834"},geometry:{type:"MultiPolygon",coordinates:[[[[39.496484,-6.174609],[39.308984,-5.721973],[39.182324,-6.172559],[39.480957,-6.453711],[39.496484,-6.174609]]],[[[39.865039,-4.906152],[39.673438,-4.927051],[39.749316,-5.443848],[39.865039,-4.906152]]],[[[32.919922,-9.407422],[33.888867,-9.670117],[33.995605,-9.49541],[34.320898,-9.731543],[34.60791,-11.080469],[34.959473,-11.578125],[35.911328,-11.454688],[36.305664,-11.706348],[37.372852,-11.710449],[37.920215,-11.294727],[38.491797,-11.413281],[40.463574,-10.464355],[39.725195,-10.000488],[39.304004,-8.443848],[39.288477,-7.517871],[39.546094,-7.024023],[38.804688,-6.070117],[39.221777,-4.692383],[37.608203,-3.49707],[37.643848,-3.04541],[33.903223,-1.002051],[30.509961,-1.067285],[30.876562,-2.143359],[30.553613,-2.400098],[30.433496,-2.874512],[30.780273,-2.984863],[30.790234,-3.274609],[29.947266,-4.307324],[29.403223,-4.449316],[29.54082,-6.313867],[30.212695,-7.037891],[30.751172,-8.193652],[31.033398,-8.597656],[32.919922,-9.407422]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"TJ",iso_a3:"TJK",iso_n3:"762"},geometry:{type:"Polygon",coordinates:[[[67.758984,37.172217],[68.067773,36.949805],[68.911816,37.333936],[69.303906,37.116943],[69.49209,37.553076],[70.188672,37.582471],[70.214648,37.924414],[70.878906,38.456396],[71.255859,38.306982],[71.278516,37.918408],[71.582227,37.910107],[71.43291,37.127539],[71.665625,36.696924],[73.38291,37.462256],[73.720605,37.41875],[73.653516,37.239355],[74.349023,37.41875],[74.891309,37.231641],[75.11875,37.385693],[74.812305,38.460303],[73.80166,38.606885],[73.631641,39.448877],[72.22998,39.20752],[71.470312,39.603662],[70.799316,39.394727],[70.501172,39.587354],[69.297656,39.524805],[69.530273,40.097314],[69.966797,40.202246],[70.515137,39.949902],[70.958008,40.238867],[70.371582,40.384131],[70.751074,40.721777],[70.401953,41.035107],[69.712891,40.656982],[69.357227,40.767383],[69.274902,40.198096],[68.630664,40.16709],[68.97207,40.089941],[68.463281,39.536719],[67.426172,39.465576],[67.357617,39.216699],[68.13252,38.927637],[68.350293,38.211035],[67.758984,37.172217]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"SY",iso_a3:"SYR",iso_n3:"760"},geometry:{type:"Polygon",coordinates:[[[35.892676,35.916553],[35.97627,34.629199],[36.383887,34.65791],[36.584961,34.22124],[35.869141,33.431738],[35.816125,33.361879],[35.787305,32.734912],[36.818359,32.317285],[38.773535,33.372217],[40.987012,34.429053],[41.295996,36.38335],[42.358984,37.108594],[42.202734,37.297266],[40.705664,37.097705],[39.356641,36.681592],[38.191699,36.901562],[37.436328,36.643311],[36.658594,36.802539],[36.636719,36.233984],[36.153613,35.833887],[35.892676,35.916553]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"CH",iso_a3:"CHE",iso_n3:"756"},geometry:{type:"Polygon",coordinates:[[[9.524023,47.524219],[8.572656,47.775635],[8.454004,47.596191],[7.615625,47.592725],[6.968359,47.453223],[5.97002,46.214697],[6.758105,46.415771],[7.021094,45.925781],[7.787891,45.921826],[8.422559,46.446045],[9.02373,45.845703],[9.260156,46.475195],[10.12832,46.238232],[10.452832,46.864941],[9.580273,47.057373],[9.487695,47.062256],[9.527539,47.270752],[9.524023,47.524219]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"SE",iso_a3:"SWE",iso_n3:"752"},geometry:{type:"MultiPolygon",coordinates:[[[[19.076465,57.835938],[18.136523,57.556641],[18.146387,56.920508],[19.076465,57.835938]]],[[[11.388281,59.036523],[11.248242,58.369141],[12.883691,56.617725],[12.80166,56.263916],[12.471191,56.290527],[12.88584,55.411377],[14.17373,55.396631],[14.401953,55.976758],[15.82666,56.124951],[16.34873,56.709277],[16.923828,58.492578],[16.214258,58.63667],[18.285352,59.109375],[18.560254,59.394482],[17.964258,59.359375],[18.970508,59.757227],[17.955762,60.589795],[17.250977,60.700781],[17.410254,62.508398],[20.762695,63.867822],[21.519629,64.463086],[21.410352,65.317432],[22.400977,65.862109],[24.155469,65.805273],[23.638867,67.954395],[20.622168,69.036865],[20.116699,69.020898],[19.969824,68.356396],[18.303027,68.55542],[17.916699,67.964893],[17.324609,68.103809],[16.783594,67.89502],[15.483789,66.305957],[14.543262,66.129346],[14.479688,65.301465],[13.650293,64.581543],[14.141211,64.173535],[12.792773,64],[12.175195,63.595947],[12.155371,61.720752],[12.880762,61.352295],[12.294141,61.002686],[12.486133,60.106787],[11.680762,59.592285],[11.642773,58.926074],[11.388281,59.036523]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"SZ",iso_a3:"SWZ",iso_n3:"748"},geometry:{type:"Polygon",coordinates:[[[31.948242,-25.957617],[31.207324,-25.843359],[30.794336,-26.764258],[31.469531,-27.295508],[31.958398,-27.305859],[32.112891,-26.839453],[31.948242,-25.957617]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"SR",iso_a3:"SUR",iso_n3:"740"},geometry:{type:"Polygon",coordinates:[[[-54.155957,5.358984],[-54.054199,5.80791],[-54.833691,5.98833],[-55.828174,5.96167],[-55.897607,5.699316],[-56.969824,5.992871],[-57.194775,5.548438],[-57.331006,5.020166],[-57.917041,4.82041],[-58.054297,4.10166],[-57.646729,3.394531],[-57.303662,3.3771],[-57.197363,2.853271],[-56.482812,1.942139],[-55.929639,1.8875],[-56.137695,2.259033],[-55.957471,2.520459],[-54.978662,2.597656],[-54.61626,2.326758],[-54.00957,3.448535],[-54.479688,4.836523],[-54.155957,5.358984]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"SS",iso_a3:"SSD",iso_n3:"728"},geometry:{type:"Polygon",coordinates:[[[33.976074,4.220215],[35.268359,5.492285],[34.710645,6.660303],[33.902441,7.509521],[32.998926,7.899512],[33.281055,8.437256],[34.072754,8.545264],[34.078125,9.461523],[33.871484,9.506152],[33.907031,10.181445],[33.130078,10.745947],[33.199316,12.217285],[32.721875,12.223096],[32.736719,12.009668],[32.072266,12.006738],[32.420801,11.089111],[31.224902,9.799268],[30.755371,9.731201],[30.003027,10.277393],[28.844531,9.326074],[28.048926,9.328613],[27.880859,9.601611],[26.658691,9.484131],[25.858203,10.406494],[25.211719,10.329932],[24.531934,8.886914],[24.147363,8.665625],[24.291406,8.291406],[24.85332,8.137549],[25.278906,7.42749],[26.361816,6.635303],[26.514258,6.069238],[27.143945,5.722949],[27.40332,5.10918],[28.19209,4.350244],[29.676855,4.586914],[30.838574,3.490723],[31.152344,3.785596],[31.798047,3.802637],[32.135938,3.519727],[32.997266,3.880176],[33.489355,3.755078],[33.976074,4.220215]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"SD",iso_a3:"SDN",iso_n3:"729"},geometry:{type:"Polygon",coordinates:[[[34.078125,9.461523],[34.343945,10.658643],[34.931445,10.864795],[35.112305,11.816553],[35.670215,12.62373],[36.125195,12.757031],[36.524316,14.256836],[36.426758,15.13208],[37.008984,17.058887],[37.411035,17.061719],[38.609473,18.005078],[37.471289,18.820117],[37.258594,21.108545],[36.871387,21.996729],[31.434473,21.99585],[31.400293,22.202441],[31.092676,21.994873],[24.980273,21.99585],[24.979492,20.002588],[23.980273,19.995947],[23.980273,19.496631],[23.970801,15.721533],[22.933887,15.533105],[22.932324,15.162109],[22.381543,14.550488],[22.538574,14.161865],[22.106445,13.799805],[22.228125,13.32959],[21.825293,12.790527],[22.352344,12.660449],[22.591113,11.579883],[22.922656,11.344873],[22.860059,10.919678],[23.646289,9.8229],[23.537305,8.81582],[24.147363,8.665625],[24.531934,8.886914],[25.211719,10.329932],[25.858203,10.406494],[26.658691,9.484131],[27.880859,9.601611],[28.048926,9.328613],[28.844531,9.326074],[30.003027,10.277393],[30.755371,9.731201],[31.224902,9.799268],[32.420801,11.089111],[32.072266,12.006738],[32.736719,12.009668],[32.721875,12.223096],[33.199316,12.217285],[33.130078,10.745947],[33.907031,10.181445],[33.871484,9.506152],[34.078125,9.461523]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"LK",iso_a3:"LKA",iso_n3:"144"},geometry:{type:"Polygon",coordinates:[[[79.982324,9.812695],[80.42832,9.480957],[80.086328,9.577832],[79.783496,8.018457],[79.712988,8.182324],[79.859375,6.829297],[80.095313,6.153174],[80.724121,5.979053],[81.637402,6.425146],[81.874121,7.28833],[80.711133,9.366357],[79.982324,9.812695]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"ES",iso_a3:"ESP",iso_n3:"724"},geometry:{type:"MultiPolygon",coordinates:[[[[3.145313,39.790088],[3.158691,39.970508],[2.37002,39.57207],[3.072852,39.30127],[3.461816,39.697754],[3.145313,39.790088]]],[[[1.445215,38.918701],[1.564453,39.121045],[1.22334,38.903857],[1.445215,38.918701]]],[[[-1.794043,43.407324],[-4.523047,43.415723],[-8.004687,43.694385],[-9.178076,43.174023],[-8.777148,41.941064],[-8.266064,42.137402],[-8.15249,41.811963],[-6.618262,41.942383],[-6.2125,41.532031],[-6.928467,41.009131],[-6.975391,39.798389],[-7.535693,39.661572],[-6.997949,39.056445],[-7.343018,38.457422],[-6.957568,38.187891],[-7.443945,37.728271],[-7.406152,37.179443],[-6.86377,37.278906],[-6.216797,36.913574],[-6.384131,36.637012],[-5.625488,36.025928],[-4.366846,36.718115],[-2.111523,36.77666],[-1.640967,37.386963],[-.721582,37.631055],[-.520801,38.317285],[.201563,38.75918],[-.327002,39.519873],[.891113,40.722363],[.714648,40.822852],[3.004883,41.767432],[3.211426,42.431152],[1.706055,42.50332],[1.448828,42.437451],[1.42832,42.595898],[.696875,42.845117],[.631641,42.6896],[-.586426,42.798975],[-1.46084,43.051758],[-1.794043,43.407324]]],[[[-16.334473,28.379932],[-16.123633,28.575977],[-16.905322,28.3396],[-16.658008,28.007178],[-16.334473,28.379932]]],[[[-14.196777,28.169287],[-13.928027,28.253467],[-13.857227,28.738037],[-14.491797,28.100928],[-14.196777,28.169287]]],[[[-15.400586,28.147363],[-15.682764,28.154053],[-15.710303,27.784082],[-15.436768,27.810693],[-15.400586,28.147363]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"KR",iso_a3:"KOR",iso_n3:"410"},geometry:{type:"MultiPolygon",coordinates:[[[[126.633887,37.781836],[126.976855,36.939404],[126.487012,37.007471],[126.160547,36.771924],[126.487695,36.693799],[126.753027,35.871973],[126.291113,35.15415],[126.593359,34.824365],[126.264453,34.673242],[126.531445,34.314258],[127.24707,34.755127],[127.324609,34.463281],[127.714844,34.954688],[128.443945,34.870361],[128.510938,35.100977],[129.076758,35.122705],[129.419141,35.497852],[129.418262,37.059033],[128.374609,38.623438],[128.038965,38.308545],[127.090332,38.283887],[126.633887,37.781836]]],[[[128.741016,34.798535],[128.667969,35.008789],[128.489258,34.865283],[128.741016,34.798535]]],[[[126.326953,33.223633],[126.901172,33.515137],[126.337695,33.4604],[126.326953,33.223633]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"ZA",iso_a3:"ZAF",iso_n3:"710"},geometry:{type:"Polygon",coordinates:[[[29.364844,-22.193945],[28.210156,-22.693652],[27.085547,-23.57793],[26.835059,-24.24082],[25.912109,-24.747461],[25.443652,-25.714453],[24.748145,-25.817383],[23.05752,-25.312305],[22.597656,-26.132715],[21.646289,-26.854199],[20.685059,-26.822461],[20.793164,-25.915625],[19.980469,-24.776758],[19.980469,-28.45127],[19.161719,-28.93877],[18.102734,-28.87168],[17.447949,-28.698145],[17.05625,-28.031055],[16.447559,-28.617578],[18.21084,-31.74248],[18.325293,-32.50498],[17.851074,-32.827441],[18.433008,-33.717285],[18.410352,-34.295605],[18.752148,-34.082617],[18.831348,-34.364062],[20.020605,-34.785742],[20.529883,-34.463086],[21.788965,-34.372656],[22.553809,-34.010059],[25.574219,-34.035352],[25.805859,-33.737109],[26.613672,-33.707422],[27.860645,-33.053906],[29.971191,-31.32207],[31.335156,-29.378125],[32.285742,-28.621484],[32.886133,-26.849316],[32.112891,-26.839453],[31.958398,-27.305859],[31.469531,-27.295508],[30.794336,-26.764258],[31.207324,-25.843359],[31.948242,-25.957617],[31.98584,-24.460645],[31.287891,-22.402051],[29.364844,-22.193945]],[[28.736914,-30.101953],[28.39209,-30.147559],[28.056836,-30.631055],[27.753125,-30.6],[27.056934,-29.625586],[27.735547,-28.940039],[28.625781,-28.581738],[29.390723,-29.269727],[29.098047,-29.919043],[28.736914,-30.101953]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"SO",iso_a3:"SOM",iso_n3:"706"},geometry:{type:"Polygon",coordinates:[[[41.532715,-1.695312],[43.717578,.857861],[46.878809,3.285645],[47.975293,4.497021],[49.049316,6.173633],[49.852051,7.962549],[50.825,9.428174],[50.930078,10.335547],[51.390234,10.422607],[51.031836,10.444775],[51.254883,11.830713],[50.792285,11.983691],[50.110059,11.529297],[48.938574,11.258447],[48.938086,9.451758],[47.978223,7.99707],[44.940527,4.912012],[43.583496,4.85498],[41.883984,3.977734],[40.964453,2.814648],[40.978711,-.870313],[41.532715,-1.695312]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"-99",iso_a3:"-99",iso_n3:"-99"},geometry:{type:"Polygon",coordinates:[[[48.938574,11.258447],[47.40498,11.174023],[46.565039,10.745996],[45.816699,10.835889],[44.386523,10.430225],[43.245996,11.499805],[42.922754,10.999316],[42.656445,10.6],[42.841602,10.203076],[43.983789,9.008838],[46.978223,7.99707],[47.978223,7.99707],[48.938086,9.451758],[48.938574,11.258447]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"SB",iso_a3:"SLB",iso_n3:"090"},geometry:{type:"MultiPolygon",coordinates:[[[[157.763477,-8.242188],[157.490625,-7.965723],[157.217578,-8.262793],[157.558008,-8.269922],[157.819336,-8.612012],[157.763477,-8.242188]]],[[[157.388965,-8.713477],[157.379492,-8.420898],[157.212305,-8.565039],[157.388965,-8.713477]]],[[[156.687891,-7.923047],[156.809082,-7.722852],[156.560938,-7.574023],[156.687891,-7.923047]]],[[[159.750391,-9.272656],[159.612305,-9.470703],[159.802734,-9.763477],[160.818945,-9.862793],[160.35459,-9.421582],[159.750391,-9.272656]]],[[[159.879102,-8.534277],[159.431445,-8.029004],[158.457422,-7.544727],[159.879102,-8.534277]]],[[[157.486719,-7.330371],[156.452539,-6.638281],[157.101562,-7.323633],[157.486719,-7.330371]]],[[[160.749414,-8.313965],[160.59043,-8.372754],[160.77207,-8.963867],[161.367383,-9.61123],[160.749414,-8.313965]]],[[[161.715332,-10.387305],[161.304785,-10.204395],[161.786816,-10.716895],[162.37334,-10.823242],[162.105371,-10.453809],[161.715332,-10.387305]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"SK",iso_a3:"SVK",iso_n3:"703"},geometry:{type:"Polygon",coordinates:[[[22.538672,49.072705],[21.639648,49.411963],[20.362988,49.385254],[20.057617,49.181299],[19.441602,49.597705],[19.149414,49.4],[18.832227,49.510791],[16.953125,48.598828],[17.147363,48.005957],[17.761914,47.770166],[18.724219,47.787158],[18.791895,48.000293],[19.950391,48.146631],[20.490039,48.526904],[22.131836,48.405322],[22.538672,49.072705]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"SI",iso_a3:"SVN",iso_n3:"705"},geometry:{type:"Polygon",coordinates:[[[16.516211,46.499902],[16.093066,46.863281],[14.549805,46.399707],[13.7,46.520264],[13.378223,46.261621],[13.719824,45.587598],[13.57793,45.516895],[14.568848,45.657227],[15.339453,45.467041],[15.635938,46.200732],[16.516211,46.499902]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"SG",iso_a3:"SGP",iso_n3:"702"},geometry:{type:"Polygon",coordinates:[[[103.969727,1.331445],[103.817969,1.44707],[103.650195,1.325537],[103.969727,1.331445]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"SL",iso_a3:"SLE",iso_n3:"694"},geometry:{type:"MultiPolygon",coordinates:[[[[-10.283203,8.485156],[-10.712109,8.335254],[-10.500537,8.687549],[-10.690527,9.314258],[-11.273633,9.996533],[-12.427979,9.898145],[-13.292676,9.049219],[-13.059473,8.881152],[-13.181836,8.576904],[-12.894092,8.629785],[-13.272754,8.429736],[-12.850879,7.818701],[-12.480273,7.753271],[-12.485645,7.386279],[-11.50752,6.906543],[-10.647461,7.759375],[-10.283203,8.485156]]],[[[-12.526074,7.436328],[-12.615234,7.637207],[-12.951611,7.57085],[-12.526074,7.436328]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"SC",iso_a3:"SYC",iso_n3:"690"},geometry:{type:"Polygon",coordinates:[[[55.540332,-4.693066],[55.383398,-4.609277],[55.542969,-4.785547],[55.540332,-4.693066]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"RS",iso_a3:"SRB",iso_n3:"688"},geometry:{type:"Polygon",coordinates:[[[22.705078,44.237793],[22.64209,44.650977],[22.093066,44.541943],[21.360059,44.82666],[21.490234,45.1479],[20.241797,46.108594],[18.905371,45.931738],[19.004688,45.399512],[19.4,45.2125],[19.007129,44.869189],[19.348633,44.880908],[19.118457,44.359961],[19.583789,44.043457],[19.24502,43.965039],[19.495117,43.642871],[19.194336,43.533301],[20.344336,42.82793],[20.800586,43.261084],[21.75293,42.669824],[21.5625,42.24751],[22.344043,42.313965],[22.466797,42.84248],[22.967969,43.142041],[22.369629,43.781299],[22.705078,44.237793]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"SN",iso_a3:"SEN",iso_n3:"686"},geometry:{type:"Polygon",coordinates:[[[-12.280615,14.809033],[-13.409668,16.05918],[-14.53374,16.655957],[-16.239014,16.531299],[-16.535254,15.838379],[-17.147168,14.922021],[-17.535645,14.755127],[-16.618115,14.040527],[-16.766943,13.904932],[-16.562305,13.587305],[-15.509668,13.58623],[-15.10835,13.812109],[-13.826709,13.407812],[-14.246777,13.23584],[-15.151123,13.556494],[-15.834277,13.156445],[-16.76333,13.06416],[-16.743896,12.585449],[-16.442871,12.609473],[-16.760303,12.525781],[-16.711816,12.354834],[-15.196094,12.679932],[-13.729248,12.673926],[-12.399072,12.340088],[-11.389404,12.404395],[-11.390381,12.941992],[-12.054199,13.633057],[-12.280615,14.809033]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"SA",iso_a3:"SAU",iso_n3:"682"},geometry:{type:"MultiPolygon",coordinates:[[[[41.987695,16.715625],[41.860449,17.002539],[41.801563,16.77876],[42.157812,16.570703],[41.987695,16.715625]]],[[[51.977637,18.996143],[54.977344,19.995947],[55.641016,22.001855],[55.18584,22.704102],[52.555078,22.932812],[51.568359,24.286182],[51.267969,24.607227],[50.804395,24.789258],[50.081055,25.961377],[50.149805,26.662646],[48.797168,27.724316],[48.44248,28.54292],[47.671289,28.533154],[47.433203,28.989551],[46.531445,29.09624],[44.69082,29.202344],[42.074414,31.080371],[40.369336,31.938965],[39.14541,32.124512],[36.958594,31.491504],[37.980078,30.5],[37.469238,29.995068],[36.755273,29.866016],[36.068457,29.200537],[34.950781,29.353516],[34.625,28.064502],[35.180469,28.034863],[37.148828,25.291113],[37.543066,24.29165],[38.46416,23.711865],[39.062012,22.592188],[38.987891,21.881738],[39.276074,20.973975],[39.72832,20.390332],[40.75918,19.755469],[41.229492,18.678418],[42.293945,17.434961],[42.799316,16.371777],[43.165039,16.689404],[43.190918,17.359375],[43.417969,17.51626],[43.916992,17.324707],[46.727637,17.265576],[47.143555,16.94668],[48.172168,18.156934],[49.041992,18.581787],[51.977637,18.996143]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"ST",iso_a3:"STP",iso_n3:"678"},geometry:{type:"Polygon",coordinates:[[[6.659961,.120654],[6.686914,.404395],[6.468164,.227344],[6.659961,.120654]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"SM",iso_a3:"SMR",iso_n3:"674"},geometry:{type:"Polygon",coordinates:[[[12.485254,43.901416],[12.503711,43.989746],[12.396875,43.93457],[12.485254,43.901416]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"WS",iso_a3:"WSM",iso_n3:"882"},geometry:{type:"Polygon",coordinates:[[[-172.333496,-13.465234],[-172.778516,-13.516797],[-172.224951,-13.804297],[-172.333496,-13.465234]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"VC",iso_a3:"VCT",iso_n3:"670"},geometry:{type:"Polygon",coordinates:[[[-61.174512,13.158105],[-61.138965,13.35874],[-61.268457,13.287695],[-61.174512,13.158105]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"LC",iso_a3:"LCA",iso_n3:"662"},geometry:{type:"Polygon",coordinates:[[[-60.895215,13.821973],[-60.908105,14.093359],[-61.073145,13.865576],[-60.895215,13.821973]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"KN",iso_a3:"KNA",iso_n3:"659"},geometry:{type:"Polygon",coordinates:[[[-62.630664,17.23999],[-62.827051,17.386426],[-62.838916,17.339258],[-62.630664,17.23999]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"RW",iso_a3:"RWA",iso_n3:"646"},geometry:{type:"Polygon",coordinates:[[[29.576953,-1.387891],[28.876367,-2.400293],[29.014355,-2.720215],[29.698047,-2.794727],[29.930176,-2.339551],[30.553613,-2.400098],[30.876562,-2.143359],[30.509961,-1.067285],[29.930078,-1.469922],[29.576953,-1.387891]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"RU",iso_a3:"RUS",iso_n3:"643"},geometry:{type:"MultiPolygon",coordinates:[[[[-179.798535,68.94043],[-180,68.738672],[-180,68.493896],[-180,68.249121],[-180,68.004395],[-180,67.759619],[-180,67.514844],[-180,67.270117],[-180,67.025342],[-180,66.780566],[-180,66.53584],[-180,66.291064],[-180,66.046289],[-180,65.801562],[-180,65.556787],[-180,65.311963],[-180,65.067236],[-179.3521,65.516748],[-179.683301,66.184131],[-178.526562,66.401562],[-178.939062,66.032764],[-178.4125,65.495557],[-176.093262,65.471045],[-175.395117,64.802393],[-173.729736,64.364502],[-173.32749,64.539551],[-173.275488,64.289648],[-172.903174,64.526074],[-172.401465,64.413916],[-173.085791,64.817334],[-172.213184,65.048145],[-172.783301,65.681055],[-171.105859,65.511035],[-171.421533,65.810352],[-170.666309,65.621533],[-169.777881,66.143115],[-170.604443,66.248926],[-171.795557,66.931738],[-173.00752,67.064893],[-172.520117,66.95249],[-173.258936,66.840088],[-173.679688,67.144775],[-174.550098,67.090625],[-173.773975,66.434668],[-174.065039,66.22959],[-174.084766,66.473096],[-174.394092,66.344238],[-174.924902,66.623145],[-175.345215,67.678076],[-178.373047,68.565674],[-178.055811,68.264893],[-179.798535,68.94043]]],[[[130.687305,42.302539],[130.709375,42.656396],[131.158301,42.626025],[131.938965,43.301953],[131.866602,43.095166],[132.30957,43.313525],[132.303809,42.883301],[133.159961,42.696973],[135.131055,43.525732],[137.685449,45.818359],[140.170605,48.523682],[140.520898,50.800195],[141.485254,52.178516],[140.839648,53.087891],[141.18125,53.015283],[141.37373,53.292773],[139.707422,54.277148],[138.657227,54.29834],[138.450684,53.537012],[138.52793,53.959863],[137.950488,53.603564],[137.253711,53.546143],[137.834766,53.946729],[137.339258,54.100537],[137.666016,54.283301],[137.141602,54.182227],[137.155371,53.82168],[136.718848,53.804102],[136.797266,54.620996],[135.851562,54.583936],[135.2625,54.943311],[137.691504,56.139355],[142.580273,59.240137],[145.55459,59.413525],[146.049512,59.170557],[146.537207,59.456982],[148.72666,59.25791],[148.79707,59.532324],[149.642578,59.77041],[152.260645,59.223584],[151.121094,59.08252],[151.326758,58.875098],[152.817871,58.92627],[153.361133,59.214795],[155.160449,59.190137],[154.971289,59.449609],[154.149805,59.528516],[154.293066,59.83335],[157.08418,61.675684],[160.309375,61.894385],[159.79043,60.956641],[160.378906,61.025488],[160.173633,60.638428],[162.392578,61.662109],[163.085254,61.570557],[163.331738,62.550928],[164.418359,62.704639],[165.417383,62.44707],[164.207227,62.292236],[163.709961,60.916797],[162.068164,60.466406],[158.275195,58.008984],[156.829883,57.779639],[156.848828,57.290186],[155.98252,56.695215],[155.620312,54.864551],[156.847461,51.006592],[158.103516,51.809619],[158.47207,53.032373],[160.025098,53.12959],[160.074414,54.18916],[162.105566,54.752148],[161.723926,55.496143],[162.084961,56.089648],[162.671484,56.490088],[163.038379,56.521875],[162.628125,56.232275],[162.840332,56.065625],[163.335547,56.23252],[163.256543,56.688037],[162.791113,56.875391],[163.225781,57.790381],[162.654297,57.948242],[162.391406,57.717236],[161.960059,58.076904],[163.743848,60.028027],[164.953711,59.843604],[166.352148,60.484814],[166.273047,59.85625],[167.226758,60.406299],[169.226758,60.595947],[170.350977,59.965527],[170.608203,60.434912],[172.856543,61.469189],[177.159473,62.560986],[177.023535,62.777246],[179.120703,62.320361],[179.570508,62.6875],[178.44043,63.605566],[178.381445,64.260889],[177.6875,64.304736],[177.427441,64.763379],[176.140918,64.58584],[176.056543,64.904736],[174.548828,64.683887],[176.061133,64.960889],[177.06875,64.78667],[177.037305,64.999658],[176.341016,65.047314],[176.880859,65.081934],[178.519531,64.602979],[180,65.067236],[180,68.983447],[179.272656,69.259668],[175.921484,69.895312],[173.277441,69.823828],[170.486816,70.107568],[170.160938,69.626562],[170.99541,69.045312],[169.609863,68.786035],[167.856836,69.728223],[166.820312,69.499561],[163.201367,69.714746],[161.536914,69.379541],[161.565625,68.905176],[160.856055,68.53833],[161.309863,68.982275],[160.910742,69.606348],[159.729395,69.870215],[160.006445,70.309668],[159.350684,70.790723],[156.68457,71.09375],[152.508789,70.834473],[151.582422,71.286963],[150.097656,71.226562],[150.599805,71.520117],[148.968164,71.690479],[150.016895,71.895654],[149.501563,72.164307],[147.261816,72.327881],[146.073242,71.80835],[145.188574,71.695801],[145.758594,72.225879],[146.113281,71.944971],[146.831836,72.29541],[144.294922,72.192627],[146.25293,72.442236],[140.808203,72.890967],[141.079297,72.586914],[139.14082,72.329736],[140.187695,72.191309],[139.359277,71.951367],[139.98418,71.491504],[138.23418,71.596338],[137.939648,71.133398],[136.090332,71.61958],[133.688867,71.434229],[132.653906,71.925977],[131.021582,70.746094],[129.761914,71.119531],[128.843262,71.663477],[129.210254,71.916943],[128.911426,71.755322],[127.841406,72.308252],[129.410645,72.166309],[128.418262,72.535156],[129.250391,72.705176],[128.599023,72.895166],[129.100586,73.112354],[127.740332,73.481543],[126.552539,73.334912],[124.541211,73.75127],[123.491113,73.666357],[123.622266,73.193262],[122.260156,72.880566],[119.750391,72.979102],[118.430273,73.246533],[118.870898,73.537891],[115.337695,73.702588],[113.510352,73.50498],[113.664551,72.634521],[113.032813,73.913867],[112.147266,73.708936],[111.550586,74.028516],[110.261426,74.017432],[109.706738,73.74375],[110.868164,73.730713],[109.855273,73.472461],[105.143945,72.777051],[112.924902,75.015039],[113.726172,75.450635],[112.453027,75.830176],[113.567578,75.568408],[113.272656,76.25166],[112.65625,76.053564],[111.39248,76.68667],[106.413574,76.512256],[107.429785,76.926562],[104.202441,77.101807],[106.05957,77.390527],[104.014551,77.73042],[100.989941,76.990479],[101.597754,76.439209],[98.805664,76.480664],[99.540723,75.798584],[98.662012,76.242676],[96.49707,75.891211],[95.65332,75.892188],[95.578711,76.137305],[93.259277,76.098779],[92.89043,75.909961],[94.075195,75.912891],[87.005957,75.169824],[87.041797,74.778857],[85.791016,74.645117],[87.229688,74.363867],[86.001367,74.316016],[87.571191,73.810742],[85.938965,73.456494],[86.677051,73.106787],[85.792578,73.43833],[86.892969,73.887109],[80.583203,73.568457],[80.827051,72.488281],[83.534375,71.683936],[83.15127,71.103613],[83.735938,70.546484],[83.080762,70.093018],[82.869141,70.954834],[82.221191,70.395703],[82.163184,70.598145],[83.233594,71.668164],[81.661621,71.715967],[79.42207,72.380762],[77.471582,72.192139],[78.232422,71.952295],[77.777539,71.836426],[76.871387,72.033008],[76.032422,71.9104],[76.433398,71.55249],[78.942187,70.933789],[75.332031,71.341748],[75.741406,72.29624],[75.152441,72.852734],[74.992188,72.144824],[73.08623,71.444922],[74.343359,70.578711],[73.578125,69.802979],[73.836035,69.143213],[76.000977,69.235059],[77.650684,68.903027],[77.588281,67.751904],[78.922461,67.589111],[77.174414,67.778516],[77.238477,68.46958],[76.10752,68.975732],[74.57959,68.751221],[74.769531,67.766357],[72.321582,66.332129],[70.339453,66.342383],[69.194336,66.578662],[69.217773,66.828613],[70.690723,66.745312],[70.724902,66.519434],[71.539551,66.683105],[71.365234,66.961523],[73.066797,67.766943],[73.591699,68.481885],[72.576758,68.968701],[72.704492,70.963232],[71.867285,71.457373],[72.812109,72.691406],[69.611816,72.981934],[68.269238,71.682812],[66.639648,71.081396],[67.284766,70.738721],[66.89668,69.553809],[67.624121,69.584424],[68.542773,68.96709],[69.140527,68.950635],[68.371191,68.314258],[64.19043,69.534668],[60.909082,69.847119],[60.170605,69.590918],[60.933594,68.986768],[59.725684,68.351611],[59.099023,68.444336],[59.057324,69.006055],[57.126855,68.554004],[55.418066,68.567822],[54.861328,68.201855],[53.260547,68.26748],[53.930859,68.435547],[53.797656,68.907471],[54.491211,68.992334],[53.801953,68.995898],[52.344043,68.608154],[52.39668,68.351709],[51.994727,68.53877],[48.754297,67.895947],[48.833203,67.681494],[47.874707,67.58418],[47.655859,66.975928],[46.492383,66.800195],[44.902148,67.413135],[45.528711,67.757568],[46.69043,67.848828],[45.891992,68.479688],[43.333203,68.673389],[44.204688,68.25376],[44.104395,66.008594],[42.210547,66.519678],[39.816504,65.597949],[40.444922,64.778711],[39.758008,64.577051],[36.882812,65.172363],[36.624219,64.750537],[38.062207,64.091016],[37.442188,63.813379],[35.035352,64.440234],[34.406445,65.395752],[34.691797,65.951855],[31.895313,67.161426],[34.482617,66.550342],[38.653906,66.069043],[40.10332,66.299951],[41.188965,66.826172],[40.966406,67.713477],[35.85791,69.191748],[33.684375,69.310254],[33.141211,69.068701],[33.454297,69.428174],[32.377734,69.479102],[32.176758,69.674023],[33.007812,69.722119],[31.98457,69.953662],[31.546973,69.696924],[30.869727,69.783447],[30.860742,69.538428],[30.180176,69.63584],[28.96582,69.021973],[28.414062,68.90415],[28.685156,68.189795],[29.988086,67.668262],[29.066211,66.891748],[30.102734,65.72627],[29.604199,64.968408],[30.51377,64.2],[29.991504,63.735156],[31.533984,62.8854],[27.797656,60.536133],[28.512793,60.677295],[29.069141,60.191455],[30.172656,59.957129],[28.058008,59.781543],[28.0125,59.484277],[27.43418,58.787256],[27.778516,57.870703],[27.351953,57.528125],[27.828613,57.293311],[27.639453,56.845654],[28.147949,56.14292],[29.375,55.938721],[29.482227,55.68457],[30.233594,55.845215],[30.906836,55.57002],[30.798828,54.783252],[31.754199,53.810449],[32.706445,53.419434],[32.141992,53.091162],[31.417871,53.196045],[31.258789,53.016699],[31.763379,52.101074],[33.735254,52.344775],[34.397852,51.78042],[34.213867,51.255371],[35.311914,51.043896],[35.591113,50.36875],[36.619434,50.209229],[37.422852,50.411475],[38.046875,49.92002],[38.258594,50.052344],[40.080664,49.576855],[40.108789,49.251562],[39.686523,49.00791],[40.003613,48.82207],[39.644727,48.591211],[39.95791,48.268896],[39.778711,47.887549],[38.368848,47.609961],[38.214355,47.091455],[39.02373,47.272217],[39.293457,47.105762],[38.500977,46.663672],[37.766504,46.636133],[38.492285,46.090527],[37.933105,46.001709],[37.647168,45.377197],[36.865918,45.427051],[36.627637,45.151318],[38.717285,44.288086],[39.97832,43.419824],[40.648047,43.533887],[41.580566,43.219238],[42.760645,43.16958],[43.825977,42.571533],[44.870996,42.756396],[45.705273,42.498096],[45.638574,42.205078],[46.429883,41.890967],[47.791016,41.199268],[48.572852,41.844482],[47.463184,43.035059],[47.646484,43.884619],[47.462793,43.555029],[47.307031,44.103125],[46.707227,44.50332],[47.463281,45.679688],[48.72959,45.896826],[49.232227,46.337158],[48.541211,46.605615],[48.959375,46.774609],[48.166992,47.708789],[47.292383,47.740918],[46.660938,48.412256],[47.031348,49.150293],[46.889551,49.696973],[47.429199,50.357959],[48.334961,49.858252],[48.758984,49.92832],[48.625098,50.612695],[50.793945,51.729199],[51.344531,51.475342],[52.219141,51.709375],[53.338086,51.482373],[54.555273,50.535791],[54.641602,51.011572],[55.68623,50.582861],[56.491406,51.019531],[57.442188,50.888867],[57.838867,51.09165],[59.523047,50.492871],[60.058594,50.850293],[60.942285,50.695508],[61.389453,50.861035],[61.554688,51.324609],[60.030273,51.933252],[60.994531,52.336865],[60.774414,52.675781],[61.047461,52.972461],[62.082715,53.00542],[61.199219,53.287158],[61.534961,53.523291],[60.979492,53.621729],[61.231055,54.019482],[65.088379,54.340186],[65.476953,54.623291],[68.155859,54.976709],[68.977246,55.3896],[70.182422,55.162451],[70.738086,55.305176],[71.093164,54.212207],[72.186035,54.325635],[72.446777,53.941846],[72.622266,54.134326],[73.712402,54.042383],[73.406934,53.447559],[73.858984,53.619727],[74.351562,53.487646],[76.837305,54.442383],[76.484766,54.022559],[77.859961,53.269189],[79.98623,50.774561],[80.735254,51.293408],[81.465918,50.739844],[82.493945,50.727588],[83.357324,50.99458],[84.323242,50.23916],[84.989453,50.061426],[85.232617,49.61582],[86.180859,49.499316],[86.675488,49.777295],[87.322852,49.085791],[87.814258,49.162305],[88.192578,49.451709],[89.395605,49.611523],[90.053711,50.09375],[92.354785,50.86416],[94.251074,50.556396],[94.614746,50.02373],[97.359766,49.741455],[98.250293,50.302441],[97.835742,51.05166],[98.893164,52.117285],[102.111523,51.353467],[102.288379,50.585107],[103.304395,50.200293],[105.383594,50.47373],[106.711133,50.312598],[107.233301,49.989404],[107.916602,49.947803],[108.613672,49.322803],[110.709766,49.142969],[112.806445,49.523584],[114.29707,50.274414],[115.429199,49.896484],[116.216797,50.009277],[116.683301,49.823779],[117.873438,49.513477],[119.259863,50.066406],[119.163672,50.406006],[120.749805,52.096533],[120.656152,52.56665],[120.094531,52.787207],[120.985449,53.28457],[123.607813,53.546533],[125.649023,53.042285],[127.590234,50.208984],[127.550781,49.801807],[129.498145,49.388818],[130.553125,48.861182],[130.961914,47.709326],[132.47627,47.71499],[133.144043,48.105664],[134.293359,48.373438],[135.083406,48.436324],[134.665234,48.253906],[134.752344,47.71543],[134.167676,47.302197],[133.113477,45.130713],[131.851855,45.326855],[130.981641,44.844336],[131.257324,43.378076],[131.068555,42.902246],[130.424805,42.727051],[130.526953,42.5354],[130.687305,42.302539]]],[[[47.441992,80.853662],[44.90498,80.611279],[46.141406,80.446729],[47.705273,80.765186],[48.683594,80.633252],[47.441992,80.853662]]],[[[50.278125,80.927246],[49.087793,80.515771],[46.644434,80.300342],[47.737305,80.081689],[51.703613,80.687646],[50.278125,80.927246]]],[[[67.765332,76.237598],[68.941699,76.707666],[67.651855,77.011572],[64.463477,76.378174],[61.20166,76.282031],[58.88125,75.854785],[57.606836,75.34126],[55.810059,75.124902],[56.49873,74.95708],[55.582227,74.627686],[56.137109,74.496094],[53.762891,73.766162],[54.299902,73.350977],[56.963867,73.366553],[58.534668,74.498926],[59.674023,74.610156],[61.355957,75.314844],[67.765332,76.237598]]],[[[55.319824,73.308301],[53.251172,73.182959],[51.511328,71.648096],[53.411621,71.530127],[54.155664,71.125488],[53.383594,70.873535],[57.145898,70.589111],[57.625391,70.728809],[55.297852,71.935352],[56.42959,73.201172],[55.319824,73.308301]]],[[[96.526563,81.075586],[95.15957,81.270996],[92.710352,80.872168],[91.523828,80.358545],[93.654688,80.009619],[97.298438,80.272754],[97.869922,80.763281],[96.526563,81.075586]]],[[[97.674512,80.158252],[94.987305,80.096826],[93.070801,79.495312],[95.02041,79.052686],[98.411133,78.787793],[99.929297,78.961426],[99.041797,79.293018],[100.06123,79.7771],[98.596484,80.052197],[97.65166,79.760645],[97.674512,80.158252]]],[[[102.884766,79.253955],[101.590625,79.350439],[99.500293,77.976074],[105.312598,78.499902],[103.800781,79.149268],[102.412305,78.835449],[102.884766,79.253955]]],[[[140.04873,75.828955],[138.919531,76.196729],[138.207617,76.114941],[136.947656,75.325537],[139.099121,74.656543],[139.68125,74.964062],[142.472754,74.82041],[143.12793,74.970312],[142.30791,75.691699],[144.019727,75.044678],[145.359961,75.530469],[141.485449,76.137158],[140.815918,75.630713],[140.04873,75.828955]]],[[[146.795215,75.370752],[146.5375,75.581787],[146.148535,75.198291],[148.296875,74.800439],[150.646289,74.94458],[150.822363,75.156543],[146.795215,75.370752]]],[[[178.861523,70.826416],[180,70.993018],[180,71.537744],[178.683887,71.105664],[178.861523,70.826416]]],[[[142.761035,54.393945],[142.334961,54.280713],[142.705957,53.895703],[142.526172,53.447461],[141.823535,53.339502],[141.66084,52.272949],[142.206738,51.222559],[141.866309,48.750098],[142.181738,48.013379],[141.830371,46.451074],[142.077148,45.917041],[142.578027,46.700781],[143.282324,46.558984],[143.431641,46.028662],[143.580664,46.360693],[142.556934,47.737891],[143.10498,49.198828],[144.04873,49.24917],[144.71377,48.640283],[143.299512,51.632373],[143.324707,52.963086],[142.761035,54.393945]]],[[[-178.876465,71.577051],[-179.999951,71.537744],[-179.999951,70.993018],[-177.523584,71.166895],[-178.876465,71.577051]]],[[[52.90332,71.36499],[52.249609,71.284912],[53.022656,70.968701],[52.90332,71.36499]]],[[[96.285449,77.02666],[96.528418,77.205518],[95.270312,77.018848],[96.285449,77.02666]]],[[[74.660547,72.873438],[74.961523,73.0625],[74.198535,73.109082],[74.660547,72.873438]]],[[[58.622363,81.04165],[57.210938,81.01709],[58.285645,80.764893],[58.622363,81.04165]]],[[[50.265234,69.185596],[48.844922,69.494727],[48.439062,68.804883],[49.62627,68.859717],[50.265234,69.185596]]],[[[63.373828,80.700098],[65.437402,80.930713],[64.802051,81.197266],[62.592578,80.853027],[63.373828,80.700098]]],[[[57.95625,80.123242],[59.255469,80.343213],[57.075,80.493945],[57.95625,80.123242]]],[[[62.167773,80.834766],[59.592285,80.816504],[59.649805,80.43125],[61.05127,80.418604],[62.167773,80.834766]]],[[[61.14082,80.950342],[61.457422,81.103955],[60.07832,80.99917],[61.14082,80.950342]]],[[[53.521387,80.185205],[52.853906,80.402393],[52.343555,80.213232],[53.521387,80.185205]]],[[[57.078711,80.350928],[55.811621,80.087158],[56.986914,80.071484],[57.078711,80.350928]]],[[[57.810254,81.546045],[55.716699,81.188477],[57.769727,81.169727],[57.810254,81.546045]]],[[[54.718945,81.115967],[54.668164,80.738672],[57.580371,80.755469],[54.718945,81.115967]]],[[[92.683496,79.685205],[93.803125,79.904541],[91.229297,80.030713],[92.683496,79.685205]]],[[[141.010254,73.999463],[141.038574,74.242725],[140.193555,74.236719],[140.409473,73.92168],[141.010254,73.999463]]],[[[142.184863,73.895898],[141.084766,73.865869],[139.785547,73.355225],[143.451465,73.231299],[142.184863,73.895898]]],[[[137.940527,55.092627],[137.577344,55.197021],[137.23291,54.790576],[137.721484,54.663232],[138.206152,55.033545],[137.940527,55.092627]]],[[[169.200781,69.580469],[169.374805,69.882617],[167.864746,69.901074],[169.200781,69.580469]]],[[[163.635156,58.603369],[164.615723,58.885596],[164.572656,59.221143],[163.760938,59.015039],[163.635156,58.603369]]],[[[166.650293,54.839062],[166.275781,55.311963],[165.751074,55.294531],[166.650293,54.839062]]],[[[155.921094,50.302197],[156.096875,50.771875],[155.243066,50.094629],[155.921094,50.302197]]],[[[152.002051,46.897168],[152.288867,47.142188],[151.723438,46.828809],[152.002051,46.897168]]],[[[149.687695,45.642041],[150.553125,46.208545],[149.44707,45.593359],[149.687695,45.642041]]],[[[148.599512,45.317627],[148.812207,45.51001],[148.324219,45.282422],[147.924023,45.383301],[146.897461,44.404297],[148.599512,45.317627]]],[[[146.207617,44.497656],[145.461719,43.870898],[145.555859,43.6646],[146.567773,44.44043],[146.207617,44.497656]]],[[[113.387207,74.400439],[112.084473,74.548975],[111.503418,74.353076],[112.782422,74.095068],[113.387207,74.400439]]],[[[70.673926,73.09502],[71.626172,73.173975],[70.940234,73.514404],[69.995898,73.359375],[70.040723,73.037158],[70.673926,73.09502]]],[[[77.63252,72.29126],[78.365137,72.482422],[77.748535,72.631201],[76.871094,72.317041],[77.63252,72.29126]]],[[[79.501465,72.721924],[79.164258,73.094336],[78.633203,72.850732],[79.501465,72.721924]]],[[[60.450488,69.934863],[59.048047,70.460498],[58.519922,70.318311],[59.637012,69.721045],[60.440234,69.725928],[60.450488,69.934863]]],[[[20.957813,55.278906],[20.899805,55.28667],[19.604395,54.45918],[22.766211,54.356787],[22.567285,55.059131],[21.235742,55.264111],[20.995898,54.902686],[20.594824,54.982373],[20.957813,55.278906]]],[[[33.594141,46.09624],[32.508008,45.403809],[33.555176,45.097656],[33.450684,44.553662],[33.755664,44.398926],[35.472559,45.098486],[36.393359,45.065381],[36.575,45.393555],[35.45752,45.316309],[35.001674,45.733383],[33.806667,46.208288],[33.594141,46.09624]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"RO",iso_a3:"ROU",iso_n3:"642"},geometry:{type:"Polygon",coordinates:[[[28.2125,45.450439],[28.071777,46.978418],[26.618945,48.259863],[24.979102,47.724121],[23.202637,48.084521],[22.87666,47.947266],[21.999707,47.505029],[21.12168,46.282422],[20.241797,46.108594],[21.490234,45.1479],[21.360059,44.82666],[22.093066,44.541943],[22.64209,44.650977],[22.705078,44.237793],[23.028516,44.077979],[22.919043,43.834473],[25.49707,43.670801],[27.086914,44.167383],[28.585352,43.742236],[28.891504,44.918652],[29.55752,44.843408],[29.705859,45.259912],[28.2125,45.450439]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"QA",iso_a3:"QAT",iso_n3:"634"},geometry:{type:"Polygon",coordinates:[[[51.267969,24.607227],[51.608887,25.052881],[51.543066,25.902393],[51.262305,26.153271],[50.762891,25.444727],[50.804395,24.789258],[51.267969,24.607227]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"PT",iso_a3:"PRT",iso_n3:"620"},geometry:{type:"MultiPolygon",coordinates:[[[[-17.190869,32.868604],[-17.018262,32.662793],[-16.693262,32.758008],[-17.190869,32.868604]]],[[[-8.777148,41.941064],[-8.684619,40.752539],[-9.479736,38.798779],[-9.356738,38.6979],[-9.135791,38.742773],[-8.791602,39.078174],[-9.021484,38.746875],[-9.250391,38.656738],[-9.213281,38.448096],[-8.798877,38.518164],[-8.668311,38.424316],[-8.881104,38.44668],[-8.81416,37.430811],[-8.997803,37.032275],[-7.406152,37.179443],[-7.443945,37.728271],[-6.957568,38.187891],[-7.343018,38.457422],[-6.997949,39.056445],[-7.535693,39.661572],[-6.975391,39.798389],[-6.928467,41.009131],[-6.2125,41.532031],[-6.618262,41.942383],[-8.15249,41.811963],[-8.266064,42.137402],[-8.777148,41.941064]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"PL",iso_a3:"POL",iso_n3:"616"},geometry:{type:"Polygon",coordinates:[[[23.605273,51.51792],[23.652441,52.040381],[23.175098,52.286621],[23.91543,52.770264],[23.484668,53.939795],[22.766211,54.356787],[19.604395,54.45918],[18.836426,54.36958],[18.43623,54.744727],[18.759277,54.68457],[18.323438,54.838184],[17.842969,54.816699],[14.211426,53.950342],[14.213672,53.870752],[14.583496,53.639355],[14.258887,53.729639],[14.128613,52.878223],[14.619434,52.528516],[15.016602,51.252734],[14.809375,50.858984],[14.99375,51.014355],[16.282227,50.655615],[16.63916,50.102148],[16.880078,50.427051],[17.702246,50.307178],[17.627051,50.116406],[18.562402,49.879346],[18.832227,49.510791],[19.149414,49.4],[19.441602,49.597705],[20.057617,49.181299],[20.362988,49.385254],[21.639648,49.411963],[22.538672,49.072705],[22.852051,49.062744],[22.706152,49.606201],[24.089941,50.530469],[23.605273,51.51792]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"PH",iso_a3:"PHL",iso_n3:"608"},geometry:{type:"MultiPolygon",coordinates:[[[[121.101562,18.615283],[120.599707,18.507861],[120.36875,16.10957],[119.772559,16.255127],[120.082129,14.851074],[120.43877,14.453369],[120.583691,14.88125],[120.941309,14.645068],[120.637109,13.804492],[121.344141,13.649121],[121.77793,13.937646],[122.599902,13.194141],[122.595215,13.907617],[123.310938,13.044092],[123.948535,12.916406],[124.059766,12.56709],[124.142773,13.035791],[123.785156,13.110547],[123.549609,13.645752],[123.815723,13.837109],[123.320312,14.06167],[123.101953,13.750244],[122.627148,14.317529],[122.199707,14.148047],[122.211719,13.930176],[121.766602,14.168066],[121.392285,15.324414],[121.595313,15.933252],[122.135156,16.184814],[122.519141,17.124854],[122.152344,17.664404],[122.265527,18.458838],[121.845605,18.29541],[121.101562,18.615283]]],[[[117.311133,8.4396],[119.686914,10.500342],[119.55332,11.313525],[119.223828,10.477295],[117.349902,8.713574],[117.311133,8.4396]]],[[[122.496191,11.615088],[121.916016,11.854346],[122.103516,11.64292],[121.954004,10.444385],[122.769922,10.823828],[123.119531,11.286816],[123.158301,11.535547],[122.496191,11.615088]]],[[[123.130859,9.064111],[123.320508,9.272949],[123.162012,9.864258],[123.567578,10.780762],[123.256641,10.993945],[122.983301,10.886621],[122.855566,10.086914],[122.399512,9.823047],[123.130859,9.064111]]],[[[124.574609,11.343066],[124.330664,11.535205],[124.445508,10.923584],[124.786719,10.781396],[124.780762,10.168066],[125.026563,10.033105],[124.9875,10.367578],[125.268457,10.307715],[125.026563,11.211719],[124.574609,11.343066]]],[[[125.239551,12.527881],[124.294727,12.569336],[124.445703,12.152783],[124.99502,11.764941],[125.034277,11.34126],[125.735645,11.049609],[125.535645,12.191406],[125.239551,12.527881]]],[[[120.704395,13.479492],[120.338477,13.412354],[121.236719,12.218799],[121.540625,12.638184],[121.522754,13.131201],[121.202734,13.432324],[120.704395,13.479492]]],[[[126.005957,9.320947],[125.471289,9.756787],[125.49873,9.014746],[124.868945,8.972266],[124.731152,8.562988],[124.404883,8.599854],[123.799414,8.049121],[123.849219,8.432715],[123.43457,8.70332],[122.911133,8.156445],[122.243359,7.945117],[121.964258,6.968213],[122.616211,7.763135],[123.390918,7.40752],[123.66582,7.817773],[124.206641,7.396436],[123.985254,6.993701],[124.078125,6.404443],[124.927344,5.875342],[125.231543,6.069531],[125.346484,5.598975],[125.667969,5.978662],[125.380664,6.689941],[125.689258,7.263037],[125.824414,7.333301],[126.189355,6.309668],[126.19209,6.852539],[126.581543,7.247754],[126.458691,8.202832],[126.139551,8.595654],[126.30459,8.952051],[126.005957,9.320947]]],[[[123.370313,9.449609],[124.00498,10.400098],[124.038867,11.273535],[123.38623,9.96709],[123.370313,9.449609]]],[[[121.159375,6.075635],[120.876367,5.952637],[121.411035,5.939844],[121.159375,6.075635]]],[[[120.1,12.167676],[119.885742,12.299854],[120.010547,12.008252],[120.314551,12.012402],[120.1,12.167676]]],[[[124.593848,9.787207],[124.335742,10.159912],[123.817187,9.817383],[124.122461,9.599316],[124.593848,9.787207]]],[[[122.092871,6.42832],[122.323535,6.602246],[121.832031,6.664062],[122.092871,6.42832]]],[[[125.690234,9.914453],[125.666797,10.440137],[125.494824,10.118701],[125.690234,9.914453]]],[[[121.914844,13.540332],[122.004883,13.20498],[122.114551,13.463184],[121.914844,13.540332]]],[[[122.094043,12.354883],[122.14502,12.652637],[122.013965,12.105615],[122.094043,12.354883]]],[[[123.281836,12.853418],[122.95752,13.107178],[123.367188,12.70083],[123.281836,12.853418]]],[[[123.716602,12.287354],[123.236426,12.583496],[123.157813,11.925635],[123.47373,12.21665],[124.045508,11.752441],[123.716602,12.287354]]],[[[124.353613,13.632227],[124.224902,14.077588],[124.038867,13.663135],[124.353613,13.632227]]],[[[122.033496,15.005029],[121.839844,15.038135],[121.933008,14.656055],[122.033496,15.005029]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"PE",iso_a3:"PER",iso_n3:"604"},geometry:{type:"Polygon",coordinates:[[[-69.965918,-4.235938],[-70.339502,-3.814355],[-70.735107,-3.781543],[-70.09585,-2.658203],[-70.968555,-2.206836],[-72.941113,-2.394043],[-73.664307,-1.248828],[-74.246387,-.970605],[-74.801758,-.200098],[-75.284473,-.106543],[-75.62627,-.122852],[-75.259375,-.590137],[-75.570557,-1.53125],[-76.679102,-2.562598],[-77.860596,-2.981641],[-78.158496,-3.465137],[-78.345361,-3.397363],[-78.686035,-4.562402],[-79.033301,-4.969141],[-79.330957,-4.927832],[-79.638525,-4.454883],[-80.478564,-4.430078],[-80.490137,-4.010059],[-80.179248,-3.877734],[-80.324658,-3.387891],[-81.283203,-4.322266],[-81.336621,-4.669531],[-80.881934,-5.635059],[-81.142041,-6.056738],[-79.994971,-6.768945],[-78.762256,-8.616992],[-77.633203,-11.287793],[-76.223633,-13.371191],[-76.289014,-14.133105],[-75.104248,-15.411914],[-72.467676,-16.708105],[-70.418262,-18.345605],[-69.926367,-18.206055],[-69.8521,-17.703809],[-69.510938,-17.506055],[-69.624854,-17.200195],[-68.842773,-16.337891],[-69.217578,-16.149121],[-69.420898,-15.640625],[-69.172461,-15.236621],[-69.359473,-14.795312],[-68.870898,-14.169727],[-69.074121,-13.682813],[-68.978613,-12.880078],[-68.685254,-12.501953],[-69.578613,-10.951758],[-70.642334,-11.010254],[-70.541113,-9.4375],[-71.237939,-9.966016],[-72.142969,-10.005176],[-72.379053,-9.510156],[-73.209424,-9.411426],[-72.974023,-8.993164],[-74.002051,-7.556055],[-73.72041,-7.309277],[-73.758105,-6.905762],[-73.137354,-6.46582],[-73.235547,-6.098438],[-72.887061,-5.122754],[-70.799512,-4.17334],[-69.965918,-4.235938]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"PY",iso_a3:"PRY",iso_n3:"600"},geometry:{type:"Polygon",coordinates:[[[-58.159766,-20.164648],[-58.180176,-19.817871],[-59.090527,-19.28623],[-61.756836,-19.645312],[-62.276318,-20.5625],[-62.650977,-22.233691],[-61.03291,-23.755664],[-59.89248,-24.093555],[-57.643896,-25.328418],[-58.604834,-27.314355],[-56.437158,-27.553809],[-56.164062,-27.321484],[-55.714648,-27.414844],[-54.825488,-26.652246],[-54.615869,-25.576074],[-54.241797,-24.047266],[-54.625488,-23.8125],[-55.415918,-23.951367],[-55.84917,-22.307617],[-56.447803,-22.076172],[-56.937256,-22.271289],[-57.955908,-22.10918],[-57.830225,-20.997949],[-58.159766,-20.164648]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"PG",iso_a3:"PNG",iso_n3:"598"},geometry:{type:"MultiPolygon",coordinates:[[[[152.96582,-4.756348],[153.016797,-4.105664],[152.03291,-3.251367],[150.825391,-2.572949],[150.746094,-2.738867],[152.279395,-3.582422],[152.96582,-4.756348]]],[[[151.915625,-4.296777],[151.593066,-4.200781],[151.671191,-4.883301],[150.900293,-5.447168],[150.183105,-5.523633],[150.090039,-5.011816],[149.831445,-5.524121],[148.432031,-5.471777],[148.337207,-5.669434],[149.652539,-6.29043],[150.473535,-6.263379],[151.515137,-5.552344],[152.077051,-5.458301],[151.983691,-5.074414],[152.351172,-4.822168],[152.405664,-4.340723],[151.915625,-4.296777]]],[[[140.976172,-9.11875],[142.647168,-9.327832],[143.366211,-8.961035],[143.111816,-8.474512],[142.206836,-8.195801],[143.61377,-8.200391],[143.518164,-8.000684],[143.942285,-7.944238],[143.654883,-7.460352],[144.142871,-7.757227],[144.509863,-7.567383],[146.033203,-8.076367],[147.768652,-10.070117],[149.754102,-10.353027],[150.319922,-10.654883],[150.647168,-10.517969],[150.446094,-10.307324],[150.849512,-10.236035],[149.874414,-10.012988],[149.76123,-9.805859],[150.011035,-9.688184],[149.263184,-9.497852],[149.19834,-9.03125],[148.583105,-9.051758],[148.126758,-8.103613],[147.190039,-7.378125],[146.953613,-6.834082],[147.845508,-6.662402],[147.566699,-6.056934],[145.745215,-5.402441],[145.766992,-4.823047],[144.477734,-3.825293],[140.973438,-2.609766],[140.976172,-9.11875]]],[[[151.080957,-10.020117],[150.776074,-9.709082],[151.230859,-10.194727],[151.296484,-9.956738],[151.080957,-10.020117]]],[[[150.34541,-9.493848],[150.208301,-9.206348],[150.109766,-9.361914],[150.34541,-9.493848]]],[[[147.067578,-1.960156],[146.65625,-1.974023],[146.546484,-2.208594],[147.438086,-2.058984],[147.067578,-1.960156]]],[[[150.436621,-2.661816],[150.227148,-2.38418],[149.961621,-2.473828],[150.436621,-2.661816]]],[[[150.528418,-9.346582],[150.43623,-9.624609],[150.894043,-9.66748],[150.528418,-9.346582]]],[[[153.536133,-11.476172],[153.203613,-11.324121],[153.759863,-11.586328],[153.536133,-11.476172]]],[[[155.957617,-6.686816],[154.729297,-5.444434],[154.759277,-5.931348],[155.344043,-6.72168],[155.719336,-6.862793],[155.957617,-6.686816]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"PA",iso_a3:"PAN",iso_n3:"591"},geometry:{type:"Polygon",coordinates:[[[-77.374219,8.658301],[-78.082764,9.236279],[-79.577295,9.597852],[-81.354785,8.780566],[-81.894482,9.14043],[-81.780225,8.957227],[-82.244189,9.031494],[-82.563574,9.57666],[-82.939844,9.44917],[-82.727832,8.916064],[-83.027344,8.337744],[-82.879346,8.070654],[-82.781152,8.303516],[-82.235449,8.311035],[-81.727637,8.137549],[-81.268408,7.625488],[-81.063867,7.899756],[-80.845557,7.220068],[-80.438867,7.274951],[-80.01123,7.500049],[-80.458984,8.213867],[-79.50708,8.970068],[-79.086377,8.997168],[-78.409863,8.355322],[-78.099463,8.496973],[-77.760547,8.133252],[-78.141895,8.386084],[-78.421582,8.060986],[-77.901172,7.229346],[-77.761914,7.698828],[-77.538281,7.56626],[-77.195996,7.972461],[-77.374219,8.658301]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"PW",iso_a3:"PLW",iso_n3:"585"},geometry:{type:"Polygon",coordinates:[[[134.59541,7.382031],[134.651172,7.712109],[134.515723,7.525781],[134.59541,7.382031]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"PK",iso_a3:"PAK",iso_n3:"586"},geometry:{type:"Polygon",coordinates:[[[76.766895,35.661719],[75.912305,36.048975],[75.772168,36.694922],[74.541406,37.022168],[72.249805,36.734717],[71.23291,36.121777],[71.620508,35.183008],[70.965625,34.530371],[71.051563,34.049707],[69.889648,34.007275],[70.261133,33.289014],[69.501562,33.020068],[69.279297,31.936816],[68.868945,31.634229],[68.161035,31.802979],[67.452832,31.234619],[66.829297,31.263672],[66.346875,30.802783],[66.23125,29.865723],[64.09873,29.391943],[62.476562,29.40835],[60.843359,29.858691],[61.889844,28.546533],[62.758008,28.243555],[62.762988,27.250195],[63.301563,27.151465],[63.157812,26.649756],[61.842383,26.225928],[61.587891,25.202344],[64.059375,25.40293],[64.658984,25.184082],[66.467676,25.445312],[66.131152,25.493262],[66.324219,25.601807],[66.698633,25.226318],[66.703027,24.860938],[67.171484,24.756104],[67.563086,23.881836],[68.165039,23.857324],[68.724121,23.964697],[68.781152,24.313721],[69.805176,24.165234],[71.044043,24.400098],[70.648438,25.666943],[70.100195,25.910059],[70.147656,26.506445],[69.506934,26.742676],[69.537012,27.122949],[70.403711,28.025049],[70.797949,27.709619],[71.870313,27.9625],[72.341895,28.751904],[72.90332,29.02876],[73.381641,29.934375],[73.80918,30.093359],[74.632812,31.034668],[74.555566,31.818555],[75.333496,32.279199],[74.685742,32.493799],[74.663281,32.757666],[74.35459,32.768701],[74.003809,33.189453],[73.976465,33.721289],[74.250879,33.946094],[73.904102,34.075684],[73.96123,34.653467],[75.70918,34.503076],[77.048633,35.109912],[76.766895,35.661719]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"OM",iso_a3:"OMN",iso_n3:"512"},geometry:{type:"MultiPolygon",coordinates:[[[[53.085645,16.648389],[54.068164,17.005518],[55.06416,17.038916],[55.479102,17.843262],[56.383496,17.987988],[56.825977,18.753516],[57.811621,19.01709],[57.861816,20.244141],[58.169434,20.589502],[58.474219,20.406885],[59.8,22.219922],[59.823242,22.508984],[59.429395,22.66084],[58.773047,23.517188],[57.123047,23.980713],[56.387988,24.979199],[56.063867,24.73877],[56.000586,24.953223],[55.795703,24.868115],[55.76084,24.242676],[55.985156,24.063379],[55.468457,23.941113],[55.18584,22.704102],[55.641016,22.001855],[54.977344,19.995947],[51.977637,18.996143],[53.085645,16.648389]]],[[[56.297852,25.650684],[56.413086,26.351172],[56.080469,26.062646],[56.297852,25.650684]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"NO",iso_a3:"NOR",iso_n3:"578"},geometry:{type:"MultiPolygon",coordinates:[[[[20.622168,69.036865],[21.59375,69.273584],[22.410938,68.719873],[23.854004,68.805908],[24.941406,68.593262],[26.072461,69.691553],[27.747852,70.064844],[29.141602,69.671436],[28.96582,69.021973],[30.180176,69.63584],[30.860742,69.538428],[30.869727,69.783447],[29.79209,69.727881],[28.804297,70.092529],[30.944141,70.274414],[30.065137,70.702979],[28.831543,70.863965],[28.192969,70.248584],[28.392285,70.975293],[27.59707,71.091309],[26.989355,70.511377],[26.585059,70.41001],[26.661328,70.939746],[25.043848,70.109033],[25.768164,70.853174],[24.658008,71.001025],[23.353906,69.983398],[22.68457,70.374756],[21.355762,70.233398],[21.974707,69.83457],[20.62207,69.913916],[20.739453,69.520508],[20.054492,69.332666],[20.324219,69.945312],[19.641504,69.424023],[19.722461,69.781641],[19.197266,69.747852],[18.915918,69.335596],[18.259766,69.470605],[18.101465,69.156299],[16.514355,68.532568],[17.552832,68.42627],[16.203809,68.316748],[16.312305,67.881445],[16.00791,68.228711],[14.798926,67.809326],[15.594434,67.348535],[14.961914,67.574268],[14.441699,67.271387],[15.415723,67.202441],[14.108789,67.119238],[13.211426,66.64082],[13.118848,66.230664],[14.03418,66.297559],[12.783789,66.100439],[12.133887,65.27915],[12.915527,65.339258],[11.489355,64.97583],[9.567285,63.706152],[10.055078,63.512695],[11.306641,64.048877],[11.370703,63.804834],[10.020996,63.39082],[9.696875,63.624561],[9.156055,63.459326],[8.576172,63.601172],[8.158008,63.161523],[8.623145,62.84624],[7.571875,63.099512],[6.734961,62.720703],[8.045508,62.77124],[7.653125,62.564014],[6.35293,62.611133],[6.136133,62.407471],[6.580078,62.407275],[5.143164,62.159912],[5.266895,61.935596],[6.730762,61.869775],[4.930078,61.87832],[5.106738,61.187549],[7.173535,61.165967],[7.442578,61.434619],[7.604492,61.210547],[7.038672,60.95293],[6.777832,61.142432],[5.008594,61.038184],[5.11582,60.635986],[5.64834,60.687988],[5.137109,60.445605],[5.688574,60.123193],[5.205664,60.087939],[5.145801,59.638818],[6.15332,60.34624],[6.995703,60.511963],[5.730469,59.863086],[6.216602,59.818359],[5.242188,59.564307],[5.173242,59.162549],[6.415332,59.547119],[5.88916,59.097949],[6.363281,59.000928],[5.555566,58.975195],[5.706836,58.523633],[7.004883,58.024219],[8.166113,58.145312],[9.557227,59.112695],[10.179395,59.009277],[10.595312,59.764551],[10.834473,59.183936],[11.388281,59.036523],[11.642773,58.926074],[11.680762,59.592285],[12.486133,60.106787],[12.294141,61.002686],[12.880762,61.352295],[12.155371,61.720752],[12.175195,63.595947],[12.792773,64],[14.141211,64.173535],[13.650293,64.581543],[14.479688,65.301465],[14.543262,66.129346],[15.483789,66.305957],[16.783594,67.89502],[17.324609,68.103809],[17.916699,67.964893],[18.303027,68.55542],[19.969824,68.356396],[20.116699,69.020898],[20.622168,69.036865]]],[[[23.440527,70.815771],[21.994531,70.657129],[22.829102,70.541553],[23.440527,70.815771]]],[[[15.207129,68.943115],[14.404688,68.663232],[15.22207,68.616309],[15.207129,68.943115]]],[[[19.255078,70.066406],[19.132715,70.244141],[18.129883,69.557861],[19.334766,69.820264],[19.255078,70.066406]]],[[[17.503027,69.59624],[17.08252,69.013672],[17.950684,69.198145],[17.503027,69.59624]]],[[[15.760352,68.56123],[16.048047,69.302051],[15.412598,68.61582],[14.25752,68.190771],[15.975293,68.40249],[16.328906,68.876318],[15.760352,68.56123]]],[[[32.525977,80.119141],[33.629297,80.217432],[31.481934,80.10791],[32.525977,80.119141]]],[[[21.608105,78.595703],[20.22793,78.477832],[21.653125,77.923535],[20.928125,77.459668],[22.685352,77.553516],[22.553711,77.26665],[24.901855,77.756592],[23.116699,77.991504],[21.608105,78.595703]]],[[[20.897852,80.249951],[19.733301,80.477832],[19.343359,80.116406],[17.916895,80.143115],[18.725,79.760742],[20.784082,79.748584],[20.128223,79.4896],[23.947754,79.194287],[25.641211,79.403027],[26.86084,80.16001],[24.297559,80.3604],[23.114551,80.186963],[23.008008,80.473975],[22.289746,80.049219],[20.897852,80.249951]]],[[[16.786719,79.906738],[16.245703,80.049463],[16.34375,78.976123],[14.593652,79.79873],[14.02959,79.344141],[12.555371,79.569482],[13.692871,79.860986],[10.804004,79.798779],[10.737598,79.520166],[13.150195,78.2375],[14.638281,78.4146],[14.689258,78.720947],[15.417383,78.473242],[16.782617,78.663623],[17.00293,78.369385],[13.680566,78.028125],[14.089941,77.771387],[16.914062,77.897998],[13.995703,77.508203],[16.700488,76.579297],[19.676758,78.60957],[21.38877,78.74043],[18.677832,79.261719],[18.397363,79.605176],[17.66875,79.385938],[16.786719,79.906738]]],[[[11.250293,78.610693],[10.558203,78.90293],[12.116406,78.232568],[11.250293,78.610693]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"KP",iso_a3:"PRK",iso_n3:"408"},geometry:{type:"Polygon",coordinates:[[[128.374609,38.623438],[127.394531,39.20791],[127.568164,39.781982],[129.708691,40.857324],[129.756348,41.712256],[130.687305,42.302539],[130.526953,42.5354],[129.898242,42.998145],[129.697852,42.448145],[128.923438,42.038232],[128.045215,41.9875],[128.149414,41.387744],[126.743066,41.724854],[125.989062,40.904639],[124.362109,40.004053],[124.638281,39.615088],[124.775293,39.758057],[125.36084,39.526611],[125.168848,38.805518],[125.554492,38.68623],[124.690918,38.129199],[125.206738,38.081543],[124.98877,37.931445],[125.357813,37.724805],[125.769141,37.985352],[126.116699,37.74292],[126.633887,37.781836],[127.090332,38.283887],[128.038965,38.308545],[128.374609,38.623438]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"NG",iso_a3:"NGA",iso_n3:"566"},geometry:{type:"Polygon",coordinates:[[[13.606348,13.70459],[12.463184,13.09375],[10.475879,13.330225],[9.615918,12.810645],[8.750586,12.908154],[7.830469,13.340918],[7.005078,12.995557],[6.299805,13.658789],[5.491992,13.872852],[4.664844,13.733203],[4.147559,13.457715],[4.03877,12.934668],[3.64668,12.52998],[3.59541,11.696289],[3.487793,11.39541],[3.834473,10.607422],[3.044922,9.083838],[2.774805,9.048535],[2.706445,6.369238],[3.716992,6.597949],[3.450781,6.427051],[4.431348,6.348584],[5.112402,5.641553],[5.456641,5.611719],[5.199219,5.533545],[5.549707,5.474219],[5.367969,5.337744],[5.493262,4.83877],[6.076563,4.290625],[6.860352,4.37334],[6.767676,4.724707],[6.923242,4.390674],[7.154688,4.514404],[7.076563,4.716162],[7.800781,4.522266],[8.293066,4.557617],[8.252734,4.923975],[8.555859,4.755225],[8.997168,5.917725],[9.779883,6.760156],[10.60625,7.063086],[11.237305,6.450537],[11.861426,7.116406],[12.233398,8.282324],[12.782227,8.817871],[13.699902,10.873145],[14.575391,11.532422],[14.619727,12.150977],[14.197461,12.383789],[14.063965,13.078516],[13.606348,13.70459]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"NE",iso_a3:"NER",iso_n3:"562"},geometry:{type:"Polygon",coordinates:[[[13.606348,13.70459],[13.448242,14.380664],[15.474316,16.908398],[15.735059,19.904053],[15.963184,20.346191],[15.181836,21.523389],[14.979004,22.996191],[14.215527,22.619678],[13.48125,23.180176],[11.967871,23.517871],[7.481738,20.873096],[5.836621,19.47915],[4.227637,19.142773],[4.234668,16.996387],[3.842969,15.701709],[3.504297,15.356348],[1.300195,15.272266],[.947461,14.982129],[.21748,14.911475],[.429199,13.972119],[1.201172,13.35752],[.988477,13.364844],[.987305,13.041895],[1.564941,12.6354],[2.10459,12.70127],[2.072949,12.309375],[2.38916,11.89707],[2.366016,12.221924],[2.805273,12.383838],[3.59541,11.696289],[3.64668,12.52998],[4.03877,12.934668],[4.147559,13.457715],[4.664844,13.733203],[5.491992,13.872852],[6.299805,13.658789],[7.005078,12.995557],[7.830469,13.340918],[8.750586,12.908154],[9.615918,12.810645],[10.475879,13.330225],[12.463184,13.09375],[13.606348,13.70459]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"NI",iso_a3:"NIC",iso_n3:"558"},geometry:{type:"Polygon",coordinates:[[[-83.15752,14.993066],[-84.453564,14.643701],[-84.985156,14.752441],[-85.733936,13.858691],[-86.040381,14.050146],[-86.733643,13.763477],[-86.729297,13.284375],[-87.337256,12.979248],[-87.667529,12.903564],[-85.744336,11.062109],[-84.63418,11.045605],[-83.919287,10.735352],[-83.641992,10.917236],[-83.867871,11.300049],[-83.651758,11.642041],[-83.754248,12.501953],[-83.593359,12.713086],[-83.510938,12.411816],[-83.567334,13.320312],[-83.187744,14.340088],[-83.413721,14.825342],[-83.15752,14.993066]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"NZ",iso_a3:"NZL",iso_n3:"554"},geometry:{type:"MultiPolygon",coordinates:[[[[173.115332,-41.279297],[172.704395,-40.667773],[172.943652,-40.51875],[172.640625,-40.518262],[171.48623,-41.794727],[171.011719,-42.885059],[170.969922,-42.718359],[169.178906,-43.913086],[168.457422,-44.030566],[167.908984,-44.664746],[167.194531,-44.963477],[167.155664,-45.410938],[166.743066,-45.468457],[167.00332,-45.712109],[166.488281,-45.831836],[166.916699,-45.957227],[166.731543,-46.197852],[167.539453,-46.148535],[168.382129,-46.605371],[169.342285,-46.620508],[170.77627,-45.870898],[171.240723,-44.26416],[172.179785,-43.895996],[172.035547,-43.701758],[173.065625,-43.874609],[172.52666,-43.464746],[172.624023,-43.272461],[173.221191,-42.976562],[174.283105,-41.740625],[174.069336,-41.429492],[174.370117,-41.103711],[174.038574,-41.241895],[174.302539,-41.019531],[173.797852,-41.271973],[173.947168,-40.924121],[173.115332,-41.279297]]],[[[168.144922,-46.862207],[167.783984,-46.699805],[167.521973,-47.258691],[168.240918,-47.07002],[168.144922,-46.862207]]],[[[173.269434,-34.934766],[173.043945,-34.429102],[172.705957,-34.455176],[173.313965,-35.443359],[173.626172,-35.319141],[173.412207,-35.542578],[174.054688,-36.359766],[173.914453,-35.908691],[174.392773,-36.240039],[174.401562,-36.601953],[174.188867,-36.492285],[174.475586,-36.941895],[174.928906,-37.084766],[174.58584,-37.097754],[174.928027,-37.804492],[174.597363,-38.785059],[173.763672,-39.31875],[175.155957,-40.114941],[175.1625,-40.621582],[174.635352,-41.289453],[175.309766,-41.610645],[176.842188,-40.157812],[177.076758,-39.221777],[177.522949,-39.073828],[177.908789,-39.239551],[178.53623,-37.69209],[178.00918,-37.554883],[177.274023,-37.993457],[176.108398,-37.645117],[175.46084,-36.475684],[175.54248,-37.201367],[174.722461,-36.841211],[174.802148,-36.309473],[174.320312,-35.24668],[173.269434,-34.934766]]],[[[166.221094,-50.761523],[166.101367,-50.538965],[165.88916,-50.807715],[166.221094,-50.761523]]],[[[-176.177637,-43.740332],[-176.847656,-43.823926],[-176.515527,-44.116602],[-176.516553,-43.784766],[-176.177637,-43.740332]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"NU",iso_a3:"NIU",iso_n3:"570"},geometry:{type:"Polygon",coordinates:[[[-169.803418,-19.083008],[-169.834033,-18.966016],[-169.94834,-19.072852],[-169.803418,-19.083008]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"CK",iso_a3:"COK",iso_n3:"184"},geometry:{type:"Polygon",coordinates:[[[-159.740527,-21.249219],[-159.768359,-21.188477],[-159.832031,-21.200488],[-159.740527,-21.249219]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"NL",iso_a3:"NLD",iso_n3:"528"},geometry:{type:"MultiPolygon",coordinates:[[[[5.993945,50.750439],[5.94873,51.802686],[6.800391,51.967383],[7.035156,52.380225],[6.710742,52.617871],[7.033008,52.651367],[7.197266,53.282275],[6.062207,53.40708],[4.76875,52.941309],[3.946875,51.810547],[4.274121,51.471631],[3.448926,51.540771],[4.226172,51.386475],[5.030957,51.469092],[5.796484,51.153076],[5.639453,50.843604],[5.993945,50.750439]]],[[[4.226172,51.386475],[3.350098,51.377686],[3.902051,51.207666],[4.226172,51.386475]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"AW",iso_a3:"ABW",iso_n3:"533"},geometry:{type:"Polygon",coordinates:[[[-69.899121,12.452002],[-70.035107,12.614111],[-70.066113,12.546973],[-69.899121,12.452002]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"CW",iso_a3:"CUW",iso_n3:"531"},geometry:{type:"Polygon",coordinates:[[[-68.751074,12.059766],[-69.158887,12.380273],[-68.995117,12.141846],[-68.751074,12.059766]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"NP",iso_a3:"NPL",iso_n3:"524"},geometry:{type:"Polygon",coordinates:[[[88.109766,27.870605],[87.141406,27.83833],[86.137012,28.114355],[85.994531,27.9104],[85.67832,28.277441],[85.122461,28.315967],[85.159082,28.592236],[84.228711,28.911768],[84.101367,29.219971],[83.583496,29.183594],[82.043359,30.326758],[81.010254,30.164502],[80.401855,29.730273],[80.070703,28.830176],[82.733398,27.518994],[84.091016,27.491357],[85.794531,26.60415],[87.995117,26.382373],[88.109766,27.870605]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"NR",iso_a3:"NRU",iso_n3:"520"},geometry:{type:"Polygon",coordinates:[[[166.958398,-.516602],[166.907031,-.52373],[166.938965,-.550781],[166.958398,-.516602]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"NA",iso_a3:"NAM",iso_n3:"516"},geometry:{type:"Polygon",coordinates:[[[23.380664,-17.640625],[20.745508,-18.019727],[18.955273,-17.803516],[18.396387,-17.399414],[14.01748,-17.408887],[13.101172,-16.967676],[11.743066,-17.249219],[11.775879,-18.001758],[14.462793,-22.449121],[14.501562,-24.201953],[14.967773,-26.318066],[15.341504,-27.386523],[16.447559,-28.617578],[17.05625,-28.031055],[17.447949,-28.698145],[18.102734,-28.87168],[19.161719,-28.93877],[19.980469,-28.45127],[19.980469,-24.776758],[19.977344,-22.000195],[20.979492,-21.961914],[20.974121,-18.318848],[23.219336,-17.999707],[23.599707,-18.459961],[24.243945,-18.023438],[25.258789,-17.793555],[24.73291,-17.517773],[23.380664,-17.640625]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"MZ",iso_a3:"MOZ",iso_n3:"508"},geometry:{type:"Polygon",coordinates:[[[31.287891,-22.402051],[31.98584,-24.460645],[31.948242,-25.957617],[32.112891,-26.839453],[32.886133,-26.849316],[32.954883,-26.083594],[32.848828,-26.268066],[32.59043,-26.004102],[32.792188,-25.644336],[34.99209,-24.650586],[35.489648,-24.065527],[35.530078,-22.248145],[35.315723,-22.396875],[34.649414,-19.701367],[34.947852,-19.812695],[36.403711,-18.769727],[37.244531,-17.739941],[39.844629,-16.435645],[40.558984,-15.473438],[40.844531,-14.718652],[40.436816,-12.983105],[40.463574,-10.464355],[38.491797,-11.413281],[37.920215,-11.294727],[37.372852,-11.710449],[36.305664,-11.706348],[35.911328,-11.454688],[34.959473,-11.578125],[34.618555,-11.620215],[34.357813,-12.164746],[34.563672,-13.360156],[35.247461,-13.896875],[35.892773,-14.891797],[35.755273,-16.058301],[35.358496,-16.160547],[35.167188,-16.560254],[35.272559,-17.118457],[34.248242,-15.8875],[34.54082,-15.297266],[34.505273,-14.598145],[34.33252,-14.408594],[33.636426,-14.568164],[33.201758,-14.013379],[30.231836,-14.990332],[30.396094,-15.643066],[30.437793,-15.995313],[31.23623,-16.023633],[32.948047,-16.712305],[32.993066,-18.35957],[32.699707,-18.940918],[32.992773,-19.984863],[32.492383,-20.659766],[32.429785,-21.29707],[31.287891,-22.402051]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"MA",iso_a3:"MAR",iso_n3:"504"},geometry:{type:"Polygon",coordinates:[[[-2.219629,35.104199],[-2.839941,35.127832],[-2.972217,35.407275],[-4.62832,35.206396],[-5.252686,35.614746],[-5.277832,35.902734],[-5.924805,35.785791],[-6.900977,33.969043],[-8.512842,33.252441],[-9.24585,32.572461],[-9.808691,31.424609],[-9.66709,30.109277],[-10.200586,29.380371],[-11.552686,28.310107],[-12.948926,27.91416],[-13.575781,26.735107],[-14.413867,26.253711],[-14.904297,24.719775],[-15.899316,23.844434],[-17.003076,21.420703],[-14.750977,21.500586],[-14.221191,22.310156],[-13.891113,23.691016],[-12.431152,24.830664],[-12.060986,25.99082],[-11.718213,26.104102],[-11.392578,26.883398],[-9.817871,26.850195],[-8.794873,27.120703],[-8.68335,27.656445],[-8.678418,28.689404],[-7.685156,29.349512],[-5.448779,29.956934],[-4.968262,30.465381],[-3.666797,30.964014],[-3.826758,31.661914],[-3.017383,31.834277],[-2.887207,32.068848],[-1.225928,32.107227],[-1.065527,32.468311],[-1.679199,33.318652],[-1.795605,34.751904],[-2.219629,35.104199]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"EH",iso_a3:"ESH",iso_n3:"732"},geometry:{type:"Polygon",coordinates:[[[-8.68335,27.656445],[-8.794873,27.120703],[-9.817871,26.850195],[-11.392578,26.883398],[-11.718213,26.104102],[-12.060986,25.99082],[-12.431152,24.830664],[-13.891113,23.691016],[-14.221191,22.310156],[-14.750977,21.500586],[-17.003076,21.420703],[-17.048047,20.806152],[-16.964551,21.329248],[-13.016211,21.333936],[-13.153271,22.820508],[-12.023438,23.467578],[-12.016309,25.99541],[-8.682227,25.995508],[-8.68335,27.285938],[-8.68335,27.656445]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"ME",iso_a3:"MNE",iso_n3:"499"},geometry:{type:"Polygon",coordinates:[[[19.194336,43.533301],[18.460156,42.9979],[18.436328,42.559717],[18.51748,42.43291],[19.342383,41.869092],[19.654492,42.628564],[20.063965,42.547266],[20.344336,42.82793],[19.194336,43.533301]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"MN",iso_a3:"MNG",iso_n3:"496"},geometry:{type:"Polygon",coordinates:[[[87.814258,49.162305],[87.979688,48.555127],[89.047656,48.002539],[90.02793,47.877686],[90.869922,46.954492],[90.877246,45.196094],[93.516211,44.944482],[95.350293,44.278076],[96.385449,42.720361],[101.495313,42.53877],[102.156641,42.158105],[103.711133,41.751318],[104.498242,41.877002],[104.498242,41.658691],[104.982031,41.595508],[106.77002,42.288721],[109.339844,42.438379],[110.400391,42.773682],[111.933203,43.711426],[111.402246,44.367285],[111.898047,45.064062],[113.587012,44.745703],[114.560156,45.38999],[115.681055,45.458252],[116.562598,46.289795],[117.333398,46.362012],[117.438086,46.58623],[119.867188,46.672168],[119.711133,47.15],[118.498438,47.983984],[117.768359,47.987891],[117.350781,47.652197],[116.760547,47.869775],[115.898242,47.686914],[115.616406,47.874805],[116.683301,49.823779],[116.216797,50.009277],[115.429199,49.896484],[114.29707,50.274414],[112.806445,49.523584],[110.709766,49.142969],[108.613672,49.322803],[107.916602,49.947803],[107.233301,49.989404],[106.711133,50.312598],[105.383594,50.47373],[103.304395,50.200293],[102.288379,50.585107],[102.111523,51.353467],[98.893164,52.117285],[97.835742,51.05166],[98.250293,50.302441],[97.359766,49.741455],[94.614746,50.02373],[94.251074,50.556396],[92.354785,50.86416],[90.053711,50.09375],[89.395605,49.611523],[88.192578,49.451709],[87.814258,49.162305]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"MD",iso_a3:"MDA",iso_n3:"498"},geometry:{type:"Polygon",coordinates:[[[26.618945,48.259863],[28.071777,46.978418],[28.2125,45.450439],[28.947754,46.049951],[28.958398,46.458496],[30.131055,46.423096],[29.134863,47.489697],[29.125391,47.964551],[27.549219,48.477734],[26.618945,48.259863]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"MC",iso_a3:"MCO",iso_n3:"492"},geometry:{type:"Polygon",coordinates:[[[7.438672,43.750439],[7.39502,43.765332],[7.377734,43.731738],[7.438672,43.750439]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"MX",iso_a3:"MEX",iso_n3:"484"},geometry:{type:"MultiPolygon",coordinates:[[[[-117.128271,32.53335],[-115.673828,29.756396],[-114.048486,28.426172],[-114.265869,27.934473],[-114.069336,27.675684],[-114.300586,27.872998],[-114.993506,27.736035],[-113.598535,26.721289],[-113.155811,26.94624],[-113.020752,26.583252],[-112.377246,26.213916],[-112.069873,25.572852],[-112.072559,24.840039],[-110.362695,23.604932],[-110.00625,22.894043],[-109.495703,23.159814],[-109.42085,23.480127],[-110.262891,24.344531],[-110.367432,24.100488],[-110.659326,24.341455],[-111.569678,26.707617],[-111.795264,26.879688],[-111.699414,26.580957],[-111.862646,26.678516],[-112.734033,27.825977],[-112.87085,28.424219],[-114.550488,30.022266],[-114.933594,31.900732],[-113.046729,31.179248],[-113.057666,30.651025],[-112.161768,29.018896],[-111.121387,27.966992],[-110.529883,27.864209],[-110.377295,27.233301],[-109.27627,26.533887],[-109.116699,26.252734],[-109.425635,26.032568],[-109.384961,25.727148],[-108.886572,25.733447],[-109.028809,25.480469],[-108.051465,25.067041],[-108.280762,25.081543],[-107.951172,24.614893],[-107.511914,24.48916],[-107.764941,24.471924],[-105.791797,22.62749],[-105.649121,21.988086],[-105.208691,21.49082],[-105.51084,20.80874],[-105.260156,20.579053],[-105.669434,20.385596],[-104.938477,19.309375],[-103.912451,18.828467],[-103.441602,18.325391],[-101.918701,17.959766],[-100.847803,17.200488],[-97.754785,15.966846],[-96.213574,15.693066],[-94.799414,16.209668],[-95.02085,16.277637],[-94.858691,16.419727],[-94.587109,16.31582],[-94.661523,16.201904],[-94.00127,16.018945],[-94.37417,16.284766],[-93.166895,15.448047],[-92.235156,14.54541],[-92.204248,15.275],[-91.736572,16.070166],[-90.447168,16.072705],[-90.416992,16.391016],[-91.409619,17.255859],[-90.992969,17.252441],[-90.98916,17.816406],[-89.161475,17.814844],[-88.295654,18.472412],[-88.031738,18.838916],[-87.881982,18.273877],[-87.761816,18.446143],[-87.424756,19.58335],[-87.687695,19.637109],[-86.771777,21.150537],[-87.034766,21.592236],[-88.466699,21.569385],[-90.353125,21.009424],[-90.739258,19.352246],[-91.43667,18.889795],[-91.275244,18.624463],[-91.533984,18.456543],[-92.441016,18.675293],[-94.459766,18.16665],[-95.181836,18.700732],[-95.920361,18.81958],[-97.186328,20.717041],[-97.753809,22.02666],[-97.40918,21.272559],[-97.314502,21.564209],[-97.84248,22.510303],[-97.667676,24.38999],[-97.14624,25.961475],[-99.107764,26.446924],[-99.505322,27.54834],[-101.440381,29.776855],[-102.614941,29.752344],[-103.168311,28.998193],[-104.110596,29.386133],[-104.978809,30.645947],[-106.44541,31.768408],[-108.211816,31.779346],[-108.214453,31.329443],[-111.041992,31.324219],[-114.835938,32.508301],[-114.724756,32.715332],[-117.128271,32.53335]]],[[[-115.170605,28.069385],[-115.233545,28.368359],[-115.35293,28.103955],[-115.170605,28.069385]]],[[[-112.203076,29.005322],[-112.423535,29.203662],[-112.514062,28.847607],[-112.278418,28.769336],[-112.203076,29.005322]]],[[[-112.057275,24.545703],[-112.159424,25.285645],[-112.296777,24.789648],[-112.057275,24.545703]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"MU",iso_a3:"MUS",iso_n3:"480"},geometry:{type:"Polygon",coordinates:[[[57.65127,-20.484863],[57.656543,-19.989941],[57.317676,-20.427637],[57.65127,-20.484863]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"MR",iso_a3:"MRT",iso_n3:"478"},geometry:{type:"Polygon",coordinates:[[[-12.280615,14.809033],[-11.940918,14.886914],[-11.502686,15.636816],[-10.895605,15.150488],[-10.696582,15.422656],[-9.446924,15.458203],[-9.350586,15.677393],[-9.176807,15.496094],[-5.5125,15.496289],[-5.359912,16.282861],[-5.628662,16.568652],[-5.941016,19.296191],[-6.594092,24.994629],[-4.822607,24.995605],[-8.68335,27.285938],[-8.682227,25.995508],[-12.016309,25.99541],[-12.023438,23.467578],[-13.153271,22.820508],[-13.016211,21.333936],[-16.964551,21.329248],[-17.048047,20.806152],[-16.92793,21.114795],[-16.210449,20.22793],[-16.514453,19.361963],[-16.213086,19.00332],[-16.030322,17.887939],[-16.535254,15.838379],[-16.239014,16.531299],[-14.53374,16.655957],[-13.409668,16.05918],[-12.280615,14.809033]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"MT",iso_a3:"MLT",iso_n3:"470"},geometry:{type:"Polygon",coordinates:[[[14.566211,35.852734],[14.35127,35.978418],[14.436426,35.82168],[14.566211,35.852734]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"ML",iso_a3:"MLI",iso_n3:"466"},geometry:{type:"Polygon",coordinates:[[[-11.389404,12.404395],[-11.502197,12.198633],[-11.305176,12.01543],[-10.933203,12.205176],[-10.709229,11.89873],[-10.274854,12.212646],[-9.754004,12.029932],[-9.358105,12.25542],[-9.395361,12.464648],[-9.043066,12.402344],[-8.822021,11.673242],[-8.398535,11.366553],[-8.666699,11.009473],[-8.337402,10.990625],[-7.990625,10.1625],[-7.497949,10.439795],[-7.01709,10.143262],[-6.65415,10.656445],[-6.261133,10.724072],[-6.196875,10.232129],[-5.523535,10.426025],[-5.288135,11.82793],[-4.428711,12.337598],[-4.151025,13.306201],[-3.301758,13.280762],[-3.248633,13.65835],[-2.95083,13.648438],[-2.586719,14.227588],[-2.113232,14.168457],[-1.973047,14.456543],[-.760449,15.047754],[.21748,14.911475],[.947461,14.982129],[1.300195,15.272266],[3.504297,15.356348],[3.842969,15.701709],[4.234668,16.996387],[4.227637,19.142773],[3.119727,19.103174],[3.130273,19.850195],[1.685449,20.378369],[1.145508,21.102246],[-4.822607,24.995605],[-6.594092,24.994629],[-5.941016,19.296191],[-5.628662,16.568652],[-5.359912,16.282861],[-5.5125,15.496289],[-9.176807,15.496094],[-9.350586,15.677393],[-9.446924,15.458203],[-10.696582,15.422656],[-10.895605,15.150488],[-11.502686,15.636816],[-11.940918,14.886914],[-12.280615,14.809033],[-12.054199,13.633057],[-11.390381,12.941992],[-11.389404,12.404395]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"MV",iso_a3:"MDV",iso_n3:"462"},geometry:{type:"Polygon",coordinates:[[[73.512207,4.164551],[73.517773,4.247656],[73.473047,4.170703],[73.512207,4.164551]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"MY",iso_a3:"MYS",iso_n3:"458"},geometry:{type:"MultiPolygon",coordinates:[[[[100.119141,6.441992],[100.71543,3.966211],[101.299902,3.253271],[101.295508,2.885205],[103.480273,1.329492],[103.694531,1.449658],[103.991504,1.454785],[103.981445,1.623633],[104.250098,1.388574],[103.812207,2.580469],[103.439453,2.933105],[103.41582,4.850293],[103.09707,5.408447],[102.101074,6.242236],[101.873633,5.825293],[101.556055,5.907764],[101.113965,5.636768],[101.053516,6.242578],[100.261426,6.682715],[100.119141,6.441992]]],[[[117.574414,4.170605],[118.54834,4.379248],[118.260547,4.988867],[118.9125,5.0229],[119.266309,5.308105],[118.353125,5.806055],[117.973633,5.70625],[118.003809,6.05332],[117.501172,5.884668],[117.69375,6.35],[117.229883,6.93999],[116.788086,6.606104],[116.749805,6.9771],[115.877148,5.613525],[115.419043,5.413184],[115.554492,5.093555],[115.140039,4.899756],[115.290625,4.352588],[115.026758,4.899707],[114.74668,4.718066],[114.654102,4.037646],[114.063867,4.592676],[112.987891,3.161914],[111.5125,2.743018],[111.028711,1.557812],[111.223242,1.39585],[109.864844,1.764453],[109.628906,2.027539],[109.654004,1.614893],[110.505762,.861963],[111.808984,1.01167],[112.476172,1.559082],[113.622266,1.235938],[114.5125,1.452002],[114.786426,2.250488],[115.179102,2.523193],[115.117578,2.894873],[115.454395,3.034326],[115.678809,4.193018],[116.514746,4.370801],[117.574414,4.170605]]],[[[99.848047,6.465723],[99.646289,6.418359],[99.74375,6.263281],[99.848047,6.465723]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"MW",iso_a3:"MWI",iso_n3:"454"},geometry:{type:"Polygon",coordinates:[[[33.201758,-14.013379],[33.636426,-14.568164],[34.33252,-14.408594],[34.505273,-14.598145],[34.54082,-15.297266],[34.248242,-15.8875],[35.272559,-17.118457],[35.167188,-16.560254],[35.358496,-16.160547],[35.755273,-16.058301],[35.892773,-14.891797],[35.247461,-13.896875],[34.563672,-13.360156],[34.357813,-12.164746],[34.618555,-11.620215],[34.959473,-11.578125],[34.60791,-11.080469],[34.320898,-9.731543],[33.995605,-9.49541],[33.888867,-9.670117],[32.919922,-9.407422],[33.661523,-10.553125],[33.261328,-10.893359],[33.252344,-12.112598],[33.512305,-12.347754],[33.021582,-12.630469],[32.67041,-13.59043],[33.201758,-14.013379]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"MG",iso_a3:"MDG",iso_n3:"450"},geometry:{type:"MultiPolygon",coordinates:[[[[49.538281,-12.432129],[49.207031,-12.07959],[48.786328,-12.470898],[48.796484,-13.26748],[48.255273,-13.719336],[47.941016,-13.662402],[47.77334,-14.369922],[47.96416,-14.672559],[47.47832,-15.009375],[47.351953,-14.766113],[47.099219,-15.43418],[46.942285,-15.219043],[46.475098,-15.513477],[46.399609,-15.924609],[46.15752,-15.738281],[44.476172,-16.217285],[43.979395,-17.391602],[44.404688,-19.92207],[43.501855,-21.356445],[43.264844,-22.383594],[44.035352,-24.995703],[45.205762,-25.570508],[46.728516,-25.149902],[47.177344,-24.787207],[49.362891,-18.336328],[49.449316,-17.240625],[49.839063,-16.486523],[49.664355,-15.521582],[49.892578,-15.457715],[50.208984,-15.960449],[50.482715,-15.385645],[49.9375,-13.072266],[49.538281,-12.432129]]],[[[49.936426,-16.90293],[50.023047,-16.695312],[49.824023,-17.086523],[49.936426,-16.90293]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"MK",iso_a3:"MKD",iso_n3:"807"},geometry:{type:"Polygon",coordinates:[[[21.5625,42.24751],[20.566211,41.873682],[20.488965,41.272607],[20.964258,40.849902],[22.916016,41.336279],[23.003613,41.739844],[22.344043,42.313965],[21.5625,42.24751]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"LU",iso_a3:"LUX",iso_n3:"442"},geometry:{type:"Polygon",coordinates:[[[6.116504,50.120996],[5.744043,49.919629],[5.789746,49.538281],[6.344336,49.452734],[6.487305,49.798486],[6.116504,50.120996]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"LT",iso_a3:"LTU",iso_n3:"440"},geometry:{type:"MultiPolygon",coordinates:[[[[20.957813,55.278906],[21.114844,55.616504],[20.899805,55.28667],[20.957813,55.278906]]],[[[22.766211,54.356787],[23.484668,53.939795],[24.317969,53.892969],[25.461133,54.292773],[25.749219,54.156982],[25.780859,54.833252],[26.775684,55.273096],[26.457617,55.34248],[26.593555,55.667529],[24.841016,56.411182],[24.120703,56.264258],[22.08457,56.406738],[21.046094,56.070068],[21.235742,55.264111],[22.567285,55.059131],[22.766211,54.356787]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"LI",iso_a3:"LIE",iso_n3:"438"},geometry:{type:"Polygon",coordinates:[[[9.580273,47.057373],[9.527539,47.270752],[9.487695,47.062256],[9.580273,47.057373]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"LY",iso_a3:"LBY",iso_n3:"434"},geometry:{type:"Polygon",coordinates:[[[9.51875,30.229395],[9.310254,30.115234],[9.805273,29.176953],[9.916016,27.785693],[9.883203,26.630811],[9.448242,26.067139],[10.255859,24.591016],[11.507617,24.314355],[11.967871,23.517871],[13.48125,23.180176],[14.215527,22.619678],[14.979004,22.996191],[15.984082,23.445215],[20.147656,21.389258],[23.980273,19.496631],[23.980273,19.995947],[24.979492,20.002588],[24.980273,21.99585],[24.980273,29.181885],[24.703223,30.201074],[24.961426,30.678516],[24.852734,31.334814],[25.150488,31.65498],[24.878516,31.984277],[23.286328,32.213818],[23.090625,32.61875],[21.635938,32.937305],[20.121484,32.21875],[19.926367,31.817529],[20.111523,30.963721],[19.713281,30.488379],[19.12373,30.266113],[17.830469,30.927588],[15.705957,31.426416],[15.176563,32.391162],[13.283496,32.914648],[12.279883,32.858545],[11.50459,33.181934],[11.50498,32.413672],[10.274609,31.684961],[10.216406,30.783203],[9.51875,30.229395]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"LR",iso_a3:"LBR",iso_n3:"430"},geometry:{type:"Polygon",coordinates:[[[-11.50752,6.906543],[-9.132178,5.054639],[-7.544971,4.351318],[-7.454395,5.841309],[-8.603564,6.507812],[-8.302344,6.980957],[-8.486426,7.558496],[-8.659766,7.688379],[-9.117578,7.215918],[-9.463818,7.415869],[-9.518262,8.346094],[-10.283203,8.485156],[-10.647461,7.759375],[-11.50752,6.906543]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"LS",iso_a3:"LSO",iso_n3:"426"},geometry:{type:"Polygon",coordinates:[[[28.736914,-30.101953],[29.098047,-29.919043],[29.390723,-29.269727],[28.625781,-28.581738],[27.735547,-28.940039],[27.056934,-29.625586],[27.753125,-30.6],[28.056836,-30.631055],[28.39209,-30.147559],[28.736914,-30.101953]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"LB",iso_a3:"LBN",iso_n3:"422"},geometry:{type:"Polygon",coordinates:[[[35.97627,34.629199],[35.108594,33.083691],[35.840723,33.415674],[35.869141,33.431738],[36.584961,34.22124],[36.383887,34.65791],[35.97627,34.629199]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"LV",iso_a3:"LVA",iso_n3:"428"},geometry:{type:"Polygon",coordinates:[[[26.593555,55.667529],[27.576758,55.798779],[28.147949,56.14292],[27.639453,56.845654],[27.828613,57.293311],[27.351953,57.528125],[26.462109,57.544482],[25.282617,58.048486],[24.322559,57.870605],[24.382617,57.250049],[23.647754,56.971045],[22.55459,57.724268],[21.728711,57.570996],[21.071289,56.82373],[21.046094,56.070068],[22.08457,56.406738],[24.120703,56.264258],[24.841016,56.411182],[26.593555,55.667529]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"LA",iso_a3:"LAO",iso_n3:"418"},geometry:{type:"Polygon",coordinates:[[[102.127441,22.379199],[101.73877,22.495264],[101.524512,22.253662],[101.800586,21.212598],[101.247852,21.197314],[101.138867,21.56748],[100.703125,21.251367],[100.622949,20.85957],[100.249316,20.730273],[100.122461,20.31665],[100.519531,20.17793],[100.513574,19.553467],[101.211914,19.54834],[100.955859,17.541113],[102.101465,18.210645],[102.680078,17.824121],[103.366992,18.42334],[103.949609,18.318994],[104.739648,17.46167],[104.819336,16.466064],[105.641016,15.656543],[105.497363,14.590674],[105.183301,14.34624],[106.066797,13.921191],[105.978906,14.343018],[106.501465,14.578223],[106.938086,14.327344],[107.519434,14.705078],[107.653125,15.255225],[107.165918,15.80249],[107.396387,16.043018],[106.656445,16.492627],[106.502246,16.954102],[105.114551,18.405273],[105.146484,18.650977],[103.891602,19.30498],[104.032031,19.675146],[104.587891,19.61875],[104.92793,20.018115],[104.367773,20.441406],[104.583203,20.64668],[104.101367,20.945508],[103.635059,20.69707],[103.104492,20.89165],[102.851172,21.265918],[102.949609,21.681348],[102.662012,21.676025],[102.127441,22.379199]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"KG",iso_a3:"KGZ",iso_n3:"417"},geometry:{type:"Polygon",coordinates:[[[70.958008,40.238867],[70.515137,39.949902],[69.966797,40.202246],[69.530273,40.097314],[69.297656,39.524805],[70.501172,39.587354],[70.799316,39.394727],[71.470312,39.603662],[72.22998,39.20752],[73.631641,39.448877],[73.991602,40.043115],[74.835156,40.482617],[75.555566,40.625195],[75.677148,40.305811],[76.318555,40.352246],[76.907715,41.02417],[78.123438,41.075635],[80.209375,42.190039],[79.12666,42.775732],[75.366211,42.836963],[74.209082,43.240381],[73.55625,43.002783],[73.492969,42.409033],[71.760547,42.821484],[71.256641,42.733545],[70.946777,42.248682],[71.228516,42.162891],[70.200879,41.514453],[71.393066,41.123389],[71.664941,41.541211],[72.187305,41.025928],[73.136914,40.810645],[71.69248,40.152344],[70.958008,40.238867]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"KW",iso_a3:"KWT",iso_n3:"414"},geometry:{type:"Polygon",coordinates:[[[48.44248,28.54292],[48.051465,29.355371],[47.722656,29.393018],[48.143457,29.572461],[47.978711,29.982812],[47.148242,30.000977],[46.531445,29.09624],[47.433203,28.989551],[47.671289,28.533154],[48.44248,28.54292]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"XK",iso_a3:"-99",iso_n3:"-99"},geometry:{type:"Polygon",coordinates:[[[20.344336,42.82793],[20.063965,42.547266],[20.566211,41.873682],[21.5625,42.24751],[21.75293,42.669824],[20.800586,43.261084],[20.344336,42.82793]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"KI",iso_a3:"KIR",iso_n3:"296"},geometry:{type:"Polygon",coordinates:[[[-157.342139,1.855566],[-157.578955,1.902051],[-157.175781,1.739844],[-157.342139,1.855566]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"KE",iso_a3:"KEN",iso_n3:"404"},geometry:{type:"Polygon",coordinates:[[[33.903223,-1.002051],[37.643848,-3.04541],[37.608203,-3.49707],[39.221777,-4.692383],[40.11543,-3.250586],[40.222461,-2.688379],[41.532715,-1.695312],[40.978711,-.870313],[40.964453,2.814648],[41.883984,3.977734],[41.14043,3.962988],[40.765234,4.273047],[39.494434,3.456104],[38.086133,3.648828],[36.905566,4.411475],[36.021973,4.468115],[35.74502,5.343994],[35.268359,5.492285],[33.976074,4.220215],[34.437695,3.650586],[34.978223,1.773633],[33.943164,.173779],[33.903223,-1.002051]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"KZ",iso_a3:"KAZ",iso_n3:"398"},geometry:{type:"Polygon",coordinates:[[[70.946777,42.248682],[71.256641,42.733545],[71.760547,42.821484],[73.492969,42.409033],[73.55625,43.002783],[74.209082,43.240381],[75.366211,42.836963],[79.12666,42.775732],[80.209375,42.190039],[80.202246,42.734473],[80.785742,43.161572],[80.355273,44.097266],[80.481543,44.714648],[79.871875,44.883789],[81.691992,45.349365],[82.521484,45.125488],[82.315234,45.594922],[83.029492,47.185938],[84.786133,46.830713],[85.484766,47.063525],[85.749414,48.385059],[86.549414,48.528613],[86.808301,49.049707],[87.322852,49.085791],[86.675488,49.777295],[86.180859,49.499316],[85.232617,49.61582],[84.989453,50.061426],[84.323242,50.23916],[83.357324,50.99458],[82.493945,50.727588],[81.465918,50.739844],[80.735254,51.293408],[79.98623,50.774561],[77.859961,53.269189],[76.484766,54.022559],[76.837305,54.442383],[74.351562,53.487646],[73.858984,53.619727],[73.406934,53.447559],[73.712402,54.042383],[72.622266,54.134326],[72.446777,53.941846],[72.186035,54.325635],[71.093164,54.212207],[70.738086,55.305176],[70.182422,55.162451],[68.977246,55.3896],[68.155859,54.976709],[65.476953,54.623291],[65.088379,54.340186],[61.231055,54.019482],[60.979492,53.621729],[61.534961,53.523291],[61.199219,53.287158],[62.082715,53.00542],[61.047461,52.972461],[60.774414,52.675781],[60.994531,52.336865],[60.030273,51.933252],[61.554688,51.324609],[61.389453,50.861035],[60.942285,50.695508],[60.058594,50.850293],[59.523047,50.492871],[57.838867,51.09165],[57.442188,50.888867],[56.491406,51.019531],[55.68623,50.582861],[54.641602,51.011572],[54.555273,50.535791],[53.338086,51.482373],[52.219141,51.709375],[51.344531,51.475342],[50.793945,51.729199],[48.625098,50.612695],[48.758984,49.92832],[48.334961,49.858252],[47.429199,50.357959],[46.889551,49.696973],[47.031348,49.150293],[46.660938,48.412256],[47.292383,47.740918],[48.166992,47.708789],[48.959375,46.774609],[48.541211,46.605615],[49.232227,46.337158],[51.178027,47.110156],[52.138281,46.828613],[52.483203,46.990674],[53.069434,46.856055],[53.135254,46.19165],[52.773828,45.572754],[53.200391,45.331982],[51.415723,45.357861],[51.009375,44.921826],[51.543555,44.531006],[50.409473,44.624023],[50.25293,44.461523],[50.830762,44.192773],[51.29541,43.174121],[52.596582,42.760156],[52.493848,41.780371],[53.055859,42.147754],[54.120996,42.335205],[55.434375,41.296289],[55.977441,41.322217],[55.975684,44.994922],[58.555273,45.555371],[61.00791,44.393799],[61.990234,43.492139],[64.905469,43.714697],[65.803027,42.876953],[66.100293,42.99082],[66.00957,42.004883],[66.498633,41.994873],[66.709668,41.17915],[67.935742,41.196582],[68.291895,40.656104],[68.572656,40.622656],[69.153613,41.425244],[70.946777,42.248682]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"JO",iso_a3:"JOR",iso_n3:"400"},geometry:{type:"Polygon",coordinates:[[[35.787305,32.734912],[35.551465,32.395508],[35.450586,31.479297],[34.973438,29.555029],[34.950781,29.353516],[36.068457,29.200537],[36.755273,29.866016],[37.469238,29.995068],[37.980078,30.5],[36.958594,31.491504],[39.14541,32.124512],[38.773535,33.372217],[36.818359,32.317285],[35.787305,32.734912]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"JP",iso_a3:"JPN",iso_n3:"392"},geometry:{type:"MultiPolygon",coordinates:[[[[134.932812,34.288135],[135.004688,34.544043],[134.667871,34.294141],[134.932812,34.288135]]],[[[143.824316,44.116992],[141.937695,45.509521],[141.667969,45.40127],[141.760938,44.48252],[141.374121,43.279639],[140.392383,43.303125],[140.432227,42.954102],[139.860156,42.581738],[140.085156,41.434082],[140.659863,41.815576],[141.150977,41.805078],[140.32666,42.293359],[140.480469,42.559375],[140.986133,42.342139],[141.851367,42.579053],[143.236523,42.000195],[143.969336,42.881396],[145.833008,43.385938],[145.34082,43.302539],[145.139648,43.6625],[145.369531,44.327393],[144.715234,43.927979],[143.824316,44.116992]]],[[[131.174609,33.602588],[130.715625,33.927783],[129.580078,33.236279],[129.991699,32.851562],[129.679102,33.059961],[129.768555,32.570996],[130.34043,32.701855],[130.2375,33.177637],[130.547266,32.831592],[130.147266,31.408496],[130.58877,31.178516],[130.77627,31.706299],[130.685742,31.015137],[131.070801,31.436865],[131.337207,31.404688],[132.002148,32.882373],[131.896582,33.25459],[131.537402,33.274072],[131.696289,33.602832],[131.174609,33.602588]]],[[[134.357422,34.256348],[133.94834,34.348047],[133.193066,33.933203],[132.935156,34.095312],[132.032617,33.33999],[132.412793,33.430469],[132.495117,32.916602],[132.804297,32.752002],[133.632031,33.510986],[134.181641,33.247217],[134.738867,33.820508],[134.6375,34.226611],[134.357422,34.256348]]],[[[141.229297,41.372656],[140.936914,41.505566],[140.801855,41.253662],[141.244238,41.205615],[141.118555,40.882275],[140.748633,40.830322],[140.627637,41.19541],[140.344434,41.20332],[139.741504,39.92085],[140.064746,39.624414],[139.801953,38.881592],[139.363867,38.099023],[138.319922,37.218408],[137.246289,36.753174],[136.899902,37.117676],[137.322656,37.52207],[136.843457,37.382129],[135.903125,35.606885],[135.326953,35.525537],[135.174316,35.74707],[132.922949,35.511279],[131.354395,34.413184],[131.004199,34.392578],[130.918848,33.975732],[131.740527,34.052051],[132.146484,33.83877],[132.312598,34.324951],[133.142383,34.302441],[134.740039,34.765234],[135.415918,34.61748],[135.12793,34.006982],[135.695312,33.486963],[136.329883,34.176855],[136.853711,34.324072],[136.533008,34.678369],[136.804199,35.050293],[136.871289,34.733105],[137.275195,34.77251],[137.061719,34.582812],[138.189063,34.596338],[138.719629,35.124072],[138.8375,34.619238],[139.249414,35.278027],[139.675,35.149268],[139.834766,35.658057],[140.096875,35.585156],[139.843945,34.914893],[140.354688,35.181445],[140.874023,35.724951],[140.573535,36.231348],[141.00166,37.114648],[140.962109,38.148877],[141.46748,38.40415],[141.976953,39.428809],[141.430469,40.72334],[141.455469,41.404736],[141.229297,41.372656]]],[[[128.258789,26.652783],[128.254883,26.881885],[127.907227,26.693604],[127.653125,26.094727],[128.258789,26.652783]]],[[[129.452539,28.208984],[129.689551,28.51748],[129.164648,28.249756],[129.452539,28.208984]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"JM",iso_a3:"JAM",iso_n3:"388"},geometry:{type:"Polygon",coordinates:[[[-77.261475,18.457422],[-77.873438,18.522217],[-78.339502,18.287207],[-77.20498,17.714941],[-76.853223,17.97373],[-76.210791,17.913525],[-77.261475,18.457422]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"IT",iso_a3:"ITA",iso_n3:"380"},geometry:{type:"MultiPolygon",coordinates:[[[[7.021094,45.925781],[6.790918,45.740869],[7.146387,45.381738],[6.634766,45.068164],[6.992676,44.827295],[6.900195,44.335742],[7.637207,44.164844],[7.493164,43.767139],[8.76582,44.422314],[10.188086,43.94751],[10.514844,42.967529],[11.141211,42.389893],[15.692773,39.990186],[16.209961,38.941113],[15.645801,38.034229],[16.056836,37.941846],[16.616699,38.800146],[17.174609,38.998096],[17.114551,39.380615],[16.521875,39.747559],[16.928223,40.458057],[17.865039,40.280176],[18.34375,39.821387],[18.460645,40.221045],[15.900488,41.512061],[16.164648,41.896191],[15.16875,41.934033],[14.540723,42.244287],[13.56416,43.571289],[12.396289,44.223877],[12.274316,45.446045],[13.206348,45.771387],[13.719824,45.587598],[13.378223,46.261621],[13.7,46.520264],[12.388281,46.702637],[12.169434,47.082129],[10.993262,46.777002],[10.452832,46.864941],[10.12832,46.238232],[9.260156,46.475195],[9.02373,45.845703],[8.422559,46.446045],[7.787891,45.921826],[7.021094,45.925781]],[[12.43916,41.898389],[12.430566,41.897559],[12.430566,41.905469],[12.43916,41.898389]],[[12.485254,43.901416],[12.396875,43.93457],[12.503711,43.989746],[12.485254,43.901416]]],[[[15.576563,38.220312],[13.788867,37.981201],[12.734375,38.183057],[12.435547,37.819775],[15.112598,36.687842],[15.295703,37.055176],[15.099512,37.458594],[15.576563,38.220312]]],[[[9.632031,40.882031],[9.228418,41.25708],[8.571875,40.850195],[8.224219,40.91333],[8.648535,38.926562],[9.056348,39.23916],[9.5625,39.166016],[9.632031,40.882031]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"IL",iso_a3:"ISR",iso_n3:"376"},geometry:{type:"Polygon",coordinates:[[[35.840723,33.415674],[35.108594,33.083691],[34.477344,31.584863],[34.245313,31.208301],[34.904297,29.477344],[34.973438,29.555029],[35.450586,31.479297],[34.872754,31.396875],[35.203711,31.75],[34.953809,31.84126],[35.065039,32.460449],[35.551465,32.395508],[35.787305,32.734912],[35.816125,33.361879],[35.840723,33.415674]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"PS",iso_a3:"PSE",iso_n3:"275"},geometry:{type:"MultiPolygon",coordinates:[[[[34.477344,31.584863],[34.198145,31.322607],[34.245313,31.208301],[34.477344,31.584863]]],[[[35.551465,32.395508],[35.065039,32.460449],[34.953809,31.84126],[35.203711,31.75],[34.872754,31.396875],[35.450586,31.479297],[35.551465,32.395508]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"IE",iso_a3:"IRL",iso_n3:"372"},geometry:{type:"Polygon",coordinates:[[[-7.218652,55.091992],[-6.96167,55.237891],[-7.308789,55.36582],[-7.65874,54.970947],[-7.66709,55.256494],[-8.274609,55.146289],[-8.763916,54.681201],[-8.133447,54.64082],[-8.545557,54.241211],[-10.056396,54.257812],[-9.578223,53.80542],[-10.09126,53.412842],[-8.930127,53.20708],[-9.916602,52.569727],[-8.783447,52.679639],[-10.356689,52.206934],[-9.909668,52.122949],[-10.341064,51.798926],[-9.598828,51.874414],[-10.120752,51.600684],[-8.813428,51.584912],[-8.40918,51.88877],[-6.325,52.24668],[-6.027393,52.9271],[-6.218018,54.088721],[-6.649805,54.058643],[-7.007715,54.406689],[-7.606543,54.143848],[-8.118262,54.414258],[-7.218652,55.091992]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"IQ",iso_a3:"IRQ",iso_n3:"368"},geometry:{type:"Polygon",coordinates:[[[42.358984,37.108594],[41.295996,36.38335],[40.987012,34.429053],[38.773535,33.372217],[39.14541,32.124512],[40.369336,31.938965],[42.074414,31.080371],[44.69082,29.202344],[46.531445,29.09624],[47.148242,30.000977],[47.978711,29.982812],[48.546484,29.962354],[48.014941,30.465625],[48.010645,30.989795],[47.679492,31.002393],[47.82998,31.794434],[47.371289,32.42373],[46.112793,32.957666],[46.019922,33.415723],[45.39707,33.97085],[46.273438,35.773242],[45.361621,36.015332],[44.765137,37.142432],[44.281836,36.978027],[44.114453,37.301855],[42.774609,37.371875],[42.358984,37.108594]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"IR",iso_a3:"IRN",iso_n3:"364"},geometry:{type:"MultiPolygon",coordinates:[[[[56.187988,26.921143],[55.757617,26.947656],[55.762598,26.811963],[55.311523,26.592627],[56.187988,26.921143]]],[[[53.91416,37.343555],[53.970117,36.818311],[52.190137,36.621729],[51.118555,36.742578],[50.130469,37.407129],[49.171191,37.600586],[48.86875,38.435498],[47.996484,38.85376],[48.322168,39.399072],[47.995898,39.683936],[46.490625,38.906689],[46.114453,38.877783],[45.479688,39.00625],[44.817188,39.650439],[44.587109,39.768555],[44.389355,39.422119],[44.023242,39.377441],[44.449902,38.334229],[44.211328,37.908057],[44.589941,37.710352],[44.765137,37.142432],[45.361621,36.015332],[46.273438,35.773242],[45.39707,33.97085],[46.019922,33.415723],[46.112793,32.957666],[47.371289,32.42373],[47.82998,31.794434],[47.679492,31.002393],[48.010645,30.989795],[48.014941,30.465625],[48.546484,29.962354],[48.919141,30.120898],[49.001953,30.506543],[49.554883,30.028955],[50.071582,30.198535],[51.278906,28.131348],[53.705762,26.725586],[54.759277,26.505078],[55.424023,26.770557],[55.650293,26.977539],[56.356152,27.200244],[56.982227,26.905469],[57.33457,25.791553],[59.046094,25.417285],[61.587891,25.202344],[61.842383,26.225928],[63.157812,26.649756],[63.301563,27.151465],[62.762988,27.250195],[62.758008,28.243555],[61.889844,28.546533],[60.843359,29.858691],[61.81084,30.913281],[61.660156,31.382422],[60.820703,31.495166],[60.561914,33.058789],[60.916992,33.505225],[60.51084,33.638916],[60.485742,34.094775],[60.889453,34.319434],[60.72627,34.518262],[61.262012,35.61958],[61.119629,36.642578],[60.341309,36.637646],[59.301758,37.510645],[58.261621,37.66582],[57.193555,38.216406],[55.380859,38.051123],[54.699414,37.470166],[53.91416,37.343555]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"ID",iso_a3:"IDN",iso_n3:"360"},geometry:{type:"MultiPolygon",coordinates:[[[[97.481543,1.465088],[97.079199,1.425488],[97.82041,.564453],[97.931934,.973926],[97.481543,1.465088]]],[[[99.163867,-1.77793],[98.932617,-.954004],[98.676074,-.970508],[98.827734,-1.609961],[99.163867,-1.77793]]],[[[116.64082,-8.613867],[116.718945,-8.336035],[116.401563,-8.204199],[115.857324,-8.787891],[116.586523,-8.886133],[116.64082,-8.613867]]],[[[115.447852,-8.155176],[114.467578,-8.166309],[115.055078,-8.573047],[115.144922,-8.849023],[115.704297,-8.407129],[115.447852,-8.155176]]],[[[106.045703,-1.669434],[105.45957,-1.574707],[105.133398,-2.042578],[105.78584,-2.181348],[105.99873,-2.824902],[106.667188,-3.071777],[106.818457,-2.57334],[106.365918,-2.464844],[106.045703,-1.669434]]],[[[123.179785,-4.551172],[123.074609,-4.386914],[122.85332,-4.618359],[122.64502,-5.663379],[123.187305,-5.333008],[122.97168,-5.138477],[123.179785,-4.551172]]],[[[122.645117,-5.269434],[122.701953,-4.618652],[122.368945,-4.767188],[122.283105,-5.319531],[122.645117,-5.269434]]],[[[108.316016,3.689648],[108.24834,4.217139],[108.002344,3.982861],[108.316016,3.689648]]],[[[108.207227,-2.997656],[108.215137,-2.696973],[107.666309,-2.566309],[107.614453,-3.209375],[108.055273,-3.226855],[108.207227,-2.997656]]],[[[135.383008,-.651367],[135.915039,-1.178418],[136.375293,-1.094043],[135.383008,-.651367]]],[[[135.474219,-1.591797],[136.228125,-1.893652],[136.892578,-1.799707],[135.474219,-1.591797]]],[[[130.813281,-.004102],[130.236621,-.209668],[130.750195,-.443848],[130.899219,-.344434],[130.622168,-.085938],[131.005371,-.360742],[131.339746,-.290332],[130.813281,-.004102]]],[[[128.453906,2.051758],[128.602148,2.597607],[128.217969,2.297461],[128.453906,2.051758]]],[[[128.153027,-1.660547],[127.64668,-1.332422],[127.39502,-1.589844],[128.153027,-1.660547]]],[[[126.024219,-1.789746],[125.387207,-1.843066],[126.331738,-1.822852],[126.024219,-1.789746]]],[[[124.969531,-1.705469],[124.417578,-1.659277],[124.329688,-1.858887],[125.314063,-1.877148],[124.969531,-1.705469]]],[[[131.325586,-7.999512],[131.624414,-7.626172],[131.643457,-7.112793],[131.137793,-7.684863],[131.11377,-7.997363],[131.325586,-7.999512]]],[[[126.800977,-7.667871],[125.975293,-7.663379],[125.798242,-7.98457],[126.47207,-7.950391],[126.800977,-7.667871]]],[[[124.575586,-8.14082],[124.380664,-8.415137],[125.131738,-8.326465],[124.575586,-8.14082]]],[[[131.001855,-1.315527],[131.033008,-.917578],[130.672949,-.959766],[131.001855,-1.315527]]],[[[96.492578,5.229346],[95.227832,5.564795],[95.578613,4.661963],[96.968945,3.575146],[97.59082,2.846582],[97.700781,2.358545],[98.595313,1.8646],[99.15918,.351758],[99.669824,.045068],[100.308203,-.82666],[100.889551,-2.248535],[101.578613,-3.166992],[104.601562,-5.90459],[104.639551,-5.52041],[105.081348,-5.745508],[105.349414,-5.549512],[105.74834,-5.818262],[106.044336,-3.10625],[105.396973,-2.380176],[104.650781,-2.595215],[104.845215,-2.092969],[104.515918,-1.819434],[104.360547,-1.038379],[103.721094,-.886719],[103.438574,-.575586],[103.428516,-.191797],[103.786719,.046973],[103.672656,.288916],[103.338965,.513721],[102.55,.216455],[103.031836,.578906],[102.389941,.841992],[102.019922,1.442139],[101.47666,1.693066],[101.046191,2.257471],[100.828223,2.242578],[100.887891,1.948242],[100.523828,2.18916],[99.732324,3.183057],[98.307324,4.092871],[97.547168,5.205859],[96.492578,5.229346]]],[[[122.78291,-8.611719],[122.916992,-8.105566],[122.323242,-8.62832],[120.610254,-8.24043],[119.874805,-8.419824],[119.80791,-8.697656],[121.035254,-8.935449],[122.78291,-8.611719]]],[[[120.0125,-9.374707],[118.958789,-9.519336],[120.144824,-10.200098],[120.698047,-10.206641],[120.784473,-9.957031],[120.0125,-9.374707]]],[[[118.242383,-8.317773],[117.755273,-8.149512],[118.234863,-8.591895],[117.969531,-8.728027],[117.164844,-8.367188],[116.835059,-8.532422],[116.788477,-9.006348],[119.129687,-8.668164],[118.926172,-8.297656],[118.242383,-8.317773]]],[[[124.888867,.995312],[125.233789,1.502295],[125.110938,1.685693],[123.930762,.850439],[122.838281,.845703],[121.081738,1.327637],[120.602539,.854395],[120.269531,.970801],[119.721875,-.088477],[119.844336,-.861914],[119.711328,-.680762],[119.508203,-.906738],[119.321875,-1.929688],[118.783301,-2.720801],[118.867676,-3.398047],[119.46748,-3.512988],[119.623633,-4.034375],[119.360352,-5.31416],[119.557422,-5.611035],[120.430371,-5.591016],[120.261035,-2.949316],[120.653613,-2.667578],[121.052148,-2.75166],[120.891797,-3.520605],[121.618066,-4.092676],[121.588672,-4.75957],[122.038086,-4.832422],[122.114258,-4.540234],[122.872266,-4.391992],[122.847949,-4.064551],[122.25293,-3.62041],[122.291699,-2.907617],[121.355469,-1.878223],[122.250684,-1.555273],[122.902832,-.900977],[123.37793,-1.004102],[123.43418,-.778223],[123.171484,-.570703],[121.969629,-.933301],[121.575586,-.828516],[121.148535,-1.339453],[120.667383,-1.370117],[120.062891,-.555566],[120.192285,.268506],[120.579004,.52832],[123.753809,.305518],[124.427539,.470605],[124.888867,.995312]]],[[[107.373926,-6.007617],[106.075,-5.91416],[105.255469,-6.835254],[106.198242,-6.927832],[106.519727,-7.053711],[106.455273,-7.368652],[107.91748,-7.724121],[109.281641,-7.704883],[111.509961,-8.305078],[113.25332,-8.286719],[114.583789,-8.769629],[114.386914,-8.405176],[114.409277,-7.79248],[113.013574,-7.657715],[112.539258,-6.926465],[111.181543,-6.686719],[110.834766,-6.424219],[110.42627,-6.947266],[108.677832,-6.790527],[108.330176,-6.286035],[107.373926,-6.007617]]],[[[109.628906,2.027539],[109.075879,1.495898],[108.944531,.355664],[109.25752,.031152],[109.258789,-.807422],[109.983301,-1.274805],[110.256055,-2.966113],[111.694727,-2.889453],[111.858105,-3.551855],[112.758008,-3.322168],[113.033984,-2.933496],[113.705078,-3.455273],[114.344336,-3.235156],[114.693555,-4.169727],[115.956152,-3.59502],[116.257227,-3.126367],[116.166309,-2.93457],[116.56543,-2.299707],[116.275488,-1.784863],[116.753418,-1.327344],[116.739844,-1.044238],[116.913965,-1.223633],[117.5625,-.770898],[117.522168,.235889],[117.911621,1.098682],[118.534766,.813525],[118.984961,.982129],[117.789258,2.026855],[118.066602,2.317822],[117.055957,3.622656],[117.777246,3.689258],[117.574414,4.170605],[116.514746,4.370801],[115.678809,4.193018],[115.454395,3.034326],[115.117578,2.894873],[115.179102,2.523193],[114.786426,2.250488],[114.5125,1.452002],[113.622266,1.235938],[112.476172,1.559082],[111.808984,1.01167],[110.505762,.861963],[109.654004,1.614893],[109.628906,2.027539]]],[[[127.732715,.848145],[127.652832,1.013867],[128.011719,1.331738],[128.036426,2.199023],[127.631738,1.843701],[127.428516,1.13999],[127.691602,-.241895],[128.425488,-.892676],[127.887402,.29834],[127.983105,.471875],[128.899609,.21626],[128.260645,.733789],[128.702637,1.106396],[128.688379,1.572559],[127.732715,.848145]]],[[[129.754688,-2.86582],[128.198535,-2.865918],[127.902344,-3.496289],[128.132031,-3.157422],[128.516602,-3.449121],[128.8625,-3.234961],[129.467676,-3.453223],[129.844141,-3.327148],[130.805078,-3.857715],[130.569922,-3.130859],[129.754688,-2.86582]]],[[[126.861133,-3.087891],[126.088281,-3.105469],[126.056543,-3.420996],[126.686328,-3.823633],[127.22959,-3.633008],[126.861133,-3.087891]]],[[[124.922266,-8.94248],[124.444434,-9.190332],[124.282324,-9.42793],[124.036328,-9.341602],[123.589258,-9.966797],[123.747266,-10.347168],[124.427539,-10.148633],[125.068164,-9.511914],[124.960156,-9.21377],[125.149023,-9.042578],[124.922266,-8.94248]]],[[[134.746973,-5.707031],[134.570801,-5.427344],[134.205371,-5.707227],[134.343066,-5.833008],[134.154883,-6.062891],[134.441113,-6.334863],[134.71416,-6.295117],[134.746973,-5.707031]]],[[[134.536816,-6.442285],[134.114648,-6.19082],[134.09082,-6.833789],[134.322754,-6.84873],[134.536816,-6.442285]]],[[[138.535352,-8.273633],[138.989063,-7.696094],[138.769824,-7.39043],[138.081836,-7.566211],[137.650391,-8.386133],[138.535352,-8.273633]]],[[[140.973438,-2.609766],[139.789551,-2.348242],[137.80625,-1.483203],[137.123438,-1.840918],[137.07207,-2.105078],[136.389941,-2.27334],[135.85918,-2.995313],[135.251563,-3.368555],[134.886816,-3.209863],[134.627441,-2.536719],[134.459961,-2.832324],[134.194824,-2.309082],[134.25957,-1.362988],[133.974512,-.744336],[132.39375,-.355469],[131.257227,-.855469],[130.995898,-1.424707],[131.930371,-1.559668],[132.307617,-2.242285],[133.921582,-2.102051],[133.700098,-2.624609],[133.191016,-2.437793],[132.725,-2.789062],[131.971191,-2.788574],[132.751367,-3.294629],[132.914453,-4.056934],[133.400879,-3.899023],[133.841504,-3.054785],[133.67832,-3.479492],[133.973828,-3.817969],[134.886523,-3.938477],[134.679688,-4.079102],[135.195605,-4.450684],[137.279785,-4.94541],[138.06084,-5.465234],[138.087109,-5.70918],[138.339648,-5.675684],[138.199609,-5.807031],[138.864551,-6.858398],[138.601367,-6.936523],[139.176855,-7.19043],[138.747949,-7.251465],[139.087988,-7.587207],[138.890625,-8.237793],[139.248828,-7.982422],[139.385645,-8.189062],[140.116992,-7.92373],[140.00293,-8.195508],[140.976172,-9.11875],[140.973438,-2.609766]]],[[[138.895117,-8.388672],[138.796191,-8.173633],[138.563379,-8.309082],[138.895117,-8.388672]]],[[[101.708105,2.078418],[101.409668,2.02168],[101.500781,1.733203],[101.719434,1.78916],[101.708105,2.078418]]],[[[103.027539,.746631],[102.506641,1.08877],[102.49043,.856641],[103.027539,.746631]]],[[[104.585352,1.216113],[104.251953,1.014893],[104.575195,.831934],[104.585352,1.216113]]],[[[104.778613,-.175977],[104.542676,.017725],[104.44707,-.18916],[105.005371,-.282812],[104.778613,-.175977]]],[[[104.474219,-.334668],[104.257129,-.463281],[104.363184,-.658594],[104.590137,-.466602],[104.474219,-.334668]]],[[[109.710254,-1.180664],[109.475977,-.985352],[109.463672,-1.277539],[109.710254,-1.180664]]],[[[113.844531,-7.105371],[114.073633,-6.960156],[113.067383,-6.87998],[112.725879,-7.072754],[113.844531,-7.105371]]],[[[127.566992,-.318945],[127.3,-.500293],[127.761133,-.883691],[127.566992,-.318945]]],[[[128.275586,-3.674609],[128.329102,-3.515918],[127.925,-3.699316],[128.275586,-3.674609]]],[[[130.35332,-1.690527],[129.737695,-1.866895],[130.248047,-2.047754],[130.35332,-1.690527]]],[[[100.425098,-3.18291],[100.198535,-2.785547],[100.465137,-3.328516],[100.425098,-3.18291]]],[[[100.204102,-2.741016],[99.987891,-2.525391],[100.014941,-2.819727],[100.204102,-2.741016]]],[[[98.459277,-.530469],[98.544141,-.257617],[98.322949,-781e-6],[98.459277,-.530469]]],[[[122.042969,-5.437988],[121.913672,-5.072266],[121.808496,-5.256152],[122.042969,-5.437988]]],[[[123.212305,-1.171289],[122.908008,-1.182227],[122.89043,-1.587207],[123.150391,-1.304492],[123.172949,-1.616016],[123.511914,-1.447363],[123.212305,-1.171289]]],[[[120.52832,-6.298438],[120.477344,-5.775293],[120.487305,-6.464844],[120.52832,-6.298438]]],[[[115.377051,-6.970801],[115.546094,-6.938672],[115.240527,-6.86123],[115.377051,-6.970801]]],[[[116.30332,-3.868164],[116.269727,-3.251074],[116.058789,-4.006934],[116.30332,-3.868164]]],[[[122.948926,-10.909277],[123.418164,-10.65127],[123.371094,-10.474902],[122.845703,-10.761816],[122.948926,-10.909277]]],[[[123.924805,-8.272461],[123.391211,-8.280469],[123.230078,-8.530664],[123.924805,-8.272461]]],[[[123.242383,-4.112988],[122.969043,-4.02998],[123.076172,-4.227148],[123.242383,-4.112988]]],[[[117.649023,4.168994],[117.736816,4.004004],[117.884766,4.186133],[117.649023,4.168994]]],[[[121.883008,-10.590332],[121.99834,-10.446973],[121.704688,-10.555664],[121.883008,-10.590332]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"IN",iso_a3:"IND",iso_n3:"356"},geometry:{type:"MultiPolygon",coordinates:[[[[68.165039,23.857324],[68.234961,23.596973],[68.776758,23.8521],[68.41748,23.571484],[69.235937,22.848535],[69.664648,22.759082],[70.489258,23.089502],[70.177246,22.572754],[68.969922,22.290283],[70.485059,20.840186],[71.024609,20.738867],[72.015234,21.155713],[72.254004,21.531006],[72.037207,21.823047],[72.182813,22.269727],[72.80918,22.233301],[72.553027,22.159961],[72.543066,21.696582],[73.1125,21.750439],[72.613281,21.461816],[72.89375,20.672754],[72.667773,19.830957],[72.987207,19.277441],[72.803027,19.079297],[72.97207,19.15332],[72.875488,18.642822],[73.476074,16.054248],[74.382227,14.494727],[74.945508,12.564551],[75.723828,11.361768],[76.553418,8.902783],[77.517578,8.07832],[78.060156,8.38457],[78.421484,9.105029],[79.411426,9.192383],[78.939941,9.565771],[79.314551,10.256689],[79.838184,10.322559],[79.693164,11.312549],[80.342383,13.361328],[80.062109,13.60625],[80.306543,13.485059],[80.053418,15.074023],[80.293457,15.710742],[80.646582,15.89502],[80.978711,15.75835],[81.286133,16.337061],[82.258789,16.559863],[82.35957,17.096191],[84.104102,18.292676],[85.441602,19.626562],[85.180762,19.594873],[85.248633,19.757666],[86.279492,19.919434],[86.975488,20.700146],[86.954102,21.365332],[87.82373,21.727344],[88.159277,22.121729],[87.941406,22.374316],[88.196289,22.139551],[88.12207,21.635791],[88.584668,21.659717],[88.641602,22.121973],[88.74502,21.584375],[89.05166,21.654102],[89.051465,22.093164],[88.928125,23.186621],[88.567383,23.674414],[88.723535,24.274902],[88.023438,24.627832],[88.45625,25.188428],[88.95166,25.259277],[88.08457,25.888232],[88.418164,26.571533],[88.828027,26.252197],[89.018652,26.410254],[89.369727,26.006104],[89.670898,26.213818],[89.833301,25.292773],[92.049707,25.169482],[92.468359,24.944141],[91.876953,24.195312],[91.36709,24.093506],[91.160449,23.660645],[91.315234,23.104395],[91.619531,22.979688],[91.92959,23.685986],[92.246094,23.683594],[92.574902,21.978076],[93.151172,22.230615],[93.32627,24.064209],[94.127637,23.876465],[94.707617,25.04873],[94.579883,25.319824],[95.132422,26.04126],[95.128711,26.597266],[96.19082,27.261279],[96.731641,27.331494],[97.102051,27.11543],[96.876855,27.586719],[97.086778,27.7475],[96.275479,28.228241],[95.832003,28.295186],[95.39715,28.142259],[95.28628,27.939955],[94.88592,27.743098],[94.277372,27.58143],[93.817265,27.025183],[93.111399,26.880082],[92.64698,26.952656],[91.99834,26.85498],[89.609961,26.719434],[88.857617,26.961475],[88.891406,27.316064],[88.803711,28.006934],[88.109766,27.870605],[87.995117,26.382373],[85.794531,26.60415],[84.091016,27.491357],[82.733398,27.518994],[80.070703,28.830176],[80.401855,29.730273],[81.010254,30.164502],[79.707774,31.013593],[78.807678,31.099982],[78.389648,32.519873],[78.700879,32.597021],[78.918945,32.358203],[79.219336,32.501074],[78.72666,34.013379],[78.970117,34.302637],[78.326953,34.606396],[78.042676,35.479785],[77.799414,35.495898],[77.048633,35.109912],[75.70918,34.503076],[73.96123,34.653467],[73.904102,34.075684],[74.250879,33.946094],[73.976465,33.721289],[74.003809,33.189453],[74.35459,32.768701],[74.663281,32.757666],[74.685742,32.493799],[75.333496,32.279199],[74.555566,31.818555],[74.632812,31.034668],[73.80918,30.093359],[73.381641,29.934375],[72.90332,29.02876],[72.341895,28.751904],[71.870313,27.9625],[70.797949,27.709619],[70.403711,28.025049],[69.537012,27.122949],[69.506934,26.742676],[70.147656,26.506445],[70.100195,25.910059],[70.648438,25.666943],[71.044043,24.400098],[69.805176,24.165234],[68.781152,24.313721],[68.724121,23.964697],[68.165039,23.857324]]],[[[93.890039,6.831055],[93.822461,7.236621],[93.658008,7.016064],[93.890039,6.831055]]],[[[92.502832,10.554883],[92.510352,10.897461],[92.352832,10.751123],[92.502832,10.554883]]],[[[92.722754,11.536084],[93.062305,13.545459],[92.533887,11.873389],[92.722754,11.536084]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"IS",iso_a3:"ISL",iso_n3:"352"},geometry:{type:"Polygon",coordinates:[[[-15.543115,66.228516],[-16.249316,66.5229],[-16.48501,66.195947],[-17.550439,65.964404],[-18.297168,66.157422],[-18.141943,65.734082],[-18.845898,66.183936],[-19.489697,65.768066],[-20.20752,66.100098],[-21.129687,65.266602],[-21.406885,66.025586],[-22.944336,66.429443],[-22.441699,65.908301],[-23.452539,66.181006],[-23.832617,65.849219],[-23.285352,65.75],[-24.092627,65.776465],[-23.856738,65.538379],[-24.475684,65.525195],[-21.844385,65.447363],[-22.509082,65.196777],[-21.892139,65.048779],[-24.026172,64.863428],[-21.590625,64.626367],[-22.053369,64.313916],[-21.46333,64.37915],[-22.701172,64.083203],[-22.652197,63.827734],[-21.152393,63.944531],[-20.198145,63.555811],[-18.653613,63.406689],[-14.927393,64.319678],[-13.599316,65.035938],[-13.617871,65.519336],[-14.8271,65.764258],[-15.117383,66.125635],[-14.59585,66.381543],[-15.543115,66.228516]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"HU",iso_a3:"HUN",iso_n3:"348"},geometry:{type:"Polygon",coordinates:[[[22.131836,48.405322],[20.490039,48.526904],[19.950391,48.146631],[18.791895,48.000293],[18.724219,47.787158],[17.761914,47.770166],[17.147363,48.005957],[17.066602,47.707568],[16.421289,47.674463],[16.676563,47.536035],[16.093066,46.863281],[16.516211,46.499902],[17.807129,45.79043],[18.905371,45.931738],[20.241797,46.108594],[21.12168,46.282422],[21.999707,47.505029],[22.87666,47.947266],[22.131836,48.405322]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"HN",iso_a3:"HND",iso_n3:"340"},geometry:{type:"Polygon",coordinates:[[[-83.15752,14.993066],[-84.095068,15.400928],[-83.765283,15.405469],[-84.261426,15.822607],[-84.97373,15.989893],[-88.22832,15.729004],[-89.142578,15.072314],[-89.362598,14.416016],[-88.482666,13.854248],[-87.802246,13.88999],[-87.814209,13.39917],[-87.489111,13.35293],[-87.337256,12.979248],[-86.729297,13.284375],[-86.733643,13.763477],[-86.040381,14.050146],[-85.733936,13.858691],[-84.985156,14.752441],[-84.453564,14.643701],[-83.15752,14.993066]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"HT",iso_a3:"HTI",iso_n3:"332"},geometry:{type:"Polygon",coordinates:[[[-71.779248,19.718164],[-73.400537,19.807422],[-72.703223,19.441064],[-72.811084,19.071582],[-72.376074,18.574463],[-72.789355,18.434814],[-74.227734,18.662695],[-74.478125,18.45],[-73.884961,18.041895],[-73.385156,18.251172],[-71.768311,18.03916],[-72.000391,18.5979],[-71.645312,19.163525],[-71.779248,19.718164]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"GY",iso_a3:"GUY",iso_n3:"328"},geometry:{type:"Polygon",coordinates:[[[-60.742139,5.202051],[-60.142041,5.238818],[-59.990674,5.082861],[-60.148633,4.533252],[-59.703271,4.381104],[-59.551123,3.933545],[-59.854395,3.5875],[-59.994336,2.68999],[-59.666602,1.746289],[-59.231201,1.376025],[-58.821777,1.201221],[-57.31748,1.963477],[-56.482812,1.942139],[-57.197363,2.853271],[-57.303662,3.3771],[-57.646729,3.394531],[-58.054297,4.10166],[-57.917041,4.82041],[-57.331006,5.020166],[-57.194775,5.548438],[-57.227539,6.178418],[-57.982568,6.785889],[-58.41499,6.851172],[-58.672949,6.390771],[-58.511084,7.398047],[-60.017529,8.549316],[-59.849072,8.248682],[-60.718652,7.535937],[-60.3521,7.002881],[-61.145605,6.694531],[-61.128711,6.214307],[-61.39082,5.93877],[-60.742139,5.202051]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"GW",iso_a3:"GNB",iso_n3:"624"},geometry:{type:"Polygon",coordinates:[[[-16.711816,12.354834],[-16.24458,12.237109],[-16.328076,12.051611],[-15.941748,11.786621],[-15.078271,11.968994],[-15.501904,11.723779],[-15.072656,11.597803],[-15.479492,11.410303],[-15.043018,10.940137],[-14.682959,11.508496],[-13.732764,11.736035],[-13.948877,12.178174],[-13.70791,12.312695],[-13.729248,12.673926],[-15.196094,12.679932],[-16.711816,12.354834]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"GN",iso_a3:"GIN",iso_n3:"324"},geometry:{type:"Polygon",coordinates:[[[-10.283203,8.485156],[-9.518262,8.346094],[-9.463818,7.415869],[-9.117578,7.215918],[-8.659766,7.688379],[-8.486426,7.558496],[-8.231885,7.556738],[-8.009863,8.078516],[-8.236963,8.455664],[-7.681201,8.410352],[-7.950977,8.786816],[-7.896191,9.415869],[-8.136963,9.495703],[-7.990625,10.1625],[-8.337402,10.990625],[-8.666699,11.009473],[-8.398535,11.366553],[-8.822021,11.673242],[-9.043066,12.402344],[-9.395361,12.464648],[-9.358105,12.25542],[-9.754004,12.029932],[-10.274854,12.212646],[-10.709229,11.89873],[-10.933203,12.205176],[-11.305176,12.01543],[-11.502197,12.198633],[-11.389404,12.404395],[-12.399072,12.340088],[-13.729248,12.673926],[-13.70791,12.312695],[-13.948877,12.178174],[-13.732764,11.736035],[-14.682959,11.508496],[-15.043018,10.940137],[-14.593506,10.766699],[-14.426904,10.24834],[-13.689795,9.927783],[-13.691357,9.535791],[-13.292676,9.049219],[-12.427979,9.898145],[-11.273633,9.996533],[-10.690527,9.314258],[-10.500537,8.687549],[-10.712109,8.335254],[-10.283203,8.485156]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"GT",iso_a3:"GTM",iso_n3:"320"},geometry:{type:"Polygon",coordinates:[[[-92.235156,14.54541],[-91.377344,13.990186],[-90.095215,13.736523],[-89.362598,14.416016],[-89.142578,15.072314],[-88.22832,15.729004],[-88.894043,15.890625],[-89.2375,15.894434],[-89.161475,17.814844],[-90.98916,17.816406],[-90.992969,17.252441],[-91.409619,17.255859],[-90.416992,16.391016],[-90.447168,16.072705],[-91.736572,16.070166],[-92.204248,15.275],[-92.235156,14.54541]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"GD",iso_a3:"GRD",iso_n3:"308"},geometry:{type:"Polygon",coordinates:[[[-61.715527,12.012646],[-61.607031,12.223291],[-61.71499,12.185156],[-61.715527,12.012646]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"GR",iso_a3:"GRC",iso_n3:"300"},geometry:{type:"MultiPolygon",coordinates:[[[[20.612305,38.38335],[20.352539,38.179883],[20.761328,38.070557],[20.612305,38.38335]]],[[[20.07793,39.432715],[19.926074,39.77373],[19.646484,39.76709],[20.07793,39.432715]]],[[[23.41543,38.958643],[22.870313,38.870508],[24.536523,37.979736],[24.127539,38.648486],[23.41543,38.958643]]],[[[26.824414,37.811426],[26.581055,37.72373],[27.055078,37.709277],[26.824414,37.811426]]],[[[26.094043,38.218066],[26.160352,38.540723],[25.846094,38.574023],[26.094043,38.218066]]],[[[26.410156,39.329443],[25.844141,39.200049],[26.46875,38.972803],[26.410156,39.329443]]],[[[27.842773,35.929297],[28.231836,36.433643],[27.716309,36.171582],[27.842773,35.929297]]],[[[23.852246,35.535449],[23.569824,35.534766],[23.592773,35.257227],[24.799805,34.934473],[26.165625,35.018604],[26.320215,35.315137],[25.791309,35.122852],[25.730176,35.348584],[23.852246,35.535449]]],[[[26.320898,41.716553],[25.92334,41.311914],[25.251172,41.243555],[24.487891,41.555225],[22.916016,41.336279],[20.964258,40.849902],[20.657422,40.117383],[20.00127,39.709424],[20.713379,39.035156],[21.118359,39.02998],[20.768555,38.874414],[21.182617,38.345557],[22.42168,38.438525],[23.148926,38.176074],[22.920313,37.958301],[21.824707,38.328125],[21.124707,37.891602],[21.678906,37.387207],[21.58291,37.080957],[21.892383,36.737305],[22.080469,37.028955],[22.427734,36.475781],[22.717188,36.793945],[23.160156,36.448096],[22.725391,37.542139],[23.489258,37.440186],[23.036328,37.878369],[23.501758,38.034863],[24.019727,37.677734],[24.024512,38.139795],[22.569141,38.86748],[23.066699,39.037939],[22.921387,39.306348],[23.327734,39.174902],[22.592188,40.036914],[22.629492,40.495557],[22.922266,40.590869],[23.627344,39.924072],[23.42627,40.263965],[23.94707,39.965576],[23.72793,40.329736],[24.343359,40.147705],[23.762793,40.747803],[25.104492,40.994727],[26.038965,40.726758],[26.624902,41.401758],[26.320898,41.716553]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"GH",iso_a3:"GHA",iso_n3:"288"},geometry:{type:"Polygon",coordinates:[[[-.068604,11.115625],[-.627148,10.927393],[-2.829932,10.998389],[-2.69585,9.481348],[-2.505859,8.20874],[-3.235791,6.807227],[-2.75498,5.43252],[-3.019141,5.130811],[-3.086719,5.12832],[-3.114014,5.088672],[-2.001855,4.762451],[.259668,5.757324],[.949707,5.810254],[1.187207,6.089404],[.525586,6.850928],[.686328,8.354883],[.372559,8.759277],[.525684,9.398486],[.233398,9.463525],[.380859,10.291846],[-.086328,10.673047],[-.068604,11.115625]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"DE",iso_a3:"DEU",iso_n3:"276"},geometry:{type:"MultiPolygon",coordinates:[[[[9.524023,47.524219],[10.183008,47.278809],[10.439453,47.551562],[11.041992,47.393115],[12.209277,47.718262],[13.014355,47.478076],[12.760352,48.106982],[13.814746,48.766943],[12.681152,49.414502],[12.089844,50.301758],[12.942676,50.406445],[14.319727,51.037793],[14.809375,50.858984],[15.016602,51.252734],[14.619434,52.528516],[14.128613,52.878223],[14.258887,53.729639],[12.575391,54.467383],[11.399609,53.944629],[10.85459,54.009814],[11.013379,54.37915],[9.868652,54.472461],[9.739746,54.825537],[8.670313,54.903418],[8.92041,53.965332],[9.783984,53.554639],[8.618945,53.875],[8.495215,53.394238],[8.009277,53.690723],[7.285254,53.681348],[7.197266,53.282275],[7.033008,52.651367],[6.710742,52.617871],[7.035156,52.380225],[6.800391,51.967383],[5.94873,51.802686],[5.993945,50.750439],[6.340918,50.451758],[6.116504,50.120996],[6.487305,49.798486],[6.344336,49.452734],[6.735449,49.160596],[8.134863,48.973584],[7.615625,47.592725],[8.454004,47.596191],[8.572656,47.775635],[9.524023,47.524219]]],[[[13.70918,54.382715],[13.336816,54.697119],[13.190039,54.325635],[13.70918,54.382715]]],[[[14.211426,53.950342],[13.827734,54.127246],[14.213672,53.870752],[14.211426,53.950342]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"GE",iso_a3:"GEO",iso_n3:"268"},geometry:{type:"Polygon",coordinates:[[[43.439453,41.107129],[45.001367,41.290967],[45.280957,41.449561],[46.534375,41.088574],[46.672559,41.286816],[46.182129,41.65708],[46.429883,41.890967],[45.638574,42.205078],[45.705273,42.498096],[44.870996,42.756396],[43.825977,42.571533],[42.760645,43.16958],[41.580566,43.219238],[40.648047,43.533887],[39.97832,43.419824],[41.48877,42.659326],[41.762988,41.97002],[41.510059,41.51748],[42.754102,41.578906],[43.439453,41.107129]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"GM",iso_a3:"GMB",iso_n3:"270"},geometry:{type:"Polygon",coordinates:[[[-16.562305,13.587305],[-16.351807,13.343359],[-15.42749,13.468359],[-16.413379,13.269727],[-16.669336,13.475],[-16.76333,13.06416],[-15.834277,13.156445],[-15.151123,13.556494],[-14.246777,13.23584],[-13.826709,13.407812],[-15.10835,13.812109],[-15.509668,13.58623],[-16.562305,13.587305]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"GA",iso_a3:"GAB",iso_n3:"266"},geometry:{type:"Polygon",coordinates:[[[13.293555,2.161572],[11.328711,2.167432],[11.335352,.999707],[9.59082,1.031982],[9.617969,.576514],[9.324805,.5521],[10.001465,.194971],[9.796777,.044238],[9.354883,.343604],[9.29668,-.35127],[8.946387,-.68877],[8.703125,-.591016],[9.064648,-1.29834],[9.501074,-1.555176],[9.318848,-1.632031],[9.036328,-1.308887],[9.624609,-2.36709],[10.062012,-2.549902],[9.72207,-2.467578],[11.130176,-3.916309],[11.504297,-3.520312],[11.879883,-3.665918],[11.93418,-3.318555],[11.537793,-2.836719],[11.605469,-2.342578],[12.446387,-2.32998],[12.59043,-1.826855],[12.991992,-2.313379],[13.464941,-2.39541],[13.733789,-2.138477],[13.993848,-2.490625],[14.383984,-1.890039],[14.474121,-.573438],[13.860059,-.20332],[13.949609,.353809],[14.429883,.901465],[14.180859,1.370215],[13.216309,1.248438],[13.293555,2.161572]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"FR",iso_a3:"FRA",iso_n3:"250"},geometry:{type:"MultiPolygon",coordinates:[[[[9.480371,42.80542],[9.363184,43.017383],[9.313379,42.713184],[8.565625,42.357715],[8.80752,41.588379],[9.186133,41.384912],[9.550684,42.129736],[9.480371,42.80542]]],[[[7.615625,47.592725],[8.134863,48.973584],[6.735449,49.160596],[6.344336,49.452734],[5.789746,49.538281],[4.867578,49.788135],[4.818652,50.153174],[4.149316,49.971582],[4.174609,50.246484],[2.759375,50.750635],[2.524902,51.097119],[1.672266,50.88501],[1.592773,50.252197],[.186719,49.703027],[.416895,49.448389],[-1.138525,49.387891],[-1.258643,49.680176],[-1.856445,49.683789],[-1.376465,48.652588],[-2.692334,48.536816],[-3.231445,48.84082],[-4.7625,48.450244],[-4.241406,48.303662],[-4.678809,48.039502],[-4.312109,47.8229],[-1.742529,47.215967],[-2.19707,47.162939],[-2.059375,46.810303],[-1.146289,46.311377],[-1.195996,45.714453],[-.548486,45.000586],[-1.081006,45.532422],[-1.076953,44.689844],[-1.484863,43.56377],[-1.794043,43.407324],[-1.46084,43.051758],[-.586426,42.798975],[.631641,42.6896],[.696875,42.845117],[1.42832,42.595898],[1.706055,42.50332],[3.211426,42.431152],[3.051758,42.915137],[3.91084,43.563086],[6.115918,43.072363],[7.377734,43.731738],[7.39502,43.765332],[7.438672,43.750439],[7.493164,43.767139],[7.637207,44.164844],[6.900195,44.335742],[6.992676,44.827295],[6.634766,45.068164],[7.146387,45.381738],[6.790918,45.740869],[7.021094,45.925781],[6.758105,46.415771],[5.97002,46.214697],[6.968359,47.453223],[7.615625,47.592725]]],[[[55.797363,-21.339355],[55.661914,-20.90625],[55.311328,-20.904102],[55.362695,-21.273633],[55.797363,-21.339355]]],[[[-60.82627,14.494482],[-61.21333,14.848584],[-61.063721,14.46709],[-60.82627,14.494482]]],[[[-61.327148,16.23042],[-61.172607,16.256104],[-61.471191,16.506641],[-61.522168,16.228027],[-61.327148,16.23042]]],[[[-54.61626,2.326758],[-54.130078,2.121045],[-53.767773,2.354834],[-52.903467,2.211523],[-51.652539,4.061279],[-51.827539,4.635693],[-52.00293,4.352295],[-52.058105,4.717383],[-52.899316,5.425049],[-53.847168,5.782227],[-54.155957,5.358984],[-54.479688,4.836523],[-54.00957,3.448535],[-54.61626,2.326758]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"PM",iso_a3:"SPM",iso_n3:"666"},geometry:{type:"Polygon",coordinates:[[[-56.26709,46.838477],[-56.364648,47.098975],[-56.384766,46.819434],[-56.26709,46.838477]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"WF",iso_a3:"WLF",iso_n3:"876"},geometry:{type:"Polygon",coordinates:[[[-178.04668,-14.318359],[-178.194385,-14.255469],[-178.158594,-14.311914],[-178.04668,-14.318359]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"MF",iso_a3:"MAF",iso_n3:"663"},geometry:{type:"Polygon",coordinates:[[[-63.011182,18.068945],[-63.063086,18.115332],[-63.123047,18.068945],[-63.011182,18.068945]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"BL",iso_a3:"BLM",iso_n3:"652"},geometry:{type:"Polygon",coordinates:[[[-62.831934,17.876465],[-62.799707,17.908691],[-62.874219,17.922266],[-62.831934,17.876465]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"PF",iso_a3:"PYF",iso_n3:"258"},geometry:{type:"MultiPolygon",coordinates:[[[[-149.321533,-17.690039],[-149.63501,-17.564258],[-149.181787,-17.862305],[-149.321533,-17.690039]]],[[[-139.024316,-9.695215],[-139.134082,-9.829492],[-138.827344,-9.741602],[-139.024316,-9.695215]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"NC",iso_a3:"NCL",iso_n3:"540"},geometry:{type:"MultiPolygon",coordinates:[[[[164.202344,-20.246094],[164.059668,-20.141504],[164.927441,-21.289844],[166.467969,-22.256055],[166.970313,-22.322852],[166.942383,-22.090137],[165.191797,-20.768848],[164.202344,-20.246094]]],[[[168.010938,-21.42998],[167.81543,-21.392676],[167.966797,-21.641602],[168.010938,-21.42998]]],[[[167.400879,-21.160645],[167.297949,-20.73252],[167.055762,-20.720215],[167.072656,-20.997266],[167.400879,-21.160645]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"TF",iso_a3:"ATF",iso_n3:"260"},geometry:{type:"Polygon",coordinates:[[[69.184863,-49.10957],[69.002441,-48.66123],[68.814746,-49.699609],[69.153125,-49.529688],[70.124316,-49.704395],[70.247754,-49.530664],[69.759961,-49.430176],[70.386133,-49.433984],[70.555469,-49.201465],[70.320215,-49.058594],[69.542383,-49.255664],[69.592773,-48.970996],[69.184863,-49.10957]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"AX",iso_a3:"ALA",iso_n3:"248"},geometry:{type:"Polygon",coordinates:[[[19.989551,60.351172],[19.799805,60.081738],[20.258887,60.261279],[19.989551,60.351172]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"FI",iso_a3:"FIN",iso_n3:"246"},geometry:{type:"Polygon",coordinates:[[[24.155469,65.805273],[24.628027,65.85918],[25.347852,65.479248],[25.288184,64.860352],[24.55791,64.801025],[21.143848,62.73999],[21.436035,60.596387],[22.584961,60.380566],[22.462695,60.029199],[22.911719,60.209717],[23.021289,59.816016],[25.758008,60.267529],[26.569336,60.624561],[26.534668,60.412891],[27.797656,60.536133],[31.533984,62.8854],[29.991504,63.735156],[30.51377,64.2],[29.604199,64.968408],[30.102734,65.72627],[29.066211,66.891748],[29.988086,67.668262],[28.685156,68.189795],[28.414062,68.90415],[28.96582,69.021973],[29.141602,69.671436],[27.747852,70.064844],[26.072461,69.691553],[24.941406,68.593262],[23.854004,68.805908],[22.410938,68.719873],[21.59375,69.273584],[20.622168,69.036865],[23.638867,67.954395],[24.155469,65.805273]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"FJ",iso_a3:"FJI",iso_n3:"242"},geometry:{type:"MultiPolygon",coordinates:[[[[179.999219,-16.168555],[180,-16.15293],[178.497461,-16.787891],[178.706641,-16.976172],[179.202344,-16.712695],[179.92793,-16.744434],[179.930371,-16.519434],[179.56416,-16.636914],[179.999219,-16.168555]]],[[[178.280176,-17.371973],[177.504492,-17.539551],[177.321387,-18.077539],[177.955469,-18.264062],[178.667676,-18.080859],[178.280176,-17.371973]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"ET",iso_a3:"ETH",iso_n3:"231"},geometry:{type:"Polygon",coordinates:[[[35.268359,5.492285],[35.74502,5.343994],[36.021973,4.468115],[36.905566,4.411475],[38.086133,3.648828],[39.494434,3.456104],[40.765234,4.273047],[41.14043,3.962988],[41.883984,3.977734],[43.583496,4.85498],[44.940527,4.912012],[47.978223,7.99707],[46.978223,7.99707],[43.983789,9.008838],[42.841602,10.203076],[42.656445,10.6],[42.922754,10.999316],[41.798242,10.980469],[41.792676,11.686035],[42.378516,12.466406],[40.820117,14.11167],[40.140625,14.456055],[39.023828,14.628223],[38.431445,14.428613],[37.88418,14.852295],[37.571191,14.149072],[37.257227,14.45376],[36.524316,14.256836],[36.125195,12.757031],[35.670215,12.62373],[35.112305,11.816553],[34.931445,10.864795],[34.343945,10.658643],[34.078125,9.461523],[34.072754,8.545264],[33.281055,8.437256],[32.998926,7.899512],[33.902441,7.509521],[34.710645,6.660303],[35.268359,5.492285]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"EE",iso_a3:"EST",iso_n3:"233"},geometry:{type:"MultiPolygon",coordinates:[[[[27.351953,57.528125],[27.778516,57.870703],[27.43418,58.787256],[28.0125,59.484277],[25.509277,59.639014],[23.494434,59.195654],[23.767578,58.36084],[24.529102,58.354248],[24.322559,57.870605],[25.282617,58.048486],[26.462109,57.544482],[27.351953,57.528125]]],[[[22.617383,58.62124],[21.862305,58.497168],[21.996875,57.931348],[23.323242,58.45083],[22.617383,58.62124]]],[[[22.92373,58.826904],[22.649414,59.087109],[22.05625,58.943604],[22.542188,58.68999],[22.92373,58.826904]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"ER",iso_a3:"ERI",iso_n3:"232"},geometry:{type:"MultiPolygon",coordinates:[[[[36.524316,14.256836],[37.257227,14.45376],[37.571191,14.149072],[37.88418,14.852295],[38.431445,14.428613],[39.023828,14.628223],[40.140625,14.456055],[40.820117,14.11167],[42.378516,12.466406],[42.703711,12.380322],[43.116699,12.708594],[41.176465,14.620312],[40.204102,15.014111],[39.86377,15.470312],[39.785547,15.124854],[38.609473,18.005078],[37.411035,17.061719],[37.008984,17.058887],[36.426758,15.13208],[36.524316,14.256836]]],[[[40.141211,15.696143],[39.956738,15.889404],[39.975195,15.612451],[40.399023,15.579883],[40.141211,15.696143]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"GQ",iso_a3:"GNQ",iso_n3:"226"},geometry:{type:"MultiPolygon",coordinates:[[[[8.735742,3.758301],[8.474902,3.264648],[8.704004,3.223633],[8.946094,3.627539],[8.735742,3.758301]]],[[[11.328711,2.167432],[9.800781,2.304443],[9.385938,1.139258],[9.59082,1.031982],[11.335352,.999707],[11.328711,2.167432]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"SV",iso_a3:"SLV",iso_n3:"222"},geometry:{type:"Polygon",coordinates:[[[-89.362598,14.416016],[-90.095215,13.736523],[-88.512012,13.183936],[-88.685645,13.281494],[-87.930859,13.180664],[-87.814209,13.39917],[-87.802246,13.88999],[-88.482666,13.854248],[-89.362598,14.416016]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"EG",iso_a3:"EGY",iso_n3:"818"},geometry:{type:"Polygon",coordinates:[[[36.871387,21.996729],[35.697852,22.946191],[35.504395,23.779297],[35.783887,23.937793],[35.194141,24.475146],[33.959082,26.649023],[33.54707,27.898145],[32.359766,29.630664],[32.565723,29.973975],[33.247754,28.567725],[34.220117,27.764307],[34.904297,29.477344],[34.245313,31.208301],[34.198145,31.322607],[32.60332,31.06875],[32.216211,31.29375],[32.101758,31.092822],[31.771094,31.292578],[31.892188,31.482471],[32.136035,31.341064],[31.888965,31.541406],[31.08291,31.60332],[29.07207,30.830273],[25.150488,31.65498],[24.852734,31.334814],[24.961426,30.678516],[24.703223,30.201074],[24.980273,29.181885],[24.980273,21.99585],[31.092676,21.994873],[31.400293,22.202441],[31.434473,21.99585],[36.871387,21.996729]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"EC",iso_a3:"ECU",iso_n3:"218"},geometry:{type:"MultiPolygon",coordinates:[[[[-75.284473,-.106543],[-76.270605,.439404],[-76.494629,.235449],[-77.396338,.393896],[-77.702881,.837842],[-78.859668,1.455371],[-78.899658,1.20625],[-80.088281,.784766],[-80.046143,.155371],[-80.482275,-.368262],[-80.282373,-.620508],[-80.902393,-1.078906],[-80.760596,-1.93457],[-80.932178,-2.269141],[-80.284717,-2.706738],[-80.006641,-2.353809],[-79.925586,-2.548535],[-79.842139,-2.067383],[-79.729883,-2.579102],[-79.96333,-3.157715],[-80.324658,-3.387891],[-80.179248,-3.877734],[-80.490137,-4.010059],[-80.478564,-4.430078],[-79.638525,-4.454883],[-79.330957,-4.927832],[-79.033301,-4.969141],[-78.686035,-4.562402],[-78.345361,-3.397363],[-78.158496,-3.465137],[-77.860596,-2.981641],[-76.679102,-2.562598],[-75.570557,-1.53125],[-75.259375,-.590137],[-75.62627,-.122852],[-75.284473,-.106543]]],[[[-80.131592,-2.973145],[-79.909033,-2.725586],[-80.223682,-2.753125],[-80.131592,-2.973145]]],[[[-90.334863,-.771582],[-90.269385,-.484668],[-90.531689,-.581445],[-90.334863,-.771582]]],[[[-89.418896,-.911035],[-89.287842,-.689844],[-89.608594,-.888574],[-89.418896,-.911035]]],[[[-91.272168,.025146],[-91.596826,.0021],[-91.120947,-.559082],[-91.49541,-.860938],[-91.131055,-1.019629],[-90.799658,-.752051],[-91.272168,.025146]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"DO",iso_a3:"DOM",iso_n3:"214"},geometry:{type:"Polygon",coordinates:[[[-71.768311,18.03916],[-71.438965,17.635596],[-71.027832,18.273193],[-69.274512,18.439844],[-68.687402,18.214941],[-68.33916,18.611523],[-69.623633,19.117822],[-69.232471,19.271826],[-69.739404,19.299219],[-69.956836,19.671875],[-70.95415,19.913965],[-71.779248,19.718164],[-71.645312,19.163525],[-72.000391,18.5979],[-71.768311,18.03916]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"DM",iso_a3:"DMA",iso_n3:"212"},geometry:{type:"Polygon",coordinates:[[[-61.281689,15.249023],[-61.277246,15.526709],[-61.458105,15.633105],[-61.281689,15.249023]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"UM",iso_a3:"UMI",iso_n3:"581"},geometry:{type:"Polygon",coordinates:[[[166.61939537900003,19.281642971000053],[166.64421634200005,19.27558014500005],[166.63819420700008,19.286444403000075],[166.61939537900003,19.281642971000053]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"DJ",iso_a3:"DJI",iso_n3:"262"},geometry:{type:"Polygon",coordinates:[[[43.245996,11.499805],[42.521777,11.572168],[43.380273,12.09126],[43.116699,12.708594],[42.703711,12.380322],[42.378516,12.466406],[41.792676,11.686035],[41.798242,10.980469],[42.922754,10.999316],[43.245996,11.499805]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"GL",iso_a3:"GRL",iso_n3:"304"},geometry:{type:"MultiPolygon",coordinates:[[[[-29.952881,83.564844],[-37.72334,83.497754],[-38.15625,82.998633],[-40.356836,83.332178],[-41.300146,83.100781],[-43.009277,83.2646],[-46.169043,83.063867],[-46.136816,82.858838],[-41.369629,82.75],[-45.556543,82.747021],[-44.238867,82.368164],[-44.729492,81.779834],[-50.037109,82.472412],[-49.541064,81.918066],[-53.022559,82.321729],[-53.555664,81.653271],[-54.548877,82.350635],[-59.261816,82.006641],[-56.615137,81.362891],[-59.281934,81.884033],[-60.842871,81.855371],[-61.435986,81.133594],[-62.903369,81.218359],[-63.028662,80.889551],[-64.515527,81],[-67.050635,80.384521],[-66.843652,80.076221],[-64.17915,80.099268],[-65.825537,79.17373],[-71.651318,78.623145],[-72.818066,78.194336],[-69.351367,77.467139],[-66.691211,77.681201],[-66.389453,77.280273],[-68.135547,77.37959],[-71.141455,77.028662],[-68.114258,76.650635],[-69.484082,76.39917],[-68.14873,76.067041],[-66.674805,75.977393],[-66.992578,76.212939],[-63.291309,76.352051],[-58.516211,75.689062],[-58.565527,75.352734],[-56.255469,74.526807],[-57.230566,74.125293],[-56.225391,74.129102],[-55.288281,73.3271],[-55.668555,73.00791],[-54.737939,72.87251],[-55.601709,72.453467],[-55.581445,72.178857],[-54.840137,72.356104],[-55.594043,71.553516],[-53.962988,71.458984],[-53.652148,72.362646],[-53.440088,71.579004],[-51.769922,71.671729],[-53.007568,71.17998],[-51.018945,71.001318],[-51.774316,71.010449],[-50.872363,70.364893],[-52.801953,70.750586],[-54.530762,70.699268],[-52.254639,70.058936],[-50.291699,70.014453],[-50.945703,68.682666],[-51.623145,68.534814],[-52.60459,68.70874],[-53.383154,68.297363],[-51.210156,68.419922],[-51.456494,68.116064],[-53.151562,68.207764],[-53.735205,67.549023],[-52.344824,67.836914],[-50.968848,67.806641],[-50.613477,67.52793],[-52.666455,67.749707],[-53.884424,67.135547],[-52.386865,66.881152],[-53.41875,66.648535],[-53.53877,66.139355],[-51.225,66.881543],[-53.392041,66.04834],[-53.198975,65.594043],[-52.55127,65.461377],[-51.091895,65.775781],[-52.537695,65.328809],[-51.922607,64.21875],[-50.721582,64.797607],[-50.960645,65.201123],[-50.121631,64.70376],[-50.008984,64.447266],[-50.49209,64.693164],[-51.40376,64.463184],[-51.584912,64.103174],[-50.260693,64.214258],[-51.54751,64.006104],[-51.468848,63.642285],[-50.390088,62.822021],[-49.793115,63.044629],[-50.319238,62.473193],[-49.553467,62.232715],[-49.623779,61.998584],[-48.828711,62.079688],[-49.380273,61.890186],[-49.289062,61.589941],[-48.386426,61.004736],[-47.770312,60.997754],[-48.180811,60.769238],[-46.874463,60.816406],[-45.870215,61.218311],[-46.046631,60.615723],[-45.380518,60.444922],[-44.756738,60.6646],[-45.379248,60.20293],[-44.613281,60.01665],[-44.224365,60.273535],[-44.412939,59.922607],[-43.906543,59.815479],[-43.955029,60.025488],[-43.1229,60.06123],[-43.212988,60.390674],[-43.922705,60.595361],[-43.044092,60.523682],[-42.585303,61.71748],[-42.110205,61.857227],[-42.152979,62.568457],[-42.94165,62.720215],[-41.908984,62.737109],[-41.634473,62.972461],[-42.174512,63.208789],[-41.387891,63.061865],[-40.550391,63.725244],[-40.617773,64.131738],[-41.581006,64.29834],[-40.781738,64.221777],[-40.182227,64.479932],[-41.084424,65.10083],[-39.937256,65.141602],[-39.57793,65.340771],[-40.173535,65.556152],[-38.203369,65.711719],[-38.520361,66.009668],[-38.139941,65.903516],[-37.752344,66.261523],[-38.156641,66.385596],[-37.278711,66.304395],[-37.954785,65.633594],[-36.665186,65.790088],[-36.527246,66.007715],[-36.379199,65.830811],[-35.630078,66.139941],[-35.867236,66.441406],[-35.188574,66.250293],[-34.198242,66.655078],[-32.164551,67.991113],[-32.327441,68.437305],[-30.978564,68.061328],[-26.48291,68.675928],[-22.287061,70.033398],[-25.529883,70.353174],[-27.38418,69.991602],[-27.56084,70.124463],[-26.621777,70.463379],[-29.07207,70.444971],[-28.069873,70.699023],[-28.398438,70.99292],[-26.71792,70.950488],[-25.742236,71.183594],[-25.842725,71.480176],[-27.087207,71.626562],[-25.885156,71.571924],[-24.562207,71.223535],[-23.327832,70.450977],[-22.690674,70.437305],[-22.437012,70.86001],[-22.384131,70.462402],[-21.522656,70.526221],[-21.752246,71.47832],[-22.479639,71.383447],[-21.959668,71.744678],[-25.117871,72.346973],[-24.81333,72.901514],[-26.657617,72.71582],[-24.62998,73.037646],[-24.069043,72.49873],[-22.293213,72.119531],[-22.036328,72.918457],[-24.132666,73.409375],[-27.348047,73.067822],[-27.561621,73.138477],[-26.541846,73.248975],[-27.27041,73.436279],[-26.062305,73.253027],[-24.79126,73.511279],[-25.521289,73.851611],[-22.346875,73.269238],[-20.509668,73.492871],[-20.367285,73.848242],[-22.134814,73.990479],[-22.321582,74.302539],[-21.94292,74.565723],[-21.954932,74.244287],[-20.653125,74.137354],[-19.369141,74.284033],[-19.287012,74.546387],[-19.984912,74.975195],[-20.861572,74.635938],[-20.985791,75.074365],[-22.232861,75.119727],[-20.484961,75.314258],[-19.526367,75.180225],[-19.508984,75.75752],[-20.103613,76.219092],[-21.488232,76.271875],[-22.609326,76.704297],[-20.486719,76.920801],[-18.510303,76.778174],[-18.442627,77.259375],[-20.680811,77.618994],[-19.49043,77.718896],[-20.862598,77.911865],[-21.72959,77.708545],[-21.13374,78.658643],[-18.991992,79.178369],[-20.150146,80.01123],[-19.429199,80.257715],[-16.48877,80.251953],[-16.760596,80.573389],[-11.430664,81.456836],[-14.241992,81.813867],[-17.456055,81.397705],[-19.629932,81.639893],[-23.117725,80.778174],[-21.337988,82.068701],[-24.293066,81.700977],[-25.148828,82.001123],[-29.887402,82.054834],[-23.118066,82.324707],[-21.58252,82.63418],[-25.123389,83.159619],[-32.032715,82.983447],[-25.795068,83.260986],[-29.952881,83.564844]]],[[[-52.731152,69.944727],[-54.371631,70.317285],[-54.919141,69.713623],[-53.578418,69.256641],[-51.900195,69.604785],[-52.731152,69.944727]]],[[[-55.016895,72.791113],[-56.214795,72.719189],[-55.566602,72.564355],[-55.016895,72.791113]]],[[[-44.864551,82.083643],[-44.91748,82.480518],[-47.272266,82.656934],[-44.864551,82.083643]]],[[[-25.432324,70.921338],[-27.617236,70.91377],[-28.035254,70.486816],[-26.604687,70.553369],[-26.217871,70.454053],[-25.432324,70.921338]]],[[[-17.6125,79.825879],[-17.98291,80.055176],[-19.138281,79.852344],[-17.6125,79.825879]]],[[[-18.000537,75.407324],[-18.856055,75.319141],[-18.670801,75.00166],[-17.391992,75.036914],[-18.000537,75.407324]]],[[[-46.266699,60.781396],[-46.205225,60.943506],[-46.788086,60.758398],[-46.266699,60.781396]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"FO",iso_a3:"FRO",iso_n3:"234"},geometry:{type:"Polygon",coordinates:[[[-6.631055,62.227881],[-7.172168,62.285596],[-6.725195,61.951465],[-6.631055,62.227881]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"DK",iso_a3:"DNK",iso_n3:"208"},geometry:{type:"MultiPolygon",coordinates:[[[[12.56875,55.785059],[12.218945,56.118652],[11.819727,55.697656],[11.627734,55.956885],[10.978906,55.721533],[11.862305,54.772607],[12.56875,55.785059]]],[[[9.739746,54.825537],[9.591113,55.493213],[10.926172,56.443262],[10.282715,56.620508],[10.609961,57.736914],[8.284082,56.852344],[8.468359,56.664551],[9.254883,57.011719],[8.67168,56.495654],[8.163965,56.606885],[8.132129,55.599805],[8.615918,55.418213],[8.670313,54.903418],[9.739746,54.825537]]],[[[10.645117,55.609814],[9.860645,55.515479],[9.98877,55.163184],[10.785254,55.133398],[10.645117,55.609814]]],[[[11.361426,54.89165],[11.035547,54.773096],[11.765918,54.679443],[11.361426,54.89165]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"CZ",iso_a3:"CZE",iso_n3:"203"},geometry:{type:"Polygon",coordinates:[[[18.832227,49.510791],[18.562402,49.879346],[17.627051,50.116406],[17.702246,50.307178],[16.880078,50.427051],[16.63916,50.102148],[16.282227,50.655615],[14.99375,51.014355],[14.809375,50.858984],[14.319727,51.037793],[12.942676,50.406445],[12.089844,50.301758],[12.681152,49.414502],[13.814746,48.766943],[14.691309,48.599219],[15.066797,48.997852],[16.953125,48.598828],[18.832227,49.510791]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"-99",iso_a3:"-99",iso_n3:"-99"},geometry:{type:"Polygon",coordinates:[[[34.004492,35.065234],[33.941992,35.292041],[34.556055,35.662061],[32.712695,35.171045],[34.004492,35.065234]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"CY",iso_a3:"CYP",iso_n3:"196"},geometry:{type:"Polygon",coordinates:[[[32.712695,35.171045],[32.317188,34.95332],[33.00791,34.56958],[34.004492,35.065234],[32.712695,35.171045]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"CU",iso_a3:"CUB",iso_n3:"192"},geometry:{type:"MultiPolygon",coordinates:[[[[-81.837451,23.163037],[-84.044922,22.666016],[-84.361279,22.378906],[-84.326367,22.074316],[-84.887207,21.856982],[-84.030957,21.943115],[-82.738037,22.689258],[-81.838818,22.672461],[-81.710352,22.49668],[-82.077734,22.387695],[-81.849414,22.213672],[-81.185498,22.267969],[-79.357422,21.585156],[-78.727686,21.592725],[-78.116357,20.761865],[-77.22959,20.64375],[-77.103809,20.40752],[-77.715088,19.855469],[-75.116406,19.901416],[-74.153711,20.168555],[-74.882568,20.650635],[-75.724561,20.714551],[-75.722949,21.111035],[-77.252881,21.483496],[-77.366162,21.612646],[-77.144141,21.643604],[-77.497266,21.871631],[-79.275684,22.407617],[-79.820264,22.887012],[-81.837451,23.163037]]],[[[-82.561768,21.57168],[-82.991211,21.942725],[-82.973584,21.592285],[-83.183789,21.593457],[-82.561768,21.57168]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"HR",iso_a3:"HRV",iso_n3:"191"},geometry:{type:"MultiPolygon",coordinates:[[[[13.57793,45.516895],[13.860742,44.837402],[14.550488,45.297705],[15.470996,44.271973],[15.18584,44.172119],[15.985547,43.519775],[16.903125,43.392432],[17.585156,42.938379],[15.736621,44.76582],[15.788086,45.178955],[16.293359,45.008838],[16.918652,45.276562],[19.007129,44.869189],[19.4,45.2125],[19.004688,45.399512],[18.905371,45.931738],[17.807129,45.79043],[16.516211,46.499902],[15.635938,46.200732],[15.339453,45.467041],[14.568848,45.657227],[13.57793,45.516895]]],[[[14.810254,44.977051],[14.571094,45.224756],[14.450391,45.079199],[14.810254,44.977051]]],[[[18.436328,42.559717],[17.667578,42.897119],[17.04541,43.014893],[18.51748,42.43291],[18.436328,42.559717]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"CI",iso_a3:"CIV",iso_n3:"384"},geometry:{type:"Polygon",coordinates:[[[-7.990625,10.1625],[-8.136963,9.495703],[-7.896191,9.415869],[-7.950977,8.786816],[-7.681201,8.410352],[-8.236963,8.455664],[-8.009863,8.078516],[-8.231885,7.556738],[-8.486426,7.558496],[-8.302344,6.980957],[-8.603564,6.507812],[-7.454395,5.841309],[-7.544971,4.351318],[-5.061816,5.130664],[-5.282373,5.210254],[-3.347559,5.130664],[-3.199951,5.354492],[-3.019141,5.130811],[-2.75498,5.43252],[-3.235791,6.807227],[-2.505859,8.20874],[-2.69585,9.481348],[-3.223535,9.895459],[-4.62583,9.713574],[-5.523535,10.426025],[-6.196875,10.232129],[-6.261133,10.724072],[-6.65415,10.656445],[-7.01709,10.143262],[-7.497949,10.439795],[-7.990625,10.1625]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"CR",iso_a3:"CRI",iso_n3:"188"},geometry:{type:"Polygon",coordinates:[[[-82.563574,9.57666],[-83.641992,10.917236],[-83.919287,10.735352],[-84.63418,11.045605],[-85.744336,11.062109],[-85.908008,10.897559],[-85.667236,10.74502],[-85.849658,10.292041],[-85.681006,9.958594],[-85.114502,9.581787],[-84.886426,9.820947],[-85.263184,10.256641],[-85.025049,10.115723],[-84.581592,9.568359],[-83.637256,9.035352],[-83.604736,8.480322],[-83.291504,8.406006],[-83.469727,8.706836],[-83.285791,8.664355],[-82.879346,8.070654],[-83.027344,8.337744],[-82.727832,8.916064],[-82.939844,9.44917],[-82.563574,9.57666]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"CD",iso_a3:"COD",iso_n3:"180"},geometry:{type:"Polygon",coordinates:[[[30.751172,-8.193652],[30.212695,-7.037891],[29.54082,-6.313867],[29.403223,-4.449316],[29.014355,-2.720215],[28.876367,-2.400293],[29.576953,-1.387891],[29.942871,.819238],[31.252734,2.04458],[30.728613,2.455371],[30.838574,3.490723],[29.676855,4.586914],[28.19209,4.350244],[27.40332,5.10918],[25.525098,5.312109],[25.065234,4.967432],[22.864551,4.723877],[22.422168,4.134961],[20.558105,4.462695],[19.500977,5.12749],[18.594141,4.34624],[18.610352,3.478418],[18.072168,2.013281],[17.752832,-.549023],[16.879883,-1.225879],[16.215332,-2.177832],[15.990039,-3.766211],[14.70791,-4.881738],[14.410742,-4.83125],[14.358301,-4.299414],[13.71709,-4.454492],[13.414941,-4.837402],[13.072754,-4.634766],[12.451465,-5.071484],[12.503711,-5.695801],[12.213672,-5.758691],[12.45293,-6.000488],[13.068164,-5.864844],[16.431445,-5.900195],[17.57959,-8.099023],[19.34082,-7.966602],[19.527637,-7.144434],[19.875195,-6.986328],[20.590039,-6.919922],[20.607813,-7.277734],[21.781641,-7.314648],[21.813184,-9.46875],[22.274512,-10.259082],[22.226172,-11.121973],[23.966504,-10.871777],[24.365723,-11.129883],[24.37793,-11.41709],[25.28877,-11.212402],[25.349414,-11.623047],[26.025977,-11.890137],[26.824023,-11.965234],[27.15918,-11.579199],[27.573828,-12.227051],[28.412891,-12.518066],[29.014258,-13.368848],[29.554199,-13.248926],[29.775195,-13.438086],[29.795117,-12.155469],[29.485547,-12.418457],[29.064355,-12.348828],[28.383398,-11.566699],[28.645508,-10.550195],[28.400684,-9.224805],[28.898145,-8.485449],[30.751172,-8.193652]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"CG",iso_a3:"COG",iso_n3:"178"},geometry:{type:"Polygon",coordinates:[[[11.130176,-3.916309],[12.018359,-5.004297],[12.798242,-4.430566],[13.072754,-4.634766],[13.414941,-4.837402],[13.71709,-4.454492],[14.358301,-4.299414],[14.410742,-4.83125],[14.70791,-4.881738],[15.990039,-3.766211],[16.215332,-2.177832],[16.879883,-1.225879],[17.752832,-.549023],[18.072168,2.013281],[18.610352,3.478418],[17.491602,3.687305],[16.610742,3.505371],[16.183398,2.270068],[16.059375,1.676221],[14.578906,2.199121],[13.293555,2.161572],[13.216309,1.248438],[14.180859,1.370215],[14.429883,.901465],[13.949609,.353809],[13.860059,-.20332],[14.474121,-.573438],[14.383984,-1.890039],[13.993848,-2.490625],[13.733789,-2.138477],[13.464941,-2.39541],[12.991992,-2.313379],[12.59043,-1.826855],[12.446387,-2.32998],[11.605469,-2.342578],[11.537793,-2.836719],[11.93418,-3.318555],[11.879883,-3.665918],[11.504297,-3.520312],[11.130176,-3.916309]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"KM",iso_a3:"COM",iso_n3:"174"},geometry:{type:"MultiPolygon",coordinates:[[[[44.476367,-12.081543],[44.220117,-12.171387],[44.50498,-12.356543],[44.476367,-12.081543]]],[[[43.46582,-11.90127],[43.299023,-11.374512],[43.22666,-11.751855],[43.46582,-11.90127]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"CO",iso_a3:"COL",iso_n3:"170"},geometry:{type:"Polygon",coordinates:[[[-71.319727,11.861914],[-71.137305,12.046338],[-71.262109,12.335303],[-71.714551,12.419971],[-73.313379,11.295752],[-74.14292,11.32085],[-74.400879,10.765234],[-74.330225,10.99668],[-74.84458,11.109717],[-75.70835,10.143408],[-75.538574,10.205176],[-75.639355,9.450439],[-76.920459,8.57373],[-76.786572,7.931592],[-77.374219,8.658301],[-77.195996,7.972461],[-77.538281,7.56626],[-77.761914,7.698828],[-77.901172,7.229346],[-77.368799,6.575586],[-77.469434,6.176758],[-77.249268,5.780176],[-77.534424,5.537109],[-77.286328,4.721729],[-77.520703,4.212793],[-77.076807,3.913281],[-77.813574,2.716357],[-78.591699,2.356641],[-78.576904,1.773779],[-79.025439,1.623682],[-78.859668,1.455371],[-77.702881,.837842],[-77.396338,.393896],[-76.494629,.235449],[-76.270605,.439404],[-75.284473,-.106543],[-74.801758,-.200098],[-74.246387,-.970605],[-73.664307,-1.248828],[-72.941113,-2.394043],[-70.968555,-2.206836],[-70.09585,-2.658203],[-70.735107,-3.781543],[-70.339502,-3.814355],[-69.965918,-4.235938],[-69.400244,-1.194922],[-69.633984,-.509277],[-70.070508,-.138867],[-70.053906,.578613],[-69.15332,.658789],[-69.311816,1.050488],[-69.852148,1.059521],[-69.848584,1.70874],[-68.176562,1.719824],[-68.193799,1.987012],[-67.93623,1.748486],[-67.400439,2.116699],[-67.082275,1.1854],[-66.876025,1.223047],[-67.21084,2.390137],[-67.859082,2.793604],[-67.311133,3.415869],[-67.855273,4.506885],[-67.481982,6.180273],[-69.427148,6.123975],[-70.129199,6.953613],[-72.006641,7.032617],[-72.471973,7.524268],[-72.390332,8.287061],[-72.796387,9.108984],[-73.366211,9.194141],[-72.690088,10.83584],[-71.958105,11.666406],[-71.319727,11.861914]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"CN",iso_a3:"CHN",iso_n3:"156"},geometry:{type:"MultiPolygon",coordinates:[[[[107.972656,21.507959],[108.502148,21.633447],[108.479883,21.904639],[109.081543,21.440283],[109.521484,21.693408],[109.930762,21.480566],[109.662598,20.916895],[110.123145,20.263721],[110.517578,20.46001],[110.154004,20.944629],[110.410937,21.338135],[110.567187,21.214062],[111.602734,21.559082],[111.943945,21.849658],[112.30498,21.741699],[112.359668,21.978027],[112.586328,21.776855],[113.08877,22.207959],[113.548145,22.222607],[113.331055,22.912012],[113.519727,23.1021],[114.01543,22.511914],[113.937305,22.36499],[114.267969,22.295557],[114.266016,22.540967],[116.470703,22.945898],[116.910645,23.64668],[117.367676,23.588623],[118.056055,24.246094],[117.842676,24.474316],[118.657031,24.621436],[118.977539,25.209277],[119.285547,25.232227],[119.180078,25.449805],[119.622461,25.391162],[119.61875,26.003564],[119.139453,26.121777],[119.463086,26.054688],[119.881055,26.33418],[119.588184,26.784961],[120.086719,26.671582],[120.747656,28.009961],[121.145703,28.32666],[121.609961,28.292139],[121.487109,29.193164],[121.917773,29.13501],[121.941211,29.605908],[121.50625,29.48457],[122.08291,29.870361],[121.258008,30.304102],[120.194629,30.241309],[121.87793,30.916992],[120.715527,31.98374],[120.035937,31.936279],[120.520117,32.105859],[121.856348,31.816455],[120.853223,32.661377],[120.266699,34.274023],[119.165332,34.848828],[120.284766,35.984424],[120.183301,36.202441],[120.637891,36.129932],[120.81084,36.632812],[121.932715,36.959473],[122.340918,36.832227],[122.666992,37.402832],[121.640234,37.460352],[120.75,37.833936],[119.760547,37.155078],[119.287402,37.138281],[118.952637,37.331152],[118.940039,38.042773],[117.766699,38.31167],[117.616699,38.852881],[117.865723,39.19126],[118.976953,39.182568],[119.391113,39.75249],[120.479102,40.230957],[121.174512,40.90127],[121.834863,40.974268],[122.275,40.541846],[121.26748,39.544678],[121.818457,39.386523],[121.106738,38.920801],[121.163574,38.731641],[122.840039,39.60083],[124.362109,40.004053],[125.989062,40.904639],[126.743066,41.724854],[128.149414,41.387744],[128.045215,41.9875],[128.923438,42.038232],[129.697852,42.448145],[129.898242,42.998145],[130.526953,42.5354],[130.424805,42.727051],[131.068555,42.902246],[131.257324,43.378076],[130.981641,44.844336],[131.851855,45.326855],[133.113477,45.130713],[134.167676,47.302197],[134.752344,47.71543],[134.665234,48.253906],[135.083406,48.436324],[134.293359,48.373438],[133.144043,48.105664],[132.47627,47.71499],[130.961914,47.709326],[130.553125,48.861182],[129.498145,49.388818],[127.550781,49.801807],[127.590234,50.208984],[125.649023,53.042285],[123.607813,53.546533],[120.985449,53.28457],[120.094531,52.787207],[120.656152,52.56665],[120.749805,52.096533],[119.163672,50.406006],[119.259863,50.066406],[117.873438,49.513477],[116.683301,49.823779],[115.616406,47.874805],[115.898242,47.686914],[116.760547,47.869775],[117.350781,47.652197],[117.768359,47.987891],[118.498438,47.983984],[119.711133,47.15],[119.867188,46.672168],[117.438086,46.58623],[117.333398,46.362012],[116.562598,46.289795],[115.681055,45.458252],[114.560156,45.38999],[113.587012,44.745703],[111.898047,45.064062],[111.402246,44.367285],[111.933203,43.711426],[110.400391,42.773682],[109.339844,42.438379],[106.77002,42.288721],[104.982031,41.595508],[104.498242,41.658691],[104.498242,41.877002],[103.711133,41.751318],[102.156641,42.158105],[101.495313,42.53877],[96.385449,42.720361],[95.350293,44.278076],[93.516211,44.944482],[90.877246,45.196094],[90.869922,46.954492],[90.02793,47.877686],[89.047656,48.002539],[87.979688,48.555127],[87.814258,49.162305],[87.322852,49.085791],[86.808301,49.049707],[86.549414,48.528613],[85.749414,48.385059],[85.484766,47.063525],[84.786133,46.830713],[83.029492,47.185938],[82.315234,45.594922],[82.521484,45.125488],[81.691992,45.349365],[79.871875,44.883789],[80.481543,44.714648],[80.355273,44.097266],[80.785742,43.161572],[80.202246,42.734473],[80.209375,42.190039],[78.123438,41.075635],[76.907715,41.02417],[76.318555,40.352246],[75.677148,40.305811],[75.555566,40.625195],[74.835156,40.482617],[73.991602,40.043115],[73.631641,39.448877],[73.80166,38.606885],[74.812305,38.460303],[75.11875,37.385693],[74.891309,37.231641],[74.372168,37.157715],[74.541406,37.022168],[75.772168,36.694922],[75.912305,36.048975],[76.766895,35.661719],[77.799414,35.495898],[78.042676,35.479785],[78.326953,34.606396],[78.970117,34.302637],[78.72666,34.013379],[79.219336,32.501074],[78.918945,32.358203],[78.700879,32.597021],[78.389648,32.519873],[78.807678,31.099982],[79.707774,31.013593],[81.010254,30.164502],[82.043359,30.326758],[83.583496,29.183594],[84.101367,29.219971],[84.228711,28.911768],[85.159082,28.592236],[85.122461,28.315967],[85.67832,28.277441],[85.994531,27.9104],[86.137012,28.114355],[87.141406,27.83833],[88.109766,27.870605],[88.803711,28.006934],[88.891406,27.316064],[89.981055,28.311182],[90.352734,28.080225],[91.273047,28.078369],[91.631934,27.759961],[91.594727,27.557666],[92.083398,27.290625],[91.99834,26.85498],[92.64698,26.952656],[93.111399,26.880082],[93.817265,27.025183],[94.277372,27.58143],[94.88592,27.743098],[95.28628,27.939955],[95.39715,28.142259],[95.832003,28.295186],[96.275479,28.228241],[97.086778,27.7475],[97.335156,27.937744],[97.322461,28.217969],[97.599219,28.517041],[98.061621,28.185889],[98.298828,27.550098],[98.651172,27.572461],[98.738477,26.785742],[98.65625,25.863574],[97.819531,25.251855],[97.583301,24.774805],[97.564551,23.911035],[98.835059,24.121191],[98.676758,23.905078],[98.86377,23.19126],[99.507129,22.959131],[99.192969,22.125977],[99.917676,22.028027],[100.147656,21.480518],[101.079785,21.755859],[101.138867,21.56748],[101.247852,21.197314],[101.800586,21.212598],[101.524512,22.253662],[101.73877,22.495264],[102.127441,22.379199],[102.470898,22.750928],[102.981934,22.448242],[103.32666,22.769775],[103.941504,22.540088],[105.275391,23.345215],[105.842969,22.922803],[106.780273,22.778906],[106.550391,22.501367],[106.663574,21.978906],[107.972656,21.507959]]],[[[110.88877,19.991943],[110.651758,20.137744],[109.263477,19.882666],[108.665527,19.304102],[108.701563,18.535254],[109.519336,18.218262],[110.067383,18.447559],[111.013672,19.655469],[110.88877,19.991943]]],[[[121.008789,22.620361],[121.397461,23.17251],[121.929004,24.97373],[121.593652,25.275342],[121.040625,25.032812],[120.132129,23.65293],[120.232813,22.71792],[120.839844,21.925],[121.008789,22.620361]]],[[[124.4751,25.9358],[124.4641,25.8592],[124.6536,25.9111],[124.5822,25.9655],[124.4751,25.9358]]],[[[123.7143,26.0025],[123.7967,25.921],[123.7198,25.8716],[123.5962,25.921],[123.7143,26.0025]]],[[[123.4946,25.7554],[123.5797,25.6861],[123.3325,25.6192],[123.2639,25.6712],[123.327,25.7306],[123.4946,25.7554]]],[[[116.769628,20.771721],[116.889736,20.683284],[116.749302,20.600958],[116.862635,20.588633],[116.925461,20.726949],[116.769628,20.771721]]],[[[111.7447,16.552],[111.7886,16.5125],[111.7392,16.4598],[111.7447,16.552]]],[[[111.8134,16.2621],[111.8161,16.2252],[111.5689,16.1619],[111.662292,16.260163],[111.8134,16.2621]]],[[[112.6126,16.059],[112.4753,16.0009],[112.4615,16.0432],[112.6126,16.059]]],[[[113.896887,7.607204],[114.058879,7.537794],[114.368696,7.638642],[114.540543,7.945783],[113.896887,7.607204]]],[[[109.463972,7.344339],[109.948716,7.522962],[109.653065,7.559745],[109.463972,7.344339]]],[[[116.48876,10.395686],[116.467202,10.309144],[116.644592,10.335051],[116.48876,10.395686]]],[[[122.518653,23.460785],[122.798614,24.573674],[122.779218,24.578553],[122.499257,23.465664],[122.518653,23.460785]]],[[[121.172026,20.805459],[121.909388,21.687433],[121.894044,21.700262],[121.156682,20.818287],[121.172026,20.805459]]],[[[119.473662,18.007073],[120.025697,19.024038],[120.00812,19.033579],[119.456084,18.016614],[119.473662,18.007073]]],[[[119.072182,15.007514],[119.072676,16.043885],[119.052676,16.043885],[119.052184,15.00781],[119.072182,15.007514]]],[[[118.686467,11.189592],[118.524042,10.912566],[118.540436,10.90292],[118.704762,11.181475],[118.874599,11.607472],[118.98895,11.985731],[118.969805,11.991519],[118.855579,11.613671],[118.686467,11.189592]]],[[[115.544669,7.146723],[116.250486,7.979279],[116.23523,7.992212],[115.529413,7.159656],[115.544669,7.146723]]],[[[112.307052,3.534873],[111.786901,3.416873],[111.791326,3.397368],[112.312489,3.515623],[112.521474,3.578591],[112.852064,3.732569],[112.843614,3.750696],[112.515016,3.597533],[112.307052,3.534873]]],[[[108.290133,6.012663],[108.308786,6.019877],[108.279563,6.095434],[108.256117,6.227526],[108.2168,6.538165],[108.218763,6.949641],[108.244195,7.073907],[108.224601,7.077917],[108.198768,6.950725],[108.196797,6.537606],[108.236307,6.224768],[108.26004,6.090984],[108.290133,6.012663]]],[[[110.128228,11.368945],[110.055537,11.253354],[110.072467,11.242707],[110.145887,11.359542],[110.207005,11.481288],[110.259018,11.604996],[110.304569,11.783642],[110.328228,11.945713],[110.334243,12.141598],[110.332274,12.240384],[110.312278,12.239982],[110.314245,12.141953],[110.308355,11.948035],[110.284855,11.787051],[110.239823,11.610665],[110.188981,11.489964],[110.128228,11.368945]]],[[[109.845225,15.153166],[109.864809,15.157224],[109.848892,15.233933],[109.789745,15.450683],[109.690053,15.675484],[109.591475,15.836774],[109.532015,15.922592],[109.30888,16.207258],[109.29314,16.194919],[109.515744,15.910958],[109.57456,15.826099],[109.672646,15.665615],[109.77065,15.444688],[109.829516,15.228968],[109.845225,15.153166]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"CL",iso_a3:"CHL",iso_n3:"152"},geometry:{type:"MultiPolygon",coordinates:[[[[-70.418262,-18.345605],[-70.080029,-21.356836],[-70.593359,-23.255469],[-70.392334,-23.565918],[-70.445361,-25.172656],[-70.925781,-27.588672],[-71.519238,-28.926465],[-71.315723,-29.649707],[-71.708936,-30.628027],[-71.452246,-32.65957],[-72.223779,-35.096191],[-73.215967,-37.166895],[-73.662402,-37.341016],[-73.226465,-39.224414],[-73.965869,-41.118262],[-73.624023,-41.773633],[-72.318262,-41.499023],[-72.824072,-41.908789],[-72.499414,-41.980859],[-72.412354,-42.388184],[-72.773242,-42.257715],[-72.758008,-43.039453],[-73.224463,-43.897949],[-73.265088,-44.168652],[-72.663867,-44.436426],[-72.680078,-44.593945],[-73.444971,-45.238184],[-72.933838,-45.452344],[-73.730762,-45.47998],[-73.591846,-45.899121],[-73.845361,-46.566016],[-73.735254,-45.811719],[-73.967578,-46.154102],[-74.392969,-46.217383],[-74.019922,-46.055859],[-73.957178,-45.404395],[-74.157861,-45.767188],[-75.066699,-45.874902],[-74.924463,-46.159668],[-75.706396,-46.705273],[-75.430371,-46.93457],[-75.540332,-46.69873],[-74.98418,-46.512109],[-75.005957,-46.741113],[-74.313574,-46.788184],[-74.158398,-47.18252],[-74.482666,-47.430469],[-74.134082,-47.59082],[-74.654932,-47.702246],[-74.227051,-47.968945],[-73.715869,-47.655469],[-73.391064,-48.145898],[-74.584668,-47.999023],[-74.474414,-48.463965],[-74.009082,-48.475],[-74.341016,-48.595703],[-74.366553,-49.400488],[-73.934961,-49.020898],[-73.836377,-49.609375],[-74.29082,-49.604102],[-73.958594,-49.994727],[-74.62959,-50.194043],[-73.950342,-50.510547],[-74.185596,-50.485352],[-73.978027,-50.827051],[-73.654443,-50.492676],[-73.806543,-50.938379],[-74.139404,-50.817773],[-74.365576,-50.487891],[-74.644482,-50.360938],[-74.685742,-50.662012],[-75.094678,-50.68125],[-74.814746,-51.062891],[-73.939502,-51.266309],[-74.19668,-51.680566],[-73.518164,-52.041016],[-72.600049,-51.799121],[-73.16875,-51.453906],[-72.76123,-51.573242],[-72.489648,-51.763672],[-72.52334,-52.255469],[-72.677051,-52.384668],[-72.79502,-51.949512],[-73.834473,-52.233984],[-74.264941,-52.104883],[-74.014453,-52.639355],[-73.123926,-52.487988],[-73.645215,-52.837012],[-73.122461,-53.073926],[-72.712109,-52.535547],[-71.511279,-52.605371],[-72.727686,-52.762305],[-73.052734,-53.243457],[-72.548926,-53.460742],[-72.278027,-53.132324],[-71.227148,-52.810645],[-71.791455,-53.48457],[-71.941699,-53.234082],[-72.412891,-53.350195],[-71.297754,-53.883398],[-70.795117,-52.76875],[-69.241016,-52.205469],[-68.443359,-52.356641],[-69.960254,-52.008203],[-71.918652,-51.989551],[-72.407666,-51.54082],[-72.340234,-50.681836],[-73.15293,-50.738281],[-73.50127,-50.125293],[-73.554199,-49.463867],[-72.354736,-48.36582],[-72.51792,-47.876367],[-71.699658,-46.651367],[-71.746191,-45.578906],[-71.349316,-45.331934],[-72.063721,-44.771875],[-71.261133,-44.763086],[-71.159717,-44.560254],[-71.82002,-44.383105],[-71.750635,-43.237305],[-72.146436,-42.990039],[-72.108203,-42.251855],[-71.75,-42.046777],[-71.932129,-40.691699],[-71.401562,-38.935059],[-70.858643,-38.604492],[-71.192187,-36.843652],[-70.404785,-36.061719],[-70.555176,-35.246875],[-69.852441,-34.224316],[-69.819629,-33.283789],[-70.084863,-33.201758],[-70.51958,-31.148438],[-69.844287,-30.175],[-70.026807,-29.324023],[-69.656934,-28.413574],[-68.846338,-27.153711],[-68.318652,-26.973242],[-68.591602,-26.47041],[-68.384229,-25.091895],[-68.562012,-24.747363],[-67.356201,-24.033789],[-67.008789,-23.001367],[-67.194873,-22.82168],[-67.879443,-22.822949],[-68.197021,-21.300293],[-68.760547,-20.416211],[-68.462891,-19.432813],[-68.968311,-18.967969],[-69.093945,-18.050488],[-69.510938,-17.506055],[-69.8521,-17.703809],[-69.926367,-18.206055],[-70.418262,-18.345605]],[[-74.385742,-52.922363],[-74.712012,-52.74873],[-73.135205,-53.353906],[-74.385742,-52.922363]]],[[[-68.629932,-52.652637],[-69.414062,-52.48623],[-69.935449,-52.821094],[-70.380127,-52.751953],[-70.329297,-53.377637],[-69.355957,-53.416309],[-70.151123,-53.888086],[-69.044336,-54.406738],[-69.253174,-54.557422],[-70.535303,-54.136133],[-70.531299,-53.627344],[-70.863086,-54.110449],[-70.310986,-54.528516],[-70.797266,-54.327246],[-71.927734,-54.528711],[-68.653223,-54.853613],[-68.629932,-52.652637]]],[[[-67.079932,-55.153809],[-68.301367,-54.980664],[-68.07002,-55.221094],[-67.079932,-55.153809]]],[[[-73.773389,-43.345898],[-73.436328,-42.936523],[-73.789258,-42.585742],[-73.4229,-42.192871],[-73.527832,-41.896289],[-74.03667,-41.795508],[-74.387354,-43.231641],[-73.773389,-43.345898]]],[[[-74.476172,-49.147852],[-74.546094,-48.766895],[-74.89624,-48.733203],[-75.549805,-49.791309],[-75.066016,-49.852344],[-74.723828,-49.423828],[-74.594727,-50.006641],[-74.476172,-49.147852]]],[[[-75.510254,-48.763477],[-75.158496,-48.622656],[-75.391406,-48.019727],[-75.510254,-48.763477]]],[[[-74.567285,-48.591992],[-74.895654,-47.839355],[-75.212891,-48.141699],[-74.923047,-48.626465],[-74.567285,-48.591992]]],[[[-72.923242,-53.481641],[-73.845459,-53.545801],[-73.210645,-53.98584],[-72.76377,-53.864844],[-72.870996,-54.126562],[-72.20542,-53.807422],[-72.923242,-53.481641]]],[[[-74.822949,-51.630176],[-75.105371,-51.788867],[-74.694482,-52.279199],[-74.822949,-51.630176]]],[[[-69.702979,-54.919043],[-69.979785,-55.147461],[-69.411816,-55.444238],[-69.192627,-55.171875],[-68.04834,-55.643164],[-68.458008,-54.959668],[-69.702979,-54.919043]]],[[[-71.390479,-54.032812],[-71.996484,-53.884863],[-72.210449,-54.047754],[-71.948535,-54.300879],[-71.143262,-54.374023],[-71.021924,-54.111816],[-71.390479,-54.032812]]],[[[-73.735352,-44.394531],[-73.994922,-44.140234],[-74.617773,-44.647949],[-74.01626,-45.344922],[-73.728174,-45.195898],[-74.002051,-44.590918],[-73.735352,-44.394531]]],[[[-72.986133,-44.780078],[-72.776367,-44.508594],[-73.207715,-44.334961],[-73.39707,-44.774316],[-72.986133,-44.780078]]],[[[-75.302002,-50.67998],[-75.115332,-50.510449],[-75.427637,-50.480566],[-75.302002,-50.67998]]],[[[-75.106689,-48.836523],[-75.583105,-48.858887],[-75.641162,-49.19541],[-75.106689,-48.836523]]],[[[-74.558643,-51.277051],[-75.153662,-51.278809],[-75.289111,-51.625391],[-74.558643,-51.277051]]],[[[-75.054785,-50.296094],[-74.875977,-50.109961],[-75.32666,-50.011816],[-75.449121,-50.343359],[-75.054785,-50.296094]]],[[[-74.312891,-45.691504],[-74.310547,-45.172656],[-74.689844,-45.662598],[-74.312891,-45.691504]]],[[[-70.991602,-54.867969],[-71.437207,-54.889258],[-70.297852,-55.11377],[-70.991602,-54.867969]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"TD",iso_a3:"TCD",iso_n3:"148"},geometry:{type:"Polygon",coordinates:[[[23.980273,19.496631],[20.147656,21.389258],[15.984082,23.445215],[14.979004,22.996191],[15.181836,21.523389],[15.963184,20.346191],[15.735059,19.904053],[15.474316,16.908398],[13.448242,14.380664],[13.606348,13.70459],[14.063965,13.078516],[14.461719,13.021777],[14.84707,12.5021],[15.132227,10.648486],[15.654883,10.007812],[14.243262,9.979736],[13.977246,9.691553],[15.116211,8.557324],[15.549805,7.787891],[15.480078,7.523779],[15.957617,7.507568],[16.545313,7.865479],[16.784766,7.550977],[17.649414,7.983594],[18.56416,8.045898],[19.108691,8.656152],[18.95625,8.938867],[20.34209,9.1271],[21.682715,10.289844],[21.771484,10.642822],[22.493848,10.99624],[22.860059,10.919678],[22.922656,11.344873],[22.591113,11.579883],[22.352344,12.660449],[21.825293,12.790527],[22.228125,13.32959],[22.106445,13.799805],[22.538574,14.161865],[22.381543,14.550488],[22.932324,15.162109],[22.933887,15.533105],[23.970801,15.721533],[23.980273,19.496631]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"CF",iso_a3:"CAF",iso_n3:"140"},geometry:{type:"Polygon",coordinates:[[[24.147363,8.665625],[23.537305,8.81582],[23.646289,9.8229],[22.860059,10.919678],[22.493848,10.99624],[21.771484,10.642822],[21.682715,10.289844],[20.34209,9.1271],[18.95625,8.938867],[19.108691,8.656152],[18.56416,8.045898],[17.649414,7.983594],[16.784766,7.550977],[16.545313,7.865479],[15.957617,7.507568],[15.480078,7.523779],[14.431152,6.038721],[14.73125,4.602393],[15.063574,4.284863],[15.128711,3.826904],[16.063477,2.908594],[16.183398,2.270068],[16.610742,3.505371],[17.491602,3.687305],[18.610352,3.478418],[18.594141,4.34624],[19.500977,5.12749],[20.558105,4.462695],[22.422168,4.134961],[22.864551,4.723877],[25.065234,4.967432],[25.525098,5.312109],[27.40332,5.10918],[27.143945,5.722949],[26.514258,6.069238],[26.361816,6.635303],[25.278906,7.42749],[24.85332,8.137549],[24.291406,8.291406],[24.147363,8.665625]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"CV",iso_a3:"CPV",iso_n3:"132"},geometry:{type:"MultiPolygon",coordinates:[[[[-25.169824,16.946484],[-25.034668,17.176465],[-25.337109,17.091016],[-25.169824,16.946484]]],[[[-23.444238,15.007959],[-23.748096,15.328516],[-23.705371,14.961328],[-23.444238,15.007959]]],[[[-22.917725,16.237256],[-22.959277,16.045117],[-22.710107,16.043359],[-22.917725,16.237256]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"CA",iso_a3:"CAN",iso_n3:"124"},geometry:{type:"MultiPolygon",coordinates:[[[[-132.655518,54.12749],[-133.048389,54.158936],[-133.079492,53.837012],[-132.347266,53.189209],[-131.957422,53.308691],[-131.667627,54.141357],[-132.534668,53.651709],[-132.166113,53.955225],[-132.655518,54.12749]]],[[[-131.753711,53.195557],[-132.546777,53.1375],[-131.221533,52.153613],[-131.455225,52.701709],[-131.971777,52.879834],[-131.634668,52.922168],[-131.753711,53.195557]]],[[[-127.197314,50.640381],[-127.918066,50.860547],[-128.346045,50.744238],[-128.05835,50.498486],[-127.465918,50.583105],[-127.486523,50.404639],[-127.905859,50.445215],[-127.863916,50.127734],[-127.249805,50.137988],[-127.114307,49.879736],[-126.134082,49.672314],[-126.519141,49.396777],[-125.9354,49.401465],[-125.489453,48.933789],[-124.812646,49.212646],[-125.120703,48.760791],[-123.310645,48.411035],[-125.48208,50.316797],[-127.197314,50.640381]]],[[[-130.025098,55.888232],[-130.048486,55.057275],[-129.795166,55.55957],[-129.560645,55.462549],[-130.430273,54.420996],[-129.626025,54.230273],[-130.335254,53.723926],[-129.563721,53.251465],[-128.959375,53.841455],[-128.532129,53.858105],[-128.675537,53.55459],[-127.927832,53.274707],[-128.905615,53.559326],[-128.85459,53.704541],[-129.171582,53.533594],[-128.365039,52.825781],[-128.053271,52.910693],[-128.271533,52.362988],[-127.940234,52.545166],[-128.357617,52.158887],[-128.102246,51.788428],[-127.791895,52.289355],[-126.951367,52.751025],[-127.193994,52.457666],[-126.713965,52.060693],[-127.437939,52.356152],[-127.795361,52.191016],[-127.850537,51.673193],[-127.668701,51.477588],[-127.338721,51.707373],[-126.691455,51.703418],[-127.419678,51.608057],[-127.708105,51.151172],[-127.057568,50.867529],[-126.517334,51.056836],[-126.514355,50.679395],[-125.904102,50.704932],[-126.447461,50.587744],[-126.094336,50.497607],[-125.058789,50.513867],[-124.859863,50.872412],[-125.056689,50.418652],[-124.782373,50.020117],[-124.141602,49.792676],[-123.880127,50.173633],[-123.874414,49.736816],[-123.582471,49.68125],[-124.028613,49.602881],[-123.530566,49.397314],[-123.1875,49.680322],[-123.276758,49.343945],[-122.879102,49.398926],[-123.196338,49.147705],[-122.78877,48.993018],[-114.585107,48.993066],[-106.483838,48.993115],[-97.529834,48.993164],[-95.162061,48.991748],[-95.155273,49.369678],[-94.620898,48.742627],[-92.99624,48.611816],[-91.518311,48.058301],[-90.916064,48.209131],[-89.455664,47.99624],[-88.378174,48.303076],[-84.875977,46.899902],[-84.561768,46.457373],[-84.149463,46.542773],[-83.977783,46.084912],[-83.615967,46.116846],[-83.592676,45.817139],[-82.551074,45.347363],[-82.137842,43.570898],[-82.545312,42.624707],[-83.149658,42.141943],[-82.690039,41.675195],[-79.036719,42.802344],[-79.171875,43.466553],[-78.72041,43.624951],[-76.819971,43.628809],[-76.151172,44.303955],[-74.708887,45.003857],[-73.973828,45.345117],[-74.315088,45.531055],[-73.476611,45.738232],[-72.981006,46.209717],[-71.87959,46.686816],[-71.267773,46.795947],[-70.705859,47.139795],[-69.994434,47.739893],[-69.865527,48.172266],[-71.018262,48.455615],[-69.673877,48.19917],[-68.281934,49.197168],[-67.372021,49.348438],[-66.495508,50.211865],[-62.71543,50.30166],[-61.724854,50.104053],[-59.886328,50.316406],[-58.510352,51.295068],[-56.975977,51.457666],[-55.695215,52.137793],[-56.011719,52.394482],[-55.746484,52.474561],[-56.324902,52.544531],[-55.802832,52.643164],[-55.797949,53.211963],[-56.46499,53.765039],[-57.331738,53.469092],[-57.416064,54.162744],[-58.19209,54.228174],[-57.935986,54.091162],[-60.329492,53.266113],[-60.100293,53.486963],[-60.39541,53.65332],[-58.633203,54.049561],[-57.404492,54.590869],[-57.962451,54.875732],[-58.780176,54.838379],[-59.25957,55.199951],[-59.837793,54.813965],[-59.437891,55.175928],[-59.758789,55.30957],[-60.617139,55.060205],[-60.341016,55.784668],[-61.449512,55.995703],[-61.364697,56.216016],[-61.713086,56.230957],[-61.425293,56.360645],[-62.497266,56.801709],[-61.371631,56.680811],[-61.33374,57.010596],[-62.495557,57.489209],[-61.967969,57.611914],[-61.958643,57.911768],[-62.48623,58.154053],[-63.261523,58.014697],[-62.593848,58.474023],[-63.537061,58.329932],[-62.873877,58.672461],[-63.248437,59.068311],[-63.971143,59.053809],[-63.415137,59.194385],[-63.945459,59.380176],[-64.283496,60.064062],[-64.768457,60.012109],[-64.499414,60.268262],[-64.817334,60.331055],[-65.028174,59.770703],[-65.433398,59.776514],[-65.038232,59.387891],[-65.475098,59.470312],[-65.383545,59.060205],[-66.043066,58.820654],[-66.002393,58.431201],[-66.362402,58.791162],[-67.678271,57.991113],[-68.021045,58.485303],[-68.413574,58.051758],[-69.04082,57.90249],[-68.356543,58.163232],[-68.381152,58.743506],[-68.698193,58.904541],[-70.154346,58.760596],[-69.531641,58.869238],[-69.344043,59.303076],[-69.681885,59.341748],[-69.733936,59.918018],[-70.654834,60.026221],[-69.67373,60.075879],[-69.50332,61.04043],[-69.992432,60.856494],[-71.422705,61.158936],[-71.638281,61.617188],[-72.215869,61.587256],[-72.686963,62.124561],[-73.705078,62.473145],[-74.632568,62.115674],[-77.372412,62.57251],[-78.133398,62.282275],[-77.514355,61.556299],[-78.181348,60.819141],[-77.589551,60.808594],[-77.349072,59.578955],[-77.726172,59.675879],[-78.515088,58.682373],[-76.809814,57.657959],[-76.604053,56.199561],[-77.775293,55.29126],[-79.712354,54.671826],[-78.996045,54.00249],[-78.448096,52.261377],[-78.981641,51.774561],[-78.903174,51.200293],[-79.338672,51.628174],[-79.737451,51.186279],[-79.3479,50.762646],[-80.103564,51.282861],[-80.851221,51.125],[-80.443311,51.388574],[-80.588037,51.667236],[-81.827881,52.224219],[-81.599414,52.432617],[-82.291553,53.030713],[-82.393262,55.067822],[-83.910596,55.314648],[-85.365283,55.079297],[-85.559326,55.540186],[-87.482422,56.021289],[-88.948486,56.851318],[-90.897461,57.256934],[-92.798145,56.921973],[-92.432812,57.320312],[-93.17876,58.725635],[-94.123193,58.736719],[-94.332227,58.297363],[-94.287061,58.716016],[-94.957324,59.068848],[-94.761719,60.498242],[-93.312012,61.767285],[-93.581787,61.942041],[-92.905518,62.215137],[-93.205371,62.364941],[-92.527979,62.168408],[-92.551416,62.546729],[-91.93584,62.592383],[-92.361279,62.819385],[-90.698584,63.063867],[-90.970068,63.442773],[-91.841846,63.697559],[-92.465088,63.555078],[-92.156885,63.691699],[-93.559814,63.865283],[-93.696338,64.147168],[-90.811914,63.580908],[-90.154736,63.689648],[-90.04165,64.140869],[-89.131543,63.968506],[-88.105615,64.183301],[-87.027539,65.198096],[-88.974023,65.348291],[-89.924072,65.780273],[-91.427246,65.9479],[-89.749414,65.936035],[-87.452881,65.338965],[-85.95874,66.119043],[-86.708154,66.523047],[-85.603857,66.568262],[-83.869043,66.213574],[-84.223047,66.682471],[-85.113721,66.906934],[-84.538477,66.972803],[-83.406445,66.37124],[-81.467578,67.069873],[-81.294336,67.497412],[-82.552686,68.446484],[-81.281543,68.657227],[-81.95791,68.883643],[-81.377832,69.185645],[-82.227539,69.248877],[-82.618359,69.691064],[-85.507373,69.845264],[-84.867578,68.77334],[-85.643164,68.699707],[-86.560791,67.482129],[-87.359375,67.177246],[-88.313818,67.950342],[-88.346973,68.288281],[-87.813574,68.345703],[-88.223535,68.915039],[-89.279541,69.255469],[-90.204785,68.257471],[-91.237207,69.285547],[-90.415576,69.456982],[-92.887793,69.668213],[-91.976709,70.038672],[-92.320508,70.235352],[-91.564062,70.178271],[-94.734863,71.982959],[-95.872314,71.573145],[-95.564258,71.336768],[-96.446582,71.239893],[-95.878613,70.548975],[-96.551367,70.210303],[-95.964941,69.802783],[-93.532275,69.480908],[-94.600439,68.803223],[-93.852441,69.000342],[-93.448926,68.618896],[-95.460693,68.021387],[-95.25874,67.262549],[-95.399658,66.949463],[-96.036865,66.9375],[-95.787549,66.616797],[-96.422559,67.051758],[-95.418896,67.013232],[-96.369141,67.509766],[-95.970312,68.249121],[-96.72207,68.03877],[-96.430664,68.310596],[-97.410352,68.496533],[-98.650488,68.363525],[-98.192529,67.922998],[-97.206543,67.855078],[-97.454932,67.616992],[-98.631543,68.072559],[-98.412109,67.807178],[-98.920459,67.725781],[-102.320361,67.735645],[-103.474121,68.115039],[-104.486816,68.063184],[-106.164453,68.919873],[-108.313477,68.610791],[-108.718115,68.297461],[-107.73418,68.17373],[-105.750195,68.592285],[-107.958398,67.818604],[-107.259473,66.398535],[-108.496045,67.092285],[-107.988721,67.256396],[-110.073926,67.99292],[-112.503027,67.681934],[-115.133203,67.819189],[-115.127051,68.132031],[-113.964404,68.399072],[-115.442285,68.940918],[-117.226953,68.913428],[-122.070068,69.816162],[-123.025781,69.81001],[-123.528418,69.389355],[-124.338086,69.364844],[-124.555029,70.151221],[-125.524951,69.351563],[-127.991016,70.573828],[-127.683789,70.260352],[-128.853027,69.751025],[-128.898926,69.966162],[-130.117627,69.720068],[-130.970654,69.209082],[-131.063428,69.450684],[-131.788379,69.431982],[-133.196826,68.739844],[-132.81748,69.205762],[-129.648291,69.997754],[-129.675635,70.192969],[-134.174316,69.252832],[-134.408936,69.681787],[-135.691455,69.311182],[-135.939014,68.97417],[-135.258838,68.684326],[-141.002148,69.650781],[-141.002148,64.975537],[-141.002148,60.300244],[-139.079248,60.343701],[-139.185156,60.083594],[-137.438574,58.903125],[-135.475928,59.793262],[-133.401123,58.410889],[-131.824268,56.58999],[-130.097852,56.109277],[-130.025098,55.888232]]],[[[-109.815967,78.650391],[-110.877588,78.735059],[-113.223047,78.2979],[-109.484473,78.316406],[-109.815967,78.650391]]],[[[-110.458057,78.103223],[-113.215186,77.903516],[-112.372656,77.364111],[-110.198486,77.524512],[-110.865625,77.834131],[-109.622266,78.074756],[-110.458057,78.103223]]],[[[-115.55127,77.363281],[-116.511328,77.547607],[-116.843555,77.339551],[-119.090186,77.305078],[-122.519385,76.353174],[-122.533057,75.950928],[-120.848389,76.182666],[-119.912891,75.858838],[-117.880811,76.805078],[-117.233594,76.281543],[-115.55127,77.363281]]],[[[-108.292383,76.057129],[-109.098242,76.811865],[-110.314453,76.369385],[-108.947168,75.541797],[-111.052686,75.548535],[-112.697607,76.201709],[-114.998486,76.497461],[-115.822168,76.27002],[-114.778613,76.172607],[-116.209863,76.194434],[-116.664551,75.957568],[-114.991504,75.896338],[-117.163623,75.644873],[-115.141846,75.678516],[-117.565234,75.23335],[-115.728857,74.968115],[-114.451758,75.087891],[-114.016504,75.434277],[-113.711768,75.068604],[-111.093457,75.256299],[-114.312695,74.715088],[-112.519336,74.416846],[-108.831299,75.064893],[-107.153418,74.927148],[-106.092627,75.089453],[-105.632666,75.945361],[-106.677002,76.02373],[-106.913525,75.679639],[-108.292383,76.057129]]],[[[-114.521533,72.59292],[-114.051709,73.070996],[-114.638232,73.372656],[-118.133105,72.632812],[-118.987695,71.764258],[-117.742334,71.659326],[-117.935645,71.39209],[-115.303418,71.493701],[-118.269092,71.034717],[-117.587061,70.629541],[-113.757275,70.690723],[-111.632568,70.308838],[-117.19541,70.054053],[-116.513477,69.424609],[-113.694141,69.19502],[-113.127734,68.494141],[-109.472119,68.676709],[-107.439893,69.002148],[-106.659082,69.4396],[-104.571436,68.872119],[-101.857129,69.023975],[-102.045947,69.464844],[-103.120215,69.20459],[-103.464893,69.644482],[-102.621094,69.551514],[-102.182129,69.845947],[-100.982373,69.679883],[-101.042676,70.110791],[-103.58457,70.630859],[-104.514795,71.064258],[-105.415137,72.78833],[-106.482129,73.196191],[-108.029053,73.34873],[-108.237402,73.149902],[-107.306006,71.894678],[-107.812842,71.626172],[-110.008447,72.983643],[-110.66084,73.008203],[-110.205127,72.661279],[-111.675098,72.300146],[-111.269727,72.713721],[-112.753613,72.986035],[-114.521533,72.59292]]],[[[-119.736328,74.112646],[-121.50415,74.545117],[-124.69624,74.348193],[-123.797266,73.768164],[-125.845312,71.978662],[-124.007764,71.677441],[-123.095654,71.093799],[-120.619336,71.505762],[-120.179883,72.212646],[-115.446875,73.438867],[-117.514844,74.231738],[-119.736328,74.112646]]],[[[-69.488867,83.016797],[-72.81167,83.081201],[-72.658691,82.721631],[-74.41416,83.013135],[-77.124902,83.008545],[-76.009375,82.535156],[-77.618066,82.89585],[-80.154932,82.911133],[-78.748779,82.679395],[-81.010156,82.779053],[-82.447559,82.39502],[-79.465625,81.851123],[-84.896826,82.449414],[-86.615625,82.218555],[-85.044824,81.982812],[-88.063184,82.096484],[-91.647559,81.683838],[-89.82168,81.634863],[-90.416309,81.405371],[-87.597021,81.52583],[-89.673682,81.328613],[-89.623047,81.032471],[-84.941211,81.28623],[-89.166895,80.941309],[-88.003662,80.675391],[-83.288818,81.147949],[-86.250342,80.565771],[-81.007031,80.654883],[-76.885107,81.430273],[-78.716211,80.95166],[-76.862988,80.864795],[-82.987012,80.322607],[-80.475928,79.60625],[-83.723633,80.228955],[-86.498535,80.258252],[-86.420752,79.845215],[-83.575879,79.053662],[-84.412012,78.996582],[-81.750098,78.975781],[-83.271436,78.770312],[-86.80791,78.774365],[-87.551758,78.176611],[-85.920068,78.342871],[-85.585938,78.10957],[-84.783203,78.527588],[-84.222705,78.176025],[-85.547559,77.927686],[-85.289355,77.559033],[-83.779395,77.532617],[-82.710352,77.849512],[-83.721289,77.414209],[-84.738672,77.361035],[-86.755078,77.863721],[-88.016992,77.784717],[-86.812256,77.184912],[-89.499756,76.826807],[-89.369629,76.474463],[-88.545801,76.420898],[-88.49585,76.772852],[-88.395996,76.405273],[-87.497559,76.386279],[-87.489795,76.58584],[-86.680225,76.376611],[-86.453711,76.584863],[-85.14126,76.30459],[-84.275342,76.356543],[-84.223779,76.675342],[-83.885693,76.453125],[-82.233154,76.46582],[-82.529834,76.723291],[-80.799707,76.173584],[-78.284326,76.57124],[-78.288867,76.977979],[-82.056787,77.296533],[-81.659082,77.525439],[-78.708496,77.342139],[-78.012598,77.946045],[-75.865967,78.009814],[-75.193457,78.327734],[-76.416113,78.511523],[-74.486328,78.750098],[-78.581641,79.075],[-74.640918,79.035547],[-76.898828,79.512305],[-73.361523,79.504004],[-74.394482,79.874072],[-71.387842,79.761768],[-70.568408,80.093701],[-72.055957,80.123242],[-70.264893,80.233594],[-70.712598,80.5396],[-69.550684,80.383252],[-64.780078,81.492871],[-68.688525,81.293311],[-61.615381,82.184424],[-63.641016,82.812598],[-68.469336,82.653369],[-66.422559,82.926855],[-69.488867,83.016797]]],[[[-95.484375,77.791992],[-95.987061,77.484131],[-93.543945,77.46665],[-93.300977,77.739795],[-95.484375,77.791992]]],[[[-93.542578,75.02793],[-94.878174,75.630029],[-96.599609,75.031787],[-94.534521,74.636719],[-93.573096,74.668848],[-93.542578,75.02793]]],[[[-100.001904,73.945898],[-100.962988,73.791406],[-100.52168,73.449316],[-101.523193,73.486377],[-99.825146,73.213867],[-100.536377,73.197852],[-100.128125,72.906689],[-101.273193,72.72168],[-102.204004,73.077295],[-102.70874,72.764502],[-98.662891,71.3021],[-98.322705,71.852344],[-97.582275,71.629688],[-96.613428,71.833838],[-96.445605,72.552441],[-97.636328,73.027637],[-98.421777,72.941016],[-97.170508,73.824854],[-99.157959,73.731592],[-100.001904,73.945898]]],[[[-84.919629,65.261084],[-85.554688,65.918652],[-86.2521,64.136865],[-87.151904,63.585645],[-85.768945,63.700342],[-85.392627,63.119678],[-83.303955,64.143799],[-81.046387,63.461572],[-80.302051,63.762207],[-80.828955,64.089941],[-81.887109,64.016406],[-82.05,64.644287],[-84.501123,65.458447],[-84.919629,65.261084]]],[[[-97.700928,76.466504],[-98.71084,76.693848],[-98.890332,76.465576],[-100.829736,76.523877],[-99.541064,76.146289],[-99.865479,75.924219],[-101.415186,76.424902],[-102.104688,76.331201],[-100.972803,75.798438],[-102.144727,75.875049],[-102.587402,75.513672],[-99.19458,75.698389],[-100.711914,75.406348],[-100.234375,75.007715],[-97.674316,75.127295],[-97.700928,76.466504]]],[[[-103.426025,79.315625],[-105.514551,79.24248],[-104.895508,78.808154],[-104.151953,78.989893],[-103.371582,78.736328],[-104.763574,78.35166],[-102.731348,78.371045],[-100.274658,77.832715],[-99.166406,77.856934],[-99.609424,78.583057],[-101.703662,79.078906],[-102.576172,78.879395],[-103.426025,79.315625]]],[[[-91.885547,81.132861],[-94.220117,81.330762],[-93.286719,81.100293],[-95.514746,80.838135],[-93.92793,80.55918],[-95.926953,80.720654],[-96.394092,80.315039],[-94.262598,80.194873],[-96.773242,80.135791],[-96.589062,79.91665],[-95.739355,79.660156],[-94.401855,79.736328],[-95.662891,79.527344],[-95.103174,79.289893],[-91.299902,79.372705],[-94.1146,78.928906],[-91.866895,78.542676],[-92.35127,78.312891],[-89.525684,78.159619],[-90.037109,78.606836],[-88.822412,78.185889],[-88.040186,78.995312],[-87.617383,78.676318],[-85.042139,79.28457],[-85.647852,79.611426],[-87.295166,79.580176],[-87.675,80.372119],[-88.857324,80.166211],[-91.885547,81.132861]]],[[[-94.294971,76.912451],[-95.849512,77.066211],[-96.880713,76.73833],[-95.273877,76.264404],[-93.091748,76.354004],[-91.549121,74.655566],[-90.880225,74.817773],[-89.558691,74.554736],[-88.534961,74.831738],[-88.423047,74.494141],[-84.425537,74.508105],[-83.531885,74.585693],[-83.52207,74.901465],[-82.735791,74.530273],[-80.262744,74.584473],[-80.347754,74.902979],[-79.401416,74.917627],[-80.381982,75.03418],[-79.509082,75.259814],[-80.321973,75.629102],[-83.931982,75.818945],[-85.951465,75.39502],[-88.644971,75.658447],[-88.916699,75.453955],[-91.407324,76.220068],[-89.284521,76.301611],[-91.415088,76.455859],[-90.542627,76.495752],[-91.305029,76.680762],[-93.53457,76.447705],[-93.230029,76.770264],[-94.294971,76.912451]]],[[[-96.204492,78.531299],[-98.332617,78.773535],[-96.989648,77.806006],[-94.934277,78.075635],[-94.915381,78.390527],[-96.204492,78.531299]]],[[[-93.17085,74.160986],[-94.973535,74.041406],[-94.697607,73.663574],[-95.63291,73.695459],[-95.007861,72.012793],[-94.037549,72.02876],[-93.555176,72.421143],[-94.211328,72.756934],[-92.11792,72.753809],[-90.381396,73.824756],[-93.17085,74.160986]]],[[[-97.439453,69.642676],[-98.200488,69.796973],[-98.041357,69.456641],[-98.545996,69.5729],[-99.494678,68.95957],[-96.401562,68.470703],[-95.267773,68.826074],[-97.439453,69.642676]]],[[[-61.105176,45.944727],[-60.494531,46.270264],[-60.408203,47.003516],[-61.408643,46.170361],[-61.449805,45.716211],[-60.672949,45.59082],[-59.842188,45.941553],[-60.297949,46.31123],[-60.737891,45.751416],[-61.059033,45.703369],[-60.865234,45.983496],[-61.105176,45.944727]]],[[[-67.124854,45.169434],[-66.439844,45.095898],[-66.026562,45.417578],[-65.884473,45.2229],[-64.778516,45.638428],[-64.632715,45.946631],[-64.314648,45.835693],[-64.873145,45.35459],[-63.368018,45.364795],[-64.135498,45.023047],[-64.448145,45.337451],[-66.090625,44.504932],[-65.868018,44.568799],[-66.125732,43.813818],[-65.481689,43.518066],[-64.286084,44.550342],[-63.609766,44.47998],[-63.604004,44.683203],[-61.031543,45.291748],[-61.955518,45.868164],[-62.750098,45.648242],[-64.541504,46.240332],[-64.831396,47.060791],[-65.318896,47.101221],[-64.703223,47.724854],[-65.607227,47.67002],[-66.704395,48.022461],[-65.926709,48.188867],[-65.259424,48.02124],[-64.348828,48.423193],[-64.513721,48.841113],[-64.216211,48.873633],[-64.836328,49.191748],[-66.178174,49.213135],[-68.238184,48.626416],[-70.519482,47.03252],[-71.261182,46.75625],[-72.109277,46.551221],[-73.15957,46.010059],[-73.558105,45.425098],[-74.708887,45.003857],[-71.517529,45.007568],[-71.327295,45.290088],[-70.865039,45.270703],[-69.242871,47.462988],[-68.937207,47.21123],[-68.235498,47.345947],[-67.806787,47.082812],[-67.802246,45.727539],[-67.124854,45.169434]]],[[[-55.45874,51.536523],[-56.025586,51.568359],[-57.035937,51.01084],[-57.791309,49.48999],[-58.213379,49.38667],[-57.990527,48.987939],[-58.403662,49.084326],[-58.716455,48.598047],[-58.841797,48.746436],[-59.167676,48.558496],[-58.330225,48.522119],[-59.320654,47.736914],[-59.116943,47.570703],[-58.336865,47.730859],[-56.774121,47.56499],[-55.85791,47.819189],[-56.127246,47.502832],[-55.576123,47.465234],[-54.784619,47.664746],[-55.919238,47.016895],[-55.788525,46.867236],[-54.488135,47.403857],[-54.191846,47.859814],[-53.849512,47.440332],[-54.17373,46.880371],[-53.597363,47.145996],[-53.589795,46.638867],[-53.114844,46.655811],[-52.653662,47.549414],[-52.782422,47.769434],[-53.169824,47.512109],[-52.866016,48.112988],[-53.672363,47.648242],[-53.86958,48.019678],[-53.027588,48.634717],[-54.114453,48.393604],[-53.706348,48.655518],[-54.161279,48.787695],[-53.619434,49.321631],[-54.448242,49.329443],[-54.502197,49.527344],[-55.353174,49.079443],[-55.229541,49.508154],[-56.087305,49.451953],[-55.869824,49.670166],[-56.140186,49.619141],[-55.50293,49.983154],[-56.161279,49.940137],[-56.179395,50.11499],[-56.822168,49.613477],[-55.8,51.033301],[-56.031104,51.328369],[-55.45874,51.536523]]],[[[-86.589355,71.010791],[-85.023389,71.353223],[-86.218457,71.899121],[-86.656299,72.724023],[-84.946777,73.721631],[-85.950781,73.850146],[-88.705176,73.403271],[-89.861523,72.411914],[-89.805371,71.462305],[-87.140088,71.011621],[-89.455908,71.061719],[-88.782715,70.494482],[-87.838135,70.246582],[-86.396875,70.465332],[-85.780029,70.03667],[-81.564697,69.942725],[-80.921729,69.730908],[-81.651953,70.094629],[-78.889648,69.97749],[-79.066406,70.603564],[-75.647754,69.212549],[-76.557227,69.009473],[-76.585059,68.69873],[-74.716699,69.045508],[-74.892969,68.808154],[-74.270117,68.541211],[-73.822119,68.685986],[-72.22002,67.254297],[-74.416406,66.16709],[-73.550781,65.485254],[-75.798682,65.29751],[-75.4521,64.841602],[-75.82832,65.227051],[-77.326709,65.453125],[-78.095605,64.939258],[-78.045215,64.499268],[-76.856152,64.237646],[-74.694727,64.496582],[-74.681396,64.830664],[-74.064795,64.424658],[-73.271289,64.58252],[-72.498438,63.823486],[-71.380859,63.580322],[-71.992236,63.416162],[-71.347266,63.066113],[-69.604736,62.767725],[-68.535889,62.255615],[-66.123877,61.893066],[-65.980176,62.208887],[-68.911084,63.703223],[-67.722559,63.422754],[-67.893262,63.73374],[-66.697461,63.069531],[-66.65498,63.264746],[-65.108496,62.626465],[-65.162793,62.932617],[-64.672363,62.921973],[-65.191846,63.764258],[-64.664648,63.245361],[-64.410937,63.706348],[-65.580322,64.293848],[-65.074609,64.43667],[-65.529346,64.504785],[-65.274805,64.631543],[-66.635498,65.000342],[-66.697412,64.815186],[-67.117969,65.440381],[-67.936768,65.564893],[-68.748926,66.200049],[-67.350439,65.929736],[-67.883398,66.467432],[-67.225391,66.310254],[-66.986328,66.62749],[-66.063721,66.132715],[-65.656348,66.204736],[-65.825732,65.996924],[-64.445361,66.317139],[-65.401611,65.764014],[-64.555078,65.116602],[-64.269678,65.400781],[-63.606592,64.928076],[-63.45874,65.853027],[-62.658887,65.639941],[-62.624121,66.01626],[-61.991602,66.035303],[-62.553125,66.406836],[-61.570801,66.3729],[-62.12334,66.643066],[-61.353418,66.689209],[-62.123584,67.046729],[-63.701562,66.822363],[-63.040137,67.23501],[-64.699951,67.350537],[-63.850195,67.566064],[-65.021094,67.787549],[-64.922314,68.031641],[-65.40127,67.674854],[-65.942383,68.070947],[-66.443945,67.833838],[-66.212402,68.28042],[-66.923096,68.065723],[-66.742725,68.457764],[-69.319092,68.856982],[-67.883203,68.783984],[-67.832617,69.065967],[-69.040625,69.097998],[-68.406299,69.232227],[-66.707422,69.168213],[-67.236963,69.460107],[-69.250781,69.511914],[-67.221631,69.730713],[-67.363672,70.034424],[-68.059082,70.317236],[-68.744043,69.941406],[-68.778223,70.203564],[-70.057715,70.042627],[-68.363525,70.48125],[-69.949805,70.84502],[-71.429443,70.127783],[-71.275879,70.500293],[-71.890186,70.431543],[-70.672656,71.052197],[-72.632715,70.830762],[-71.229395,71.33877],[-72.901953,71.677783],[-73.180615,71.282861],[-73.712842,71.587598],[-74.197266,71.40415],[-73.814062,71.771436],[-74.996191,71.218115],[-74.700781,71.675586],[-75.204785,71.709131],[-74.209326,71.978662],[-74.903174,72.100488],[-75.922803,71.717236],[-75.052686,72.226367],[-75.704297,72.571533],[-77.753223,72.724756],[-78.484277,72.470605],[-77.516504,72.177783],[-78.699268,72.351416],[-78.585107,71.880615],[-79.831299,72.446289],[-80.925146,71.907666],[-80.611475,72.45083],[-81.229346,72.311719],[-80.277246,72.770166],[-81.946143,73.729834],[-85.454736,73.105469],[-84.256641,72.796729],[-85.262109,72.954004],[-85.649902,72.722168],[-84.28374,72.044482],[-85.321875,72.233154],[-85.911621,71.986523],[-84.699414,71.631445],[-84.82373,71.028613],[-86.589355,71.010791]]],[[[-61.801123,49.093896],[-62.858545,49.705469],[-64.485205,49.886963],[-63.041504,49.224951],[-61.801123,49.093896]]],[[[-63.811279,46.468701],[-63.993555,47.061572],[-64.388037,46.640869],[-63.641016,46.230469],[-62.978467,46.316357],[-63.02207,46.066602],[-62.531348,45.977295],[-62.02373,46.421582],[-63.811279,46.468701]]],[[[-82.000488,62.954199],[-83.376416,62.904932],[-83.910498,62.45415],[-83.698877,62.160254],[-82.568262,62.403223],[-82.000488,62.954199]]],[[[-79.545312,62.411719],[-80.260059,62.109033],[-79.816113,61.594629],[-79.323926,62.026074],[-79.545312,62.411719]]],[[[-75.675879,68.32251],[-76.595801,68.278955],[-77.125879,67.94707],[-76.944189,67.250293],[-75.201953,67.45918],[-75.078125,68.173145],[-75.675879,68.32251]]],[[[-79.537305,73.654492],[-80.848877,73.72124],[-79.820703,72.826318],[-76.183398,72.843066],[-77.206543,73.499561],[-79.537305,73.654492]]],[[[-80.731689,52.747266],[-81.135596,53.205811],[-82.039258,53.049902],[-80.731689,52.747266]]],[[[-78.935596,56.266064],[-79.272412,56.600439],[-79.536328,56.180078],[-79.458887,56.539746],[-79.9875,55.892139],[-79.544727,56.128369],[-79.764746,55.806787],[-79.495117,55.874756],[-79.182129,56.212158],[-79.175488,55.885059],[-78.935596,56.266064]]],[[[-89.833252,77.267627],[-91.019043,77.643896],[-90.993213,77.329492],[-89.833252,77.267627]]],[[[-98.791602,79.981104],[-100.053271,80.093359],[-98.945215,79.724072],[-98.791602,79.981104]]],[[[-105.288916,72.919922],[-104.5875,73.578076],[-106.613965,73.695605],[-106.921533,73.479834],[-105.288916,72.919922]]],[[[-102.227344,76.014893],[-102.728027,76.307031],[-104.350635,76.182324],[-103.314746,75.764209],[-102.227344,76.014893]]],[[[-104.022852,76.583105],[-104.35752,76.334619],[-103.311377,76.347559],[-104.022852,76.583105]]],[[[-118.328125,75.579688],[-117.633691,76.115088],[-119.39458,75.617334],[-118.328125,75.579688]]],[[[-113.832471,77.754639],[-114.330371,78.077539],[-114.98042,77.91543],[-113.832471,77.754639]]],[[[-130.236279,53.958545],[-130.447998,54.089014],[-130.703174,53.892236],[-130.236279,53.958545]]],[[[-128.552441,52.939746],[-129.033252,53.279932],[-129.175928,52.964941],[-128.746338,52.763379],[-128.678955,52.289648],[-128.552441,52.939746]]],[[[-73.566504,45.469092],[-73.476074,45.704736],[-73.960547,45.441406],[-73.566504,45.469092]]],[[[-68.233789,60.240918],[-67.818848,60.449512],[-68.087598,60.587842],[-68.233789,60.240918]]],[[[-64.832617,61.366064],[-64.789648,61.662207],[-65.432129,61.649512],[-64.832617,61.366064]]],[[[-79.063086,75.925879],[-79.009326,76.145898],[-79.63877,75.84292],[-79.063086,75.925879]]],[[[-79.384277,51.951953],[-79.271289,52.086816],[-79.64375,52.010059],[-79.384277,51.951953]]],[[[-73.621729,67.783838],[-73.49375,68.000635],[-74.706543,68.06709],[-74.573389,67.828662],[-73.621729,67.783838]]],[[[-77.876709,63.470557],[-78.536768,63.42373],[-77.942432,63.114404],[-77.532715,63.233643],[-77.876709,63.470557]]],[[[-98.270361,73.868506],[-97.698242,74.108691],[-99.416992,73.89541],[-98.270361,73.868506]]],[[[-79.430664,69.787793],[-80.794775,69.689258],[-79.977832,69.509668],[-79.430664,69.787793]]],[[[-76.995361,69.14375],[-76.668848,69.366162],[-77.187549,69.440088],[-76.995361,69.14375]]],[[[-83.725977,65.796729],[-84.407178,66.131006],[-84.118262,65.771777],[-83.332422,65.631055],[-83.725977,65.796729]]],[[[-101.693555,77.696582],[-101.193213,77.829785],[-102.447705,77.880615],[-101.693555,77.696582]]],[[[-96.078564,75.510107],[-96.367822,75.654639],[-96.915137,75.379688],[-96.078564,75.510107]]],[[[-104.119922,75.036328],[-104.346191,75.429932],[-104.887402,75.147754],[-104.119922,75.036328]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"CM",iso_a3:"CMR",iso_n3:"120"},geometry:{type:"Polygon",coordinates:[[[8.555859,4.755225],[8.574414,4.526221],[8.918262,4.55376],[9.000098,4.091602],[9.688867,4.056396],[9.556152,3.798047],[9.948438,3.079053],[9.800781,2.304443],[11.328711,2.167432],[13.293555,2.161572],[14.578906,2.199121],[16.059375,1.676221],[16.183398,2.270068],[16.063477,2.908594],[15.128711,3.826904],[15.063574,4.284863],[14.73125,4.602393],[14.431152,6.038721],[15.480078,7.523779],[15.549805,7.787891],[15.116211,8.557324],[13.977246,9.691553],[14.243262,9.979736],[15.654883,10.007812],[15.132227,10.648486],[14.84707,12.5021],[14.461719,13.021777],[14.063965,13.078516],[14.197461,12.383789],[14.619727,12.150977],[14.575391,11.532422],[13.699902,10.873145],[12.782227,8.817871],[12.233398,8.282324],[11.861426,7.116406],[11.237305,6.450537],[10.60625,7.063086],[9.779883,6.760156],[8.997168,5.917725],[8.555859,4.755225]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"KH",iso_a3:"KHM",iso_n3:"116"},geometry:{type:"Polygon",coordinates:[[[107.519434,14.705078],[106.938086,14.327344],[106.501465,14.578223],[105.978906,14.343018],[106.066797,13.921191],[105.183301,14.34624],[103.199414,14.332617],[102.336328,13.560303],[102.933887,11.706689],[103.152832,10.913721],[103.532422,11.14668],[103.721875,10.890137],[103.587109,10.552197],[104.426367,10.41123],[104.850586,10.534473],[105.045703,10.911377],[105.755078,10.98999],[106.163965,10.794922],[105.851465,11.63501],[106.399219,11.687012],[106.413867,11.948438],[107.506445,12.364551],[107.605469,13.437793],[107.331445,14.126611],[107.519434,14.705078]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"MM",iso_a3:"MMR",iso_n3:"104"},geometry:{type:"MultiPolygon",coordinates:[[[[100.122461,20.31665],[100.249316,20.730273],[100.622949,20.85957],[100.703125,21.251367],[101.138867,21.56748],[101.079785,21.755859],[100.147656,21.480518],[99.917676,22.028027],[99.192969,22.125977],[99.507129,22.959131],[98.86377,23.19126],[98.676758,23.905078],[98.835059,24.121191],[97.564551,23.911035],[97.583301,24.774805],[97.819531,25.251855],[98.65625,25.863574],[98.738477,26.785742],[98.651172,27.572461],[98.298828,27.550098],[98.061621,28.185889],[97.599219,28.517041],[97.322461,28.217969],[97.335156,27.937744],[96.876855,27.586719],[97.102051,27.11543],[96.731641,27.331494],[96.19082,27.261279],[95.128711,26.597266],[95.132422,26.04126],[94.579883,25.319824],[94.707617,25.04873],[94.127637,23.876465],[93.32627,24.064209],[93.151172,22.230615],[92.574902,21.978076],[92.631641,21.306201],[92.17959,21.293115],[92.324121,20.791846],[92.722852,20.295605],[92.735645,20.562695],[92.82832,20.177588],[93.066797,20.377637],[93.129492,19.858008],[93.25,20.070117],[93.707031,19.912158],[93.998145,19.440869],[93.824902,19.238477],[93.493066,19.369482],[93.929199,18.899658],[94.044922,19.287402],[94.588965,17.569336],[94.223828,16.016455],[94.70332,16.511914],[94.661523,15.904395],[94.893164,16.182812],[94.942578,15.818262],[95.176953,15.825684],[95.346777,16.097607],[95.389551,15.722754],[96.324316,16.444434],[96.189063,16.768311],[96.431152,16.504932],[96.76543,16.710352],[96.851465,17.401025],[97.375879,16.522949],[97.725977,16.568555],[97.584277,16.01958],[97.812305,14.858936],[98.110645,13.712891],[98.200391,13.980176],[98.575977,13.161914],[98.636328,11.738379],[98.875977,11.719727],[98.464941,10.67583],[98.562598,10.034961],[98.702539,10.190381],[98.757227,10.660937],[99.614746,11.781201],[99.123926,13.030762],[99.136816,13.716699],[98.202148,14.975928],[98.888281,16.351904],[98.660742,16.33042],[97.373926,18.517969],[97.745898,18.588184],[98.015039,19.749512],[98.916699,19.7729],[99.074219,20.099365],[99.485938,20.149854],[99.458887,20.363037],[100.122461,20.31665]]],[[[98.553809,11.744873],[98.376465,11.791504],[98.434766,11.56709],[98.553809,11.744873]]],[[[93.69082,18.684277],[93.744727,18.865527],[93.4875,18.867529],[93.69082,18.684277]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"BI",iso_a3:"BDI",iso_n3:"108"},geometry:{type:"Polygon",coordinates:[[[30.553613,-2.400098],[29.930176,-2.339551],[29.698047,-2.794727],[29.014355,-2.720215],[29.403223,-4.449316],[29.947266,-4.307324],[30.790234,-3.274609],[30.780273,-2.984863],[30.433496,-2.874512],[30.553613,-2.400098]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"BF",iso_a3:"BFA",iso_n3:"854"},geometry:{type:"Polygon",coordinates:[[[.900488,10.993262],[1.426758,11.447119],[1.980371,11.418408],[2.38916,11.89707],[2.072949,12.309375],[2.10459,12.70127],[1.564941,12.6354],[.987305,13.041895],[.988477,13.364844],[1.201172,13.35752],[.429199,13.972119],[.21748,14.911475],[-.760449,15.047754],[-1.973047,14.456543],[-2.113232,14.168457],[-2.586719,14.227588],[-2.95083,13.648438],[-3.248633,13.65835],[-3.301758,13.280762],[-4.151025,13.306201],[-4.428711,12.337598],[-5.288135,11.82793],[-5.523535,10.426025],[-4.62583,9.713574],[-3.223535,9.895459],[-2.69585,9.481348],[-2.829932,10.998389],[-.627148,10.927393],[-.068604,11.115625],[.900488,10.993262]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"BG",iso_a3:"BGR",iso_n3:"100"},geometry:{type:"Polygon",coordinates:[[[28.014453,41.969043],[27.484766,42.468066],[28.585352,43.742236],[27.086914,44.167383],[25.49707,43.670801],[22.919043,43.834473],[23.028516,44.077979],[22.705078,44.237793],[22.369629,43.781299],[22.967969,43.142041],[22.466797,42.84248],[22.344043,42.313965],[23.003613,41.739844],[22.916016,41.336279],[24.487891,41.555225],[25.251172,41.243555],[25.92334,41.311914],[26.320898,41.716553],[27.011719,42.058643],[28.014453,41.969043]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"BN",iso_a3:"BRN",iso_n3:"096"},geometry:{type:"MultiPolygon",coordinates:[[[[115.140039,4.899756],[115.026758,4.899707],[115.290625,4.352588],[115.140039,4.899756]]],[[[115.026758,4.899707],[114.063867,4.592676],[114.654102,4.037646],[114.74668,4.718066],[115.026758,4.899707]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"BR",iso_a3:"BRA",iso_n3:"076"},geometry:{type:"MultiPolygon",coordinates:[[[[-66.876025,1.223047],[-67.082275,1.1854],[-67.400439,2.116699],[-67.93623,1.748486],[-68.193799,1.987012],[-68.176562,1.719824],[-69.848584,1.70874],[-69.852148,1.059521],[-69.311816,1.050488],[-69.15332,.658789],[-70.053906,.578613],[-70.070508,-.138867],[-69.633984,-.509277],[-69.400244,-1.194922],[-69.965918,-4.235938],[-70.799512,-4.17334],[-72.887061,-5.122754],[-73.235547,-6.098438],[-73.137354,-6.46582],[-73.758105,-6.905762],[-73.72041,-7.309277],[-74.002051,-7.556055],[-72.974023,-8.993164],[-73.209424,-9.411426],[-72.379053,-9.510156],[-72.142969,-10.005176],[-71.237939,-9.966016],[-70.541113,-9.4375],[-70.642334,-11.010254],[-69.578613,-10.951758],[-68.622656,-11.10918],[-66.575342,-9.899902],[-65.396143,-9.712402],[-65.389893,-11.246289],[-64.992529,-11.975195],[-64.420508,-12.439746],[-63.06748,-12.669141],[-61.789941,-13.525586],[-61.077002,-13.489746],[-60.506592,-13.789844],[-60.27334,-15.08877],[-60.583203,-15.09834],[-60.242334,-15.47959],[-60.175586,-16.269336],[-58.345605,-16.284375],[-58.395996,-17.234277],[-57.832471,-17.512109],[-57.495654,-18.214648],[-58.131494,-19.744531],[-57.860742,-19.97959],[-58.159766,-20.164648],[-57.830225,-20.997949],[-57.955908,-22.10918],[-56.937256,-22.271289],[-56.447803,-22.076172],[-55.84917,-22.307617],[-55.415918,-23.951367],[-54.625488,-23.8125],[-54.241797,-24.047266],[-54.615869,-25.576074],[-53.891162,-25.668848],[-53.668555,-26.288184],[-53.838184,-27.121094],[-55.725488,-28.204102],[-57.608887,-30.187793],[-56.832715,-30.107227],[-56.044824,-30.777637],[-56.004687,-31.079199],[-55.603027,-30.850781],[-53.761719,-32.056836],[-53.125586,-32.736719],[-53.531348,-33.170898],[-53.370605,-33.742188],[-52.652246,-33.137793],[-51.972461,-31.383789],[-51.283057,-30.751562],[-51.298047,-30.034863],[-51.024951,-30.368652],[-50.563525,-30.253613],[-50.581934,-30.438867],[-51.272168,-31.476953],[-52.063232,-31.830371],[-52.039209,-32.114844],[-50.921387,-31.258398],[-49.745996,-29.363184],[-48.799658,-28.575293],[-48.55415,-27.195996],[-48.748291,-26.268652],[-48.401172,-25.597363],[-48.731738,-25.36875],[-48.202734,-25.416504],[-46.867285,-24.236328],[-45.97207,-23.795508],[-45.464307,-23.802539],[-44.569678,-23.274023],[-44.637256,-23.055469],[-43.22417,-22.991211],[-43.154297,-22.725195],[-42.958301,-22.96709],[-42.042383,-22.94707],[-41.705518,-22.309668],[-41.000293,-21.999023],[-40.954541,-21.237891],[-39.783301,-19.571777],[-39.650781,-18.252344],[-39.154004,-17.703906],[-38.880615,-15.864258],[-39.089355,-13.588184],[-38.851758,-12.790137],[-38.690967,-12.623926],[-38.498926,-12.956641],[-38.239746,-12.844238],[-37.359229,-11.252539],[-37.356006,-11.403906],[-35.340869,-9.230664],[-34.834668,-7.971484],[-34.805469,-7.288379],[-35.481689,-5.166016],[-37.174658,-4.912402],[-38.475781,-3.71748],[-39.964697,-2.861523],[-41.479932,-2.916504],[-43.380078,-2.376074],[-44.192676,-2.80957],[-44.228613,-2.471289],[-44.723047,-3.204785],[-44.381836,-2.365527],[-44.435449,-2.168066],[-44.756348,-2.265527],[-44.537793,-2.052734],[-44.65127,-1.745801],[-45.076367,-1.466406],[-45.32915,-1.717285],[-45.458594,-1.35625],[-47.398096,-.62666],[-48.115088,-.7375],[-48.449805,-1.145508],[-48.349805,-1.482129],[-48.71001,-1.487695],[-49.211035,-1.916504],[-49.636523,-2.656934],[-49.313672,-1.731738],[-50.403223,-2.015527],[-50.690039,-1.761719],[-50.894922,-.937598],[-51.947559,-1.586719],[-52.66416,-1.551758],[-51.980811,-1.367969],[-51.28291,-.085205],[-49.898877,1.162988],[-49.957129,1.659863],[-50.714404,2.134033],[-51.219922,4.093604],[-51.54707,4.310889],[-51.652539,4.061279],[-52.903467,2.211523],[-53.767773,2.354834],[-54.130078,2.121045],[-54.61626,2.326758],[-54.978662,2.597656],[-55.957471,2.520459],[-56.137695,2.259033],[-55.929639,1.8875],[-56.482812,1.942139],[-57.31748,1.963477],[-58.821777,1.201221],[-59.231201,1.376025],[-59.666602,1.746289],[-59.994336,2.68999],[-59.854395,3.5875],[-59.551123,3.933545],[-59.703271,4.381104],[-60.148633,4.533252],[-59.990674,5.082861],[-60.142041,5.238818],[-60.742139,5.202051],[-60.603857,4.949365],[-61.002832,4.535254],[-62.712109,4.01792],[-62.856982,3.593457],[-63.338672,3.943896],[-64.021484,3.929102],[-64.788672,4.276025],[-64.221094,3.587402],[-64.046582,2.502393],[-63.389258,2.411914],[-63.43252,2.155566],[-64.008496,1.931592],[-64.205029,1.529492],[-65.473389,.69126],[-65.681445,.983447],[-66.347119,.767188],[-66.876025,1.223047]]],[[[-49.628662,-.229199],[-50.645508,-.272852],[-50.796094,-.90625],[-50.507617,-1.787988],[-49.805127,-1.790234],[-48.833594,-1.390039],[-48.392676,-.297363],[-49.628662,-.229199]]],[[[-45.260254,-23.88916],[-45.302344,-23.727539],[-45.451416,-23.895605],[-45.260254,-23.88916]]],[[[-49.738232,.268164],[-50.272656,.231738],[-50.339453,.043359],[-49.91709,-.023193],[-49.738232,.268164]]],[[[-49.443896,-.112402],[-49.503467,.083691],[-49.830078,-.093896],[-49.443896,-.112402]]],[[[-50.426123,.139258],[-50.372754,.590869],[-50.623926,.054395],[-50.426123,.139258]]],[[[-50.15293,.393018],[-50.058838,.638037],[-50.281689,.516504],[-50.15293,.393018]]],[[[-51.83252,-1.433789],[-51.276318,-1.021777],[-51.254004,-.541406],[-51.546045,-.649609],[-51.83252,-1.433789]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"BW",iso_a3:"BWA",iso_n3:"072"},geometry:{type:"Polygon",coordinates:[[[25.258789,-17.793555],[24.243945,-18.023438],[23.599707,-18.459961],[23.219336,-17.999707],[20.974121,-18.318848],[20.979492,-21.961914],[19.977344,-22.000195],[19.980469,-24.776758],[20.793164,-25.915625],[20.685059,-26.822461],[21.646289,-26.854199],[22.597656,-26.132715],[23.05752,-25.312305],[24.748145,-25.817383],[25.443652,-25.714453],[25.912109,-24.747461],[26.835059,-24.24082],[27.085547,-23.57793],[28.210156,-22.693652],[29.364844,-22.193945],[29.025586,-21.796875],[28.014063,-21.554199],[27.669434,-21.064258],[27.679297,-20.503027],[27.280762,-20.478711],[27.178223,-20.100977],[26.168066,-19.538281],[25.258789,-17.793555]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"BA",iso_a3:"BIH",iso_n3:"070"},geometry:{type:"Polygon",coordinates:[[[19.194336,43.533301],[19.495117,43.642871],[19.24502,43.965039],[19.583789,44.043457],[19.118457,44.359961],[19.348633,44.880908],[19.007129,44.869189],[16.918652,45.276562],[16.293359,45.008838],[15.788086,45.178955],[15.736621,44.76582],[17.585156,42.938379],[17.667578,42.897119],[18.436328,42.559717],[18.460156,42.9979],[19.194336,43.533301]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"BO",iso_a3:"BOL",iso_n3:"068"},geometry:{type:"Polygon",coordinates:[[[-69.510938,-17.506055],[-69.093945,-18.050488],[-68.968311,-18.967969],[-68.462891,-19.432813],[-68.760547,-20.416211],[-68.197021,-21.300293],[-67.879443,-22.822949],[-67.194873,-22.82168],[-66.220166,-21.802539],[-65.771045,-22.099609],[-64.605518,-22.228809],[-64.325293,-22.827637],[-63.92168,-22.028613],[-62.843359,-21.997266],[-62.650977,-22.233691],[-62.276318,-20.5625],[-61.756836,-19.645312],[-59.090527,-19.28623],[-58.180176,-19.817871],[-58.159766,-20.164648],[-57.860742,-19.97959],[-58.131494,-19.744531],[-57.495654,-18.214648],[-57.832471,-17.512109],[-58.395996,-17.234277],[-58.345605,-16.284375],[-60.175586,-16.269336],[-60.242334,-15.47959],[-60.583203,-15.09834],[-60.27334,-15.08877],[-60.506592,-13.789844],[-61.077002,-13.489746],[-61.789941,-13.525586],[-63.06748,-12.669141],[-64.420508,-12.439746],[-64.992529,-11.975195],[-65.389893,-11.246289],[-65.396143,-9.712402],[-66.575342,-9.899902],[-68.622656,-11.10918],[-69.578613,-10.951758],[-68.685254,-12.501953],[-68.978613,-12.880078],[-69.074121,-13.682813],[-68.870898,-14.169727],[-69.359473,-14.795312],[-69.172461,-15.236621],[-69.420898,-15.640625],[-69.217578,-16.149121],[-68.842773,-16.337891],[-69.624854,-17.200195],[-69.510938,-17.506055]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"BT",iso_a3:"BTN",iso_n3:"064"},geometry:{type:"Polygon",coordinates:[[[91.631934,27.759961],[91.273047,28.078369],[90.352734,28.080225],[89.981055,28.311182],[88.891406,27.316064],[88.857617,26.961475],[89.609961,26.719434],[91.99834,26.85498],[92.083398,27.290625],[91.594727,27.557666],[91.631934,27.759961]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"BJ",iso_a3:"BEN",iso_n3:"204"},geometry:{type:"Polygon",coordinates:[[[1.622656,6.216797],[2.706445,6.369238],[2.774805,9.048535],[3.044922,9.083838],[3.834473,10.607422],[3.487793,11.39541],[3.59541,11.696289],[2.805273,12.383838],[2.366016,12.221924],[2.38916,11.89707],[1.980371,11.418408],[1.426758,11.447119],[.900488,10.993262],[.763379,10.38667],[1.330078,9.996973],[1.600195,9.050049],[1.530957,6.992432],[1.77793,6.294629],[1.622656,6.216797]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"BZ",iso_a3:"BLZ",iso_n3:"084"},geometry:{type:"Polygon",coordinates:[[[-89.161475,17.814844],[-89.2375,15.894434],[-88.894043,15.890625],[-88.313428,16.632764],[-88.085254,18.226123],[-88.295654,18.472412],[-89.161475,17.814844]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"BE",iso_a3:"BEL",iso_n3:"056"},geometry:{type:"Polygon",coordinates:[[[4.226172,51.386475],[3.902051,51.207666],[3.350098,51.377686],[2.524902,51.097119],[2.759375,50.750635],[4.174609,50.246484],[4.149316,49.971582],[4.818652,50.153174],[4.867578,49.788135],[5.789746,49.538281],[5.744043,49.919629],[6.116504,50.120996],[6.340918,50.451758],[5.993945,50.750439],[5.639453,50.843604],[5.796484,51.153076],[5.030957,51.469092],[4.226172,51.386475]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"BY",iso_a3:"BLR",iso_n3:"112"},geometry:{type:"Polygon",coordinates:[[[31.763379,52.101074],[31.258789,53.016699],[31.417871,53.196045],[32.141992,53.091162],[32.706445,53.419434],[31.754199,53.810449],[30.798828,54.783252],[30.906836,55.57002],[30.233594,55.845215],[29.482227,55.68457],[29.375,55.938721],[28.147949,56.14292],[27.576758,55.798779],[26.593555,55.667529],[26.457617,55.34248],[26.775684,55.273096],[25.780859,54.833252],[25.749219,54.156982],[25.461133,54.292773],[24.317969,53.892969],[23.484668,53.939795],[23.91543,52.770264],[23.175098,52.286621],[23.652441,52.040381],[23.605273,51.51792],[25.267188,51.937744],[27.141992,51.752051],[27.7,51.477979],[28.73125,51.433398],[29.102051,51.627539],[29.346484,51.382568],[30.160742,51.477881],[30.544531,51.265039],[30.755273,51.895166],[31.763379,52.101074]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"BB",iso_a3:"BRB",iso_n3:"052"},geometry:{type:"Polygon",coordinates:[[[-59.493311,13.081982],[-59.427637,13.152783],[-59.64668,13.303125],[-59.493311,13.081982]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"BD",iso_a3:"BGD",iso_n3:"050"},geometry:{type:"MultiPolygon",coordinates:[[[[89.051465,22.093164],[89.353711,21.721094],[89.483203,22.275537],[89.568555,21.767432],[89.985156,22.466406],[89.918066,22.116162],[90.20957,22.156592],[90.230566,21.829785],[90.616113,22.362158],[90.435059,22.751904],[90.590918,23.266406],[90.269141,23.455859],[90.604004,23.591357],[90.945605,22.597021],[91.480078,22.884814],[91.863379,22.350488],[92.324121,20.791846],[92.17959,21.293115],[92.631641,21.306201],[92.574902,21.978076],[92.246094,23.683594],[91.92959,23.685986],[91.619531,22.979688],[91.315234,23.104395],[91.160449,23.660645],[91.36709,24.093506],[91.876953,24.195312],[92.468359,24.944141],[92.049707,25.169482],[89.833301,25.292773],[89.670898,26.213818],[89.369727,26.006104],[89.018652,26.410254],[88.828027,26.252197],[88.418164,26.571533],[88.08457,25.888232],[88.95166,25.259277],[88.45625,25.188428],[88.023438,24.627832],[88.723535,24.274902],[88.567383,23.674414],[88.928125,23.186621],[89.051465,22.093164]]],[[[90.777637,22.089307],[90.868164,22.484863],[90.596484,22.863525],[90.680469,22.32749],[90.515039,22.065137],[90.777637,22.089307]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"BH",iso_a3:"BHR",iso_n3:"048"},geometry:{type:"Polygon",coordinates:[[[50.607227,25.883105],[50.585938,26.240723],[50.469922,26.228955],[50.607227,25.883105]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"BS",iso_a3:"BHS",iso_n3:"044"},geometry:{type:"MultiPolygon",coordinates:[[[[-77.657715,24.249463],[-77.999902,24.219824],[-77.57373,23.73916],[-77.657715,24.249463]]],[[[-77.225635,25.904199],[-77.066357,26.530176],[-77.533887,26.903418],[-77.94375,26.903564],[-77.238623,26.561133],[-77.403174,26.024707],[-77.225635,25.904199]]],[[[-73.026855,21.192383],[-73.523096,21.19082],[-73.681152,20.975586],[-73.164551,20.97915],[-73.026855,21.192383]]],[[[-77.743848,24.707422],[-78.211377,25.19126],[-78.366504,24.544189],[-78.044922,24.287451],[-77.743848,24.707422]]],[[[-78.492871,26.729053],[-78.985645,26.689502],[-78.743652,26.500684],[-77.922461,26.691113],[-78.492871,26.729053]]],[[[-76.648828,25.487402],[-76.1604,25.119336],[-76.169531,24.649414],[-76.126611,25.140527],[-76.648828,25.487402]]],[[[-74.840479,22.894336],[-75.315967,23.668359],[-75.22334,23.165332],[-74.840479,22.894336]]],[[[-75.308398,24.2],[-75.72666,24.689355],[-75.503223,24.139062],[-75.308398,24.2]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"AZ",iso_a3:"AZE",iso_n3:"031"},geometry:{type:"MultiPolygon",coordinates:[[[[44.817188,39.650439],[45.479688,39.00625],[46.114453,38.877783],[45.784473,39.545605],[44.768262,39.703516],[44.817188,39.650439]]],[[[48.86875,38.435498],[49.551172,40.194141],[50.365918,40.279492],[49.456738,40.799854],[48.572852,41.844482],[47.791016,41.199268],[46.429883,41.890967],[46.182129,41.65708],[46.672559,41.286816],[46.534375,41.088574],[45.280957,41.449561],[45.001367,41.290967],[45.5875,40.846924],[45.454395,40.532373],[45.964648,40.233789],[45.579785,39.977539],[46.481445,39.555176],[46.490625,38.906689],[47.995898,39.683936],[48.322168,39.399072],[47.996484,38.85376],[48.86875,38.435498]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"AT",iso_a3:"AUT",iso_n3:"040"},geometry:{type:"Polygon",coordinates:[[[9.527539,47.270752],[9.580273,47.057373],[10.452832,46.864941],[10.993262,46.777002],[12.169434,47.082129],[12.388281,46.702637],[13.7,46.520264],[14.549805,46.399707],[16.093066,46.863281],[16.676563,47.536035],[16.421289,47.674463],[17.066602,47.707568],[17.147363,48.005957],[16.953125,48.598828],[15.066797,48.997852],[14.691309,48.599219],[13.814746,48.766943],[12.760352,48.106982],[13.014355,47.478076],[12.209277,47.718262],[11.041992,47.393115],[10.439453,47.551562],[10.183008,47.278809],[9.524023,47.524219],[9.527539,47.270752]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"AU",iso_a3:"AUS",iso_n3:"036"},geometry:{type:"MultiPolygon",coordinates:[[[[143.178906,-11.954492],[142.872559,-11.821387],[142.779688,-11.115332],[142.456445,-10.707324],[142.168359,-10.946582],[141.961133,-12.054297],[141.688574,-12.351074],[141.929785,-12.739844],[141.613574,-12.943457],[141.625488,-15.056641],[141.291406,-16.463477],[140.830469,-17.414453],[140.03584,-17.702637],[139.248438,-17.328613],[139.009863,-16.899316],[138.24502,-16.718359],[135.45332,-14.923145],[135.954492,-13.934863],[135.927344,-13.304297],[136.461035,-13.225195],[136.897461,-12.243555],[136.443359,-11.951465],[136.081836,-12.422461],[136.008496,-12.191406],[135.704395,-12.209863],[135.922461,-11.825781],[135.029688,-12.19375],[131.961523,-11.180859],[131.822461,-11.302441],[132.072852,-11.474707],[132.674219,-11.649023],[132.712793,-12.123438],[131.438281,-12.276953],[131.291602,-12.067871],[130.867383,-12.557813],[130.622656,-12.431055],[130.168164,-12.957422],[130.259766,-13.302246],[129.838867,-13.572949],[129.378711,-14.39248],[129.84873,-14.828906],[129.637109,-14.850977],[129.634766,-15.139746],[129.267578,-14.871484],[129.21582,-15.160254],[129.058203,-14.884375],[128.575781,-14.774512],[128.069434,-15.329297],[128.180469,-14.711621],[127.457617,-14.031445],[126.903223,-13.744141],[126.569727,-14.160938],[126.053906,-13.977246],[126.020703,-14.494531],[125.661621,-14.529492],[125.627734,-14.256641],[125.178711,-14.714746],[125.355664,-15.119824],[124.839063,-15.160742],[125.062988,-15.442285],[124.692578,-15.273633],[124.439551,-15.493555],[124.381641,-15.758203],[124.648535,-15.870215],[124.404883,-16.298926],[124.771973,-16.402637],[123.607031,-16.224023],[123.49043,-16.490723],[123.874414,-16.918652],[123.831055,-17.120801],[123.593555,-17.030371],[123.563086,-17.520898],[122.970703,-16.436816],[122.260938,-17.135742],[122.34541,-18.111914],[120.997949,-19.604395],[119.104492,-19.995313],[117.40625,-20.721191],[116.706738,-20.653809],[114.709277,-21.823438],[114.141602,-22.483105],[114.022852,-21.881445],[113.417676,-24.435645],[114.214258,-25.851562],[114.215723,-26.289453],[113.72373,-26.129785],[113.451367,-25.599121],[113.836426,-26.500586],[113.581641,-26.558105],[113.356055,-26.080469],[113.184766,-26.182227],[114.028125,-27.347266],[114.165137,-28.080664],[114.856836,-29.142969],[115.07793,-30.560449],[115.698438,-31.694531],[115.683008,-33.192871],[115.358789,-33.639941],[114.993848,-33.515332],[115.008789,-34.255859],[116.517188,-34.987891],[117.581934,-35.097754],[119.450586,-34.368262],[119.854102,-33.974707],[123.506836,-33.916211],[124.24375,-33.015234],[125.917188,-32.296973],[127.319824,-32.264062],[129.187695,-31.659961],[131.143652,-31.495703],[134.23418,-32.548535],[134.173535,-32.979102],[134.791016,-33.32832],[135.45,-34.581055],[135.123047,-34.585742],[135.647559,-34.939648],[135.969727,-34.981836],[135.891016,-34.660938],[136.430664,-34.02998],[137.237305,-33.629492],[137.783203,-32.578125],[137.931836,-33.579102],[137.493848,-34.161133],[137.391016,-34.913281],[137.014258,-34.91582],[136.883594,-35.239746],[137.691699,-35.142969],[138.089258,-34.169824],[138.511133,-35.024414],[138.184375,-35.612695],[139.28252,-35.375391],[139.289453,-35.611328],[138.968945,-35.580762],[139.729004,-36.371387],[139.784277,-37.245801],[140.39043,-37.89668],[141.424219,-38.363477],[142.455859,-38.386328],[143.538965,-38.820898],[144.891309,-37.899805],[145.119922,-38.091309],[144.717773,-38.340332],[144.95957,-38.500781],[145.475781,-38.24375],[145.397266,-38.535352],[146.4,-39.145508],[146.21748,-38.727441],[146.856836,-38.663477],[147.876758,-37.93418],[149.932715,-37.528516],[150.195312,-35.833594],[150.80459,-35.012891],[151.29209,-33.580957],[152.47041,-32.439062],[152.943945,-31.434863],[153.616895,-28.673047],[153.116797,-27.194434],[153.164941,-25.96416],[151.831641,-24.122949],[150.843164,-23.458008],[150.672461,-22.418164],[150.541309,-22.559082],[150.076172,-22.164453],[149.974414,-22.550684],[149.703906,-22.440527],[149.454102,-21.578711],[148.683691,-20.580176],[148.884766,-20.480859],[148.759375,-20.289551],[147.418555,-19.378125],[146.383398,-18.977051],[146.032227,-18.272852],[145.912109,-16.9125],[145.426074,-16.406152],[145.287695,-14.943164],[144.473047,-14.231836],[143.756348,-14.348828],[143.178906,-11.954492]]],[[[139.507812,-16.573047],[139.587891,-16.395215],[139.15957,-16.741699],[139.507812,-16.573047]]],[[[136.714648,-13.803906],[136.424707,-13.864844],[136.335449,-14.211816],[136.894336,-14.293066],[136.89082,-13.786621],[136.714648,-13.803906]]],[[[130.459277,-11.679297],[130.294922,-11.336816],[130.043262,-11.787305],[130.60625,-11.816602],[130.459277,-11.679297]]],[[[130.618848,-11.376074],[130.38457,-11.192188],[130.511914,-11.617871],[130.950977,-11.926465],[131.538574,-11.436914],[131.268262,-11.189844],[130.618848,-11.376074]]],[[[137.596484,-35.738672],[137.334082,-35.59248],[136.540625,-35.890137],[137.448438,-36.074805],[138.123438,-35.852344],[137.596484,-35.738672]]],[[[146.27832,-18.23125],[146.098828,-18.251758],[146.298828,-18.484766],[146.27832,-18.23125]]],[[[136.338672,-11.602344],[136.479297,-11.465918],[136.180273,-11.676758],[136.338672,-11.602344]]],[[[145.042969,-40.786719],[144.718555,-40.672266],[144.766113,-41.390039],[145.516602,-42.354492],[145.198828,-42.230859],[145.487598,-42.92666],[146.208008,-43.316211],[146.043164,-43.547168],[146.873926,-43.6125],[147.297949,-42.790918],[147.94541,-43.181836],[148.213672,-41.97002],[148.342578,-42.215332],[148.215234,-40.854883],[146.31748,-41.163477],[145.042969,-40.786719]]],[[[148.000391,-39.757617],[147.767188,-39.870313],[148.105664,-40.262109],[148.297363,-39.985742],[148.000391,-39.757617]]],[[[148.32627,-40.306934],[148.020117,-40.404199],[148.404004,-40.486523],[148.32627,-40.306934]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"CX",iso_a3:"CXR",iso_n3:"162"},geometry:{type:"Polygon",coordinates:[[[105.725391,-10.492969],[105.584082,-10.5125],[105.696875,-10.56416],[105.725391,-10.492969]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"HM",iso_a3:"HMD",iso_n3:"334"},geometry:{type:"Polygon",coordinates:[[[73.707422,-53.137109],[73.251172,-52.975781],[73.465137,-53.18418],[73.707422,-53.137109]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"NF",iso_a3:"NFK",iso_n3:"574"},geometry:{type:"Polygon",coordinates:[[[167.939453,-29.017676],[167.960742,-29.096289],[167.99043,-29.04209],[167.939453,-29.017676]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"AU",iso_a3:"AUS",iso_n3:"036"},geometry:{type:"Polygon",coordinates:[[[123.594531,-12.425684],[123.572461,-12.423926],[123.573145,-12.43418],[123.594531,-12.425684]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"AM",iso_a3:"ARM",iso_n3:"051"},geometry:{type:"Polygon",coordinates:[[[44.768262,39.703516],[45.784473,39.545605],[46.114453,38.877783],[46.490625,38.906689],[46.481445,39.555176],[45.579785,39.977539],[45.964648,40.233789],[45.454395,40.532373],[45.5875,40.846924],[45.001367,41.290967],[43.439453,41.107129],[43.666211,40.126367],[44.768262,39.703516]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"AR",iso_a3:"ARG",iso_n3:"032"},geometry:{type:"MultiPolygon",coordinates:[[[[-57.608887,-30.187793],[-55.725488,-28.204102],[-53.838184,-27.121094],[-53.668555,-26.288184],[-53.891162,-25.668848],[-54.615869,-25.576074],[-54.825488,-26.652246],[-55.714648,-27.414844],[-56.164062,-27.321484],[-56.437158,-27.553809],[-58.604834,-27.314355],[-57.643896,-25.328418],[-59.89248,-24.093555],[-61.03291,-23.755664],[-62.650977,-22.233691],[-62.843359,-21.997266],[-63.92168,-22.028613],[-64.325293,-22.827637],[-64.605518,-22.228809],[-65.771045,-22.099609],[-66.220166,-21.802539],[-67.194873,-22.82168],[-67.008789,-23.001367],[-67.356201,-24.033789],[-68.562012,-24.747363],[-68.384229,-25.091895],[-68.591602,-26.47041],[-68.318652,-26.973242],[-68.846338,-27.153711],[-69.656934,-28.413574],[-70.026807,-29.324023],[-69.844287,-30.175],[-70.51958,-31.148438],[-70.084863,-33.201758],[-69.819629,-33.283789],[-69.852441,-34.224316],[-70.555176,-35.246875],[-70.404785,-36.061719],[-71.192187,-36.843652],[-70.858643,-38.604492],[-71.401562,-38.935059],[-71.932129,-40.691699],[-71.75,-42.046777],[-72.108203,-42.251855],[-72.146436,-42.990039],[-71.750635,-43.237305],[-71.82002,-44.383105],[-71.159717,-44.560254],[-71.261133,-44.763086],[-72.063721,-44.771875],[-71.349316,-45.331934],[-71.746191,-45.578906],[-71.699658,-46.651367],[-72.51792,-47.876367],[-72.354736,-48.36582],[-73.554199,-49.463867],[-73.50127,-50.125293],[-73.15293,-50.738281],[-72.340234,-50.681836],[-72.407666,-51.54082],[-71.918652,-51.989551],[-69.960254,-52.008203],[-68.443359,-52.356641],[-68.965332,-51.677148],[-69.46543,-51.584473],[-69.035303,-51.488965],[-69.358594,-51.028125],[-69.044775,-50.499121],[-68.421875,-50.15791],[-68.97959,-50.003027],[-68.667578,-49.752539],[-68.257227,-50.10459],[-67.825977,-49.919629],[-67.466309,-48.951758],[-65.810059,-47.941113],[-66.225244,-47.826758],[-65.738086,-47.344922],[-65.998535,-47.09375],[-66.776855,-47.005859],[-67.599561,-46.052539],[-66.941406,-45.257324],[-65.63877,-45.007812],[-65.252344,-43.571875],[-64.319141,-42.968945],[-64.970703,-42.666309],[-64.487842,-42.513477],[-64.034766,-42.88125],[-63.617334,-42.695801],[-63.795557,-42.113867],[-64.42041,-42.433789],[-64.986377,-42.102051],[-65.133398,-40.880664],[-64.869482,-40.73584],[-63.621777,-41.159766],[-62.39502,-40.89082],[-62.053662,-39.373828],[-62.334766,-38.800098],[-61.602539,-38.998828],[-59.82832,-38.838184],[-57.546973,-38.085645],[-56.672021,-36.85127],[-56.698096,-36.426465],[-57.335449,-36.026758],[-57.303662,-35.188477],[-58.28335,-34.683496],[-58.525488,-34.296191],[-58.39248,-34.192969],[-58.547217,-33.663477],[-58.424463,-33.111523],[-58.170996,-32.959277],[-58.201172,-32.47168],[-57.608887,-30.187793]]],[[[-68.653223,-54.853613],[-66.511133,-55.032129],[-65.179004,-54.678125],[-67.294238,-54.049805],[-68.488525,-53.260938],[-68.240137,-53.081836],[-68.629932,-52.652637],[-68.653223,-54.853613]]],[[[-64.54917,-54.716211],[-64.637354,-54.902539],[-63.81543,-54.725098],[-64.54917,-54.716211]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"AG",iso_a3:"ATG",iso_n3:"028"},geometry:{type:"Polygon",coordinates:[[[-61.716064,17.037012],[-61.817285,17.168945],[-61.887109,17.098145],[-61.716064,17.037012]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"AO",iso_a3:"AGO",iso_n3:"024"},geometry:{type:"MultiPolygon",coordinates:[[[[13.072754,-4.634766],[12.798242,-4.430566],[12.018359,-5.004297],[12.213672,-5.758691],[12.503711,-5.695801],[12.451465,-5.071484],[13.072754,-4.634766]]],[[[23.966504,-10.871777],[22.226172,-11.121973],[22.274512,-10.259082],[21.813184,-9.46875],[21.781641,-7.314648],[20.607813,-7.277734],[20.590039,-6.919922],[19.875195,-6.986328],[19.527637,-7.144434],[19.34082,-7.966602],[17.57959,-8.099023],[16.431445,-5.900195],[13.068164,-5.864844],[12.283301,-6.124316],[13.378516,-8.369727],[12.998535,-9.048047],[13.833594,-10.929688],[13.785352,-11.812793],[12.550488,-13.437793],[11.750879,-15.831934],[11.743066,-17.249219],[13.101172,-16.967676],[14.01748,-17.408887],[18.396387,-17.399414],[18.955273,-17.803516],[20.745508,-18.019727],[23.380664,-17.640625],[22.040234,-16.262793],[21.978906,-13.000977],[23.962988,-12.988477],[23.966504,-10.871777]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"AD",iso_a3:"AND",iso_n3:"020"},geometry:{type:"Polygon",coordinates:[[[1.706055,42.50332],[1.42832,42.595898],[1.448828,42.437451],[1.706055,42.50332]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"DZ",iso_a3:"DZA",iso_n3:"012"},geometry:{type:"Polygon",coordinates:[[[8.576563,36.937207],[6.486523,37.085742],[5.29541,36.648242],[4.758105,36.896338],[3.779004,36.896191],[1.257227,36.51958],[-.048242,35.832812],[-2.219629,35.104199],[-1.795605,34.751904],[-1.679199,33.318652],[-1.065527,32.468311],[-1.225928,32.107227],[-2.887207,32.068848],[-3.017383,31.834277],[-3.826758,31.661914],[-3.666797,30.964014],[-4.968262,30.465381],[-5.448779,29.956934],[-7.685156,29.349512],[-8.678418,28.689404],[-8.68335,27.656445],[-8.68335,27.285938],[-4.822607,24.995605],[1.145508,21.102246],[1.685449,20.378369],[3.130273,19.850195],[3.119727,19.103174],[4.227637,19.142773],[5.836621,19.47915],[7.481738,20.873096],[11.967871,23.517871],[11.507617,24.314355],[10.255859,24.591016],[9.448242,26.067139],[9.883203,26.630811],[9.916016,27.785693],[9.805273,29.176953],[9.310254,30.115234],[9.51875,30.229395],[9.044043,32.072363],[8.333398,32.543604],[7.500195,33.832471],[8.245605,34.734082],[8.207617,36.518945],[8.576563,36.937207]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"AL",iso_a3:"ALB",iso_n3:"008"},geometry:{type:"Polygon",coordinates:[[[19.342383,41.869092],[19.575684,41.64043],[19.322266,40.40708],[20.00127,39.709424],[20.657422,40.117383],[20.964258,40.849902],[20.488965,41.272607],[20.566211,41.873682],[20.063965,42.547266],[19.654492,42.628564],[19.342383,41.869092]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"AF",iso_a3:"AFG",iso_n3:"004"},geometry:{type:"Polygon",coordinates:[[[66.522266,37.348486],[65.765039,37.569141],[65.55498,37.251172],[64.816309,37.13208],[64.511035,36.340674],[63.12998,35.846191],[63.056641,35.445801],[62.688086,35.255322],[62.307813,35.170801],[61.262012,35.61958],[60.72627,34.518262],[60.889453,34.319434],[60.485742,34.094775],[60.51084,33.638916],[60.916992,33.505225],[60.561914,33.058789],[60.820703,31.495166],[61.660156,31.382422],[61.81084,30.913281],[60.843359,29.858691],[62.476562,29.40835],[64.09873,29.391943],[66.23125,29.865723],[66.346875,30.802783],[66.829297,31.263672],[67.452832,31.234619],[68.161035,31.802979],[68.868945,31.634229],[69.279297,31.936816],[69.501562,33.020068],[70.261133,33.289014],[69.889648,34.007275],[71.051563,34.049707],[70.965625,34.530371],[71.620508,35.183008],[71.23291,36.121777],[72.249805,36.734717],[74.541406,37.022168],[74.372168,37.157715],[74.891309,37.231641],[74.349023,37.41875],[73.653516,37.239355],[73.720605,37.41875],[73.38291,37.462256],[71.665625,36.696924],[71.43291,37.127539],[71.582227,37.910107],[71.278516,37.918408],[71.255859,38.306982],[70.878906,38.456396],[70.214648,37.924414],[70.188672,37.582471],[69.49209,37.553076],[69.303906,37.116943],[68.911816,37.333936],[68.067773,36.949805],[67.758984,37.172217],[66.522266,37.348486]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"-99",iso_a3:"-99",iso_n3:"-99"},geometry:{type:"Polygon",coordinates:[[[77.048633,35.109912],[77.799414,35.495898],[76.766895,35.661719],[77.048633,35.109912]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"AQ",iso_a3:"ATA",iso_n3:"010"},geometry:{type:"MultiPolygon",coordinates:[[[[-57.020654,-63.372852],[-57.389648,-63.22627],[-58.87207,-63.551855],[-60.86416,-64.073438],[-61.631787,-64.604688],[-62.503467,-64.656445],[-63.059082,-65.139355],[-63.760254,-65.033496],[-63.818115,-65.531543],[-64.646582,-65.747852],[-64.613525,-66.019043],[-65.617285,-66.135254],[-65.766406,-66.624902],[-66.503613,-66.689844],[-66.498682,-67.289062],[-67.034473,-66.945117],[-67.493359,-67.112793],[-67.544531,-67.534668],[-66.677246,-67.560254],[-67.390527,-68.86123],[-66.974902,-69.161035],[-67.371777,-69.412305],[-68.707959,-69.432227],[-66.827734,-72.09043],[-68.000342,-72.935547],[-72.929199,-73.447949],[-73.996045,-73.699805],[-75.293066,-73.63877],[-77.048926,-73.844141],[-76.850488,-73.460449],[-78.78623,-73.506738],[-80.442236,-72.944531],[-80.336377,-73.41416],[-81.176416,-73.248828],[-81.30874,-73.738281],[-82.183496,-73.856836],[-85.801416,-73.19209],[-86.791016,-73.363672],[-88.419385,-73.229004],[-88.194092,-72.7875],[-88.77998,-72.683008],[-90.920947,-73.319141],[-92.828369,-73.164648],[-96.394238,-73.301172],[-98.208594,-73.022266],[-102.409277,-72.987402],[-102.855859,-72.716211],[-103.375,-72.818848],[-102.908789,-73.285156],[-98.896143,-73.611133],[-102.862744,-73.783594],[-101.251709,-74.485742],[-100.118604,-74.515039],[-100.47334,-74.872363],[-98.752344,-75.31709],[-101.039355,-75.421875],[-101.708105,-75.127344],[-103.121045,-75.095215],[-106.618848,-75.343945],[-111.358789,-75.219922],[-110.229785,-74.536328],[-111.180176,-74.188086],[-111.69624,-74.792188],[-114.110449,-74.981836],[-113.508496,-74.088867],[-114.62373,-73.90293],[-115.222607,-74.487402],[-118.655762,-74.392773],[-121.543945,-74.75],[-135.362061,-74.69043],[-136.649854,-75.161719],[-139.691162,-75.212793],[-141.22334,-75.545898],[-140.874316,-75.745898],[-142.329834,-75.490918],[-145.987744,-75.88877],[-145.44209,-76.40918],[-148.458984,-76.117969],[-149.654248,-76.365332],[-147.34043,-76.438379],[-145.750488,-76.749023],[-145.677148,-77.488086],[-148.572412,-77.105078],[-148.155713,-77.462305],[-149.717725,-77.797461],[-154.814941,-77.126953],[-158.213574,-77.157129],[-158.285889,-77.950781],[-157.266797,-78.199805],[-154.293018,-78.259082],[-156.114551,-78.744629],[-152.137695,-79.115918],[-148.176514,-79.775879],[-150.575391,-80.353711],[-148.023438,-80.835742],[-156.528223,-81.162305],[-157.03252,-81.319141],[-153.956641,-81.700195],[-153.009863,-82.449609],[-159.444385,-83.543164],[-174.235938,-82.793457],[-167.801221,-83.79082],[-164.950879,-83.805859],[-165.135352,-84.409863],[-156.986328,-84.811133],[-156.459131,-85.186035],[-171.703662,-84.542383],[-180,-84.351562],[-180,-85.05752],[-180,-85.763379],[-180,-86.469336],[-180,-87.175195],[-180,-87.881055],[-180,-88.587012],[-180,-89.292969],[-180,-89.58291],[-180,-89.998926],[-1.40625,-89.998926],[180,-89.998926],[180,-84.351562],[171.035742,-83.448438],[168.110059,-83.362012],[168.607324,-83.065332],[164.980078,-82.384961],[161.283203,-82.489941],[163.602344,-82.120605],[160.469824,-81.340625],[160.637305,-80.449902],[158.573633,-80.423438],[160.558789,-80.010547],[159.975879,-79.585645],[160.873535,-79.049707],[161.951465,-79.02998],[161.669238,-78.536133],[162.639453,-78.897754],[164.634766,-78.603223],[167.130273,-78.606152],[165.662988,-78.305664],[165.417578,-78.042188],[163.977637,-78.223828],[164.420898,-77.883496],[162.450293,-76.955664],[162.815723,-75.846191],[160.910742,-75.334668],[162.410059,-75.237598],[163.397852,-74.382129],[165.408594,-74.558594],[164.812988,-73.396777],[165.733691,-73.866699],[165.860156,-73.592676],[167.709082,-73.394238],[166.452832,-72.936035],[167.155664,-73.147266],[169.54502,-73.050391],[169.828613,-72.728809],[168.428418,-72.383398],[170.206445,-72.565332],[170.030078,-72.115527],[170.859082,-71.868555],[170.435742,-71.41875],[170.162305,-71.630469],[166.626953,-70.664258],[163.566504,-70.642285],[162.674805,-70.30459],[162.021973,-70.439844],[162.189453,-71.039551],[159.783984,-69.521875],[155.520313,-69.024414],[153.908008,-68.323145],[153.081836,-68.856836],[151.28877,-68.81709],[150.935938,-68.358496],[147.093652,-68.368652],[145.975195,-67.624219],[143.977344,-67.864551],[144.621191,-67.141406],[143.730371,-66.876758],[142.6875,-67.012793],[135.351953,-66.127148],[134.289453,-66.476758],[133.148242,-66.094824],[130.120508,-66.291504],[129.236914,-67.041602],[128.430566,-67.119141],[125.865625,-66.364453],[119.133008,-67.370703],[120.374805,-66.983789],[116.713477,-67.047168],[114.026563,-67.441211],[113.991211,-67.211914],[115.635352,-66.771191],[113.099414,-65.799902],[110.906738,-66.07666],[110.622266,-66.524023],[109.462793,-66.908691],[102.674219,-65.865137],[101.381348,-65.973047],[100.889063,-66.358008],[99.370117,-66.648242],[98.257617,-66.46748],[94.839844,-66.501367],[93.964258,-66.689648],[92.073438,-66.50791],[84.485156,-67.114453],[83.304297,-67.603027],[79.035156,-68.175391],[77.81748,-69.068945],[75.423828,-69.893066],[73.324805,-69.848926],[71.771387,-70.80127],[71.276758,-71.623926],[68.419824,-72.515039],[67.32207,-73.300293],[66.497656,-73.125488],[69.250195,-70.431055],[67.267969,-70.273145],[68.178125,-69.837305],[69.082617,-69.866602],[68.90625,-69.372754],[69.629492,-69.231641],[69.982227,-68.464258],[69.55918,-67.763184],[68.32793,-67.889551],[63.699023,-67.508301],[59.250781,-67.484961],[57.627441,-67.014063],[56.154883,-67.264551],[56.145898,-66.626074],[57.185449,-66.613281],[55.504492,-66.002637],[53.671777,-65.858691],[51.88457,-66.02002],[50.332422,-66.444629],[50.553027,-67.194336],[49.24707,-66.941602],[48.465234,-67.043457],[49.219336,-67.226855],[48.374512,-67.988086],[48.209961,-67.699316],[47.489844,-67.72793],[47.351562,-67.361914],[46.559668,-67.268164],[46.399023,-67.617578],[42.960938,-68.095312],[40.215625,-68.804883],[38.885547,-70.171875],[37.787109,-69.725684],[35.357031,-69.681348],[34.595898,-69.094531],[33.813672,-69.099316],[34.192871,-68.702441],[33.465625,-68.670703],[32.641602,-68.868945],[32.621289,-70.000586],[30.00332,-70.3],[26.498828,-71.019531],[24.756738,-70.89209],[24.024121,-70.413379],[23.149902,-70.796289],[22.44541,-70.739746],[21.70498,-70.258496],[21.070801,-70.843457],[19.651855,-70.920605],[19.009375,-70.212109],[18.124609,-70.540332],[16.381055,-70.145117],[13.822656,-70.343164],[13.065625,-70.053613],[11.70127,-70.766602],[9.141602,-70.183691],[8.523047,-70.473828],[7.676758,-70.356348],[2.609473,-70.900098],[-.543164,-71.712695],[-1.067773,-71.265625],[-6.11748,-71.325977],[-5.936328,-70.712695],[-7.752734,-70.842773],[-7.713721,-71.546484],[-8.497705,-71.674805],[-10.270605,-70.935742],[-10.825439,-71.55332],[-12.351318,-71.389746],[-11.009229,-71.75791],[-11.496973,-72.412891],[-13.208594,-72.785059],[-14.297754,-72.733008],[-14.164697,-73.102441],[-15.595996,-73.096777],[-16.435205,-73.425684],[-16.220117,-73.915723],[-14.573828,-73.9375],[-15.67251,-74.407324],[-17.43584,-74.379102],[-18.749219,-75.24209],[-18.30459,-75.431348],[-26.059326,-75.957227],[-34.075781,-77.425391],[-36.23916,-78.774219],[-32.994238,-79.228809],[-30.645264,-79.124121],[-29.949316,-79.599023],[-23.406836,-79.858984],[-31.01543,-80.308105],[-35.327002,-80.650684],[-37.209277,-81.063867],[-38.771729,-80.882324],[-41.125879,-81.214844],[-45.04375,-82.437988],[-46.516748,-82.45459],[-46.258057,-81.946973],[-48.360791,-81.892285],[-53.986084,-82.200586],[-59.516016,-83.458398],[-61.425293,-83.395605],[-62.735645,-82.527344],[-60.527734,-82.199902],[-64.91958,-82.370508],[-66.133838,-81.953418],[-62.490234,-81.556738],[-65.573682,-81.460547],[-70.687891,-80.62627],[-73.029492,-80.917285],[-75.075586,-80.860059],[-76.407324,-80.094922],[-79.6604,-79.996875],[-76.557861,-79.903516],[-76.217676,-79.387207],[-80.151172,-79.268066],[-80.891992,-79.501855],[-83.696631,-78.537305],[-83.779004,-77.983594],[-80.292285,-78.822754],[-77.54502,-78.65957],[-77.858105,-78.350977],[-81.580957,-77.846094],[-80.601562,-77.751953],[-74.812061,-78.177832],[-73.251562,-77.894238],[-72.851953,-77.590234],[-75.748145,-77.398438],[-77.190039,-76.629785],[-70.550781,-76.718066],[-63.363379,-75.451465],[-64.279541,-75.292871],[-63.231055,-75.153809],[-63.924707,-75.004492],[-63.178125,-74.68418],[-62.137793,-74.926367],[-62.235303,-74.441309],[-60.704297,-74.307129],[-61.842773,-74.289648],[-60.790283,-73.711816],[-62.008301,-73.147656],[-60.122217,-73.275293],[-60.009766,-72.937891],[-61.286133,-72.600781],[-60.719434,-72.072656],[-62.256641,-72.017578],[-60.949023,-71.747266],[-61.213574,-71.564062],[-61.958789,-71.657812],[-60.962256,-71.244629],[-62.04043,-70.801367],[-61.504687,-70.490527],[-62.377783,-70.364844],[-61.961084,-70.120117],[-63.747021,-68.70459],[-62.933301,-68.442578],[-63.924463,-68.497656],[-64.078467,-68.771191],[-65.15835,-68.617969],[-65.452002,-68.336719],[-64.829492,-68.127441],[-65.639502,-68.130566],[-65.503125,-67.377246],[-64.819287,-67.307324],[-64.686279,-66.80625],[-63.754736,-66.872949],[-63.752539,-66.277734],[-62.628906,-66.706152],[-62.682031,-66.237305],[-61.756006,-66.429199],[-61.431934,-66.144727],[-61.028418,-66.336523],[-60.618311,-65.933105],[-61.839062,-66.119531],[-62.293262,-65.916406],[-61.703125,-64.987207],[-61.059863,-64.98125],[-59.963086,-64.431348],[-59.645996,-64.583691],[-59.546777,-64.358789],[-58.786084,-64.524219],[-59.005322,-64.194922],[-57.460645,-63.513574],[-56.834766,-63.63125],[-57.020654,-63.372852]]],[[[-45.222656,-78.810742],[-43.947217,-78.597559],[-44.093994,-78.167285],[-45.993164,-77.826855],[-47.69209,-77.840137],[-50.14165,-78.556738],[-50.339258,-79.479492],[-52.297168,-80.141211],[-53.393896,-80.108789],[-54.1625,-80.870117],[-43.52793,-80.191406],[-43.544336,-78.901953],[-45.222656,-78.810742]]],[[[-59.733936,-80.344141],[-60.578809,-79.741016],[-61.633301,-80.344141],[-66.771143,-80.293848],[-60.582812,-80.948145],[-59.733936,-80.344141]]],[[[-70.051123,-69.189062],[-70.416992,-68.788965],[-72.137891,-69.114551],[-71.728516,-70.053711],[-69.618359,-70.398047],[-71.190039,-70.65957],[-69.875781,-70.875977],[-69.869775,-71.125684],[-70.380664,-70.946387],[-72.710449,-71.072949],[-72.21167,-71.335059],[-75.335449,-71.645215],[-73.995605,-72.169824],[-73.775977,-71.848926],[-72.927637,-71.92168],[-72.336621,-71.632227],[-70.820996,-71.906543],[-71.892188,-72.152832],[-70.206006,-72.227734],[-72.7375,-72.280566],[-72.36748,-72.669727],[-69.209326,-72.53418],[-68.241016,-71.822168],[-68.459473,-70.68291],[-70.051123,-69.189062]]],[[[-98.091113,-71.9125],[-98.61543,-71.76377],[-99.833203,-72.046094],[-100.218652,-71.83291],[-102.313623,-72.081055],[-98.407812,-72.547656],[-95.575391,-72.409961],[-95.6854,-72.056641],[-96.978906,-72.221875],[-96.38335,-71.836328],[-97.345215,-72.189062],[-97.584766,-71.882617],[-98.167969,-72.123047],[-98.091113,-71.9125]]],[[[-120.55625,-73.756055],[-123.112158,-73.682227],[-122.859082,-74.342676],[-121.002441,-74.326367],[-120.55625,-73.756055]]],[[[-126.329883,-73.28623],[-127.267627,-73.304004],[-127.211621,-73.724414],[-123.937402,-74.256152],[-124.128516,-73.833984],[-125.798584,-73.801953],[-125.263965,-73.666406],[-126.329883,-73.28623]]],[[[-159.05293,-79.807422],[-159.963525,-79.324316],[-163.256104,-78.72207],[-164.225781,-79.320801],[-159.05293,-79.807422]]],[[[167.084082,-77.32168],[166.506348,-77.189355],[166.729004,-77.850977],[169.352734,-77.524707],[167.084082,-77.32168]]],[[[-31.118848,-79.798438],[-31.68042,-79.634277],[-31.594238,-79.887695],[-29.614453,-79.90957],[-30.779932,-79.647363],[-31.118848,-79.798438]]],[[[-33.93418,-79.32041],[-35.534668,-79.090039],[-36.565967,-79.208789],[-33.93418,-79.32041]]],[[[-70.334082,-79.679883],[-67.038135,-78.315723],[-71.454004,-79.128906],[-71.68667,-79.568066],[-70.334082,-79.679883]]],[[[-57.845996,-64.053906],[-57.925684,-63.806055],[-58.424951,-64.067773],[-58.214062,-64.369727],[-57.294678,-64.366992],[-57.479736,-63.961621],[-57.845996,-64.053906]]],[[[-55.528027,-63.173535],[-56.462842,-63.418066],[-55.075195,-63.324316],[-55.528027,-63.173535]]],[[[-57.978418,-61.911914],[-59.003711,-62.209766],[-57.639551,-62.02041],[-57.978418,-61.911914]]],[[[-63.180566,-64.469531],[-63.485596,-64.260547],[-64.27207,-64.697559],[-63.739502,-64.834277],[-62.836523,-64.571875],[-63.180566,-64.469531]]],[[[-62.325781,-64.424414],[-62.058496,-64.138086],[-62.451416,-64.012402],[-62.781787,-64.479004],[-62.325781,-64.424414]]],[[[-67.988477,-67.474414],[-67.830518,-66.624316],[-69.120361,-67.57793],[-68.58042,-67.732813],[-67.988477,-67.474414]]],[[[-73.706641,-70.635156],[-74.400977,-70.575879],[-74.589697,-70.791992],[-74.953613,-70.590234],[-76.421484,-71.09043],[-74.205029,-70.924121],[-73.706641,-70.635156]]],[[[-74.987109,-69.727832],[-75.80415,-70.038184],[-74.848828,-70.179297],[-74.437988,-69.949609],[-74.987109,-69.727832]]],[[[-74.354443,-73.098438],[-75.376855,-72.82041],[-76.096387,-73.150488],[-74.574658,-73.611328],[-74.354443,-73.098438]]],[[[-91.160693,-73.182227],[-90.76333,-72.681055],[-91.303516,-72.547363],[-91.160693,-73.182227]]],[[[167.642773,-78.141406],[166.111133,-78.089648],[166.121875,-78.274609],[167.642773,-78.141406]]],[[[100.981445,-65.677539],[101.220605,-65.472266],[100.545117,-65.408984],[100.292578,-65.65127],[100.981445,-65.677539]]],[[[26.857227,-70.381152],[26.301074,-70.072461],[26.005371,-70.372949],[26.857227,-70.381152]]],[[[-66.173633,-80.077832],[-65.579248,-79.770801],[-67.687939,-79.528418],[-66.173633,-80.077832]]],[[[-67.261914,-79.452637],[-68.032568,-79.227148],[-68.548926,-79.437402],[-67.261914,-79.452637]]],[[[-55.16543,-61.22041],[-54.670996,-61.116992],[-55.387012,-61.072656],[-55.16543,-61.22041]]],[[[-61.997607,-69.721875],[-61.815967,-69.376172],[-62.442139,-69.145996],[-61.997607,-69.721875]]],[[[-60.625,-62.560059],[-61.149805,-62.63418],[-59.849561,-62.614941],[-60.625,-62.560059]]],[[[96.612695,-66.03584],[96.307031,-66.18584],[96.933984,-66.200781],[96.612695,-66.03584]]],[[[16.222656,-70.007617],[16.573438,-69.723242],[15.596875,-69.828027],[16.222656,-70.007617]]],[[[3.036914,-70.597363],[3.072168,-70.381641],[2.584668,-70.53457],[3.036914,-70.597363]]],[[[-2.532812,-70.767773],[-3.574658,-70.703125],[-2.783496,-71.16748],[-2.092285,-70.820898],[-2.532812,-70.767773]]],[[[-20.607422,-73.886621],[-20.580225,-73.619238],[-22.035352,-74.106543],[-20.489014,-74.492676],[-20.607422,-73.886621]]],[[[-67.348926,-67.766211],[-67.246729,-67.59873],[-67.743262,-67.66123],[-67.348926,-67.766211]]],[[[-116.738623,-74.165039],[-116.381299,-73.865527],[-117.376465,-74.082813],[-116.738623,-74.165039]]],[[[-131.066699,-74.583789],[-130.981104,-74.414062],[-132.162646,-74.425781],[-131.066699,-74.583789]]],[[[-149.230664,-77.120508],[-149.870605,-76.875],[-150.788525,-76.981641],[-149.230664,-77.120508]]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"SX",iso_a3:"SXM",iso_n3:"534"},geometry:{type:"Polygon",coordinates:[[[-63.123047,18.068945],[-63.023047,18.019189],[-63.011182,18.068945],[-63.123047,18.068945]]]}},{type:"Feature",properties:{name:"",full_name:"",iso_a2:"TV",iso_a3:"TUV",iso_n3:"798"},geometry:{type:"Polygon",coordinates:[[[179.213672,-8.524219],[179.203027,-8.466309],[179.195703,-8.534766],[179.213672,-8.524219]]]}}],RC={type:UM,features:NM},jM="modulepreload",VM=function(t){return"/sports/"+t},Rm={},GM=function(o,u,p){if(!u||u.length===0)return o();const _=document.getElementsByTagName("link");return Promise.all(u.map(x=>{if(x=VM(x),x in Rm)return;Rm[x]=!0;const E=x.endsWith(".css"),s=E?'[rel="stylesheet"]':"";if(!!p)for(let U=_.length-1;U>=0;U--){const V=_[U];if(V.href===x&&(!E||V.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${x}"]${s}`))return;const R=document.createElement("link");if(R.rel=E?"stylesheet":jM,E||(R.as="script",R.crossOrigin=""),R.href=x,document.head.appendChild(R),E)return new Promise((U,V)=>{R.addEventListener("load",U),R.addEventListener("error",()=>V(new Error(`Unable to preload CSS for ${x}`)))})})).then(()=>o()).catch(x=>{const E=new Event("vite:preloadError",{cancelable:!0});if(E.payload=x,window.dispatchEvent(E),!E.defaultPrevented)throw x})};var Fy={exports:{}};(function(t){function o(R){if(R=Object.assign({},R),!(this instanceof o))throw new Error("MapboxLanguage needs to be called with the new keyword");this.setLanguage=this.setLanguage.bind(this),this._initialStyleUpdate=this._initialStyleUpdate.bind(this),this._defaultLanguage=R.defaultLanguage,this._isLanguageField=R.languageField||/^name_/,this._getLanguageField=R.getLanguageField||function(V){return V==="mul"?"name":`name_${V}`},this._languageSource=R.languageSource||null,this._languageTransform=R.languageTransform,this._excludedLayerIds=R.excludedLayerIds||[],this.supportedLanguages=R.supportedLanguages||["ar","de","en","es","fr","it","ja","ko","mul","pt","ru","vi","zh-Hans","zh-Hant"]}const u=/^\{name/;function p(R,U){const V=Array.isArray(U)&&U[0]==="get";return V&&u.test(U[1])&&console.warn("This plugin no longer supports the use of token syntax (e.g. {name}). Please use a get expression. See https://docs.mapbox.com/mapbox-gl-js/style-spec/expressions/ for more details."),V&&R.test(U[1])}function _(R,U,V){if(Array.isArray(U))for(let q=1;q<U.length;q++)Array.isArray(U[q])&&(p(R,U[q])&&(U[q][1]=V),_(R,U[q],V))}function x(R,U,V){if(p(R,U)&&(U[1]=V),_(R,U,V),U[0]==="get"&&U[1]==="name"){const q=U.slice();U=["coalesce",["get",V],q]}return U}function E(R,U,V,q){return U.layout&&U.layout["text-field"]&&q.indexOf(U.id)===-1?Object.assign({},U,{layout:Object.assign({},U.layout,{"text-field":x(R,U.layout["text-field"],V)})}):U}function s(R){const U=Object.keys(R.sources).filter(V=>{const q=R.sources[V].url;return q&&q.indexOf("mapbox.mapbox-streets-v8")>-1||/mapbox-streets-v[1-9][1-9]/.test(q)});if(!U.length)throw new Error('If using MapboxLanguage with a Mapbox style, the style must be based on vector tile version 8, e.g. "streets-v11"');return U[0]}o.prototype.setLanguage=function(R,U){if(this.supportedLanguages.indexOf(U)<0)throw new Error(`Language ${U} is not supported`);const V=this._languageSource||s(R);if(!V)return R;const q=this._getLanguageField(U),ve=this._isLanguageField,we=this._excludedLayerIds,xe=R.layers.map(te=>te.source===V?E(ve,te,q,we):te),Ie=Object.assign({},R,{layers:xe});return this._languageTransform?this._languageTransform(Ie,U):Ie},o.prototype._initialStyleUpdate=function(){const R=this._map.getStyle(),U=this._defaultLanguage||P(this.supportedLanguages);this._map.setStyle(this.setLanguage(R,U))};function P(R){const U=navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage,V=U&&U.split("-");let q=U;return V.length>1&&(q=V[0]),R.indexOf(q)>-1?q:null}o.prototype.onAdd=function(R){return this._map=R,this._map.on("style.load",this._initialStyleUpdate),this._container=document.createElement("div"),this._container},o.prototype.onRemove=function(){this._map.off("style.load",this._initialStyleUpdate),this._map=void 0},t.exports=o})(Fy);var $M=Fy.exports;const FC=el($M),ZM=Ue.createContext(null);function qM(t,o){const u=Array.isArray(t)?t[0]:t?t.x:0,p=Array.isArray(t)?t[1]:t?t.y:0,_=Array.isArray(o)?o[0]:o?o.x:0,x=Array.isArray(o)?o[1]:o?o.y:0;return u===_&&p===x}function Gi(t,o){if(t===o)return!0;if(!t||!o)return!1;if(Array.isArray(t)){if(!Array.isArray(o)||t.length!==o.length)return!1;for(let u=0;u<t.length;u++)if(!Gi(t[u],o[u]))return!1;return!0}else if(Array.isArray(o))return!1;if(typeof t=="object"&&typeof o=="object"){const u=Object.keys(t),p=Object.keys(o);if(u.length!==p.length)return!1;for(const _ of u)if(!o.hasOwnProperty(_)||!Gi(t[_],o[_]))return!1;return!0}return!1}function WM(t){const o=t.clone();return o.pixelsToGLUnits=t.pixelsToGLUnits,o}function Fm(t,o){if(!t.getProjection)return;const u=t.getProjection(),p=o.getProjection();Gi(u,p)||o.setProjection(u)}function Bm(t){return{longitude:t.center.lng,latitude:t.center.lat,zoom:t.zoom,pitch:t.pitch,bearing:t.bearing,padding:t.padding}}function Om(t,o){const u=o.viewState||o;let p=!1;if("longitude"in u&&"latitude"in u){const _=t.center;t.center=new _.constructor(u.longitude,u.latitude),p=p||_!==t.center}if("zoom"in u){const _=t.zoom;t.zoom=u.zoom,p=p||_!==t.zoom}if("bearing"in u){const _=t.bearing;t.bearing=u.bearing,p=p||_!==t.bearing}if("pitch"in u){const _=t.pitch;t.pitch=u.pitch,p=p||_!==t.pitch}return u.padding&&!t.isPaddingEqual(u.padding)&&(p=!0,t.padding=u.padding),p}const HM=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Um(t){if(!t)return null;if(typeof t=="string"||("toJS"in t&&(t=t.toJS()),!t.layers))return t;const o={};for(const p of t.layers)o[p.id]=p;const u=t.layers.map(p=>{let _=null;"interactive"in p&&(_=Object.assign({},p),delete _.interactive);const x=o[p.ref];if(x){_=_||Object.assign({},p),delete _.ref;for(const E of HM)E in x&&(_[E]=x[E])}return _||p});return{...t,layers:u}}const Nm={version:8,sources:{},layers:[]},jm={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},r6={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},Vm={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},XM=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],KM=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class Hc{constructor(o,u,p){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=_=>{const x=this.props[Vm[_.type]];x?x(_):_.type==="error"&&console.error(_.error)},this._onPointerEvent=_=>{(_.type==="mousemove"||_.type==="mouseout")&&this._updateHover(_);const x=this.props[jm[_.type]];x&&(this.props.interactiveLayerIds&&_.type!=="mouseover"&&_.type!=="mouseout"&&(_.features=this._hoveredFeatures||this._queryRenderedFeatures(_.point)),x(_),delete _.features)},this._onCameraEvent=_=>{if(!this._internalUpdate){const x=this.props[r6[_.type]];x&&x(_)}_.type in this._deferredEvents&&(this._deferredEvents[_.type]=!1)},this._MapClass=o,this.props=u,this._initialize(p)}get map(){return this._map}get transform(){return this._renderTransform}setProps(o){const u=this.props;this.props=o;const p=this._updateSettings(o,u);p&&this._createShadowTransform(this._map);const _=this._updateSize(o),x=this._updateViewState(o,!0);this._updateStyle(o,u),this._updateStyleComponents(o,u),this._updateHandlers(o,u),(p||_||x&&!this._map.isMoving())&&this.redraw()}static reuse(o,u){const p=Hc.savedMaps.pop();if(!p)return null;const _=p.map,x=_.getContainer();for(u.className=x.className;x.childNodes.length>0;)u.appendChild(x.childNodes[0]);_._container=u;const E=_._resizeObserver;E&&(E.disconnect(),E.observe(u)),p.setProps({...o,styleDiffing:!1}),_.resize();const{initialViewState:s}=o;return s&&(s.bounds?_.fitBounds(s.bounds,{...s.fitBoundsOptions,duration:0}):p._updateViewState(s,!1)),_.isStyleLoaded()?_.fire("load"):_.once("styledata",()=>_.fire("load")),_._update(),p}_initialize(o){const{props:u}=this,{mapStyle:p=Nm}=u,_={...u,...u.initialViewState,accessToken:u.mapboxAccessToken||YM()||null,container:o,style:Um(p)},x=_.initialViewState||_.viewState||_;if(Object.assign(_,{center:[x.longitude||0,x.latitude||0],zoom:x.zoom||0,pitch:x.pitch||0,bearing:x.bearing||0}),u.gl){const U=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=U,u.gl)}const E=new this._MapClass(_);x.padding&&E.setPadding(x.padding),u.cursor&&(E.getCanvas().style.cursor=u.cursor),this._createShadowTransform(E);const s=E._render;E._render=U=>{this._inRender=!0,s.call(E,U),this._inRender=!1};const P=E._renderTaskQueue.run;E._renderTaskQueue.run=U=>{P.call(E._renderTaskQueue,U),this._onBeforeRepaint()},E.on("render",()=>this._onAfterRepaint());const R=E.fire;E.fire=this._fireEvent.bind(this,R),E.on("resize",()=>{this._renderTransform.resize(E.transform.width,E.transform.height)}),E.on("styledata",()=>{this._updateStyleComponents(this.props,{}),Fm(E.transform,this._renderTransform)}),E.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const U in jm)E.on(U,this._onPointerEvent);for(const U in r6)E.on(U,this._onCameraEvent);for(const U in Vm)E.on(U,this._onEvent);this._map=E}recycle(){const u=this.map.getContainer().querySelector("[mapboxgl-children]");u==null||u.remove(),Hc.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const o=this._map;!this._inRender&&o.style&&(o._frame&&(o._frame.cancel(),o._frame=null),o._render())}_createShadowTransform(o){const u=WM(o.transform);o.painter.transform=u,this._renderTransform=u}_updateSize(o){const{viewState:u}=o;if(u){const p=this._map;if(u.width!==p.transform.width||u.height!==p.transform.height)return p.resize(),!0}return!1}_updateViewState(o,u){if(this._internalUpdate)return!1;const p=this._map,_=this._renderTransform,{zoom:x,pitch:E,bearing:s}=_,P=p.isMoving();P&&(_.cameraElevationReference="sea");const R=Om(_,{...Bm(p.transform),...o});if(P&&(_.cameraElevationReference="ground"),R&&u){const U=this._deferredEvents;U.move=!0,U.zoom||(U.zoom=x!==_.zoom),U.rotate||(U.rotate=s!==_.bearing),U.pitch||(U.pitch=E!==_.pitch)}return P||Om(p.transform,o),R}_updateSettings(o,u){const p=this._map;let _=!1;for(const x of XM)if(x in o&&!Gi(o[x],u[x])){_=!0;const E=p[`set${x[0].toUpperCase()}${x.slice(1)}`];E==null||E.call(p,o[x])}return _}_updateStyle(o,u){if(o.cursor!==u.cursor&&(this._map.getCanvas().style.cursor=o.cursor||""),o.mapStyle!==u.mapStyle){const{mapStyle:p=Nm,styleDiffing:_=!0}=o,x={diff:_};return"localIdeographFontFamily"in o&&(x.localIdeographFontFamily=o.localIdeographFontFamily),this._map.setStyle(Um(p),x),!0}return!1}_updateStyleComponents(o,u){const p=this._map;let _=!1;return p.isStyleLoaded()&&("light"in o&&p.setLight&&!Gi(o.light,u.light)&&(_=!0,p.setLight(o.light)),"fog"in o&&p.setFog&&!Gi(o.fog,u.fog)&&(_=!0,p.setFog(o.fog)),"terrain"in o&&p.setTerrain&&!Gi(o.terrain,u.terrain)&&(!o.terrain||p.getSource(o.terrain.source))&&(_=!0,p.setTerrain(o.terrain))),_}_updateHandlers(o,u){var p,_;const x=this._map;let E=!1;for(const s of KM){const P=(p=o[s])!==null&&p!==void 0?p:!0,R=(_=u[s])!==null&&_!==void 0?_:!0;Gi(P,R)||(E=!0,P?x[s].enable(P):x[s].disable())}return E}_queryRenderedFeatures(o){const u=this._map,p=u.transform,{interactiveLayerIds:_=[]}=this.props;try{return u.transform=this._renderTransform,u.queryRenderedFeatures(o,{layers:_.filter(u.getLayer.bind(u))})}catch{return[]}finally{u.transform=p}}_updateHover(o){var u;const{props:p}=this;if(p.interactiveLayerIds&&(p.onMouseMove||p.onMouseEnter||p.onMouseLeave)){const x=o.type,E=((u=this._hoveredFeatures)===null||u===void 0?void 0:u.length)>0,s=this._queryRenderedFeatures(o.point),P=s.length>0;!P&&E&&(o.type="mouseleave",this._onPointerEvent(o)),this._hoveredFeatures=s,P&&!E&&(o.type="mouseenter",this._onPointerEvent(o)),o.type=x}else this._hoveredFeatures=null}_fireEvent(o,u,p){const _=this._map,x=_.transform,E=typeof u=="string"?u:u.type;return E==="move"&&this._updateViewState(this.props,!1),E in r6&&(typeof u=="object"&&(u.viewState=Bm(x)),this._map.isMoving())?(_.transform=this._renderTransform,o.call(_,u,p),_.transform=x,_):(o.call(_,u,p),_)}_onBeforeRepaint(){const o=this._map;this._internalUpdate=!0;for(const p in this._deferredEvents)this._deferredEvents[p]&&o.fire(p);this._internalUpdate=!1;const u=this._map.transform;o.transform=this._renderTransform,this._onAfterRepaint=()=>{Fm(this._renderTransform,u),o.transform=u}}}Hc.savedMaps=[];function YM(){let t=null;if(typeof location<"u"){const o=/access_token=([^&\/]*)/.exec(location.search);t=o&&o[1]}try{t=t||{}.MapboxAccessToken}catch{}try{t=t||{}.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return t}const JM=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function QM(t){if(!t)return null;const o=t.map,u={getMap:()=>o,getCenter:()=>t.transform.center,getZoom:()=>t.transform.zoom,getBearing:()=>t.transform.bearing,getPitch:()=>t.transform.pitch,getPadding:()=>t.transform.padding,getBounds:()=>t.transform.getBounds(),project:p=>{const _=o.transform;o.transform=t.transform;const x=o.project(p);return o.transform=_,x},unproject:p=>{const _=o.transform;o.transform=t.transform;const x=o.unproject(p);return o.transform=_,x},queryTerrainElevation:(p,_)=>{const x=o.transform;o.transform=t.transform;const E=o.queryTerrainElevation(p,_);return o.transform=x,E},queryRenderedFeatures:(p,_)=>{const x=o.transform;o.transform=t.transform;const E=o.queryRenderedFeatures(p,_);return o.transform=x,E}};for(const p of eC(o))!(p in u)&&!JM.includes(p)&&(u[p]=o[p].bind(o));return u}function eC(t){const o=new Set;let u=t;for(;u;){for(const p of Object.getOwnPropertyNames(u))p[0]!=="_"&&typeof t[p]=="function"&&p!=="fire"&&p!=="setEventedParent"&&o.add(p);u=Object.getPrototypeOf(u)}return Array.from(o)}const tC=typeof document<"u"?Ue.useLayoutEffect:Ue.useEffect,nC=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function rC(t,o){for(const p of nC)p in o&&(t[p]=o[p]);const{RTLTextPlugin:u="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=o;u&&t.getRTLTextPluginStatus&&t.getRTLTextPluginStatus()==="unavailable"&&t.setRTLTextPlugin(u,p=>{p&&console.error(p)},!0)}const Qc=Ue.createContext(null);function iC(t,o,u){const p=Ue.useContext(ZM),[_,x]=Ue.useState(null),E=Ue.useRef(),{current:s}=Ue.useRef({mapLib:null,map:null});Ue.useEffect(()=>{const U=t.mapLib;let V=!0,q;return Promise.resolve(U||u).then(ve=>{if(!V)return;if(!ve)throw new Error("Invalid mapLib");const we="Map"in ve?ve:ve.default;if(!we.Map)throw new Error("Invalid mapLib");if(rC(we,t),!we.supported||we.supported(t))t.reuseMaps&&(q=Hc.reuse(t,E.current)),q||(q=new Hc(we.Map,t,E.current)),s.map=QM(q),s.mapLib=we,x(q),p==null||p.onMapMount(s.map,t.id);else throw new Error("Map is not supported by this browser")}).catch(ve=>{const{onError:we}=t;we?we({type:"error",target:null,originalEvent:null,error:ve}):console.error(ve)}),()=>{V=!1,q&&(p==null||p.onMapUnmount(t.id),t.reuseMaps?q.recycle():q.destroy())}},[]),tC(()=>{_&&_.setProps(t)}),Ue.useImperativeHandle(o,()=>s.map,[_]);const P=Ue.useMemo(()=>({position:"relative",width:"100%",height:"100%",...t.style}),[t.style]),R={height:"100%"};return Ue.createElement("div",{id:t.id,ref:E,style:P},_&&Ue.createElement(Qc.Provider,{value:s},Ue.createElement("div",{"mapboxgl-children":"",style:R},t.children)))}const oC=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function c1(t,o){if(!t||!o)return;const u=t.style;for(const p in o){const _=o[p];Number.isFinite(_)&&!oC.test(p)?u[p]=`${_}px`:u[p]=_}}function sC(t,o){const{map:u,mapLib:p}=Ue.useContext(Qc),_=Ue.useRef({props:t});_.current.props=t;const x=Ue.useMemo(()=>{let xe=!1;Ue.Children.forEach(t.children,ne=>{ne&&(xe=!0)});const Ie={...t,element:xe?document.createElement("div"):null},te=new p.Marker(Ie);return te.setLngLat([t.longitude,t.latitude]),te.getElement().addEventListener("click",ne=>{var se,Se;(Se=(se=_.current.props).onClick)===null||Se===void 0||Se.call(se,{type:"click",target:te,originalEvent:ne})}),te.on("dragstart",ne=>{var se,Se;const Be=ne;Be.lngLat=x.getLngLat(),(Se=(se=_.current.props).onDragStart)===null||Se===void 0||Se.call(se,Be)}),te.on("drag",ne=>{var se,Se;const Be=ne;Be.lngLat=x.getLngLat(),(Se=(se=_.current.props).onDrag)===null||Se===void 0||Se.call(se,Be)}),te.on("dragend",ne=>{var se,Se;const Be=ne;Be.lngLat=x.getLngLat(),(Se=(se=_.current.props).onDragEnd)===null||Se===void 0||Se.call(se,Be)}),te},[]);Ue.useEffect(()=>(x.addTo(u.getMap()),()=>{x.remove()}),[]);const{longitude:E,latitude:s,offset:P,style:R,draggable:U=!1,popup:V=null,rotation:q=0,rotationAlignment:ve="auto",pitchAlignment:we="auto"}=t;return Ue.useEffect(()=>{c1(x.getElement(),R)},[R]),Ue.useImperativeHandle(o,()=>x,[]),(x.getLngLat().lng!==E||x.getLngLat().lat!==s)&&x.setLngLat([E,s]),P&&!qM(x.getOffset(),P)&&x.setOffset(P),x.isDraggable()!==U&&x.setDraggable(U),x.getRotation()!==q&&x.setRotation(q),x.getRotationAlignment()!==ve&&x.setRotationAlignment(ve),x.getPitchAlignment()!==we&&x.setPitchAlignment(we),x.getPopup()!==V&&x.setPopup(V),L2.createPortal(t.children,x.getElement())}const aC=Ue.memo(Ue.forwardRef(sC));function Gm(t){return new Set(t?t.trim().split(/\s+/):[])}function lC(t,o){const{map:u,mapLib:p}=Ue.useContext(Qc),_=Ue.useMemo(()=>document.createElement("div"),[]),x=Ue.useRef({props:t});x.current.props=t;const E=Ue.useMemo(()=>{const s={...t},P=new p.Popup(s);return P.setLngLat([t.longitude,t.latitude]),P.once("open",R=>{var U,V;(V=(U=x.current.props).onOpen)===null||V===void 0||V.call(U,R)}),P},[]);if(Ue.useEffect(()=>{const s=P=>{var R,U;(U=(R=x.current.props).onClose)===null||U===void 0||U.call(R,P)};return E.on("close",s),E.setDOMContent(_).addTo(u.getMap()),()=>{E.off("close",s),E.isOpen()&&E.remove()}},[]),Ue.useEffect(()=>{c1(E.getElement(),t.style)},[t.style]),Ue.useImperativeHandle(o,()=>E,[]),E.isOpen()&&((E.getLngLat().lng!==t.longitude||E.getLngLat().lat!==t.latitude)&&E.setLngLat([t.longitude,t.latitude]),t.offset&&!Gi(E.options.offset,t.offset)&&E.setOffset(t.offset),(E.options.anchor!==t.anchor||E.options.maxWidth!==t.maxWidth)&&(E.options.anchor=t.anchor,E.setMaxWidth(t.maxWidth)),E.options.className!==t.className)){const s=Gm(E.options.className),P=Gm(t.className);for(const R of s)P.has(R)||E.removeClassName(R);for(const R of P)s.has(R)||E.addClassName(R);E.options.className=t.className}return L2.createPortal(t.children,_)}Ue.memo(Ue.forwardRef(lC));function R2(t,o,u,p){const _=Ue.useContext(Qc),x=Ue.useMemo(()=>t(_),[]);return Ue.useEffect(()=>{const E=p||u||o,s=typeof o=="function"&&typeof u=="function"?o:null,P=typeof u=="function"?u:typeof o=="function"?o:null,{map:R}=_;return R.hasControl(x)||(R.addControl(x,E==null?void 0:E.position),s&&s(_)),()=>{P&&P(_),R.hasControl(x)&&R.removeControl(x)}},[]),x}function cC(t){const o=R2(({mapLib:u})=>new u.AttributionControl(t),{position:t.position});return Ue.useEffect(()=>{c1(o._container,t.style)},[t.style]),null}Ue.memo(cC);function uC(t){const o=R2(({mapLib:u})=>new u.FullscreenControl({container:t.containerId&&document.getElementById(t.containerId)}),{position:t.position});return Ue.useEffect(()=>{c1(o._controlContainer,t.style)},[t.style]),null}const hC=Ue.memo(uC);function dC(t,o){const u=Ue.useRef({props:t}),p=R2(({mapLib:_})=>{const x=new _.GeolocateControl(t),E=x._setupUI;return x._setupUI=s=>{x._container.hasChildNodes()||E(s)},x.on("geolocate",s=>{var P,R;(R=(P=u.current.props).onGeolocate)===null||R===void 0||R.call(P,s)}),x.on("error",s=>{var P,R;(R=(P=u.current.props).onError)===null||R===void 0||R.call(P,s)}),x.on("outofmaxbounds",s=>{var P,R;(R=(P=u.current.props).onOutOfMaxBounds)===null||R===void 0||R.call(P,s)}),x.on("trackuserlocationstart",s=>{var P,R;(R=(P=u.current.props).onTrackUserLocationStart)===null||R===void 0||R.call(P,s)}),x.on("trackuserlocationend",s=>{var P,R;(R=(P=u.current.props).onTrackUserLocationEnd)===null||R===void 0||R.call(P,s)}),x},{position:t.position});return u.current.props=t,Ue.useImperativeHandle(o,()=>p,[]),Ue.useEffect(()=>{c1(p._container,t.style)},[t.style]),null}Ue.memo(Ue.forwardRef(dC));function pC(t){const o=R2(({mapLib:u})=>new u.NavigationControl(t),{position:t.position});return Ue.useEffect(()=>{c1(o._container,t.style)},[t.style]),null}const fC=Ue.memo(pC);function mC(t){const o=R2(({mapLib:x})=>new x.ScaleControl(t),{position:t.position}),u=Ue.useRef(t),p=u.current;u.current=t;const{style:_}=t;return t.maxWidth!==void 0&&t.maxWidth!==p.maxWidth&&(o.options.maxWidth=t.maxWidth),t.unit!==void 0&&t.unit!==p.unit&&o.setUnit(t.unit),Ue.useEffect(()=>{c1(o._container,_)},[_]),null}Ue.memo(mC);function b5(t,o){if(!t)throw new Error(o)}function _C(t,o,u,p){if(b5(u.id===p.id,"layer id changed"),b5(u.type===p.type,"layer type changed"),u.type==="custom"||p.type==="custom")return;const{layout:_={},paint:x={},filter:E,minzoom:s,maxzoom:P,beforeId:R}=u;if(R!==p.beforeId&&t.moveLayer(o,R),_!==p.layout){const U=p.layout||{};for(const V in _)Gi(_[V],U[V])||t.setLayoutProperty(o,V,_[V]);for(const V in U)_.hasOwnProperty(V)||t.setLayoutProperty(o,V,void 0)}if(x!==p.paint){const U=p.paint||{};for(const V in x)Gi(x[V],U[V])||t.setPaintProperty(o,V,x[V]);for(const V in U)x.hasOwnProperty(V)||t.setPaintProperty(o,V,void 0)}Gi(E,p.filter)||t.setFilter(o,E),(s!==p.minzoom||P!==p.maxzoom)&&t.setLayerZoomRange(o,s,P)}function gC(t,o,u){if(t.style&&t.style._loaded&&(!("source"in u)||t.getSource(u.source))){const p={...u,id:o};delete p.beforeId,t.addLayer(p,u.beforeId)}}let yC=0;function vC(t){const o=Ue.useContext(Qc).map.getMap(),u=Ue.useRef(t),[,p]=Ue.useState(0),_=Ue.useMemo(()=>t.id||`jsx-layer-${yC++}`,[]);if(Ue.useEffect(()=>{if(o){const E=()=>p(s=>s+1);return o.on("styledata",E),E(),()=>{o.off("styledata",E),o.style&&o.style._loaded&&o.getLayer(_)&&o.removeLayer(_)}}},[o]),o&&o.style&&o.getLayer(_))try{_C(o,_,t,u.current)}catch(E){console.warn(E)}else gC(o,_,t);return u.current=t,null}let xC=0;function wC(t,o,u){if(t.style&&t.style._loaded){const p={...u};return delete p.id,delete p.children,t.addSource(o,p),t.getSource(o)}return null}function bC(t,o,u){b5(o.id===u.id,"source id changed"),b5(o.type===u.type,"source type changed");let p="",_=0;for(const E in o)E!=="children"&&E!=="id"&&!Gi(u[E],o[E])&&(p=E,_++);if(!_)return;const x=o.type;if(x==="geojson")t.setData(o.data);else if(x==="image")t.updateImage({url:o.url,coordinates:o.coordinates});else if("setCoordinates"in t&&_===1&&p==="coordinates")t.setCoordinates(o.coordinates);else if("setUrl"in t)switch(p){case"url":t.setUrl(o.url);break;case"tiles":t.setTiles(o.tiles);break}else console.warn(`Unable to update <Source> prop: ${p}`)}function TC(t){const o=Ue.useContext(Qc).map.getMap(),u=Ue.useRef(t),[,p]=Ue.useState(0),_=Ue.useMemo(()=>t.id||`jsx-source-${xC++}`,[]);Ue.useEffect(()=>{if(o){const E=()=>setTimeout(()=>p(s=>s+1),0);return o.on("styledata",E),E(),()=>{var s;if(o.off("styledata",E),o.style&&o.style._loaded&&o.getSource(_)){const P=(s=o.getStyle())===null||s===void 0?void 0:s.layers;if(P)for(const R of P)R.source===_&&o.removeLayer(R.id);o.removeSource(_)}}}},[o]);let x=o&&o.style&&o.getSource(_);return x?bC(x,t,u.current):x=wC(o,_,t),u.current=t,x&&Ue.Children.map(t.children,E=>E&&Ue.cloneElement(E,{source:_}))||null}const EC=GM(()=>Promise.resolve().then(()=>CC),void 0),BC=(()=>Ue.forwardRef(function(o,u){return iC(o,u,EC)}))(),OC=aC,UC=hC,NC=fC,jC=vC,VC=TC;var SC={},By={},Oy={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){for(var _=arguments.length,x=new Array(_),E=0;E<_;E++)x[E]=arguments[E];if(typeof window<"u"){var s;typeof window.gtag>"u"&&(window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)}),(s=window).gtag.apply(s,x)}},u=o;t.default=u})(Oy);var Uy={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=E;var o=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|vs?\.?|via)$/i;function u(s){return s.toString().trim().replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,function(P,R,U){return R>0&&R+P.length!==U.length&&P.search(o)>-1&&U.charAt(R-2)!==":"&&(U.charAt(R+P.length)!=="-"||U.charAt(R-1)==="-")&&U.charAt(R-1).search(/[^\s-]/)<0?P.toLowerCase():P.substr(1).search(/[A-Z]|\../)>-1?P:P.charAt(0).toUpperCase()+P.substr(1)})}function p(s){return typeof s=="string"&&s.indexOf("@")!==-1}var _="REDACTED (Potential Email Address)";function x(s){return p(s)?(console.warn("This arg looks like an email address, redacting."),_):s}function E(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,U=s||"";return P&&(U=u(s)),R&&(U=x(U)),U}})(Uy);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.GA4=void 0;var o=E(Oy),u=E(Uy),p=["eventCategory","eventAction","eventLabel","eventValue","hitType"],_=["title","location"],x=["page","hitType"];function E(Ke){return Ke&&Ke.__esModule?Ke:{default:Ke}}function s(Ke,Ge){if(Ke==null)return{};var Je=P(Ke,Ge),Xe,Ce;if(Object.getOwnPropertySymbols){var st=Object.getOwnPropertySymbols(Ke);for(Ce=0;Ce<st.length;Ce++)Xe=st[Ce],!(Ge.indexOf(Xe)>=0)&&Object.prototype.propertyIsEnumerable.call(Ke,Xe)&&(Je[Xe]=Ke[Xe])}return Je}function P(Ke,Ge){if(Ke==null)return{};var Je={},Xe=Object.keys(Ke),Ce,st;for(st=0;st<Xe.length;st++)Ce=Xe[st],!(Ge.indexOf(Ce)>=0)&&(Je[Ce]=Ke[Ce]);return Je}function R(Ke){"@babel/helpers - typeof";return R=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ge){return typeof Ge}:function(Ge){return Ge&&typeof Symbol=="function"&&Ge.constructor===Symbol&&Ge!==Symbol.prototype?"symbol":typeof Ge},R(Ke)}function U(Ke){return ve(Ke)||q(Ke)||ne(Ke)||V()}function V(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q(Ke){if(typeof Symbol<"u"&&Ke[Symbol.iterator]!=null||Ke["@@iterator"]!=null)return Array.from(Ke)}function ve(Ke){if(Array.isArray(Ke))return se(Ke)}function we(Ke,Ge){var Je=Object.keys(Ke);if(Object.getOwnPropertySymbols){var Xe=Object.getOwnPropertySymbols(Ke);Ge&&(Xe=Xe.filter(function(Ce){return Object.getOwnPropertyDescriptor(Ke,Ce).enumerable})),Je.push.apply(Je,Xe)}return Je}function xe(Ke){for(var Ge=1;Ge<arguments.length;Ge++){var Je=arguments[Ge]!=null?arguments[Ge]:{};Ge%2?we(Object(Je),!0).forEach(function(Xe){Me(Ke,Xe,Je[Xe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ke,Object.getOwnPropertyDescriptors(Je)):we(Object(Je)).forEach(function(Xe){Object.defineProperty(Ke,Xe,Object.getOwnPropertyDescriptor(Je,Xe))})}return Ke}function Ie(Ke,Ge){return Be(Ke)||Se(Ke,Ge)||ne(Ke,Ge)||te()}function te(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ne(Ke,Ge){if(Ke){if(typeof Ke=="string")return se(Ke,Ge);var Je=Object.prototype.toString.call(Ke).slice(8,-1);if(Je==="Object"&&Ke.constructor&&(Je=Ke.constructor.name),Je==="Map"||Je==="Set")return Array.from(Ke);if(Je==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Je))return se(Ke,Ge)}}function se(Ke,Ge){(Ge==null||Ge>Ke.length)&&(Ge=Ke.length);for(var Je=0,Xe=new Array(Ge);Je<Ge;Je++)Xe[Je]=Ke[Je];return Xe}function Se(Ke,Ge){var Je=Ke==null?null:typeof Symbol<"u"&&Ke[Symbol.iterator]||Ke["@@iterator"];if(Je!=null){var Xe,Ce,st,ht,Tt=[],Rt=!0,Nt=!1;try{if(st=(Je=Je.call(Ke)).next,Ge===0){if(Object(Je)!==Je)return;Rt=!1}else for(;!(Rt=(Xe=st.call(Je)).done)&&(Tt.push(Xe.value),Tt.length!==Ge);Rt=!0);}catch(Yt){Nt=!0,Ce=Yt}finally{try{if(!Rt&&Je.return!=null&&(ht=Je.return(),Object(ht)!==ht))return}finally{if(Nt)throw Ce}}return Tt}}function Be(Ke){if(Array.isArray(Ke))return Ke}function ye(Ke,Ge){if(!(Ke instanceof Ge))throw new TypeError("Cannot call a class as a function")}function Ye(Ke,Ge){for(var Je=0;Je<Ge.length;Je++){var Xe=Ge[Je];Xe.enumerable=Xe.enumerable||!1,Xe.configurable=!0,"value"in Xe&&(Xe.writable=!0),Object.defineProperty(Ke,Mt(Xe.key),Xe)}}function lt(Ke,Ge,Je){return Ge&&Ye(Ke.prototype,Ge),Je&&Ye(Ke,Je),Object.defineProperty(Ke,"prototype",{writable:!1}),Ke}function Me(Ke,Ge,Je){return Ge=Mt(Ge),Ge in Ke?Object.defineProperty(Ke,Ge,{value:Je,enumerable:!0,configurable:!0,writable:!0}):Ke[Ge]=Je,Ke}function Mt(Ke){var Ge=Ut(Ke,"string");return R(Ge)==="symbol"?Ge:String(Ge)}function Ut(Ke,Ge){if(R(Ke)!=="object"||Ke===null)return Ke;var Je=Ke[Symbol.toPrimitive];if(Je!==void 0){var Xe=Je.call(Ke,Ge||"default");if(R(Xe)!=="object")return Xe;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Ge==="string"?String:Number)(Ke)}var bt=function(){function Ke(){var Ge=this;ye(this,Ke),Me(this,"reset",function(){Ge.isInitialized=!1,Ge._testMode=!1,Ge._currentMeasurementId,Ge._hasLoadedGA=!1,Ge._isQueuing=!1,Ge._queueGtag=[]}),Me(this,"_gtag",function(){for(var Je=arguments.length,Xe=new Array(Je),Ce=0;Ce<Je;Ce++)Xe[Ce]=arguments[Ce];Ge._testMode||Ge._isQueuing?Ge._queueGtag.push(Xe):o.default.apply(void 0,Xe)}),Me(this,"_loadGA",function(Je,Xe){var Ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"https://www.googletagmanager.com/gtag/js";if(!(typeof window>"u"||typeof document>"u")&&!Ge._hasLoadedGA){var st=document.createElement("script");st.async=!0,st.src="".concat(Ce,"?id=").concat(Je),Xe&&st.setAttribute("nonce",Xe),document.body.appendChild(st),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},Ge._hasLoadedGA=!0}}),Me(this,"_toGtagOptions",function(Je){if(Je){var Xe={cookieUpdate:"cookie_update",cookieExpires:"cookie_expires",cookieDomain:"cookie_domain",cookieFlags:"cookie_flags",userId:"user_id",clientId:"client_id",anonymizeIp:"anonymize_ip",contentGroup1:"content_group1",contentGroup2:"content_group2",contentGroup3:"content_group3",contentGroup4:"content_group4",contentGroup5:"content_group5",allowAdFeatures:"allow_google_signals",allowAdPersonalizationSignals:"allow_ad_personalization_signals",nonInteraction:"non_interaction",page:"page_path",hitCallback:"event_callback"},Ce=Object.entries(Je).reduce(function(st,ht){var Tt=Ie(ht,2),Rt=Tt[0],Nt=Tt[1];return Xe[Rt]?st[Xe[Rt]]=Nt:st[Rt]=Nt,st},{});return Ce}}),Me(this,"initialize",function(Je){var Xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Je)throw new Error("Require GA_MEASUREMENT_ID");var Ce=typeof Je=="string"?[{trackingId:Je}]:Je;Ge._currentMeasurementId=Ce[0].trackingId;var st=Xe.gaOptions,ht=Xe.gtagOptions,Tt=Xe.nonce,Rt=Xe.testMode,Nt=Rt===void 0?!1:Rt,Yt=Xe.gtagUrl;if(Ge._testMode=Nt,Nt||Ge._loadGA(Ge._currentMeasurementId,Tt,Yt),Ge.isInitialized||(Ge._gtag("js",new Date),Ce.forEach(function(Nn){var xo=xe(xe(xe({},Ge._toGtagOptions(xe(xe({},st),Nn.gaOptions))),ht),Nn.gtagOptions);Object.keys(xo).length?Ge._gtag("config",Nn.trackingId,xo):Ge._gtag("config",Nn.trackingId)})),Ge.isInitialized=!0,!Nt){var Yn=U(Ge._queueGtag);for(Ge._queueGtag=[],Ge._isQueuing=!1;Yn.length;){var In=Yn.shift();Ge._gtag.apply(Ge,U(In)),In[0]==="get"&&(Ge._isQueuing=!0)}}}),Me(this,"set",function(Je){if(!Je){console.warn("`fieldsObject` is required in .set()");return}if(R(Je)!=="object"){console.warn("Expected `fieldsObject` arg to be an Object");return}Object.keys(Je).length===0&&console.warn("empty `fieldsObject` given to .set()"),Ge._gaCommand("set",Je)}),Me(this,"_gaCommandSendEvent",function(Je,Xe,Ce,st,ht){Ge._gtag("event",Xe,xe(xe({event_category:Je,event_label:Ce,value:st},ht&&{non_interaction:ht.nonInteraction}),Ge._toGtagOptions(ht)))}),Me(this,"_gaCommandSendEventParameters",function(){for(var Je=arguments.length,Xe=new Array(Je),Ce=0;Ce<Je;Ce++)Xe[Ce]=arguments[Ce];if(typeof Xe[0]=="string")Ge._gaCommandSendEvent.apply(Ge,U(Xe.slice(1)));else{var st=Xe[0],ht=st.eventCategory,Tt=st.eventAction,Rt=st.eventLabel,Nt=st.eventValue;st.hitType;var Yt=s(st,p);Ge._gaCommandSendEvent(ht,Tt,Rt,Nt,Yt)}}),Me(this,"_gaCommandSendTiming",function(Je,Xe,Ce,st){Ge._gtag("event","timing_complete",{name:Xe,value:Ce,event_category:Je,event_label:st})}),Me(this,"_gaCommandSendPageview",function(Je,Xe){if(Xe&&Object.keys(Xe).length){var Ce=Ge._toGtagOptions(Xe),st=Ce.title,ht=Ce.location,Tt=s(Ce,_);Ge._gtag("event","page_view",xe(xe(xe(xe({},Je&&{page_path:Je}),st&&{page_title:st}),ht&&{page_location:ht}),Tt))}else Je?Ge._gtag("event","page_view",{page_path:Je}):Ge._gtag("event","page_view")}),Me(this,"_gaCommandSendPageviewParameters",function(){for(var Je=arguments.length,Xe=new Array(Je),Ce=0;Ce<Je;Ce++)Xe[Ce]=arguments[Ce];if(typeof Xe[0]=="string")Ge._gaCommandSendPageview.apply(Ge,U(Xe.slice(1)));else{var st=Xe[0],ht=st.page;st.hitType;var Tt=s(st,x);Ge._gaCommandSendPageview(ht,Tt)}}),Me(this,"_gaCommandSend",function(){for(var Je=arguments.length,Xe=new Array(Je),Ce=0;Ce<Je;Ce++)Xe[Ce]=arguments[Ce];var st=typeof Xe[0]=="string"?Xe[0]:Xe[0].hitType;switch(st){case"event":Ge._gaCommandSendEventParameters.apply(Ge,Xe);break;case"pageview":Ge._gaCommandSendPageviewParameters.apply(Ge,Xe);break;case"timing":Ge._gaCommandSendTiming.apply(Ge,U(Xe.slice(1)));break;case"screenview":case"transaction":case"item":case"social":case"exception":console.warn("Unsupported send command: ".concat(st));break;default:console.warn("Send command doesn't exist: ".concat(st))}}),Me(this,"_gaCommandSet",function(){for(var Je=arguments.length,Xe=new Array(Je),Ce=0;Ce<Je;Ce++)Xe[Ce]=arguments[Ce];typeof Xe[0]=="string"&&(Xe[0]=Me({},Xe[0],Xe[1])),Ge._gtag("set",Ge._toGtagOptions(Xe[0]))}),Me(this,"_gaCommand",function(Je){for(var Xe=arguments.length,Ce=new Array(Xe>1?Xe-1:0),st=1;st<Xe;st++)Ce[st-1]=arguments[st];switch(Je){case"send":Ge._gaCommandSend.apply(Ge,Ce);break;case"set":Ge._gaCommandSet.apply(Ge,Ce);break;default:console.warn("Command doesn't exist: ".concat(Je))}}),Me(this,"ga",function(){for(var Je=arguments.length,Xe=new Array(Je),Ce=0;Ce<Je;Ce++)Xe[Ce]=arguments[Ce];if(typeof Xe[0]=="string")Ge._gaCommand.apply(Ge,Xe);else{var st=Xe[0];Ge._gtag("get",Ge._currentMeasurementId,"client_id",function(ht){Ge._isQueuing=!1;var Tt=Ge._queueGtag;for(st({get:function(Yt){return Yt==="clientId"?ht:Yt==="trackingId"?Ge._currentMeasurementId:Yt==="apiVersion"?"1":void 0}});Tt.length;){var Rt=Tt.shift();Ge._gtag.apply(Ge,U(Rt))}}),Ge._isQueuing=!0}return Ge.ga}),Me(this,"event",function(Je,Xe){if(typeof Je=="string")Ge._gtag("event",Je,Ge._toGtagOptions(Xe));else{var Ce=Je.action,st=Je.category,ht=Je.label,Tt=Je.value,Rt=Je.nonInteraction,Nt=Je.transport;if(!st||!Ce){console.warn("args.category AND args.action are required in event()");return}var Yt={hitType:"event",eventCategory:(0,u.default)(st),eventAction:(0,u.default)(Ce)};ht&&(Yt.eventLabel=(0,u.default)(ht)),typeof Tt<"u"&&(typeof Tt!="number"?console.warn("Expected `args.value` arg to be a Number."):Yt.eventValue=Tt),typeof Rt<"u"&&(typeof Rt!="boolean"?console.warn("`args.nonInteraction` must be a boolean."):Yt.nonInteraction=Rt),typeof Nt<"u"&&(typeof Nt!="string"?console.warn("`args.transport` must be a string."):(["beacon","xhr","image"].indexOf(Nt)===-1&&console.warn("`args.transport` must be either one of these values: `beacon`, `xhr` or `image`"),Yt.transport=Nt)),Ge._gaCommand("send",Yt)}}),Me(this,"send",function(Je){Ge._gaCommand("send",Je)}),this.reset()}return lt(Ke,[{key:"gtag",value:function(){this._gtag.apply(this,arguments)}}]),Ke}();t.GA4=bt;var Bt=new bt;t.default=Bt})(By);(function(t){function o(s){"@babel/helpers - typeof";return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},o(s)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ReactGAImplementation=void 0;var u=_(By);function p(s){if(typeof WeakMap!="function")return null;var P=new WeakMap,R=new WeakMap;return(p=function(V){return V?R:P})(s)}function _(s,P){if(!P&&s&&s.__esModule)return s;if(s===null||o(s)!=="object"&&typeof s!="function")return{default:s};var R=p(P);if(R&&R.has(s))return R.get(s);var U={},V=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var q in s)if(q!=="default"&&Object.prototype.hasOwnProperty.call(s,q)){var ve=V?Object.getOwnPropertyDescriptor(s,q):null;ve&&(ve.get||ve.set)?Object.defineProperty(U,q,ve):U[q]=s[q]}return U.default=s,R&&R.set(s,U),U}var x=u.GA4;t.ReactGAImplementation=x;var E=u.default;t.default=E})(SC);var Ny={exports:{}};(function(t,o){(function(u,p){t.exports=p()})(gw,function(){var u,p,_;function x(s,P){if(!u)u=P;else if(!p)p=P;else{var R="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+u+")(sharedChunk); ("+p+")(sharedChunk); self.onerror = null;",U={};u(U),_=P(U),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(_.workerUrl=window.URL.createObjectURL(new Blob([R],{type:"text/javascript"})))}}x(["exports"],function(s){var P=typeof self<"u"?self:{},R="2.15.0";let U;const V={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(U==null){const n=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{U={}.API_URL_REGEX!=null?new RegExp({}.API_URL_REGEX):n}catch{U=n}}return U},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!V.API_URL)return null;try{const n=new URL(V.API_URL);return n.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":n.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},q={supported:!1,testSupport:function(n){!xe&&we&&(Ie?te(n):ve=n)}};let ve,we,xe=!1,Ie=!1;function te(n){const e=n.createTexture();n.bindTexture(n.TEXTURE_2D,e);try{if(n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,we),n.isContextLost())return;q.supported=!0}catch{}n.deleteTexture(e),xe=!0}P.document&&(we=P.document.createElement("img"),we.onload=function(){ve&&te(ve),ve=null,Ie=!0},we.onerror=function(){xe=!0,ve=null},we.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const ne="01";function se(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Se=Be;function Be(n,e,r,a){this.cx=3*n,this.bx=3*(r-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(a-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=e,this.p2x=r,this.p2y=a}Be.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},solveCurveX:function(n,e){if(e===void 0&&(e=1e-6),n<0)return 0;if(n>1)return 1;for(var r=n,a=0;a<8;a++){var c=this.sampleCurveX(r)-n;if(Math.abs(c)<e)return r;var d=this.sampleCurveDerivativeX(r);if(Math.abs(d)<1e-6)break;r-=c/d}var m=0,y=1;for(r=n,a=0;a<20&&(c=this.sampleCurveX(r),!(Math.abs(c-n)<e));a++)n>c?m=r:y=r,r=.5*(y-m)+m;return r},solve:function(n,e){return this.sampleCurveY(this.solveCurveX(n,e))}};var ye=se(Se),Ye=lt;function lt(n,e){this.x=n,this.y=e}lt.prototype={clone:function(){return new lt(this.x,this.y)},add:function(n){return this.clone()._add(n)},sub:function(n){return this.clone()._sub(n)},multByPoint:function(n){return this.clone()._multByPoint(n)},divByPoint:function(n){return this.clone()._divByPoint(n)},mult:function(n){return this.clone()._mult(n)},div:function(n){return this.clone()._div(n)},rotate:function(n){return this.clone()._rotate(n)},rotateAround:function(n,e){return this.clone()._rotateAround(n,e)},matMult:function(n){return this.clone()._matMult(n)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(n){return this.x===n.x&&this.y===n.y},dist:function(n){return Math.sqrt(this.distSqr(n))},distSqr:function(n){var e=n.x-this.x,r=n.y-this.y;return e*e+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(n){return Math.atan2(this.y-n.y,this.x-n.x)},angleWith:function(n){return this.angleWithSep(n.x,n.y)},angleWithSep:function(n,e){return Math.atan2(this.x*e-this.y*n,this.x*n+this.y*e)},_matMult:function(n){var e=n[2]*this.x+n[3]*this.y;return this.x=n[0]*this.x+n[1]*this.y,this.y=e,this},_add:function(n){return this.x+=n.x,this.y+=n.y,this},_sub:function(n){return this.x-=n.x,this.y-=n.y,this},_mult:function(n){return this.x*=n,this.y*=n,this},_div:function(n){return this.x/=n,this.y/=n,this},_multByPoint:function(n){return this.x*=n.x,this.y*=n.y,this},_divByPoint:function(n){return this.x/=n.x,this.y/=n.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var n=this.y;return this.y=this.x,this.x=-n,this},_rotate:function(n){var e=Math.cos(n),r=Math.sin(n),a=r*this.x+e*this.y;return this.x=e*this.x-r*this.y,this.y=a,this},_rotateAround:function(n,e){var r=Math.cos(n),a=Math.sin(n),c=e.y+a*(this.x-e.x)+r*(this.y-e.y);return this.x=e.x+r*(this.x-e.x)-a*(this.y-e.y),this.y=c,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},lt.convert=function(n){return n instanceof lt?n:Array.isArray(n)?new lt(n[0],n[1]):n};var Me=se(Ye);const Mt=Math.PI/180,Ut=180/Math.PI;function bt(n){return n*Mt}function Bt(n){return n*Ut}const Ke=[[0,0],[1,0],[1,1],[0,1]];function Ge(n){if(n<=0)return 0;if(n>=1)return 1;const e=n*n,r=e*n;return 4*(n<.5?r:3*(n-e)+r-.75)}function Je(n,e,r,a){const c=new ye(n,e,r,a);return function(d){return c.solve(d)}}const Xe=Je(.25,.1,.25,1);function Ce(n,e,r){return Math.min(r,Math.max(e,n))}function st(n,e,r){return(r=Ce((r-n)/(e-n),0,1))*r*(3-2*r)}function ht(n,e,r){const a=r-e,c=((n-e)%a+a)%a+e;return c===e?r:c}function Tt(n,e,r){if(!n.length)return r(null,[]);let a=n.length;const c=new Array(n.length);let d=null;n.forEach((m,y)=>{e(m,(w,b)=>{w&&(d=w),c[y]=b,--a==0&&r(d,c)})})}function Rt(n){const e=[];for(const r in n)e.push(n[r]);return e}function Nt(n,...e){for(const r of e)for(const a in r)n[a]=r[a];return n}let Yt=1;function Yn(){return Yt++}function In(){return function n(e){return e?(e^Math.random()*(16>>e/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,n)}()}function Nn(n){return n<=1?1:Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function xo(n){return!!n&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(n)}function wo(n,e){n.forEach(r=>{e[r]&&(e[r]=e[r].bind(e))})}function Jo(n,e){return n.indexOf(e,n.length-e.length)!==-1}function Ft(n,e,r){const a={};for(const c in n)a[c]=e.call(r||this,n[c],c,n);return a}function fi(n,e,r){const a={};for(const c in n)e.call(r||this,n[c],c,n)&&(a[c]=n[c]);return a}function kr(n){return Array.isArray(n)?n.map(kr):typeof n=="object"&&n?Ft(n,kr):n}const vs={};function dn(n){vs[n]||(typeof console<"u"&&console.warn(n),vs[n]=!0)}function Zr(n,e,r){return(r.y-n.y)*(e.x-n.x)>(e.y-n.y)*(r.x-n.x)}function ea(n){let e=0;for(let r,a,c=0,d=n.length,m=d-1;c<d;m=c++)r=n[c],a=n[m],e+=(a.x-r.x)*(r.y+a.y);return e}function zi(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Or(n){const e={};if(n.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(r,a,c,d)=>{const m=c||d;return e[a]=!m||m.toLowerCase(),""}),e["max-age"]){const r=parseInt(e["max-age"],10);isNaN(r)?delete e["max-age"]:e["max-age"]=r}return e}let xs=null;function mi(n){if(xs==null){const e=n.navigator?n.navigator.userAgent:null;xs=!!n.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return xs}function Qo(n){try{const e=P[n];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch{return!1}}function _i(n,e){return[n[4*e],n[4*e+1],n[4*e+2],n[4*e+3]]}const Ur="mapbox-tiles";let Xi=500,ws=50,Er,Ki;function qr(){try{return P.caches}catch{}}function Yi(){qr()&&!Er&&(Er=P.caches.open(Ur))}function bo(n){const e=n.indexOf("?");if(e<0)return n;const r=function(c){const d=c.indexOf("?");return d>0?c.slice(d+1).split("&"):[]}(n),a=r.filter(c=>{const d=c.split("=");return d[0]==="language"||d[0]==="worldview"});return a.length?`${n.slice(0,e)}?${a.join("&")}`:n.slice(0,e)}let es=1/0;const To={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(To);class Li extends Error{constructor(e,r,a){r===401&&re(a)&&(e+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(e),this.status=r,this.url=a}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const gi=zi()?()=>self.worker&&self.worker.referrer:()=>(P.location.protocol==="blob:"?P.parent:P).location.href,Ji=function(n,e){if(!(/^file:/.test(r=n.url)||/^file:/.test(gi())&&!/^\w+:/.test(r))){if(P.fetch&&P.Request&&P.AbortController&&P.Request.prototype.hasOwnProperty("signal"))return function(a,c){const d=new P.AbortController,m=new P.Request(a.url,{method:a.method||"GET",body:a.body,credentials:a.credentials,headers:a.headers,referrer:gi(),referrerPolicy:a.referrerPolicy,signal:d.signal});let y=!1,w=!1;const b=(M=m.url).indexOf("sku=")>0&&re(M);var M;a.type==="json"&&m.headers.set("Accept","application/json");const A=(L,D,O)=>{if(w)return;if(L&&L.message!=="SecurityError"&&dn(L.toString()),D&&O)return I(D);const Z=Date.now();P.fetch(m).then(Q=>{if(Q.ok){const de=b?Q.clone():null;return I(Q,de,Z)}return c(new Li(Q.statusText,Q.status,a.url))}).catch(Q=>{Q.name!=="AbortError"&&c(new Error(`${Q.message} ${a.url}`))})},I=(L,D,O)=>{(a.type==="arrayBuffer"?L.arrayBuffer():a.type==="json"?L.json():L.text()).then(Z=>{w||(D&&O&&function(Q,de,ee){if(Yi(),!Er)return;const ce={status:de.status,statusText:de.statusText,headers:new P.Headers};de.headers.forEach((Le,Ae)=>ce.headers.set(Ae,Le));const fe=Or(de.headers.get("Cache-Control")||"");if(fe["no-store"])return;fe["max-age"]&&ce.headers.set("Expires",new Date(ee+1e3*fe["max-age"]).toUTCString());const pe=ce.headers.get("Expires");pe&&(new Date(pe).getTime()-ee<42e4||function(Le,Ae){if(Ki===void 0)try{new Response(new ReadableStream),Ki=!0}catch{Ki=!1}Ki?Ae(Le.body):Le.blob().then(Ae)}(de,Le=>{const Ae=new P.Response(Le,ce);Yi(),Er&&Er.then($e=>$e.put(bo(Q.url),Ae)).catch($e=>dn($e.message))}))}(m,D,O),y=!0,c(null,Z,L.headers.get("Cache-Control"),L.headers.get("Expires")))}).catch(Z=>{w||c(new Error(Z.message))})};return b?function(L,D){if(Yi(),!Er)return D(null);const O=bo(L.url);Er.then(Z=>{Z.match(O).then(Q=>{const de=function(ee){if(!ee)return!1;const ce=new Date(ee.headers.get("Expires")||0),fe=Or(ee.headers.get("Cache-Control")||"");return ce>Date.now()&&!fe["no-cache"]}(Q);Z.delete(O),de&&Z.put(O,Q.clone()),D(null,Q,de)}).catch(D)}).catch(D)}(m,A):A(null,null),{cancel:()=>{w=!0,y||d.abort()}}}(n,e);if(zi()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",n,e,void 0,!0)}var r;return function(a,c){const d=new P.XMLHttpRequest;d.open(a.method||"GET",a.url,!0),a.type==="arrayBuffer"&&(d.responseType="arraybuffer");for(const m in a.headers)d.setRequestHeader(m,a.headers[m]);return a.type==="json"&&(d.responseType="text",d.setRequestHeader("Accept","application/json")),d.withCredentials=a.credentials==="include",d.onerror=()=>{c(new Error(d.statusText))},d.onload=()=>{if((d.status>=200&&d.status<300||d.status===0)&&d.response!==null){let m=d.response;if(a.type==="json")try{m=JSON.parse(d.response)}catch(y){return c(y)}c(null,m,d.getResponseHeader("Cache-Control"),d.getResponseHeader("Expires"))}else c(new Li(d.statusText,d.status,a.url))},d.send(a.body),{cancel:()=>d.abort()}}(n,e)},Qi=function(n,e){return Ji(Nt(n,{type:"arrayBuffer"}),e)};function ta(n){const e=P.document.createElement("a");return e.href=n,e.protocol===P.document.location.protocol&&e.host===P.document.location.host}const ue="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let N,G;N=[],G=0;const ae=function(n,e){if(q.supported&&(n.headers||(n.headers={}),n.headers.accept="image/webp,*/*"),G>=V.MAX_PARALLEL_IMAGE_REQUESTS){const d={requestParameters:n,callback:e,cancelled:!1,cancel(){this.cancelled=!0}};return N.push(d),d}G++;let r=!1;const a=()=>{if(!r)for(r=!0,G--;N.length&&G<V.MAX_PARALLEL_IMAGE_REQUESTS;){const d=N.shift(),{requestParameters:m,callback:y,cancelled:w}=d;w||(d.cancel=ae(m,y).cancel)}},c=Qi(n,(d,m,y,w)=>{a(),d?e(d):m&&(P.createImageBitmap?function(b,M){const A=new P.Blob([new Uint8Array(b)],{type:"image/png"});P.createImageBitmap(A).then(I=>{M(null,I)}).catch(I=>{M(new Error(`Could not load image because of ${I.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(m,(b,M)=>e(b,M,y,w)):function(b,M){const A=new P.Image,I=P.URL;A.onload=()=>{M(null,A),I.revokeObjectURL(A.src),A.onload=null,P.requestAnimationFrame(()=>{A.src=ue})},A.onerror=()=>M(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const L=new P.Blob([new Uint8Array(b)],{type:"image/png"});A.src=b.byteLength?I.createObjectURL(L):ue}(m,(b,M)=>e(b,M,y,w)))});return{cancel:()=>{c.cancel(),a()}}},j="NO_ACCESS_TOKEN";function W(n){return n.indexOf("mapbox:")===0}function re(n){return V.API_URL_REGEX.test(n)}function he(n){return V.API_CDN_URL_REGEX.test(n)}function le(n){return V.API_STYLE_REGEX.test(n)&&!be(n)}function be(n){return V.API_SPRITE_REGEX.test(n)}const Oe=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function je(n){const e=n.match(Oe);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function De(n){const e=n.params.length?`?${n.params.join("&")}`:"";return`${n.protocol}://${n.authority}${n.path}${e}`}const gt="mapbox.eventData";function It(n){if(!n)return null;const e=n.split(".");if(!e||e.length!==3)return null;try{return JSON.parse(decodeURIComponent(P.atob(e[1]).split("").map(r=>"%"+("00"+r.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class pt{constructor(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(e){const r=It(V.ACCESS_TOKEN);let a="";return a=r&&r.u?P.btoa(encodeURIComponent(r.u).replace(/%([0-9A-F]{2})/g,(c,d)=>String.fromCharCode(+("0x"+d)))):V.ACCESS_TOKEN||"",e?`${gt}.${e}:${a}`:`${gt}:${a}`}fetchEventData(){const e=Qo("localStorage"),r=this.getStorageKey(),a=this.getStorageKey("uuid");if(e)try{const c=P.localStorage.getItem(r);c&&(this.eventData=JSON.parse(c));const d=P.localStorage.getItem(a);d&&(this.anonId=d)}catch{dn("Unable to read from LocalStorage")}}saveEventData(){const e=Qo("localStorage"),r=this.getStorageKey(),a=this.getStorageKey("uuid");if(e)try{P.localStorage.setItem(a,this.anonId),Object.keys(this.eventData).length>=1&&P.localStorage.setItem(r,JSON.stringify(this.eventData))}catch{dn("Unable to write to LocalStorage")}}processRequests(e){}postEvent(e,r,a,c){if(!V.EVENTS_URL)return;const d=je(V.EVENTS_URL);d.params.push(`access_token=${c||V.ACCESS_TOKEN||""}`);const m={event:this.type,created:new Date(e).toISOString()},y=r?Nt(m,r):m,w={url:De(d),headers:{"Content-Type":"text/plain"},body:JSON.stringify([y])};this.pendingRequest=function(b,M){return Ji(Nt(b,{method:"POST"}),M)}(w,b=>{this.pendingRequest=null,a(b),this.saveEventData(),this.processRequests(c)})}queueRequest(e,r){this.queue.push(e),this.processRequests(r)}}const Et=new class extends pt{constructor(n){super("appUserTurnstile"),this._customAccessToken=n}postTurnstileEvent(n,e){V.EVENTS_URL&&V.ACCESS_TOKEN&&Array.isArray(n)&&n.some(r=>W(r)||re(r))&&this.queueRequest(Date.now(),e)}processRequests(n){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const e=It(V.ACCESS_TOKEN),r=e?e.u:V.ACCESS_TOKEN;let a=r!==this.eventData.tokenU;xo(this.anonId)||(this.anonId=In(),a=!0);const c=this.queue.shift();if(this.eventData.lastSuccess){const d=new Date(this.eventData.lastSuccess),m=new Date(c),y=(c-this.eventData.lastSuccess)/864e5;a=a||y>=1||y<-1||d.getDate()!==m.getDate()}else a=!0;a?this.postEvent(c,{sdkIdentifier:"mapbox-gl-js",sdkVersion:R,skuId:ne,"enabled.telemetry":!1,userId:this.anonId},d=>{d||(this.eventData.lastSuccess=c,this.eventData.tokenU=r)},n):this.processRequests()}},Dt=Et.postTurnstileEvent.bind(Et),tn=new class extends pt{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(n,e,r,a){this.skuToken=e,this.errorCb=a,V.EVENTS_URL&&(r||V.ACCESS_TOKEN?this.queueRequest({id:n,timestamp:Date.now()},r):this.errorCb(new Error(j)))}processRequests(n){if(this.pendingRequest||this.queue.length===0)return;const{id:e,timestamp:r}=this.queue.shift();e&&this.success[e]||(this.anonId||this.fetchEventData(),xo(this.anonId)||(this.anonId=In()),this.postEvent(r,{sdkIdentifier:"mapbox-gl-js",sdkVersion:R,skuId:ne,skuToken:this.skuToken,userId:this.anonId},a=>{a?this.errorCb(a):e&&(this.success[e]=!0)},n))}},en=tn.postMapLoadEvent.bind(tn),jn=new class extends pt{constructor(){super("gljs.performance")}postPerformanceEvent(n,e){V.EVENTS_URL&&(n||V.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:e},n)}processRequests(n){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:e,performanceData:r}=this.queue.shift(),a=function(c){const d=P.performance.getEntriesByType("resource"),m=P.performance.getEntriesByType("mark"),y=function(I){const L={};if(I){for(const D in I)if(D!=="other")for(const O of I[D]){const Z=`${D}ResolveRangeMin`,Q=`${D}ResolveRangeMax`,de=`${D}RequestCount`,ee=`${D}RequestCachedCount`;L[Z]=Math.min(L[Z]||1/0,O.startTime),L[Q]=Math.max(L[Q]||-1/0,O.responseEnd);const ce=fe=>{L[fe]===void 0&&(L[fe]=0),++L[fe]};O.transferSize!==void 0&&O.transferSize===0&&ce(ee),ce(de)}}return L}(function(I,L){const D={};if(I)for(const O of I){const Z=L(O);D[Z]===void 0&&(D[Z]=[]),D[Z].push(O)}return D}(d,na)),w=P.devicePixelRatio,b=P.navigator.connection||P.navigator.mozConnection||P.navigator.webkitConnection,M={counters:[],metadata:[],attributes:[]},A=(I,L,D)=>{D!=null&&I.push({name:L,value:D.toString()})};for(const I in y)A(M.counters,I,y[I]);if(c.interactionRange[0]!==1/0&&c.interactionRange[1]!==-1/0&&(A(M.counters,"interactionRangeMin",c.interactionRange[0]),A(M.counters,"interactionRangeMax",c.interactionRange[1])),m)for(const I of Object.keys(eo)){const L=eo[I],D=m.find(O=>O.name===L);D&&A(M.counters,L,D.startTime)}return A(M.counters,"visibilityHidden",c.visibilityHidden),A(M.attributes,"style",function(I){if(I)for(const L of I){const D=L.name.split("?")[0];if(le(D)){const O=D.split("/").slice(-2);if(O.length===2)return`mapbox://styles/${O[0]}/${O[1]}`}}}(d)),A(M.attributes,"terrainEnabled",c.terrainEnabled?"true":"false"),A(M.attributes,"fogEnabled",c.fogEnabled?"true":"false"),A(M.attributes,"projection",c.projection),A(M.attributes,"zoom",c.zoom),A(M.metadata,"devicePixelRatio",w),A(M.metadata,"connectionEffectiveType",b?b.effectiveType:void 0),A(M.metadata,"navigatorUserAgent",P.navigator.userAgent),A(M.metadata,"screenWidth",P.screen.width),A(M.metadata,"screenHeight",P.screen.height),A(M.metadata,"windowWidth",P.innerWidth),A(M.metadata,"windowHeight",P.innerHeight),A(M.metadata,"mapWidth",c.width/w),A(M.metadata,"mapHeight",c.height/w),A(M.metadata,"webglRenderer",c.renderer),A(M.metadata,"webglVendor",c.vendor),A(M.metadata,"sdkVersion",R),A(M.metadata,"sdkIdentifier","mapbox-gl-js"),M}(r);for(const c of a.metadata);for(const c of a.counters);for(const c of a.attributes);this.postEvent(e,a,()=>{},n)}},Bn=jn.postPerformanceEvent.bind(jn),Sr=new class extends pt{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(n,e,r,a){if(!V.API_URL||!V.SESSION_PATH)return;const c=je(V.API_URL+V.SESSION_PATH);c.params.push(`sku=${e||""}`),c.params.push(`access_token=${a||V.ACCESS_TOKEN||""}`);const d={url:De(c),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(m,y){return Ji(Nt(m,{method:"GET"}),y)}(d,m=>{this.pendingRequest=null,r(m),this.saveEventData(),this.processRequests(a)})}getSessionAPI(n,e,r,a){this.skuToken=e,this.errorCb=a,V.SESSION_PATH&&V.API_URL&&(r||V.ACCESS_TOKEN?this.queueRequest({id:n,timestamp:Date.now()},r):this.errorCb(new Error(j)))}processRequests(n){if(this.pendingRequest||this.queue.length===0)return;const{id:e,timestamp:r}=this.queue.shift();e&&this.success[e]||this.getSession(r,this.skuToken,a=>{a?this.errorCb(a):e&&(this.success[e]=!0)},n)}},kn=Sr.getSessionAPI.bind(Sr),Vn=new Set,eo={create:"create",load:"load",fullLoad:"fullLoad"},bs={mark(n){P.performance.mark(n)},measure(n,e,r){P.performance.measure(n,e,r)}};function na(n){const e=n.name.split("?")[0];return he(e)&&e.includes("mapbox-gl.js")?"javascript":he(e)&&e.includes("mapbox-gl.css")?"css":function(r){return V.API_FONTS_REGEX.test(r)}(e)?"fontRange":be(e)?"sprite":le(e)?"style":function(r){return V.API_TILEJSON_REGEX.test(r)}(e)?"tilejson":"other"}const Jt=P.performance;function ts(n){const e=n?n.url.toString():void 0;return Jt.getEntriesByName(e)}let nn,mn,fr,Nr;const Di={now:()=>fr!==void 0?fr:P.performance.now(),setNow(n){fr=n},restoreNow(){fr=void 0},frame(n){const e=P.requestAnimationFrame(n);return{cancel:()=>P.cancelAnimationFrame(e)}},getImageData(n,e=0){const{width:r,height:a}=n;Nr||(Nr=P.document.createElement("canvas"));const c=Nr.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return(r>Nr.width||a>Nr.height)&&(Nr.width=r,Nr.height=a),c.clearRect(-e,-e,r+2*e,a+2*e),c.drawImage(n,0,0,r,a),c.getImageData(-e,-e,r+2*e,a+2*e)},resolveURL:n=>(nn||(nn=P.document.createElement("a")),nn.href=n,nn.href),get devicePixelRatio(){return P.devicePixelRatio},get prefersReducedMotion(){return!!P.matchMedia&&(mn==null&&(mn=P.matchMedia("(prefers-reduced-motion: reduce)")),mn.matches)}};function eu(n,e,r){r[n]&&r[n].indexOf(e)!==-1||(r[n]=r[n]||[],r[n].push(e))}function tu(n,e,r){if(r&&r[n]){const a=r[n].indexOf(e);a!==-1&&r[n].splice(a,1)}}class Ts{constructor(e,r={}){Nt(this,r),this.type=e}}class Eo extends Ts{constructor(e,r={}){super("error",Nt({error:e},r))}}class il{on(e,r){return this._listeners=this._listeners||{},eu(e,r,this._listeners),this}off(e,r){return tu(e,r,this._listeners),tu(e,r,this._oneTimeListeners),this}once(e,r){return r?(this._oneTimeListeners=this._oneTimeListeners||{},eu(e,r,this._oneTimeListeners),this):new Promise(a=>this.once(e,a))}fire(e,r){typeof e=="string"&&(e=new Ts(e,r||{}));const a=e.type;if(this.listens(a)){e.target=this;const c=this._listeners&&this._listeners[a]?this._listeners[a].slice():[];for(const y of c)y.call(this,e);const d=this._oneTimeListeners&&this._oneTimeListeners[a]?this._oneTimeListeners[a].slice():[];for(const y of d)tu(a,y,this._oneTimeListeners),y.call(this,e);const m=this._eventedParent;m&&(Nt(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),m.fire(e))}else e instanceof Eo&&console.error(e.error);return this}listens(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}setEventedParent(e,r){return this._eventedParent=e,this._eventedParentData=r,this}}var Ve=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function So(n,...e){for(const r of e)for(const a in r)n[a]=r[a];return n}function Jn(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function yr(n){if(Array.isArray(n))return n.map(yr);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){const e={};for(const r in n)e[r]=yr(n[r]);return e}return Jn(n)}class F2 extends Error{constructor(e,r){super(r),this.message=r,this.key=e}}var to=F2;class nu{constructor(e,r=[]){this.parent=e,this.bindings={};for(const[a,c]of r)this.bindings[a]=c}concat(e){return new nu(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}var B2=nu;const ra={kind:"null"},_t={kind:"number"},Qt={kind:"string"},Ht={kind:"boolean"},si={kind:"color"},Ri={kind:"object"},Xt={kind:"value"},ai={kind:"collator"},ol={kind:"formatted"},Es={kind:"resolvedImage"};function yi(n,e){return{kind:"array",itemType:n,N:e}}function Dn(n){if(n.kind==="array"){const e=Dn(n.itemType);return typeof n.N=="number"?`array<${e}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${e}>`}return n.kind}const O2=[ra,_t,Qt,Ht,si,ol,Ri,yi(Xt),Es];function Mo(n,e){if(e.kind==="error")return null;if(n.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!Mo(n.itemType,e.itemType))&&(typeof n.N!="number"||n.N===e.N))return null}else{if(n.kind===e.kind)return null;if(n.kind==="value"){for(const r of O2)if(!Mo(r,e))return null}}return`Expected ${Dn(n)} but found ${Dn(e)} instead.`}function sl(n,e){return e.some(r=>r.kind===n.kind)}function al(n,e){return e.some(r=>r==="null"?n===null:r==="array"?Array.isArray(n):r==="object"?n&&!Array.isArray(n)&&typeof n=="object":r===typeof n)}var ru,U2={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ll(n){return(n=Math.round(n))<0?0:n>255?255:n}function cl(n){return ll(n[n.length-1]==="%"?parseFloat(n)/100*255:parseInt(n))}function u1(n){return(e=n[n.length-1]==="%"?parseFloat(n)/100:parseFloat(n))<0?0:e>1?1:e;var e}function ia(n,e,r){return r<0?r+=1:r>1&&(r-=1),6*r<1?n+(e-n)*r*6:2*r<1?e:3*r<2?n+(e-n)*(2/3-r)*6:n}try{ru={}.parseCSSColor=function(n){var e,r=n.replace(/ /g,"").toLowerCase();if(r in U2)return U2[r].slice();if(r[0]==="#")return r.length===4?(e=parseInt(r.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:r.length===7&&(e=parseInt(r.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var a=r.indexOf("("),c=r.indexOf(")");if(a!==-1&&c+1===r.length){var d=r.substr(0,a),m=r.substr(a+1,c-(a+1)).split(","),y=1;switch(d){case"rgba":if(m.length!==4)return null;y=u1(m.pop());case"rgb":return m.length!==3?null:[cl(m[0]),cl(m[1]),cl(m[2]),y];case"hsla":if(m.length!==4)return null;y=u1(m.pop());case"hsl":if(m.length!==3)return null;var w=(parseFloat(m[0])%360+360)%360/360,b=u1(m[1]),M=u1(m[2]),A=M<=.5?M*(b+1):M+b-M*b,I=2*M-A;return[ll(255*ia(I,A,w+1/3)),ll(255*ia(I,A,w)),ll(255*ia(I,A,w-1/3)),y];default:return null}}return null}}catch{}class Wr{constructor(e,r,a,c=1){this.r=e,this.g=r,this.b=a,this.a=c}static parse(e){if(!e)return;if(e instanceof Wr)return e;if(typeof e!="string")return;const r=ru(e);return r?new Wr(r[0]/255*r[3],r[1]/255*r[3],r[2]/255*r[3],r[3]):void 0}toString(){const[e,r,a,c]=this.toArray();return`rgba(${Math.round(e)},${Math.round(r)},${Math.round(a)},${c})`}toArray(){const{r:e,g:r,b:a,a:c}=this;return c===0?[0,0,0,0]:[255*e/c,255*r/c,255*a/c,c]}toArray01(){const{r:e,g:r,b:a,a:c}=this;return c===0?[0,0,0,0]:[e/c,r/c,a/c,c]}toArray01PremultipliedAlpha(){const{r:e,g:r,b:a,a:c}=this;return[e,r,a,c]}}Wr.black=new Wr(0,0,0,1),Wr.white=new Wr(1,1,1,1),Wr.transparent=new Wr(0,0,0,0),Wr.red=new Wr(1,0,0,1),Wr.blue=new Wr(0,0,1,1);var Wn=Wr;class iu{constructor(e,r,a){this.sensitivity=e?r?"variant":"case":r?"accent":"base",this.locale=a,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,r){return this.collator.compare(e,r)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class ou{constructor(e,r,a,c,d){this.text=e.normalize?e.normalize():e,this.image=r,this.scale=a,this.fontStack=c,this.textColor=d}}class Hr{constructor(e){this.sections=e}static fromString(e){return new Hr([new ou(e,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof Hr?e:Hr.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const r of this.sections){if(r.image){e.push(["image",r.image.name]);continue}e.push(r.text);const a={};r.fontStack&&(a["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(a["font-scale"]=r.scale),r.textColor&&(a["text-color"]=["rgba"].concat(r.textColor.toArray())),e.push(a)}return e}}class vi{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new vi({name:e,available:!1}):null}serialize(){return["image",this.name]}}function N2(n,e,r,a){return typeof n=="number"&&n>=0&&n<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof r=="number"&&r>=0&&r<=255?a===void 0||typeof a=="number"&&a>=0&&a<=1?null:`Invalid rgba value [${[n,e,r,a].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof a=="number"?[n,e,r,a]:[n,e,r]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ul(n){if(n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||n instanceof Wn||n instanceof iu||n instanceof Hr||n instanceof vi)return!0;if(Array.isArray(n)){for(const e of n)if(!ul(e))return!1;return!0}if(typeof n=="object"){for(const e in n)if(!ul(n[e]))return!1;return!0}return!1}function Gn(n){if(n===null)return ra;if(typeof n=="string")return Qt;if(typeof n=="boolean")return Ht;if(typeof n=="number")return _t;if(n instanceof Wn)return si;if(n instanceof iu)return ai;if(n instanceof Hr)return ol;if(n instanceof vi)return Es;if(Array.isArray(n)){const e=n.length;let r;for(const a of n){const c=Gn(a);if(r){if(r===c)continue;r=Xt;break}r=c}return yi(r||Xt,e)}return Ri}function hl(n){const e=typeof n;return n===null?"":e==="string"||e==="number"||e==="boolean"?String(n):n instanceof Wn||n instanceof Hr||n instanceof vi?n.toString():JSON.stringify(n)}class su{constructor(e,r){this.type=e,this.value=r}static parse(e,r){if(e.length!==2)return r.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!ul(e[1]))return r.error("invalid value");const a=e[1];let c=Gn(a);const d=r.expectedType;return c.kind!=="array"||c.N!==0||!d||d.kind!=="array"||typeof d.N=="number"&&d.N!==0||(c=d),new su(c,a)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Wn?["rgba"].concat(this.value.toArray()):this.value instanceof Hr?this.value.serialize():this.value}}var Ss=su,Mr=class{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}};const au={string:Qt,number:_t,boolean:Ht,object:Ri};class lu{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");let a,c=1;const d=e[0];if(d==="array"){let y,w;if(e.length>2){const b=e[1];if(typeof b!="string"||!(b in au)||b==="object")return r.error('The item type argument of "array" must be one of string, number, boolean',1);y=au[b],c++}else y=Xt;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return r.error('The length argument to "array" must be a positive integer literal',2);w=e[2],c++}a=yi(y,w)}else a=au[d];const m=[];for(;c<e.length;c++){const y=r.parse(e[c],c,Xt);if(!y)return null;m.push(y)}return new lu(a,m)}evaluate(e){for(let r=0;r<this.args.length;r++){const a=this.args[r].evaluate(e);if(!Mo(this.type,Gn(a)))return a;if(r===this.args.length-1)throw new Mr(`Expected value to be of type ${Dn(this.type)}, but found ${Dn(Gn(a))} instead.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,r=[e.kind];if(e.kind==="array"){const a=e.itemType;if(a.kind==="string"||a.kind==="number"||a.kind==="boolean"){r.push(a.kind);const c=e.N;(typeof c=="number"||this.args.length>1)&&r.push(c)}}return r.concat(this.args.map(a=>a.serialize()))}}var Co=lu;class ns{constructor(e){this.type=ol,this.sections=e}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");const a=e[1];if(!Array.isArray(a)&&typeof a=="object")return r.error("First argument must be an image or text section.");const c=[];let d=!1;for(let m=1;m<=e.length-1;++m){const y=e[m];if(d&&typeof y=="object"&&!Array.isArray(y)){d=!1;let w=null;if(y["font-scale"]&&(w=r.parse(y["font-scale"],1,_t),!w))return null;let b=null;if(y["text-font"]&&(b=r.parse(y["text-font"],1,yi(Qt)),!b))return null;let M=null;if(y["text-color"]&&(M=r.parse(y["text-color"],1,si),!M))return null;const A=c[c.length-1];A.scale=w,A.font=b,A.textColor=M}else{const w=r.parse(e[m],1,Xt);if(!w)return null;const b=w.type.kind;if(b!=="string"&&b!=="value"&&b!=="null"&&b!=="resolvedImage")return r.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");d=!0,c.push({content:w,scale:null,font:null,textColor:null})}}return new ns(c)}evaluate(e){return new Hr(this.sections.map(r=>{const a=r.content.evaluate(e);return Gn(a)===Es?new ou("",a,null,null,null):new ou(hl(a),null,r.scale?r.scale.evaluate(e):null,r.font?r.font.evaluate(e).join(","):null,r.textColor?r.textColor.evaluate(e):null)}))}eachChild(e){for(const r of this.sections)e(r.content),r.scale&&e(r.scale),r.font&&e(r.font),r.textColor&&e(r.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const r of this.sections){e.push(r.content.serialize());const a={};r.scale&&(a["font-scale"]=r.scale.serialize()),r.font&&(a["text-font"]=r.font.serialize()),r.textColor&&(a["text-color"]=r.textColor.serialize()),e.push(a)}return e}}class h1{constructor(e){this.type=Es,this.input=e}static parse(e,r){if(e.length!==2)return r.error("Expected two arguments.");const a=r.parse(e[1],1,Qt);return a?new h1(a):r.error("No image name provided.")}evaluate(e){const r=this.input.evaluate(e),a=vi.fromString(r);return a&&e.availableImages&&(a.available=e.availableImages.indexOf(r)>-1),a}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const $5={"to-boolean":Ht,"to-color":si,"to-number":_t,"to-string":Qt};class cu{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");const a=e[0];if((a==="to-boolean"||a==="to-string")&&e.length!==2)return r.error("Expected one argument.");const c=$5[a],d=[];for(let m=1;m<e.length;m++){const y=r.parse(e[m],m,Xt);if(!y)return null;d.push(y)}return new cu(c,d)}evaluate(e){if(this.type.kind==="boolean")return!!this.args[0].evaluate(e);if(this.type.kind==="color"){let r,a;for(const c of this.args){if(r=c.evaluate(e),a=null,r instanceof Wn)return r;if(typeof r=="string"){const d=e.parseColor(r);if(d)return d}else if(Array.isArray(r)&&(a=r.length<3||r.length>4?`Invalid rbga value ${JSON.stringify(r)}: expected an array containing either three or four numeric values.`:N2(r[0],r[1],r[2],r[3]),!a))return new Wn(r[0]/255,r[1]/255,r[2]/255,r[3])}throw new Mr(a||`Could not parse color from value '${typeof r=="string"?r:String(JSON.stringify(r))}'`)}if(this.type.kind==="number"){let r=null;for(const a of this.args){if(r=a.evaluate(e),r===null)return 0;const c=Number(r);if(!isNaN(c))return c}throw new Mr(`Could not convert ${JSON.stringify(r)} to number.`)}return this.type.kind==="formatted"?Hr.fromString(hl(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?vi.fromString(hl(this.args[0].evaluate(e))):hl(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if(this.type.kind==="formatted")return new ns([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new h1(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(r=>{e.push(r.serialize())}),e}}var oa=cu;const no=["Unknown","Point","LineString","Polygon"];var uu=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?no[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const n=this.featureDistanceData.center,e=this.featureDistanceData.scale,{x:r,y:a}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(r*e-n[0])+this.featureDistanceData.bearing[1]*(a*e-n[1])}return 0}parseColor(n){let e=this._parseColorCache[n];return e||(e=this._parseColorCache[n]=Wn.parse(n)),e}};class Ms{constructor(e,r,a,c){this.name=e,this.type=r,this._evaluate=a,this.args=c}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,r){const a=e[0],c=Ms.definitions[a];if(!c)return r.error(`Unknown expression "${a}". If you wanted a literal array, use ["literal", [...]].`,0);const d=Array.isArray(c)?c[0]:c.type,m=Array.isArray(c)?[[c[1],c[2]]]:c.overloads,y=m.filter(([b])=>!Array.isArray(b)||b.length===e.length-1);let w=null;for(const[b,M]of y){w=new _u(r.registry,r.path,null,r.scope);const A=[];let I=!1;for(let L=1;L<e.length;L++){const D=e[L],O=Array.isArray(b)?b[L-1]:b.type,Z=w.parse(D,1+A.length,O);if(!Z){I=!0;break}A.push(Z)}if(!I)if(Array.isArray(b)&&b.length!==A.length)w.error(`Expected ${b.length} arguments, but found ${A.length} instead.`);else{for(let L=0;L<A.length;L++){const D=Array.isArray(b)?b[L]:b.type,O=A[L];w.concat(L+1).checkSubtype(D,O.type)}if(w.errors.length===0)return new Ms(a,d,M,A)}}if(y.length===1)r.errors.push(...w.errors);else{const b=(y.length?y:m).map(([A])=>{return I=A,Array.isArray(I)?`(${I.map(Dn).join(", ")})`:`(${Dn(I.type)}...)`;var I}).join(" | "),M=[];for(let A=1;A<e.length;A++){const I=r.parse(e[A],1+M.length);if(!I)return null;M.push(Dn(I.type))}r.error(`Expected arguments of type ${b}, but found (${M.join(", ")}) instead.`)}return null}static register(e,r){Ms.definitions=r;for(const a in r)e[a]=Ms}}var Po=Ms;class dl{constructor(e,r,a){this.type=ai,this.locale=a,this.caseSensitive=e,this.diacriticSensitive=r}static parse(e,r){if(e.length!==2)return r.error("Expected one argument.");const a=e[1];if(typeof a!="object"||Array.isArray(a))return r.error("Collator options argument must be an object.");const c=r.parse(a["case-sensitive"]!==void 0&&a["case-sensitive"],1,Ht);if(!c)return null;const d=r.parse(a["diacritic-sensitive"]!==void 0&&a["diacritic-sensitive"],1,Ht);if(!d)return null;let m=null;return a.locale&&(m=r.parse(a.locale,1,Qt),!m)?null:new dl(c,d,m)}evaluate(e){return new iu(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const Ao=8192;function d1(n,e){n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),n[2]=Math.max(n[2],e[0]),n[3]=Math.max(n[3],e[1])}function sa(n,e){return!(n[0]<=e[0]||n[2]>=e[2]||n[1]<=e[1]||n[3]>=e[3])}function pl(n,e){const r=(180+n[0])/360,a=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n[1]*Math.PI/360)))/360,c=Math.pow(2,e.z);return[Math.round(r*c*Ao),Math.round(a*c*Ao)]}function j2(n,e,r){const a=n[0]-e[0],c=n[1]-e[1],d=n[0]-r[0],m=n[1]-r[1];return a*m-d*c==0&&a*d<=0&&c*m<=0}function p1(n,e){let r=!1;for(let m=0,y=e.length;m<y;m++){const w=e[m];for(let b=0,M=w.length;b<M-1;b++){if(j2(n,w[b],w[b+1]))return!1;(c=w[b])[1]>(a=n)[1]!=(d=w[b+1])[1]>a[1]&&a[0]<(d[0]-c[0])*(a[1]-c[1])/(d[1]-c[1])+c[0]&&(r=!r)}}var a,c,d;return r}function hu(n,e){for(let r=0;r<e.length;r++)if(p1(n,e[r]))return!0;return!1}function du(n,e,r,a){const c=a[0]-r[0],d=a[1]-r[1],m=(n[0]-r[0])*d-c*(n[1]-r[1]),y=(e[0]-r[0])*d-c*(e[1]-r[1]);return m>0&&y<0||m<0&&y>0}function aa(n,e,r){for(const b of r)for(let M=0;M<b.length-1;++M)if((y=[(m=b[M+1])[0]-(d=b[M])[0],m[1]-d[1]])[0]*(w=[(c=e)[0]-(a=n)[0],c[1]-a[1]])[1]-y[1]*w[0]!=0&&du(a,c,d,m)&&du(d,m,a,c))return!0;var a,c,d,m,y,w;return!1}function un(n,e){for(let r=0;r<n.length;++r)if(!p1(n[r],e))return!1;for(let r=0;r<n.length-1;++r)if(aa(n[r],n[r+1],e))return!1;return!0}function Z5(n,e){for(let r=0;r<e.length;r++)if(un(n,e[r]))return!0;return!1}function pu(n,e,r){const a=[];for(let c=0;c<n.length;c++){const d=[];for(let m=0;m<n[c].length;m++){const y=pl(n[c][m],r);d1(e,y),d.push(y)}a.push(d)}return a}function V2(n,e,r){const a=[];for(let c=0;c<n.length;c++){const d=pu(n[c],e,r);a.push(d)}return a}function fu(n,e,r,a){if(n[0]<r[0]||n[0]>r[2]){const c=.5*a;let d=n[0]-r[0]>c?-a:r[0]-n[0]>c?a:0;d===0&&(d=n[0]-r[2]>c?-a:r[2]-n[0]>c?a:0),n[0]+=d}d1(e,n)}function G2(n,e,r,a){const c=Math.pow(2,a.z)*Ao,d=[a.x*Ao,a.y*Ao],m=[];if(!n)return m;for(const y of n)for(const w of y){const b=[w.x+d[0],w.y+d[1]];fu(b,e,r,c),m.push(b)}return m}function mu(n,e,r,a){const c=Math.pow(2,a.z)*Ao,d=[a.x*Ao,a.y*Ao],m=[];if(!n)return m;for(const w of n){const b=[];for(const M of w){const A=[M.x+d[0],M.y+d[1]];d1(e,A),b.push(A)}m.push(b)}if(e[2]-e[0]<=c/2){(y=e)[0]=y[1]=1/0,y[2]=y[3]=-1/0;for(const w of m)for(const b of w)fu(b,e,r,c)}var y;return m}class la{constructor(e,r){this.type=Ht,this.geojson=e,this.geometries=r}static parse(e,r){if(e.length!==2)return r.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(ul(e[1])){const a=e[1];if(a.type==="FeatureCollection")for(let c=0;c<a.features.length;++c){const d=a.features[c].geometry.type;if(d==="Polygon"||d==="MultiPolygon")return new la(a,a.features[c].geometry)}else if(a.type==="Feature"){const c=a.geometry.type;if(c==="Polygon"||c==="MultiPolygon")return new la(a,a.geometry)}else if(a.type==="Polygon"||a.type==="MultiPolygon")return new la(a,a)}return r.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(r,a){const c=[1/0,1/0,-1/0,-1/0],d=[1/0,1/0,-1/0,-1/0],m=r.canonicalID();if(!m)return!1;if(a.type==="Polygon"){const y=pu(a.coordinates,d,m),w=G2(r.geometry(),c,d,m);if(!sa(c,d))return!1;for(const b of w)if(!p1(b,y))return!1}if(a.type==="MultiPolygon"){const y=V2(a.coordinates,d,m),w=G2(r.geometry(),c,d,m);if(!sa(c,d))return!1;for(const b of w)if(!hu(b,y))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(r,a){const c=[1/0,1/0,-1/0,-1/0],d=[1/0,1/0,-1/0,-1/0],m=r.canonicalID();if(!m)return!1;if(a.type==="Polygon"){const y=pu(a.coordinates,d,m),w=mu(r.geometry(),c,d,m);if(!sa(c,d))return!1;for(const b of w)if(!un(b,y))return!1}if(a.type==="MultiPolygon"){const y=V2(a.coordinates,d,m),w=mu(r.geometry(),c,d,m);if(!sa(c,d))return!1;for(const b of w)if(!Z5(b,y))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var f1=la;function ca(n){if(n instanceof Po&&(n.name==="get"&&n.args.length===1||n.name==="feature-state"||n.name==="has"&&n.args.length===1||n.name==="properties"||n.name==="geometry-type"||n.name==="id"||/^filter-/.test(n.name))||n instanceof f1)return!1;let e=!0;return n.eachChild(r=>{e&&!ca(r)&&(e=!1)}),e}function Io(n){if(n instanceof Po&&n.name==="feature-state")return!1;let e=!0;return n.eachChild(r=>{e&&!Io(r)&&(e=!1)}),e}function Cs(n,e){if(n instanceof Po&&e.indexOf(n.name)>=0)return!1;let r=!0;return n.eachChild(a=>{r&&!Cs(a,e)&&(r=!1)}),r}class m1{constructor(e,r){this.type=r.type,this.name=e,this.boundExpression=r}static parse(e,r){if(e.length!==2||typeof e[1]!="string")return r.error("'var' expression requires exactly one string literal argument.");const a=e[1];return r.scope.has(a)?new m1(a,r.scope.get(a)):r.error(`Unknown variable "${a}". Make sure "${a}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var $2=m1;class fl{constructor(e,r=[],a,c=new B2,d=[]){this.registry=e,this.path=r,this.key=r.map(m=>`[${m}]`).join(""),this.scope=c,this.errors=d,this.expectedType=a}parse(e,r,a,c,d={}){return r?this.concat(r,a,c)._parse(e,d):this._parse(e,d)}_parse(e,r){function a(c,d,m){return m==="assert"?new Co(d,[c]):m==="coerce"?new oa(d,[c]):c}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const c=e[0];if(typeof c!="string")return this.error(`Expression name must be a string, but found ${typeof c} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const d=this.registry[c];if(d){let m=d.parse(e,this);if(!m)return null;if(this.expectedType){const y=this.expectedType,w=m.type;if(y.kind!=="string"&&y.kind!=="number"&&y.kind!=="boolean"&&y.kind!=="object"&&y.kind!=="array"||w.kind!=="value")if(y.kind!=="color"&&y.kind!=="formatted"&&y.kind!=="resolvedImage"||w.kind!=="value"&&w.kind!=="string"){if(this.checkSubtype(y,w))return null}else m=a(m,y,r.typeAnnotation||"coerce");else m=a(m,y,r.typeAnnotation||"assert")}if(!(m instanceof Ss)&&m.type.kind!=="resolvedImage"&&gu(m)){const y=new uu;try{m=new Ss(m.type,m.evaluate(y))}catch(w){return this.error(w.message),null}}return m}return this.error(`Unknown expression "${c}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,r,a){const c=typeof e=="number"?this.path.concat(e):this.path,d=a?this.scope.concat(a):this.scope;return new fl(this.registry,c,r||null,d,this.errors)}error(e,...r){const a=`${this.key}${r.map(c=>`[${c}]`).join("")}`;this.errors.push(new to(a,e))}checkSubtype(e,r){const a=Mo(e,r);return a&&this.error(a),a}}var _u=fl;function gu(n){if(n instanceof $2)return gu(n.boundExpression);if(n instanceof Po&&n.name==="error"||n instanceof dl||n instanceof f1)return!1;const e=n instanceof oa||n instanceof Co;let r=!0;return n.eachChild(a=>{r=e?r&&gu(a):r&&a instanceof Ss}),!!r&&ca(n)&&Cs(n,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function _1(n,e){const r=n.length-1;let a,c,d=0,m=r,y=0;for(;d<=m;)if(y=Math.floor((d+m)/2),a=n[y],c=n[y+1],a<=e){if(y===r||e<c)return y;d=y+1}else{if(!(a>e))throw new Mr("Input is not a number.");m=y-1}return 0}class g1{constructor(e,r,a){this.type=e,this.input=r,this.labels=[],this.outputs=[];for(const[c,d]of a)this.labels.push(c),this.outputs.push(d)}static parse(e,r){if(e.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return r.error("Expected an even number of arguments.");const a=r.parse(e[1],1,_t);if(!a)return null;const c=[];let d=null;r.expectedType&&r.expectedType.kind!=="value"&&(d=r.expectedType);for(let m=1;m<e.length;m+=2){const y=m===1?-1/0:e[m],w=e[m+1],b=m,M=m+1;if(typeof y!="number")return r.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',b);if(c.length&&c[c.length-1][0]>=y)return r.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',b);const A=r.parse(w,M,d);if(!A)return null;d=d||A.type,c.push([y,A])}return new g1(d,a,c)}evaluate(e){const r=this.labels,a=this.outputs;if(r.length===1)return a[0].evaluate(e);const c=this.input.evaluate(e);if(c<=r[0])return a[0].evaluate(e);const d=r.length;return c>=r[d-1]?a[d-1].evaluate(e):a[_1(r,c)].evaluate(e)}eachChild(e){e(this.input);for(const r of this.outputs)e(r)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let r=0;r<this.labels.length;r++)r>0&&e.push(this.labels[r]),e.push(this.outputs[r].serialize());return e}}var yu=g1;function rn(n,e,r){return n*(1-r)+e*r}var ml=Object.freeze({__proto__:null,array:function(n,e,r){return n.map((a,c)=>rn(a,e[c],r))},color:function(n,e,r){return new Wn(rn(n.r,e.r,r),rn(n.g,e.g,r),rn(n.b,e.b,r),rn(n.a,e.a,r))},number:rn});const Z2=.95047,vu=1.08883,q2=4/29,Ps=6/29,xu=3*Ps*Ps,q5=Ps*Ps*Ps,W5=Math.PI/180,H5=180/Math.PI;function wu(n){return n>q5?Math.pow(n,1/3):n/xu+q2}function bu(n){return n>Ps?n*n*n:xu*(n-q2)}function Tu(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function y1(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function W2(n){const e=y1(n.r),r=y1(n.g),a=y1(n.b),c=wu((.4124564*e+.3575761*r+.1804375*a)/Z2),d=wu((.2126729*e+.7151522*r+.072175*a)/1);return{l:116*d-16,a:500*(c-d),b:200*(d-wu((.0193339*e+.119192*r+.9503041*a)/vu)),alpha:n.a}}function H2(n){let e=(n.l+16)/116,r=isNaN(n.a)?e:e+n.a/500,a=isNaN(n.b)?e:e-n.b/200;return e=1*bu(e),r=Z2*bu(r),a=vu*bu(a),new Wn(Tu(3.2404542*r-1.5371385*e-.4985314*a),Tu(-.969266*r+1.8760108*e+.041556*a),Tu(.0556434*r-.2040259*e+1.0572252*a),n.alpha)}function X5(n,e,r){const a=e-n;return n+r*(a>180||a<-180?a-360*Math.round(a/360):a)}const _l={forward:W2,reverse:H2,interpolate:function(n,e,r){return{l:rn(n.l,e.l,r),a:rn(n.a,e.a,r),b:rn(n.b,e.b,r),alpha:rn(n.alpha,e.alpha,r)}}},ua={forward:function(n){const{l:e,a:r,b:a}=W2(n),c=Math.atan2(a,r)*H5;return{h:c<0?c+360:c,c:Math.sqrt(r*r+a*a),l:e,alpha:n.a}},reverse:function(n){const e=n.h*W5,r=n.c;return H2({l:n.l,a:Math.cos(e)*r,b:Math.sin(e)*r,alpha:n.alpha})},interpolate:function(n,e,r){return{h:X5(n.h,e.h,r),c:rn(n.c,e.c,r),l:rn(n.l,e.l,r),alpha:rn(n.alpha,e.alpha,r)}}};var Eu=Object.freeze({__proto__:null,hcl:ua,lab:_l});class gl{constructor(e,r,a,c,d){this.type=e,this.operator=r,this.interpolation=a,this.input=c,this.labels=[],this.outputs=[];for(const[m,y]of d)this.labels.push(m),this.outputs.push(y)}static interpolationFactor(e,r,a,c){let d=0;if(e.name==="exponential")d=Su(r,e.base,a,c);else if(e.name==="linear")d=Su(r,1,a,c);else if(e.name==="cubic-bezier"){const m=e.controlPoints;d=new ye(m[0],m[1],m[2],m[3]).solve(Su(r,1,a,c))}return d}static parse(e,r){let[a,c,d,...m]=e;if(!Array.isArray(c)||c.length===0)return r.error("Expected an interpolation type expression.",1);if(c[0]==="linear")c={name:"linear"};else if(c[0]==="exponential"){const b=c[1];if(typeof b!="number")return r.error("Exponential interpolation requires a numeric base.",1,1);c={name:"exponential",base:b}}else{if(c[0]!=="cubic-bezier")return r.error(`Unknown interpolation type ${String(c[0])}`,1,0);{const b=c.slice(1);if(b.length!==4||b.some(M=>typeof M!="number"||M<0||M>1))return r.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);c={name:"cubic-bezier",controlPoints:b}}}if(e.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return r.error("Expected an even number of arguments.");if(d=r.parse(d,2,_t),!d)return null;const y=[];let w=null;a==="interpolate-hcl"||a==="interpolate-lab"?w=si:r.expectedType&&r.expectedType.kind!=="value"&&(w=r.expectedType);for(let b=0;b<m.length;b+=2){const M=m[b],A=m[b+1],I=b+3,L=b+4;if(typeof M!="number")return r.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',I);if(y.length&&y[y.length-1][0]>=M)return r.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',I);const D=r.parse(A,L,w);if(!D)return null;w=w||D.type,y.push([M,D])}return w.kind==="number"||w.kind==="color"||w.kind==="array"&&w.itemType.kind==="number"&&typeof w.N=="number"?new gl(w,a,c,d,y):r.error(`Type ${Dn(w)} is not interpolatable.`)}evaluate(e){const r=this.labels,a=this.outputs;if(r.length===1)return a[0].evaluate(e);const c=this.input.evaluate(e);if(c<=r[0])return a[0].evaluate(e);const d=r.length;if(c>=r[d-1])return a[d-1].evaluate(e);const m=_1(r,c),y=gl.interpolationFactor(this.interpolation,c,r[m],r[m+1]),w=a[m].evaluate(e),b=a[m+1].evaluate(e);return this.operator==="interpolate"?ml[this.type.kind.toLowerCase()](w,b,y):this.operator==="interpolate-hcl"?ua.reverse(ua.interpolate(ua.forward(w),ua.forward(b),y)):_l.reverse(_l.interpolate(_l.forward(w),_l.forward(b),y))}eachChild(e){e(this.input);for(const r of this.outputs)e(r)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const r=[this.operator,e,this.input.serialize()];for(let a=0;a<this.labels.length;a++)r.push(this.labels[a],this.outputs[a].serialize());return r}}function Su(n,e,r,a){const c=a-r,d=n-r;return c===0?0:e===1?d/c:(Math.pow(e,d)-1)/(Math.pow(e,c)-1)}var ro=gl;class v1{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expectected at least one argument.");let a=null;const c=r.expectedType;c&&c.kind!=="value"&&(a=c);const d=[];for(const y of e.slice(1)){const w=r.parse(y,1+d.length,a,void 0,{typeAnnotation:"omit"});if(!w)return null;a=a||w.type,d.push(w)}const m=c&&d.some(y=>Mo(c,y.type));return new v1(m?Xt:a,d)}evaluate(e){let r,a=null,c=0;for(const d of this.args){if(c++,a=d.evaluate(e),a&&a instanceof vi&&!a.available&&(r||(r=a),a=null,c===this.args.length))return r;if(a!==null)break}return a}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(r=>{e.push(r.serialize())}),e}}var Mu=v1;class x1{constructor(e,r){this.type=r.type,this.bindings=[].concat(e),this.result=r}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const r of this.bindings)e(r[1]);e(this.result)}static parse(e,r){if(e.length<4)return r.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const a=[];for(let d=1;d<e.length-1;d+=2){const m=e[d];if(typeof m!="string")return r.error(`Expected string, but found ${typeof m} instead.`,d);if(/[^a-zA-Z0-9_]/.test(m))return r.error("Variable names must contain only alphanumeric characters or '_'.",d);const y=r.parse(e[d+1],d+1);if(!y)return null;a.push([m,y])}const c=r.parse(e[e.length-1],e.length-1,r.expectedType,a);return c?new x1(a,c):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[r,a]of this.bindings)e.push(r,a.serialize());return e.push(this.result.serialize()),e}}var X2=x1;class Cu{constructor(e,r,a){this.type=e,this.index=r,this.input=a}static parse(e,r){if(e.length!==3)return r.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const a=r.parse(e[1],1,_t),c=r.parse(e[2],2,yi(r.expectedType||Xt));return a&&c?new Cu(c.type.itemType,a,c):null}evaluate(e){const r=this.index.evaluate(e),a=this.input.evaluate(e);if(r<0)throw new Mr(`Array index out of bounds: ${r} < 0.`);if(r>=a.length)throw new Mr(`Array index out of bounds: ${r} > ${a.length-1}.`);if(r!==Math.floor(r))throw new Mr(`Array index must be an integer, but found ${r} instead.`);return a[r]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var K5=Cu;class Pu{constructor(e,r){this.type=Ht,this.needle=e,this.haystack=r}static parse(e,r){if(e.length!==3)return r.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const a=r.parse(e[1],1,Xt),c=r.parse(e[2],2,Xt);return a&&c?sl(a.type,[Ht,Qt,_t,ra,Xt])?new Pu(a,c):r.error(`Expected first argument to be of type boolean, string, number or null, but found ${Dn(a.type)} instead`):null}evaluate(e){const r=this.needle.evaluate(e),a=this.haystack.evaluate(e);if(a==null)return!1;if(!al(r,["boolean","string","number","null"]))throw new Mr(`Expected first argument to be of type boolean, string, number or null, but found ${Dn(Gn(r))} instead.`);if(!al(a,["string","array"]))throw new Mr(`Expected second argument to be of type array or string, but found ${Dn(Gn(a))} instead.`);return a.indexOf(r)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var w1=Pu;class yl{constructor(e,r,a){this.type=_t,this.needle=e,this.haystack=r,this.fromIndex=a}static parse(e,r){if(e.length<=2||e.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const a=r.parse(e[1],1,Xt),c=r.parse(e[2],2,Xt);if(!a||!c)return null;if(!sl(a.type,[Ht,Qt,_t,ra,Xt]))return r.error(`Expected first argument to be of type boolean, string, number or null, but found ${Dn(a.type)} instead`);if(e.length===4){const d=r.parse(e[3],3,_t);return d?new yl(a,c,d):null}return new yl(a,c)}evaluate(e){const r=this.needle.evaluate(e),a=this.haystack.evaluate(e);if(!al(r,["boolean","string","number","null"]))throw new Mr(`Expected first argument to be of type boolean, string, number or null, but found ${Dn(Gn(r))} instead.`);if(!al(a,["string","array"]))throw new Mr(`Expected second argument to be of type array or string, but found ${Dn(Gn(a))} instead.`);if(this.fromIndex){const c=this.fromIndex.evaluate(e);return a.indexOf(r,c)}return a.indexOf(r)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var K2=yl;class Au{constructor(e,r,a,c,d,m){this.inputType=e,this.type=r,this.input=a,this.cases=c,this.outputs=d,this.otherwise=m}static parse(e,r){if(e.length<5)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return r.error("Expected an even number of arguments.");let a,c;r.expectedType&&r.expectedType.kind!=="value"&&(c=r.expectedType);const d={},m=[];for(let b=2;b<e.length-1;b+=2){let M=e[b];const A=e[b+1];Array.isArray(M)||(M=[M]);const I=r.concat(b);if(M.length===0)return I.error("Expected at least one branch label.");for(const D of M){if(typeof D!="number"&&typeof D!="string")return I.error("Branch labels must be numbers or strings.");if(typeof D=="number"&&Math.abs(D)>Number.MAX_SAFE_INTEGER)return I.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof D=="number"&&Math.floor(D)!==D)return I.error("Numeric branch labels must be integer values.");if(a){if(I.checkSubtype(a,Gn(D)))return null}else a=Gn(D);if(d[String(D)]!==void 0)return I.error("Branch labels must be unique.");d[String(D)]=m.length}const L=r.parse(A,b,c);if(!L)return null;c=c||L.type,m.push(L)}const y=r.parse(e[1],1,Xt);if(!y)return null;const w=r.parse(e[e.length-1],e.length-1,c);return w?y.type.kind!=="value"&&r.concat(1).checkSubtype(a,y.type)?null:new Au(a,c,y,d,m,w):null}evaluate(e){const r=this.input.evaluate(e);return(Gn(r)===this.inputType&&this.outputs[this.cases[r]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],r=Object.keys(this.cases).sort(),a=[],c={};for(const m of r){const y=c[this.cases[m]];y===void 0?(c[this.cases[m]]=a.length,a.push([this.cases[m],[m]])):a[y][1].push(m)}const d=m=>this.inputType.kind==="number"?Number(m):m;for(const[m,y]of a)e.push(y.length===1?d(y[0]):y.map(d)),e.push(this.outputs[m].serialize());return e.push(this.otherwise.serialize()),e}}var Y5=Au;class Iu{constructor(e,r,a){this.type=e,this.branches=r,this.otherwise=a}static parse(e,r){if(e.length<4)return r.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return r.error("Expected an odd number of arguments.");let a;r.expectedType&&r.expectedType.kind!=="value"&&(a=r.expectedType);const c=[];for(let m=1;m<e.length-1;m+=2){const y=r.parse(e[m],m,Ht);if(!y)return null;const w=r.parse(e[m+1],m+1,a);if(!w)return null;c.push([y,w]),a=a||w.type}const d=r.parse(e[e.length-1],e.length-1,a);return d?new Iu(a,c,d):null}evaluate(e){for(const[r,a]of this.branches)if(r.evaluate(e))return a.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[r,a]of this.branches)e(r),e(a);e(this.otherwise)}outputDefined(){return this.branches.every(([e,r])=>r.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(r=>{e.push(r.serialize())}),e}}var Y2=Iu;class vl{constructor(e,r,a,c){this.type=e,this.input=r,this.beginIndex=a,this.endIndex=c}static parse(e,r){if(e.length<=2||e.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const a=r.parse(e[1],1,Xt),c=r.parse(e[2],2,_t);if(!a||!c)return null;if(!sl(a.type,[yi(Xt),Qt,Xt]))return r.error(`Expected first argument to be of type array or string, but found ${Dn(a.type)} instead`);if(e.length===4){const d=r.parse(e[3],3,_t);return d?new vl(a.type,a,c,d):null}return new vl(a.type,a,c)}evaluate(e){const r=this.input.evaluate(e),a=this.beginIndex.evaluate(e);if(!al(r,["string","array"]))throw new Mr(`Expected first argument to be of type array or string, but found ${Dn(Gn(r))} instead.`);if(this.endIndex){const c=this.endIndex.evaluate(e);return r.slice(a,c)}return r.slice(a)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var J2=vl;function b1(n,e){return n==="=="||n==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function Q2(n,e,r,a){return a.compare(e,r)===0}function ha(n,e,r){const a=n!=="=="&&n!=="!=";return class jy{constructor(d,m,y){this.type=Ht,this.lhs=d,this.rhs=m,this.collator=y,this.hasUntypedArgument=d.type.kind==="value"||m.type.kind==="value"}static parse(d,m){if(d.length!==3&&d.length!==4)return m.error("Expected two or three arguments.");const y=d[0];let w=m.parse(d[1],1,Xt);if(!w)return null;if(!b1(y,w.type))return m.concat(1).error(`"${y}" comparisons are not supported for type '${Dn(w.type)}'.`);let b=m.parse(d[2],2,Xt);if(!b)return null;if(!b1(y,b.type))return m.concat(2).error(`"${y}" comparisons are not supported for type '${Dn(b.type)}'.`);if(w.type.kind!==b.type.kind&&w.type.kind!=="value"&&b.type.kind!=="value")return m.error(`Cannot compare types '${Dn(w.type)}' and '${Dn(b.type)}'.`);a&&(w.type.kind==="value"&&b.type.kind!=="value"?w=new Co(b.type,[w]):w.type.kind!=="value"&&b.type.kind==="value"&&(b=new Co(w.type,[b])));let M=null;if(d.length===4){if(w.type.kind!=="string"&&b.type.kind!=="string"&&w.type.kind!=="value"&&b.type.kind!=="value")return m.error("Cannot use collator to compare non-string types.");if(M=m.parse(d[3],3,ai),!M)return null}return new jy(w,b,M)}evaluate(d){const m=this.lhs.evaluate(d),y=this.rhs.evaluate(d);if(a&&this.hasUntypedArgument){const w=Gn(m),b=Gn(y);if(w.kind!==b.kind||w.kind!=="string"&&w.kind!=="number")throw new Mr(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${w.kind}, ${b.kind}) instead.`)}if(this.collator&&!a&&this.hasUntypedArgument){const w=Gn(m),b=Gn(y);if(w.kind!=="string"||b.kind!=="string")return e(d,m,y)}return this.collator?r(d,m,y,this.collator.evaluate(d)):e(d,m,y)}eachChild(d){d(this.lhs),d(this.rhs),this.collator&&d(this.collator)}outputDefined(){return!0}serialize(){const d=[n];return this.eachChild(m=>{d.push(m.serialize())}),d}}}const J5=ha("==",function(n,e,r){return e===r},Q2),Q5=ha("!=",function(n,e,r){return e!==r},function(n,e,r,a){return!Q2(0,e,r,a)}),ed=ha("<",function(n,e,r){return e<r},function(n,e,r,a){return a.compare(e,r)<0}),td=ha(">",function(n,e,r){return e>r},function(n,e,r,a){return a.compare(e,r)>0}),nd=ha("<=",function(n,e,r){return e<=r},function(n,e,r,a){return a.compare(e,r)<=0}),eh=ha(">=",function(n,e,r){return e>=r},function(n,e,r,a){return a.compare(e,r)>=0});class T1{constructor(e,r,a,c,d,m){this.type=Qt,this.number=e,this.locale=r,this.currency=a,this.unit=c,this.minFractionDigits=d,this.maxFractionDigits=m}static parse(e,r){if(e.length!==3)return r.error("Expected two arguments.");const a=r.parse(e[1],1,_t);if(!a)return null;const c=e[2];if(typeof c!="object"||Array.isArray(c))return r.error("NumberFormat options argument must be an object.");let d=null;if(c.locale&&(d=r.parse(c.locale,1,Qt),!d))return null;let m=null;if(c.currency&&(m=r.parse(c.currency,1,Qt),!m))return null;let y=null;if(c.unit&&(y=r.parse(c.unit,1,Qt),!y))return null;let w=null;if(c["min-fraction-digits"]&&(w=r.parse(c["min-fraction-digits"],1,_t),!w))return null;let b=null;return c["max-fraction-digits"]&&(b=r.parse(c["max-fraction-digits"],1,_t),!b)?null:new T1(a,d,m,y,w,b)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class da{constructor(e){this.type=_t,this.input=e}static parse(e,r){if(e.length!==2)return r.error(`Expected 1 argument, but found ${e.length-1} instead.`);const a=r.parse(e[1],1);return a?a.type.kind!=="array"&&a.type.kind!=="string"&&a.type.kind!=="value"?r.error(`Expected argument of type string or array, but found ${Dn(a.type)} instead.`):new da(a):null}evaluate(e){const r=this.input.evaluate(e);if(typeof r=="string"||Array.isArray(r))return r.length;throw new Mr(`Expected value to be of type string or array, but found ${Dn(Gn(r))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(r=>{e.push(r.serialize())}),e}}const th={"==":J5,"!=":Q5,">":td,"<":ed,">=":eh,"<=":nd,array:Co,at:K5,boolean:Co,case:Y2,coalesce:Mu,collator:dl,format:ns,image:h1,in:w1,"index-of":K2,interpolate:ro,"interpolate-hcl":ro,"interpolate-lab":ro,length:da,let:X2,literal:Ss,match:Y5,number:Co,"number-format":T1,object:Co,slice:J2,step:yu,string:Co,"to-boolean":oa,"to-color":oa,"to-number":oa,"to-string":oa,var:$2,within:f1};function nh(n,[e,r,a,c]){e=e.evaluate(n),r=r.evaluate(n),a=a.evaluate(n);const d=c?c.evaluate(n):1,m=N2(e,r,a,d);if(m)throw new Mr(m);return new Wn(e/255*d,r/255*d,a/255*d,d)}function ko(n,e){return n in e}function E1(n,e){const r=e[n];return r===void 0?null:r}function xi(n){return{type:n}}Po.register(th,{error:[{kind:"error"},[Qt],(n,[e])=>{throw new Mr(e.evaluate(n))}],typeof:[Qt,[Xt],(n,[e])=>Dn(Gn(e.evaluate(n)))],"to-rgba":[yi(_t,4),[si],(n,[e])=>e.evaluate(n).toArray()],rgb:[si,[_t,_t,_t],nh],rgba:[si,[_t,_t,_t,_t],nh],has:{type:Ht,overloads:[[[Qt],(n,[e])=>ko(e.evaluate(n),n.properties())],[[Qt,Ri],(n,[e,r])=>ko(e.evaluate(n),r.evaluate(n))]]},get:{type:Xt,overloads:[[[Qt],(n,[e])=>E1(e.evaluate(n),n.properties())],[[Qt,Ri],(n,[e,r])=>E1(e.evaluate(n),r.evaluate(n))]]},"feature-state":[Xt,[Qt],(n,[e])=>E1(e.evaluate(n),n.featureState||{})],properties:[Ri,[],n=>n.properties()],"geometry-type":[Qt,[],n=>n.geometryType()],id:[Xt,[],n=>n.id()],zoom:[_t,[],n=>n.globals.zoom],pitch:[_t,[],n=>n.globals.pitch||0],"distance-from-center":[_t,[],n=>n.distanceFromCenter()],"heatmap-density":[_t,[],n=>n.globals.heatmapDensity||0],"line-progress":[_t,[],n=>n.globals.lineProgress||0],"sky-radial-progress":[_t,[],n=>n.globals.skyRadialProgress||0],accumulated:[Xt,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[_t,xi(_t),(n,e)=>{let r=0;for(const a of e)r+=a.evaluate(n);return r}],"*":[_t,xi(_t),(n,e)=>{let r=1;for(const a of e)r*=a.evaluate(n);return r}],"-":{type:_t,overloads:[[[_t,_t],(n,[e,r])=>e.evaluate(n)-r.evaluate(n)],[[_t],(n,[e])=>-e.evaluate(n)]]},"/":[_t,[_t,_t],(n,[e,r])=>e.evaluate(n)/r.evaluate(n)],"%":[_t,[_t,_t],(n,[e,r])=>e.evaluate(n)%r.evaluate(n)],ln2:[_t,[],()=>Math.LN2],pi:[_t,[],()=>Math.PI],e:[_t,[],()=>Math.E],"^":[_t,[_t,_t],(n,[e,r])=>Math.pow(e.evaluate(n),r.evaluate(n))],sqrt:[_t,[_t],(n,[e])=>Math.sqrt(e.evaluate(n))],log10:[_t,[_t],(n,[e])=>Math.log(e.evaluate(n))/Math.LN10],ln:[_t,[_t],(n,[e])=>Math.log(e.evaluate(n))],log2:[_t,[_t],(n,[e])=>Math.log(e.evaluate(n))/Math.LN2],sin:[_t,[_t],(n,[e])=>Math.sin(e.evaluate(n))],cos:[_t,[_t],(n,[e])=>Math.cos(e.evaluate(n))],tan:[_t,[_t],(n,[e])=>Math.tan(e.evaluate(n))],asin:[_t,[_t],(n,[e])=>Math.asin(e.evaluate(n))],acos:[_t,[_t],(n,[e])=>Math.acos(e.evaluate(n))],atan:[_t,[_t],(n,[e])=>Math.atan(e.evaluate(n))],min:[_t,xi(_t),(n,e)=>Math.min(...e.map(r=>r.evaluate(n)))],max:[_t,xi(_t),(n,e)=>Math.max(...e.map(r=>r.evaluate(n)))],abs:[_t,[_t],(n,[e])=>Math.abs(e.evaluate(n))],round:[_t,[_t],(n,[e])=>{const r=e.evaluate(n);return r<0?-Math.round(-r):Math.round(r)}],floor:[_t,[_t],(n,[e])=>Math.floor(e.evaluate(n))],ceil:[_t,[_t],(n,[e])=>Math.ceil(e.evaluate(n))],"filter-==":[Ht,[Qt,Xt],(n,[e,r])=>n.properties()[e.value]===r.value],"filter-id-==":[Ht,[Xt],(n,[e])=>n.id()===e.value],"filter-type-==":[Ht,[Qt],(n,[e])=>n.geometryType()===e.value],"filter-<":[Ht,[Qt,Xt],(n,[e,r])=>{const a=n.properties()[e.value],c=r.value;return typeof a==typeof c&&a<c}],"filter-id-<":[Ht,[Xt],(n,[e])=>{const r=n.id(),a=e.value;return typeof r==typeof a&&r<a}],"filter->":[Ht,[Qt,Xt],(n,[e,r])=>{const a=n.properties()[e.value],c=r.value;return typeof a==typeof c&&a>c}],"filter-id->":[Ht,[Xt],(n,[e])=>{const r=n.id(),a=e.value;return typeof r==typeof a&&r>a}],"filter-<=":[Ht,[Qt,Xt],(n,[e,r])=>{const a=n.properties()[e.value],c=r.value;return typeof a==typeof c&&a<=c}],"filter-id-<=":[Ht,[Xt],(n,[e])=>{const r=n.id(),a=e.value;return typeof r==typeof a&&r<=a}],"filter->=":[Ht,[Qt,Xt],(n,[e,r])=>{const a=n.properties()[e.value],c=r.value;return typeof a==typeof c&&a>=c}],"filter-id->=":[Ht,[Xt],(n,[e])=>{const r=n.id(),a=e.value;return typeof r==typeof a&&r>=a}],"filter-has":[Ht,[Xt],(n,[e])=>e.value in n.properties()],"filter-has-id":[Ht,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[Ht,[yi(Qt)],(n,[e])=>e.value.indexOf(n.geometryType())>=0],"filter-id-in":[Ht,[yi(Xt)],(n,[e])=>e.value.indexOf(n.id())>=0],"filter-in-small":[Ht,[Qt,yi(Xt)],(n,[e,r])=>r.value.indexOf(n.properties()[e.value])>=0],"filter-in-large":[Ht,[Qt,yi(Xt)],(n,[e,r])=>function(a,c,d,m){for(;d<=m;){const y=d+m>>1;if(c[y]===a)return!0;c[y]>a?m=y-1:d=y+1}return!1}(n.properties()[e.value],r.value,0,r.value.length-1)],all:{type:Ht,overloads:[[[Ht,Ht],(n,[e,r])=>e.evaluate(n)&&r.evaluate(n)],[xi(Ht),(n,e)=>{for(const r of e)if(!r.evaluate(n))return!1;return!0}]]},any:{type:Ht,overloads:[[[Ht,Ht],(n,[e,r])=>e.evaluate(n)||r.evaluate(n)],[xi(Ht),(n,e)=>{for(const r of e)if(r.evaluate(n))return!0;return!1}]]},"!":[Ht,[Ht],(n,[e])=>!e.evaluate(n)],"is-supported-script":[Ht,[Qt],(n,[e])=>{const r=n.globals&&n.globals.isSupportedScript;return!r||r(e.evaluate(n))}],upcase:[Qt,[Qt],(n,[e])=>e.evaluate(n).toUpperCase()],downcase:[Qt,[Qt],(n,[e])=>e.evaluate(n).toLowerCase()],concat:[Qt,xi(Xt),(n,e)=>e.map(r=>hl(r.evaluate(n))).join("")],"resolved-locale":[Qt,[ai],(n,[e])=>e.evaluate(n).resolvedLocale()]});var xl=th;function rh(n){return{result:"success",value:n}}function As(n){return{result:"error",value:n}}function pa(n){return n["property-type"]==="data-driven"}function S1(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function M1(n){return!!n.expression&&n.expression.interpolated}function on(n){return n instanceof Number?"number":n instanceof String?"string":n instanceof Boolean?"boolean":Array.isArray(n)?"array":n===null?"null":typeof n}function wl(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}function ih(n){return n}function C1(n,e){const r=e.type==="color",a=n.stops&&typeof n.stops[0][0]=="object",c=a||!(a||n.property!==void 0),d=n.type||(M1(e)?"exponential":"interval");if(r&&((n=So({},n)).stops&&(n.stops=n.stops.map(b=>[b[0],Wn.parse(b[1])])),n.default=Wn.parse(n.default?n.default:e.default)),n.colorSpace&&n.colorSpace!=="rgb"&&!Eu[n.colorSpace])throw new Error(`Unknown color space: ${n.colorSpace}`);let m,y,w;if(d==="exponential")m=zo;else if(d==="interval")m=P1;else if(d==="categorical"){m=oh,y=Object.create(null);for(const b of n.stops)y[b[0]]=b[1];w=typeof n.stops[0][0]}else{if(d!=="identity")throw new Error(`Unknown function type "${d}"`);m=sh}if(a){const b={},M=[];for(let L=0;L<n.stops.length;L++){const D=n.stops[L],O=D[0].zoom;b[O]===void 0&&(b[O]={zoom:O,type:n.type,property:n.property,default:n.default,stops:[]},M.push(O)),b[O].stops.push([D[0].value,D[1]])}const A=[];for(const L of M)A.push([b[L].zoom,C1(b[L],e)]);const I={name:"linear"};return{kind:"composite",interpolationType:I,interpolationFactor:ro.interpolationFactor.bind(void 0,I),zoomStops:A.map(L=>L[0]),evaluate:({zoom:L},D)=>zo({stops:A,base:n.base},e,L).evaluate(L,D)}}if(c){const b=d==="exponential"?{name:"exponential",base:n.base!==void 0?n.base:1}:null;return{kind:"camera",interpolationType:b,interpolationFactor:ro.interpolationFactor.bind(void 0,b),zoomStops:n.stops.map(M=>M[0]),evaluate:({zoom:M})=>m(n,e,M,y,w)}}return{kind:"source",evaluate(b,M){const A=M&&M.properties?M.properties[n.property]:void 0;return A===void 0?fa(n.default,e.default):m(n,e,A,y,w)}}}function fa(n,e,r){return n!==void 0?n:e!==void 0?e:r!==void 0?r:void 0}function oh(n,e,r,a,c){return fa(typeof r===c?a[r]:void 0,n.default,e.default)}function P1(n,e,r){if(on(r)!=="number")return fa(n.default,e.default);const a=n.stops.length;if(a===1||r<=n.stops[0][0])return n.stops[0][1];if(r>=n.stops[a-1][0])return n.stops[a-1][1];const c=_1(n.stops.map(d=>d[0]),r);return n.stops[c][1]}function zo(n,e,r){const a=n.base!==void 0?n.base:1;if(on(r)!=="number")return fa(n.default,e.default);const c=n.stops.length;if(c===1||r<=n.stops[0][0])return n.stops[0][1];if(r>=n.stops[c-1][0])return n.stops[c-1][1];const d=_1(n.stops.map(M=>M[0]),r),m=function(M,A,I,L){const D=L-I,O=M-I;return D===0?0:A===1?O/D:(Math.pow(A,O)-1)/(Math.pow(A,D)-1)}(r,a,n.stops[d][0],n.stops[d+1][0]),y=n.stops[d][1],w=n.stops[d+1][1];let b=ml[e.type]||ih;if(n.colorSpace&&n.colorSpace!=="rgb"){const M=Eu[n.colorSpace];b=(A,I)=>M.reverse(M.interpolate(M.forward(A),M.forward(I),m))}return typeof y.evaluate=="function"?{evaluate(...M){const A=y.evaluate.apply(void 0,M),I=w.evaluate.apply(void 0,M);if(A!==void 0&&I!==void 0)return b(A,I,m)}}:b(y,w,m)}function sh(n,e,r){return e.type==="color"?r=Wn.parse(r):e.type==="formatted"?r=Hr.fromString(r.toString()):e.type==="resolvedImage"?r=vi.fromString(r.toString()):on(r)===e.type||e.type==="enum"&&e.values[r]||(r=void 0),fa(r,n.default,e.default)}class A1{constructor(e,r){this.expression=e,this._warningHistory={},this._evaluator=new uu,this._defaultValue=r?function(a){return a.type==="color"&&(wl(a.default)||Array.isArray(a.default))?new Wn(0,0,0,0):a.type==="color"?Wn.parse(a.default)||null:a.default===void 0?null:a.default}(r):null,this._enumValues=r&&r.type==="enum"?r.values:null}evaluateWithoutErrorHandling(e,r,a,c,d,m,y,w){return this._evaluator.globals=e,this._evaluator.feature=r,this._evaluator.featureState=a,this._evaluator.canonical=c||null,this._evaluator.availableImages=d||null,this._evaluator.formattedSection=m,this._evaluator.featureTileCoord=y||null,this._evaluator.featureDistanceData=w||null,this.expression.evaluate(this._evaluator)}evaluate(e,r,a,c,d,m,y,w){this._evaluator.globals=e,this._evaluator.feature=r||null,this._evaluator.featureState=a||null,this._evaluator.canonical=c||null,this._evaluator.availableImages=d||null,this._evaluator.formattedSection=m||null,this._evaluator.featureTileCoord=y||null,this._evaluator.featureDistanceData=w||null;try{const b=this.expression.evaluate(this._evaluator);if(b==null||typeof b=="number"&&b!=b)return this._defaultValue;if(this._enumValues&&!(b in this._enumValues))throw new Mr(`Expected value to be one of ${Object.keys(this._enumValues).map(M=>JSON.stringify(M)).join(", ")}, but found ${JSON.stringify(b)} instead.`);return b}catch(b){return this._warningHistory[b.message]||(this._warningHistory[b.message]=!0,typeof console<"u"&&console.warn(b.message)),this._defaultValue}}}function ma(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in xl}function _a(n,e){const r=new _u(xl,[],e?function(c){const d={color:si,string:Qt,number:_t,enum:Qt,boolean:Ht,formatted:ol,resolvedImage:Es};return c.type==="array"?yi(d[c.value]||Xt,c.length):d[c.type]}(e):void 0),a=r.parse(n,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return a?rh(new A1(a,e)):As(r.errors)}class ku{constructor(e,r){this.kind=e,this._styleExpression=r,this.isStateDependent=e!=="constant"&&!Io(r.expression)}evaluateWithoutErrorHandling(e,r,a,c,d,m){return this._styleExpression.evaluateWithoutErrorHandling(e,r,a,c,d,m)}evaluate(e,r,a,c,d,m){return this._styleExpression.evaluate(e,r,a,c,d,m)}}class bl{constructor(e,r,a,c){this.kind=e,this.zoomStops=a,this._styleExpression=r,this.isStateDependent=e!=="camera"&&!Io(r.expression),this.interpolationType=c}evaluateWithoutErrorHandling(e,r,a,c,d,m){return this._styleExpression.evaluateWithoutErrorHandling(e,r,a,c,d,m)}evaluate(e,r,a,c,d,m){return this._styleExpression.evaluate(e,r,a,c,d,m)}interpolationFactor(e,r,a){return this.interpolationType?ro.interpolationFactor(this.interpolationType,e,r,a):0}}function Tl(n,e){if((n=_a(n,e)).result==="error")return n;const r=n.value.expression,a=ca(r);if(!a&&!pa(e))return As([new to("","data expressions not supported")]);const c=Cs(r,["zoom","pitch","distance-from-center"]);if(!c&&!S1(e))return As([new to("","zoom expressions not supported")]);const d=k1(r);return d||c?d instanceof to?As([d]):d instanceof ro&&!M1(e)?As([new to("",'"interpolate" expressions cannot be used with this property')]):rh(d?new bl(a?"camera":"composite",n.value,d.labels,d instanceof ro?d.interpolation:void 0):new ku(a?"constant":"source",n.value)):As([new to("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class I1{constructor(e,r){this._parameters=e,this._specification=r,So(this,C1(this._parameters,this._specification))}static deserialize(e){return new I1(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function k1(n){let e=null;if(n instanceof X2)e=k1(n.result);else if(n instanceof Mu){for(const r of n.args)if(e=k1(r),e)break}else(n instanceof yu||n instanceof ro)&&n.input instanceof Po&&n.input.name==="zoom"&&(e=n);return e instanceof to||n.eachChild(r=>{const a=k1(r);a instanceof to?e=a:!e&&a?e=new to("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&a&&e!==a&&(e=new to("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}class yt{constructor(e,r,a,c){this.message=(e?`${e}: `:"")+a,c&&(this.identifier=c),r!=null&&r.__line__&&(this.line=r.__line__)}}function Fi(n){const e=n.key,r=n.value,a=n.valueSpec||{},c=n.objectElementValidators||{},d=n.style,m=n.styleSpec;let y=[];const w=on(r);if(w!=="object")return[new yt(e,r,`object expected, ${w} found`)];for(const b in r){const M=b.split(".")[0];let A;c[M]?A=c[M]:a[M]?A=zr:c["*"]?A=c["*"]:a["*"]&&(A=zr),A?y=y.concat(A({key:(e&&`${e}.`)+b,value:r[b],valueSpec:a[M]||a["*"],style:d,styleSpec:m,object:r,objectKey:b},r)):y.push(new yt(e,r[b],`unknown property "${b}"`))}for(const b in a)c[b]||a[b].required&&a[b].default===void 0&&r[b]===void 0&&y.push(new yt(e,r,`missing required property "${b}"`));return y}function ah(n){const e=n.value,r=n.valueSpec,a=n.style,c=n.styleSpec,d=n.key,m=n.arrayElementValidator||zr;if(on(e)!=="array")return[new yt(d,e,`array expected, ${on(e)} found`)];if(r.length&&e.length!==r.length)return[new yt(d,e,`array length ${r.length} expected, length ${e.length} found`)];if(r["min-length"]&&e.length<r["min-length"])return[new yt(d,e,`array length at least ${r["min-length"]} expected, length ${e.length} found`)];let y={type:r.value,values:r.values,minimum:r.minimum,maximum:r.maximum,function:void 0};c.$version<7&&(y.function=r.function),on(r.value)==="object"&&(y=r.value);let w=[];for(let b=0;b<e.length;b++)w=w.concat(m({array:e,arrayIndex:b,value:e[b],valueSpec:y,style:a,styleSpec:c,key:`${d}[${b}]`}));return w}function El(n){const e=n.key,r=n.value,a=n.valueSpec;let c=on(r);if(c==="number"&&r!=r&&(c="NaN"),c!=="number")return[new yt(e,r,`number expected, ${c} found`)];if("minimum"in a){let d=a.minimum;if(on(a.minimum)==="array"&&(d=a.minimum[n.arrayIndex]),r<d)return[new yt(e,r,`${r} is less than the minimum value ${d}`)]}if("maximum"in a){let d=a.maximum;if(on(a.maximum)==="array"&&(d=a.maximum[n.arrayIndex]),r>d)return[new yt(e,r,`${r} is greater than the maximum value ${d}`)]}return[]}function Sl(n){const e=n.valueSpec,r=Jn(n.value.type);let a,c,d,m={};const y=r!=="categorical"&&n.value.property===void 0,w=!y,b=on(n.value.stops)==="array"&&on(n.value.stops[0])==="array"&&on(n.value.stops[0][0])==="object",M=Fi({key:n.key,value:n.value,valueSpec:n.styleSpec.function,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{stops:function(L){if(r==="identity")return[new yt(L.key,L.value,'identity function may not have a "stops" property')];let D=[];const O=L.value;return D=D.concat(ah({key:L.key,value:O,valueSpec:L.valueSpec,style:L.style,styleSpec:L.styleSpec,arrayElementValidator:A})),on(O)==="array"&&O.length===0&&D.push(new yt(L.key,O,"array must have at least one stop")),D},default:function(L){return zr({key:L.key,value:L.value,valueSpec:e,style:L.style,styleSpec:L.styleSpec})}}});return r==="identity"&&y&&M.push(new yt(n.key,n.value,'missing required property "property"')),r==="identity"||n.value.stops||M.push(new yt(n.key,n.value,'missing required property "stops"')),r==="exponential"&&n.valueSpec.expression&&!M1(n.valueSpec)&&M.push(new yt(n.key,n.value,"exponential functions not supported")),n.styleSpec.$version>=8&&(w&&!pa(n.valueSpec)?M.push(new yt(n.key,n.value,"property functions not supported")):y&&!S1(n.valueSpec)&&M.push(new yt(n.key,n.value,"zoom functions not supported"))),r!=="categorical"&&!b||n.value.property!==void 0||M.push(new yt(n.key,n.value,'"property" property is required')),M;function A(L){let D=[];const O=L.value,Z=L.key;if(on(O)!=="array")return[new yt(Z,O,`array expected, ${on(O)} found`)];if(O.length!==2)return[new yt(Z,O,`array length 2 expected, length ${O.length} found`)];if(b){if(on(O[0])!=="object")return[new yt(Z,O,`object expected, ${on(O[0])} found`)];if(O[0].zoom===void 0)return[new yt(Z,O,"object stop key must have zoom")];if(O[0].value===void 0)return[new yt(Z,O,"object stop key must have value")];const Q=Jn(O[0].zoom);if(typeof Q!="number")return[new yt(Z,O[0].zoom,"stop zoom values must be numbers")];if(d&&d>Q)return[new yt(Z,O[0].zoom,"stop zoom values must appear in ascending order")];Q!==d&&(d=Q,c=void 0,m={}),D=D.concat(Fi({key:`${Z}[0]`,value:O[0],valueSpec:{zoom:{}},style:L.style,styleSpec:L.styleSpec,objectElementValidators:{zoom:El,value:I}}))}else D=D.concat(I({key:`${Z}[0]`,value:O[0],valueSpec:{},style:L.style,styleSpec:L.styleSpec},O));return ma(yr(O[1]))?D.concat([new yt(`${Z}[1]`,O[1],"expressions are not allowed in function stops.")]):D.concat(zr({key:`${Z}[1]`,value:O[1],valueSpec:e,style:L.style,styleSpec:L.styleSpec}))}function I(L,D){const O=on(L.value),Z=Jn(L.value),Q=L.value!==null?L.value:D;if(a){if(O!==a)return[new yt(L.key,Q,`${O} stop domain type must match previous stop domain type ${a}`)]}else a=O;if(O!=="number"&&O!=="string"&&O!=="boolean"&&typeof Z!="number"&&typeof Z!="string"&&typeof Z!="boolean")return[new yt(L.key,Q,"stop domain value must be a number, string, or boolean")];if(O!=="number"&&r!=="categorical"){let de=`number expected, ${O} found`;return pa(e)&&r===void 0&&(de+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new yt(L.key,Q,de)]}return r!=="categorical"||O!=="number"||typeof Z=="number"&&isFinite(Z)&&Math.floor(Z)===Z?r!=="categorical"&&O==="number"&&typeof Z=="number"&&typeof c=="number"&&c!==void 0&&Z<c?[new yt(L.key,Q,"stop domain values must appear in ascending order")]:(c=Z,r==="categorical"&&Z in m?[new yt(L.key,Q,"stop domain values must be unique")]:(m[Z]=!0,[])):[new yt(L.key,Q,`integer expected, found ${String(Z)}`)]}}function vr(n){const e=(n.expressionContext==="property"?Tl:_a)(yr(n.value),n.valueSpec);if(e.result==="error")return e.value.map(a=>new yt(`${n.key}${a.key}`,n.value,a.message));const r=e.value.expression||e.value._styleExpression.expression;if(n.expressionContext==="property"&&n.propertyKey==="text-font"&&!r.outputDefined())return[new yt(n.key,n.value,`Invalid data expression for "${n.propertyKey}". Output values must be contained as literals within the expression.`)];if(n.expressionContext==="property"&&n.propertyType==="layout"&&!Io(r))return[new yt(n.key,n.value,'"feature-state" data expressions are not supported with layout properties.')];if(n.expressionContext==="filter")return Ml(r,n);if(n.expressionContext&&n.expressionContext.indexOf("cluster")===0){if(!Cs(r,["zoom","feature-state"]))return[new yt(n.key,n.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(n.expressionContext==="cluster-initial"&&!ca(r))return[new yt(n.key,n.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ml(n,e){const r=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(e.valueSpec&&e.valueSpec.expression)for(const c of e.valueSpec.expression.parameters)r.delete(c);if(r.size===0)return[];const a=[];return n instanceof Po&&r.has(n.name)?[new yt(e.key,e.value,`["${n.name}"] expression is not supported in a filter for a ${e.object.type} layer with id: ${e.object.id}`)]:(n.eachChild(c=>{a.push(...Ml(c,e))}),a)}function z1(n){const e=n.key,r=n.value,a=n.valueSpec,c=[];return Array.isArray(a.values)?a.values.indexOf(Jn(r))===-1&&c.push(new yt(e,r,`expected one of [${a.values.join(", ")}], ${JSON.stringify(r)} found`)):Object.keys(a.values).indexOf(Jn(r))===-1&&c.push(new yt(e,r,`expected one of [${Object.keys(a.values).join(", ")}], ${JSON.stringify(r)} found`)),c}function zu(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const e of n.slice(1))if(!zu(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function L1(n,e="fill"){if(n==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};zu(n)||(n=ya(n));const r=n;let a=!0;try{a=function(b){if(!ga(b))return b;let M=yr(b);return D1(M),M=lh(M),M}(r)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(r,null,2)}
        `)}const c=Ve[`filter_${e}`],d=_a(a,c);let m=null;if(d.result==="error")throw new Error(d.value.map(b=>`${b.key}: ${b.message}`).join(", "));m=(b,M,A)=>d.value.evaluate(b,M,{},A);let y=null,w=null;if(a!==r){const b=_a(r,c);if(b.result==="error")throw new Error(b.value.map(M=>`${M.key}: ${M.message}`).join(", "));y=(M,A,I,L,D)=>b.value.evaluate(M,A,{},I,void 0,void 0,L,D),w=!ca(b.value.expression)}return{filter:m,dynamicFilter:y||void 0,needGeometry:ch(a),needFeature:!!w}}function lh(n){if(!Array.isArray(n))return n;const e=function(r){if(Lu.has(r[0])){for(let a=1;a<r.length;a++)if(ga(r[a]))return!0}return r}(n);return e===!0?e:e.map(r=>lh(r))}function D1(n){let e=!1;const r=[];if(n[0]==="case"){for(let a=1;a<n.length-1;a+=2)e=e||ga(n[a]),r.push(n[a+1]);r.push(n[n.length-1])}else if(n[0]==="match"){e=e||ga(n[1]);for(let a=2;a<n.length-1;a+=2)r.push(n[a+1]);r.push(n[n.length-1])}else if(n[0]==="step"){e=e||ga(n[1]);for(let a=1;a<n.length-1;a+=2)r.push(n[a+1])}e&&(n.length=0,n.push("any",...r));for(let a=1;a<n.length;a++)D1(n[a])}function ga(n){if(!Array.isArray(n))return!1;if((e=n[0])==="pitch"||e==="distance-from-center")return!0;var e;for(let r=1;r<n.length;r++)if(ga(n[r]))return!0;return!1}const Lu=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function rd(n,e){return n<e?-1:n>e?1:0}function ch(n){if(!Array.isArray(n))return!1;if(n[0]==="within")return!0;for(let e=1;e<n.length;e++)if(ch(n[e]))return!0;return!1}function ya(n){if(!n)return!0;const e=n[0];return n.length<=1?e!=="any":e==="=="?Du(n[1],n[2],"=="):e==="!="?R1(Du(n[1],n[2],"==")):e==="<"||e===">"||e==="<="||e===">="?Du(n[1],n[2],e):e==="any"?(r=n.slice(1),["any"].concat(r.map(ya))):e==="all"?["all"].concat(n.slice(1).map(ya)):e==="none"?["all"].concat(n.slice(1).map(ya).map(R1)):e==="in"?Ru(n[1],n.slice(2)):e==="!in"?R1(Ru(n[1],n.slice(2))):e==="has"?Fu(n[1]):e==="!has"?R1(Fu(n[1])):e!=="within"||n;var r}function Du(n,e,r){switch(n){case"$type":return[`filter-type-${r}`,e];case"$id":return[`filter-id-${r}`,e];default:return[`filter-${r}`,n,e]}}function Ru(n,e){if(e.length===0)return!1;switch(n){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(r=>typeof r!=typeof e[0])?["filter-in-large",n,["literal",e.sort(rd)]]:["filter-in-small",n,["literal",e]]}}function Fu(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function R1(n){return["!",n]}function Cl(n){return zu(yr(n.value))?vr(So({},n,{expressionContext:"filter",valueSpec:n.styleSpec[`filter_${n.layerType||"fill"}`]})):Pl(n)}function Pl(n){const e=n.value,r=n.key;if(on(e)!=="array")return[new yt(r,e,`array expected, ${on(e)} found`)];const a=n.styleSpec;let c,d=[];if(e.length<1)return[new yt(r,e,"filter array must have at least 1 element")];switch(d=d.concat(z1({key:`${r}[0]`,value:e[0],valueSpec:a.filter_operator,style:n.style,styleSpec:n.styleSpec})),Jn(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&Jn(e[1])==="$type"&&d.push(new yt(r,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&d.push(new yt(r,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(c=on(e[1]),c!=="string"&&d.push(new yt(`${r}[1]`,e[1],`string expected, ${c} found`)));for(let m=2;m<e.length;m++)c=on(e[m]),Jn(e[1])==="$type"?d=d.concat(z1({key:`${r}[${m}]`,value:e[m],valueSpec:a.geometry_type,style:n.style,styleSpec:n.styleSpec})):c!=="string"&&c!=="number"&&c!=="boolean"&&d.push(new yt(`${r}[${m}]`,e[m],`string, number, or boolean expected, ${c} found`));break;case"any":case"all":case"none":for(let m=1;m<e.length;m++)d=d.concat(Pl({key:`${r}[${m}]`,value:e[m],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":c=on(e[1]),e.length!==2?d.push(new yt(r,e,`filter array for "${e[0]}" operator must have 2 elements`)):c!=="string"&&d.push(new yt(`${r}[1]`,e[1],`string expected, ${c} found`));break;case"within":c=on(e[1]),e.length!==2?d.push(new yt(r,e,`filter array for "${e[0]}" operator must have 2 elements`)):c!=="object"&&d.push(new yt(`${r}[1]`,e[1],`object expected, ${c} found`))}return d}function Bu(n,e){const r=n.key,a=n.style,c=n.styleSpec,d=n.value,m=n.objectKey,y=c[`${e}_${n.layerType}`];if(!y)return[];const w=m.match(/^(.*)-transition$/);if(e==="paint"&&w&&y[w[1]]&&y[w[1]].transition)return zr({key:r,value:d,valueSpec:c.transition,style:a,styleSpec:c});const b=n.valueSpec||y[m];if(!b)return[new yt(r,d,`unknown property "${m}"`)];let M;if(on(d)==="string"&&pa(b)&&!b.tokens&&(M=/^{([^}]+)}$/.exec(d))){const I=`\`{ "type": "identity", "property": ${M?JSON.stringify(M[1]):'"_"'} }\``;return[new yt(r,d,`"${m}" does not support interpolation syntax
Use an identity property function instead: ${I}.`)]}const A=[];return n.layerType==="symbol"&&(m==="text-field"&&a&&!a.glyphs&&A.push(new yt(r,d,'use of "text-field" requires a style "glyphs" property')),m==="text-font"&&wl(yr(d))&&Jn(d.type)==="identity"&&A.push(new yt(r,d,'"text-font" does not support identity functions'))),A.concat(zr({key:n.key,value:d,valueSpec:b,style:a,styleSpec:c,expressionContext:"property",propertyType:e,propertyKey:m}))}function uh(n){return Bu(n,"paint")}function Ou(n){return Bu(n,"layout")}function hh(n){let e=[];const r=n.value,a=n.key,c=n.style,d=n.styleSpec;r.type||r.ref||e.push(new yt(a,r,'either "type" or "ref" is required'));let m=Jn(r.type);const y=Jn(r.ref);if(r.id){const w=Jn(r.id);for(let b=0;b<n.arrayIndex;b++){const M=c.layers[b];Jn(M.id)===w&&e.push(new yt(a,r.id,`duplicate layer id "${r.id}", previously used at line ${M.id.__line__}`))}}if("ref"in r){let w;["type","source","source-layer","filter","layout"].forEach(b=>{b in r&&e.push(new yt(a,r[b],`"${b}" is prohibited for ref layers`))}),c.layers.forEach(b=>{Jn(b.id)===y&&(w=b)}),w?w.ref?e.push(new yt(a,r.ref,"ref cannot reference another ref layer")):m=Jn(w.type):typeof y=="string"&&e.push(new yt(a,r.ref,`ref layer "${y}" not found`))}else if(m!=="background"&&m!=="sky")if(r.source){const w=c.sources&&c.sources[r.source],b=w&&Jn(w.type);w?b==="vector"&&m==="raster"?e.push(new yt(a,r.source,`layer "${r.id}" requires a raster source`)):b==="raster"&&m!=="raster"?e.push(new yt(a,r.source,`layer "${r.id}" requires a vector source`)):b!=="vector"||r["source-layer"]?b==="raster-dem"&&m!=="hillshade"?e.push(new yt(a,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):m!=="line"||!r.paint||!r.paint["line-gradient"]&&!r.paint["line-trim-offset"]||b==="geojson"&&w.lineMetrics||e.push(new yt(a,r,`layer "${r.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new yt(a,r,`layer "${r.id}" must specify a "source-layer"`)):e.push(new yt(a,r.source,`source "${r.source}" not found`))}else e.push(new yt(a,r,'missing required property "source"'));return e=e.concat(Fi({key:a,value:r,valueSpec:d.layer,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{"*":()=>[],type:()=>zr({key:`${a}.type`,value:r.type,valueSpec:d.layer.type,style:n.style,styleSpec:n.styleSpec,object:r,objectKey:"type"}),filter:w=>Cl(So({layerType:m},w)),layout:w=>Fi({layer:r,key:w.key,value:w.value,valueSpec:{},style:w.style,styleSpec:w.styleSpec,objectElementValidators:{"*":b=>Ou(So({layerType:m},b))}}),paint:w=>Fi({layer:r,key:w.key,value:w.value,valueSpec:{},style:w.style,styleSpec:w.styleSpec,objectElementValidators:{"*":b=>uh(So({layerType:m},b))}})}})),e}function rs(n){const e=n.value,r=n.key,a=on(e);return a!=="string"?[new yt(r,e,`string expected, ${a} found`)]:[]}const dh={promoteId:function({key:n,value:e}){if(on(e)==="string")return rs({key:n,value:e});{const r=[];for(const a in e)r.push(...rs({key:`${n}.${a}`,value:e[a]}));return r}}};function ph(n){const e=n.value,r=n.key,a=n.styleSpec,c=n.style;if(!e.type)return[new yt(r,e,'"type" is required')];const d=Jn(e.type);let m;switch(d){case"vector":case"raster":case"raster-dem":return m=Fi({key:r,value:e,valueSpec:a[`source_${d.replace("-","_")}`],style:n.style,styleSpec:a,objectElementValidators:dh}),m;case"geojson":if(m=Fi({key:r,value:e,valueSpec:a.source_geojson,style:c,styleSpec:a,objectElementValidators:dh}),e.cluster)for(const y in e.clusterProperties){const[w,b]=e.clusterProperties[y],M=typeof w=="string"?[w,["accumulated"],["get",y]]:w;m.push(...vr({key:`${r}.${y}.map`,value:b,expressionContext:"cluster-map"})),m.push(...vr({key:`${r}.${y}.reduce`,value:M,expressionContext:"cluster-reduce"}))}return m;case"video":return Fi({key:r,value:e,valueSpec:a.source_video,style:c,styleSpec:a});case"image":return Fi({key:r,value:e,valueSpec:a.source_image,style:c,styleSpec:a});case"canvas":return[new yt(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return z1({key:`${r}.type`,value:e.type,valueSpec:{values:id(a)},style:c,styleSpec:a})}}function id(n){return n.source.reduce((e,r)=>{const a=n[r];return a.type.type==="enum"&&(e=e.concat(Object.keys(a.type.values))),e},[])}function fh(n){const e=n.value,r=n.styleSpec,a=r.light,c=n.style;let d=[];const m=on(e);if(e===void 0)return d;if(m!=="object")return d=d.concat([new yt("light",e,`object expected, ${m} found`)]),d;for(const y in e){const w=y.match(/^(.*)-transition$/);d=d.concat(w&&a[w[1]]&&a[w[1]].transition?zr({key:y,value:e[y],valueSpec:r.transition,style:c,styleSpec:r}):a[y]?zr({key:y,value:e[y],valueSpec:a[y],style:c,styleSpec:r}):[new yt(y,e[y],`unknown property "${y}"`)])}return d}function Uu(n){const e=n.value,r=n.key,a=n.style,c=n.styleSpec,d=c.terrain;let m=[];const y=on(e);if(e===void 0)return m;if(y!=="object")return m=m.concat([new yt("terrain",e,`object expected, ${y} found`)]),m;for(const w in e){const b=w.match(/^(.*)-transition$/);m=m.concat(b&&d[b[1]]&&d[b[1]].transition?zr({key:w,value:e[w],valueSpec:c.transition,style:a,styleSpec:c}):d[w]?zr({key:w,value:e[w],valueSpec:d[w],style:a,styleSpec:c}):[new yt(w,e[w],`unknown property "${w}"`)])}if(e.source){const w=a.sources&&a.sources[e.source],b=w&&Jn(w.type);w?b!=="raster-dem"&&m.push(new yt(r,e.source,`terrain cannot be used with a source of type ${String(b)}, it only be used with a "raster-dem" source type`)):m.push(new yt(r,e.source,`source "${e.source}" not found`))}else m.push(new yt(r,e,'terrain is missing required property "source"'));return m}function mh(n){const e=n.value,r=n.style,a=n.styleSpec,c=a.fog;let d=[];const m=on(e);if(e===void 0)return d;if(m!=="object")return d=d.concat([new yt("fog",e,`object expected, ${m} found`)]),d;for(const y in e){const w=y.match(/^(.*)-transition$/);d=d.concat(w&&c[w[1]]&&c[w[1]].transition?zr({key:y,value:e[y],valueSpec:a.transition,style:r,styleSpec:a}):c[y]?zr({key:y,value:e[y],valueSpec:c[y],style:r,styleSpec:a}):[new yt(y,e[y],`unknown property "${y}"`)])}return d}const _h={"*":()=>[],array:ah,boolean:function(n){const e=n.value,r=n.key,a=on(e);return a!=="boolean"?[new yt(r,e,`boolean expected, ${a} found`)]:[]},number:El,color:function(n){const e=n.key,r=n.value,a=on(r);return a!=="string"?[new yt(e,r,`color expected, ${a} found`)]:ru(r)===null?[new yt(e,r,`color expected, "${r}" found`)]:[]},enum:z1,filter:Cl,function:Sl,layer:hh,object:Fi,source:ph,light:fh,terrain:Uu,fog:mh,string:rs,formatted:function(n){return rs(n).length===0?[]:vr(n)},resolvedImage:function(n){return rs(n).length===0?[]:vr(n)},projection:function(n){const e=n.value,r=n.styleSpec,a=r.projection,c=n.style;let d=[];const m=on(e);if(m==="object")for(const y in e)d=d.concat(zr({key:y,value:e[y],valueSpec:a[y],style:c,styleSpec:r}));else m!=="string"&&(d=d.concat([new yt("projection",e,`object or string expected, ${m} found`)]));return d}};function zr(n){const e=n.value,r=n.valueSpec,a=n.styleSpec;return r.expression&&wl(Jn(e))?Sl(n):r.expression&&ma(yr(e))?vr(n):r.type&&_h[r.type]?_h[r.type](n):Fi(So({},n,{valueSpec:r.type?a[r.type]:r}))}function od(n){const e=n.value,r=n.key,a=rs(n);return a.length||(e.indexOf("{fontstack}")===-1&&a.push(new yt(r,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&a.push(new yt(r,e,'"glyphs" url must include a "{range}" token'))),a}function gh(n,e=Ve){return wi(zr({key:"",value:n,valueSpec:e.$root,styleSpec:e,style:n,objectElementValidators:{glyphs:od,"*":()=>[]}}))}const sd=n=>wi(uh(n)),ad=n=>wi(Ou(n));function wi(n){return n.slice().sort((e,r)=>e.line&&r.line?e.line-r.line:0)}function yh(n,e){let r=!1;if(e&&e.length)for(const a of e)n.fire(new Eo(new Error(a.message))),r=!0;return r}var ld=io,Bi=3;function io(n,e,r){var a=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;var c=new Int32Array(this.arrayBuffer);n=c[0],this.d=(e=c[1])+2*(r=c[2]);for(var d=0;d<this.d*this.d;d++){var m=c[Bi+d],y=c[Bi+d+1];a.push(m===y?null:c.subarray(m,y))}var w=c[Bi+a.length+1];this.keys=c.subarray(c[Bi+a.length],w),this.bboxes=c.subarray(w),this.insert=this._insertReadonly}else{this.d=e+2*r;for(var b=0;b<this.d*this.d;b++)a.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=n,this.padding=r,this.scale=e/n,this.uid=0;var M=r/e*n;this.min=-M,this.max=n+M}io.prototype.insert=function(n,e,r,a,c){this._forEachCell(e,r,a,c,this._insertCell,this.uid++),this.keys.push(n),this.bboxes.push(e),this.bboxes.push(r),this.bboxes.push(a),this.bboxes.push(c)},io.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},io.prototype._insertCell=function(n,e,r,a,c,d){this.cells[c].push(d)},io.prototype.query=function(n,e,r,a,c){var d=this.min,m=this.max;if(n<=d&&e<=d&&m<=r&&m<=a&&!c)return Array.prototype.slice.call(this.keys);var y=[];return this._forEachCell(n,e,r,a,this._queryCell,y,{},c),y},io.prototype._queryCell=function(n,e,r,a,c,d,m,y){var w=this.cells[c];if(w!==null)for(var b=this.keys,M=this.bboxes,A=0;A<w.length;A++){var I=w[A];if(m[I]===void 0){var L=4*I;(y?y(M[L+0],M[L+1],M[L+2],M[L+3]):n<=M[L+2]&&e<=M[L+3]&&r>=M[L+0]&&a>=M[L+1])?(m[I]=!0,d.push(b[I])):m[I]=!1}}},io.prototype._forEachCell=function(n,e,r,a,c,d,m,y){for(var w=this._convertToCellCoord(n),b=this._convertToCellCoord(e),M=this._convertToCellCoord(r),A=this._convertToCellCoord(a),I=w;I<=M;I++)for(var L=b;L<=A;L++){var D=this.d*L+I;if((!y||y(this._convertFromCellCoord(I),this._convertFromCellCoord(L),this._convertFromCellCoord(I+1),this._convertFromCellCoord(L+1)))&&c.call(this,n,e,r,a,D,d,m,y))return}},io.prototype._convertFromCellCoord=function(n){return(n-this.padding)/this.scale},io.prototype._convertToCellCoord=function(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))},io.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var n=this.cells,e=Bi+this.cells.length+1+1,r=0,a=0;a<this.cells.length;a++)r+=this.cells[a].length;var c=new Int32Array(e+r+this.keys.length+this.bboxes.length);c[0]=this.extent,c[1]=this.n,c[2]=this.padding;for(var d=e,m=0;m<n.length;m++){var y=n[m];c[Bi+m]=d,c.set(y,d),d+=y.length}return c[Bi+n.length]=d,c.set(this.keys,d),c[Bi+n.length+1]=d+=this.keys.length,c.set(this.bboxes,d),d+=this.bboxes.length,c.buffer};var Is=se(ld);const F1={};function vt(n,e,r={}){Object.defineProperty(n,"_classRegistryKey",{value:e,writeable:!1}),F1[e]={klass:n,omit:r.omit||[]}}vt(Object,"Object"),Is.serialize=function(n,e){const r=n.toArrayBuffer();return e&&e.push(r),{buffer:r}},Is.deserialize=function(n){return new Is(n.buffer)},Object.defineProperty(Is,"name",{value:"Grid"}),vt(Is,"Grid"),vt(Wn,"Color"),vt(Error,"Error"),vt(Li,"AJAXError"),vt(vi,"ResolvedImage"),vt(I1,"StylePropertyFunction"),vt(A1,"StyleExpression",{omit:["_evaluator"]}),vt(bl,"ZoomDependentExpression"),vt(ku,"ZoomConstantExpression"),vt(Po,"CompoundExpression",{omit:["_evaluate"]});for(const n in xl)F1[xl[n]._classRegistryKey]||vt(xl[n],`Expression${n}`);function Nu(n){return n&&typeof ArrayBuffer<"u"&&(n instanceof ArrayBuffer||n.constructor&&n.constructor.name==="ArrayBuffer")}function ju(n){return P.ImageBitmap&&n instanceof P.ImageBitmap}function va(n,e){if(n==null||typeof n=="boolean"||typeof n=="number"||typeof n=="string"||n instanceof Boolean||n instanceof Number||n instanceof String||n instanceof Date||n instanceof RegExp)return n;if(Nu(n)||ju(n))return e&&e.push(n),n;if(ArrayBuffer.isView(n)){const r=n;return e&&e.push(r.buffer),r}if(n instanceof P.ImageData)return e&&e.push(n.data.buffer),n;if(Array.isArray(n)){const r=[];for(const a of n)r.push(va(a,e));return r}if(typeof n=="object"){const r=n.constructor,a=r._classRegistryKey;if(!a)throw new Error(`can't serialize object of unregistered class ${a}`);const c=r.serialize?r.serialize(n,e):{};if(!r.serialize){for(const d in n)n.hasOwnProperty(d)&&(F1[a].omit.indexOf(d)>=0||(c[d]=va(n[d],e)));n instanceof Error&&(c.message=n.message)}if(c.$name)throw new Error("$name property is reserved for worker serialization logic.");return a!=="Object"&&(c.$name=a),c}throw new Error("can't serialize object of type "+typeof n)}function ks(n){if(n==null||typeof n=="boolean"||typeof n=="number"||typeof n=="string"||n instanceof Boolean||n instanceof Number||n instanceof String||n instanceof Date||n instanceof RegExp||Nu(n)||ju(n)||ArrayBuffer.isView(n)||n instanceof P.ImageData)return n;if(Array.isArray(n))return n.map(ks);if(typeof n=="object"){const e=n.$name||"Object",{klass:r}=F1[e];if(!r)throw new Error(`can't deserialize unregistered class ${e}`);if(r.deserialize)return r.deserialize(n);const a=Object.create(r.prototype);for(const c of Object.keys(n))c!=="$name"&&(a[c]=ks(n[c]));return a}throw new Error("can't deserialize object of type "+typeof n)}const mt={"Latin-1 Supplement":n=>n>=128&&n<=255,Arabic:n=>n>=1536&&n<=1791,"Arabic Supplement":n=>n>=1872&&n<=1919,"Arabic Extended-A":n=>n>=2208&&n<=2303,"Hangul Jamo":n=>n>=4352&&n<=4607,"Unified Canadian Aboriginal Syllabics":n=>n>=5120&&n<=5759,Khmer:n=>n>=6016&&n<=6143,"Unified Canadian Aboriginal Syllabics Extended":n=>n>=6320&&n<=6399,"General Punctuation":n=>n>=8192&&n<=8303,"Letterlike Symbols":n=>n>=8448&&n<=8527,"Number Forms":n=>n>=8528&&n<=8591,"Miscellaneous Technical":n=>n>=8960&&n<=9215,"Control Pictures":n=>n>=9216&&n<=9279,"Optical Character Recognition":n=>n>=9280&&n<=9311,"Enclosed Alphanumerics":n=>n>=9312&&n<=9471,"Geometric Shapes":n=>n>=9632&&n<=9727,"Miscellaneous Symbols":n=>n>=9728&&n<=9983,"Miscellaneous Symbols and Arrows":n=>n>=11008&&n<=11263,"CJK Radicals Supplement":n=>n>=11904&&n<=12031,"Kangxi Radicals":n=>n>=12032&&n<=12255,"Ideographic Description Characters":n=>n>=12272&&n<=12287,"CJK Symbols and Punctuation":n=>n>=12288&&n<=12351,Hiragana:n=>n>=12352&&n<=12447,Katakana:n=>n>=12448&&n<=12543,Bopomofo:n=>n>=12544&&n<=12591,"Hangul Compatibility Jamo":n=>n>=12592&&n<=12687,Kanbun:n=>n>=12688&&n<=12703,"Bopomofo Extended":n=>n>=12704&&n<=12735,"CJK Strokes":n=>n>=12736&&n<=12783,"Katakana Phonetic Extensions":n=>n>=12784&&n<=12799,"Enclosed CJK Letters and Months":n=>n>=12800&&n<=13055,"CJK Compatibility":n=>n>=13056&&n<=13311,"CJK Unified Ideographs Extension A":n=>n>=13312&&n<=19903,"Yijing Hexagram Symbols":n=>n>=19904&&n<=19967,"CJK Unified Ideographs":n=>n>=19968&&n<=40959,"Yi Syllables":n=>n>=40960&&n<=42127,"Yi Radicals":n=>n>=42128&&n<=42191,"Hangul Jamo Extended-A":n=>n>=43360&&n<=43391,"Hangul Syllables":n=>n>=44032&&n<=55215,"Hangul Jamo Extended-B":n=>n>=55216&&n<=55295,"Private Use Area":n=>n>=57344&&n<=63743,"CJK Compatibility Ideographs":n=>n>=63744&&n<=64255,"Arabic Presentation Forms-A":n=>n>=64336&&n<=65023,"Vertical Forms":n=>n>=65040&&n<=65055,"CJK Compatibility Forms":n=>n>=65072&&n<=65103,"Small Form Variants":n=>n>=65104&&n<=65135,"Arabic Presentation Forms-B":n=>n>=65136&&n<=65279,"Halfwidth and Fullwidth Forms":n=>n>=65280&&n<=65519};function Vu(n){for(const e of n)if(Gu(e.charCodeAt(0)))return!0;return!1}function cd(n){for(const e of n)if(!vh(e.charCodeAt(0)))return!1;return!0}function vh(n){return!(mt.Arabic(n)||mt["Arabic Supplement"](n)||mt["Arabic Extended-A"](n)||mt["Arabic Presentation Forms-A"](n)||mt["Arabic Presentation Forms-B"](n))}function Gu(n){return!(n!==746&&n!==747&&(n<4352||!(mt["Bopomofo Extended"](n)||mt.Bopomofo(n)||mt["CJK Compatibility Forms"](n)&&!(n>=65097&&n<=65103)||mt["CJK Compatibility Ideographs"](n)||mt["CJK Compatibility"](n)||mt["CJK Radicals Supplement"](n)||mt["CJK Strokes"](n)||!(!mt["CJK Symbols and Punctuation"](n)||n>=12296&&n<=12305||n>=12308&&n<=12319||n===12336)||mt["CJK Unified Ideographs Extension A"](n)||mt["CJK Unified Ideographs"](n)||mt["Enclosed CJK Letters and Months"](n)||mt["Hangul Compatibility Jamo"](n)||mt["Hangul Jamo Extended-A"](n)||mt["Hangul Jamo Extended-B"](n)||mt["Hangul Jamo"](n)||mt["Hangul Syllables"](n)||mt.Hiragana(n)||mt["Ideographic Description Characters"](n)||mt.Kanbun(n)||mt["Kangxi Radicals"](n)||mt["Katakana Phonetic Extensions"](n)||mt.Katakana(n)&&n!==12540||!(!mt["Halfwidth and Fullwidth Forms"](n)||n===65288||n===65289||n===65293||n>=65306&&n<=65310||n===65339||n===65341||n===65343||n>=65371&&n<=65503||n===65507||n>=65512&&n<=65519)||!(!mt["Small Form Variants"](n)||n>=65112&&n<=65118||n>=65123&&n<=65126)||mt["Unified Canadian Aboriginal Syllabics"](n)||mt["Unified Canadian Aboriginal Syllabics Extended"](n)||mt["Vertical Forms"](n)||mt["Yijing Hexagram Symbols"](n)||mt["Yi Syllables"](n)||mt["Yi Radicals"](n))))}function xh(n){return!(Gu(n)||function(e){return!!(mt["Latin-1 Supplement"](e)&&(e===167||e===169||e===174||e===177||e===188||e===189||e===190||e===215||e===247)||mt["General Punctuation"](e)&&(e===8214||e===8224||e===8225||e===8240||e===8241||e===8251||e===8252||e===8258||e===8263||e===8264||e===8265||e===8273)||mt["Letterlike Symbols"](e)||mt["Number Forms"](e)||mt["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||e===9003||e>=9085&&e<=9114||e>=9150&&e<=9165||e===9167||e>=9169&&e<=9179||e>=9186&&e<=9215)||mt["Control Pictures"](e)&&e!==9251||mt["Optical Character Recognition"](e)||mt["Enclosed Alphanumerics"](e)||mt["Geometric Shapes"](e)||mt["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||mt["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||mt["CJK Symbols and Punctuation"](e)||mt.Katakana(e)||mt["Private Use Area"](e)||mt["CJK Compatibility Forms"](e)||mt["Small Form Variants"](e)||mt["Halfwidth and Fullwidth Forms"](e)||e===8734||e===8756||e===8757||e>=9984&&e<=10087||e>=10102&&e<=10131||e===65532||e===65533)}(n))}function wh(n){return n>=1424&&n<=2303||mt["Arabic Presentation Forms-A"](n)||mt["Arabic Presentation Forms-B"](n)}function ud(n,e){return!(!e&&wh(n)||n>=2304&&n<=3583||n>=3840&&n<=4255||mt.Khmer(n))}function hd(n){for(const e of n)if(wh(e.charCodeAt(0)))return!0;return!1}const $u="deferred",Zu="loading",qu="loaded";let xa=null,h="unavailable",i=null;const l=function(n){n&&typeof n=="string"&&n.indexOf("NetworkError")>-1&&(h="error"),xa&&xa(n)};function f(){g.fire(new Ts("pluginStateChange",{pluginStatus:h,pluginURL:i}))}const g=new il,v=function(){return h},T=function(){if(h!==$u||!i)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");h=Zu,f(),i&&Qi({url:i},n=>{n?l(n):(h=qu,f())})},S={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>h===qu||S.applyArabicShaping!=null,isLoading:()=>h===Zu,setState(n){h=n.pluginStatus,i=n.pluginURL},isParsed:()=>S.applyArabicShaping!=null&&S.processBidirectionalText!=null&&S.processStyledBidirectionalText!=null,getPluginURL:()=>i};class C{constructor(e,r){this.zoom=e,r?(this.now=r.now,this.fadeDuration=r.fadeDuration,this.transition=r.transition,this.pitch=r.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(e){return function(r,a){for(const c of r)if(!ud(c.charCodeAt(0),a))return!1;return!0}(e,S.isLoaded())}}class z{constructor(e,r){this.property=e,this.value=r,this.expression=function(a,c){if(wl(a))return new I1(a,c);if(ma(a)){const d=Tl(a,c);if(d.result==="error")throw new Error(d.value.map(m=>`${m.key}: ${m.message}`).join(", "));return d.value}{let d=a;return typeof a=="string"&&c.type==="color"&&(d=Wn.parse(a)),{kind:"constant",evaluate:()=>d}}}(r===void 0?e.specification.default:r,e.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(e,r,a){return this.property.possiblyEvaluate(this,e,r,a)}}class k{constructor(e){this.property=e,this.value=new z(e,void 0)}transitioned(e,r){return new $(this.property,this.value,r,Nt({},e.transition,this.transition),e.now)}untransitioned(){return new $(this.property,this.value,null,{},0)}}class F{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return kr(this._values[e].value.value)}setValue(e,r){this._values.hasOwnProperty(e)||(this._values[e]=new k(this._values[e].property)),this._values[e].value=new z(this._values[e].property,r===null?void 0:kr(r))}getTransition(e){return kr(this._values[e].transition)}setTransition(e,r){this._values.hasOwnProperty(e)||(this._values[e]=new k(this._values[e].property)),this._values[e].transition=kr(r)||void 0}serialize(){const e={};for(const r of Object.keys(this._values)){const a=this.getValue(r);a!==void 0&&(e[r]=a);const c=this.getTransition(r);c!==void 0&&(e[`${r}-transition`]=c)}return e}transitioned(e,r){const a=new X(this._properties);for(const c of Object.keys(this._values))a._values[c]=this._values[c].transitioned(e,r._values[c]);return a}untransitioned(){const e=new X(this._properties);for(const r of Object.keys(this._values))e._values[r]=this._values[r].untransitioned();return e}}class ${constructor(e,r,a,c,d){const m=c.delay||0,y=c.duration||0;d=d||0,this.property=e,this.value=r,this.begin=d+m,this.end=this.begin+y,e.specification.transition&&(c.delay||c.duration)&&(this.prior=a)}possiblyEvaluate(e,r,a){const c=e.now||0,d=this.value.possiblyEvaluate(e,r,a),m=this.prior;if(m){if(c>this.end)return this.prior=null,d;if(this.value.isDataDriven())return this.prior=null,d;if(c<this.begin)return m.possiblyEvaluate(e,r,a);{const y=(c-this.begin)/(this.end-this.begin);return this.property.interpolate(m.possiblyEvaluate(e,r,a),d,Ge(y))}}return d}}class X{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,r,a){const c=new J(this._properties);for(const d of Object.keys(this._values))c._values[d]=this._values[d].possiblyEvaluate(e,r,a);return c}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class Y{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}getValue(e){return kr(this._values[e].value)}setValue(e,r){this._values[e]=new z(this._values[e].property,r===null?void 0:kr(r))}serialize(){const e={};for(const r of Object.keys(this._values)){const a=this.getValue(r);a!==void 0&&(e[r]=a)}return e}possiblyEvaluate(e,r,a){const c=new J(this._properties);for(const d of Object.keys(this._values))c._values[d]=this._values[d].possiblyEvaluate(e,r,a);return c}}class K{constructor(e,r,a){this.property=e,this.value=r,this.parameters=a}isConstant(){return this.value.kind==="constant"}constantOr(e){return this.value.kind==="constant"?this.value.value:e}evaluate(e,r,a,c){return this.property.evaluate(this.value,this.parameters,e,r,a,c)}}class J{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class B{constructor(e){this.specification=e}possiblyEvaluate(e,r){return e.expression.evaluate(r)}interpolate(e,r,a){const c=ml[this.specification.type];return c?c(e,r,a):e}}class H{constructor(e,r){this.specification=e,this.overrides=r}possiblyEvaluate(e,r,a,c){return new K(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(r,null,{},a,c)}:e.expression,r)}interpolate(e,r,a){if(e.value.kind!=="constant"||r.value.kind!=="constant")return e;if(e.value.value===void 0||r.value.value===void 0)return new K(this,{kind:"constant",value:void 0},e.parameters);const c=ml[this.specification.type];return c?new K(this,{kind:"constant",value:c(e.value.value,r.value.value,a)},e.parameters):e}evaluate(e,r,a,c,d,m){return e.kind==="constant"?e.value:e.evaluate(r,a,c,d,m)}}class ie{constructor(e){this.specification=e}possiblyEvaluate(e,r,a,c){return!!e.expression.evaluate(r,null,{},a,c)}interpolate(){return!1}}class oe{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const r=new C(0,{});for(const a in e){const c=e[a];c.specification.overridable&&this.overridableProperties.push(a);const d=this.defaultPropertyValues[a]=new z(c,void 0),m=this.defaultTransitionablePropertyValues[a]=new k(c);this.defaultTransitioningPropertyValues[a]=m.untransitioned(),this.defaultPossiblyEvaluatedValues[a]=d.possiblyEvaluate(r)}}}function me(n,e){return 256*(n=Ce(Math.floor(n),0,255))+Ce(Math.floor(e),0,255)}vt(H,"DataDrivenProperty"),vt(B,"DataConstantProperty"),vt(ie,"ColorRampProperty");const ge={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class _e{constructor(e,r){this._structArray=e,this._pos1=r*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Ee{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,r){return e._trim(),r&&(e.isTransferred=!0,r.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const r=Object.create(this.prototype);return r.arrayBuffer=e.arrayBuffer,r.length=e.length,r.capacity=e.arrayBuffer.byteLength/r.bytesPerElement,r._refreshViews(),r}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const r=this.uint8;this._refreshViews(),r&&this.uint8.set(r)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Te(n,e=1){let r=0,a=0;return{members:n.map(c=>{const d=ge[c.type].BYTES_PER_ELEMENT,m=r=ze(r,Math.max(e,d)),y=c.components||1;return a=Math.max(a,d),r+=d*y,{name:c.name,type:c.type,components:y,offset:m}}),size:ze(r,Math.max(a,e)),alignment:e}}function ze(n,e){return Math.ceil(n/e)*e}class nt extends Ee{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r){const a=this.length;return this.resize(a+1),this.emplace(a,e,r)}emplace(e,r,a){const c=2*e;return this.int16[c+0]=r,this.int16[c+1]=a,e}}nt.prototype.bytesPerElement=4,vt(nt,"StructArrayLayout2i4");class Pe extends Ee{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,a){const c=this.length;return this.resize(c+1),this.emplace(c,e,r,a)}emplace(e,r,a,c){const d=3*e;return this.int16[d+0]=r,this.int16[d+1]=a,this.int16[d+2]=c,e}}Pe.prototype.bytesPerElement=6,vt(Pe,"StructArrayLayout3i6");class qe extends Ee{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,a,c){const d=this.length;return this.resize(d+1),this.emplace(d,e,r,a,c)}emplace(e,r,a,c,d){const m=4*e;return this.int16[m+0]=r,this.int16[m+1]=a,this.int16[m+2]=c,this.int16[m+3]=d,e}}qe.prototype.bytesPerElement=8,vt(qe,"StructArrayLayout4i8");class Re extends Ee{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,a,c,d,m,y){const w=this.length;return this.resize(w+1),this.emplace(w,e,r,a,c,d,m,y)}emplace(e,r,a,c,d,m,y,w){const b=6*e,M=12*e,A=3*e;return this.int16[b+0]=r,this.int16[b+1]=a,this.uint8[M+4]=c,this.uint8[M+5]=d,this.uint8[M+6]=m,this.uint8[M+7]=y,this.float32[A+2]=w,e}}Re.prototype.bytesPerElement=12,vt(Re,"StructArrayLayout2i4ub1f12");class tt extends Ee{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,a,c){const d=this.length;return this.resize(d+1),this.emplace(d,e,r,a,c)}emplace(e,r,a,c,d){const m=4*e;return this.float32[m+0]=r,this.float32[m+1]=a,this.float32[m+2]=c,this.float32[m+3]=d,e}}tt.prototype.bytesPerElement=16,vt(tt,"StructArrayLayout4f16");class ke extends Ee{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,a,c,d){const m=this.length;return this.resize(m+1),this.emplace(m,e,r,a,c,d)}emplace(e,r,a,c,d,m){const y=6*e,w=3*e;return this.uint16[y+0]=r,this.uint16[y+1]=a,this.uint16[y+2]=c,this.uint16[y+3]=d,this.float32[w+2]=m,e}}ke.prototype.bytesPerElement=12,vt(ke,"StructArrayLayout4ui1f12");class Ze extends Ee{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,a,c){const d=this.length;return this.resize(d+1),this.emplace(d,e,r,a,c)}emplace(e,r,a,c,d){const m=4*e;return this.uint16[m+0]=r,this.uint16[m+1]=a,this.uint16[m+2]=c,this.uint16[m+3]=d,e}}Ze.prototype.bytesPerElement=8,vt(Ze,"StructArrayLayout4ui8");class it extends Ee{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,a,c,d,m){const y=this.length;return this.resize(y+1),this.emplace(y,e,r,a,c,d,m)}emplace(e,r,a,c,d,m,y){const w=6*e;return this.int16[w+0]=r,this.int16[w+1]=a,this.int16[w+2]=c,this.int16[w+3]=d,this.int16[w+4]=m,this.int16[w+5]=y,e}}it.prototype.bytesPerElement=12,vt(it,"StructArrayLayout6i12");class Qe extends Ee{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,a,c,d,m,y,w,b,M,A,I){const L=this.length;return this.resize(L+1),this.emplace(L,e,r,a,c,d,m,y,w,b,M,A,I)}emplace(e,r,a,c,d,m,y,w,b,M,A,I,L){const D=12*e;return this.int16[D+0]=r,this.int16[D+1]=a,this.int16[D+2]=c,this.int16[D+3]=d,this.uint16[D+4]=m,this.uint16[D+5]=y,this.uint16[D+6]=w,this.uint16[D+7]=b,this.int16[D+8]=M,this.int16[D+9]=A,this.int16[D+10]=I,this.int16[D+11]=L,e}}Qe.prototype.bytesPerElement=24,vt(Qe,"StructArrayLayout4i4ui4i24");class ot extends Ee{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,a,c,d,m){const y=this.length;return this.resize(y+1),this.emplace(y,e,r,a,c,d,m)}emplace(e,r,a,c,d,m,y){const w=10*e,b=5*e;return this.int16[w+0]=r,this.int16[w+1]=a,this.int16[w+2]=c,this.float32[b+2]=d,this.float32[b+3]=m,this.float32[b+4]=y,e}}ot.prototype.bytesPerElement=20,vt(ot,"StructArrayLayout3i3f20");class Ct extends Ee{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const r=this.length;return this.resize(r+1),this.emplace(r,e)}emplace(e,r){return this.uint32[1*e+0]=r,e}}Ct.prototype.bytesPerElement=4,vt(Ct,"StructArrayLayout1ul4");class Ot extends Ee{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,a,c,d,m,y,w,b,M,A,I,L){const D=this.length;return this.resize(D+1),this.emplace(D,e,r,a,c,d,m,y,w,b,M,A,I,L)}emplace(e,r,a,c,d,m,y,w,b,M,A,I,L,D){const O=20*e,Z=10*e;return this.int16[O+0]=r,this.int16[O+1]=a,this.int16[O+2]=c,this.int16[O+3]=d,this.int16[O+4]=m,this.float32[Z+3]=y,this.float32[Z+4]=w,this.float32[Z+5]=b,this.float32[Z+6]=M,this.int16[O+14]=A,this.uint32[Z+8]=I,this.uint16[O+18]=L,this.uint16[O+19]=D,e}}Ot.prototype.bytesPerElement=40,vt(Ot,"StructArrayLayout5i4f1i1ul2ui40");class xt extends Ee{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,a,c,d,m,y){const w=this.length;return this.resize(w+1),this.emplace(w,e,r,a,c,d,m,y)}emplace(e,r,a,c,d,m,y,w){const b=8*e;return this.int16[b+0]=r,this.int16[b+1]=a,this.int16[b+2]=c,this.int16[b+4]=d,this.int16[b+5]=m,this.int16[b+6]=y,this.int16[b+7]=w,e}}xt.prototype.bytesPerElement=16,vt(xt,"StructArrayLayout3i2i2i16");class zt extends Ee{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,a,c,d){const m=this.length;return this.resize(m+1),this.emplace(m,e,r,a,c,d)}emplace(e,r,a,c,d,m){const y=4*e,w=8*e;return this.float32[y+0]=r,this.float32[y+1]=a,this.float32[y+2]=c,this.int16[w+6]=d,this.int16[w+7]=m,e}}zt.prototype.bytesPerElement=16,vt(zt,"StructArrayLayout2f1f2i16");class Kt extends Ee{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,a,c){const d=this.length;return this.resize(d+1),this.emplace(d,e,r,a,c)}emplace(e,r,a,c,d){const m=12*e,y=3*e;return this.uint8[m+0]=r,this.uint8[m+1]=a,this.float32[y+1]=c,this.float32[y+2]=d,e}}Kt.prototype.bytesPerElement=12,vt(Kt,"StructArrayLayout2ub2f12");class Wt extends Ee{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,a){const c=this.length;return this.resize(c+1),this.emplace(c,e,r,a)}emplace(e,r,a,c){const d=3*e;return this.float32[d+0]=r,this.float32[d+1]=a,this.float32[d+2]=c,e}}Wt.prototype.bytesPerElement=12,vt(Wt,"StructArrayLayout3f12");class St extends Ee{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,a){const c=this.length;return this.resize(c+1),this.emplace(c,e,r,a)}emplace(e,r,a,c){const d=3*e;return this.uint16[d+0]=r,this.uint16[d+1]=a,this.uint16[d+2]=c,e}}St.prototype.bytesPerElement=6,vt(St,"StructArrayLayout3ui6");class pn extends Ee{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,r,a,c,d,m,y,w,b,M,A,I,L,D,O,Z,Q,de,ee,ce,fe){const pe=this.length;return this.resize(pe+1),this.emplace(pe,e,r,a,c,d,m,y,w,b,M,A,I,L,D,O,Z,Q,de,ee,ce,fe)}emplace(e,r,a,c,d,m,y,w,b,M,A,I,L,D,O,Z,Q,de,ee,ce,fe,pe){const Le=30*e,Ae=15*e,$e=60*e;return this.int16[Le+0]=r,this.int16[Le+1]=a,this.int16[Le+2]=c,this.float32[Ae+2]=d,this.float32[Ae+3]=m,this.uint16[Le+8]=y,this.uint16[Le+9]=w,this.uint32[Ae+5]=b,this.uint32[Ae+6]=M,this.uint32[Ae+7]=A,this.uint16[Le+16]=I,this.uint16[Le+17]=L,this.uint16[Le+18]=D,this.float32[Ae+10]=O,this.float32[Ae+11]=Z,this.uint8[$e+48]=Q,this.uint8[$e+49]=de,this.uint8[$e+50]=ee,this.uint32[Ae+13]=ce,this.int16[Le+28]=fe,this.uint8[$e+58]=pe,e}}pn.prototype.bytesPerElement=60,vt(pn,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class gn extends Ee{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,r,a,c,d,m,y,w,b,M,A,I,L,D,O,Z,Q,de,ee,ce,fe,pe,Le,Ae,$e,rt,Fe,We,He,et){const at=this.length;return this.resize(at+1),this.emplace(at,e,r,a,c,d,m,y,w,b,M,A,I,L,D,O,Z,Q,de,ee,ce,fe,pe,Le,Ae,$e,rt,Fe,We,He,et)}emplace(e,r,a,c,d,m,y,w,b,M,A,I,L,D,O,Z,Q,de,ee,ce,fe,pe,Le,Ae,$e,rt,Fe,We,He,et,at){const Ne=38*e,dt=19*e;return this.int16[Ne+0]=r,this.int16[Ne+1]=a,this.int16[Ne+2]=c,this.float32[dt+2]=d,this.float32[dt+3]=m,this.int16[Ne+8]=y,this.int16[Ne+9]=w,this.int16[Ne+10]=b,this.int16[Ne+11]=M,this.int16[Ne+12]=A,this.int16[Ne+13]=I,this.uint16[Ne+14]=L,this.uint16[Ne+15]=D,this.uint16[Ne+16]=O,this.uint16[Ne+17]=Z,this.uint16[Ne+18]=Q,this.uint16[Ne+19]=de,this.uint16[Ne+20]=ee,this.uint16[Ne+21]=ce,this.uint16[Ne+22]=fe,this.uint16[Ne+23]=pe,this.uint16[Ne+24]=Le,this.uint16[Ne+25]=Ae,this.uint16[Ne+26]=$e,this.uint16[Ne+27]=rt,this.uint16[Ne+28]=Fe,this.uint32[dt+15]=We,this.float32[dt+16]=He,this.float32[dt+17]=et,this.float32[dt+18]=at,e}}gn.prototype.bytesPerElement=76,vt(gn,"StructArrayLayout3i2f6i15ui1ul3f76");class yn extends Ee{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const r=this.length;return this.resize(r+1),this.emplace(r,e)}emplace(e,r){return this.float32[1*e+0]=r,e}}yn.prototype.bytesPerElement=4,vt(yn,"StructArrayLayout1f4");class vn extends Ee{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,a,c,d){const m=this.length;return this.resize(m+1),this.emplace(m,e,r,a,c,d)}emplace(e,r,a,c,d,m){const y=5*e;return this.float32[y+0]=r,this.float32[y+1]=a,this.float32[y+2]=c,this.float32[y+3]=d,this.float32[y+4]=m,e}}vn.prototype.bytesPerElement=20,vt(vn,"StructArrayLayout5f20");class Lr extends Ee{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,a,c){const d=this.length;return this.resize(d+1),this.emplace(d,e,r,a,c)}emplace(e,r,a,c,d){const m=6*e;return this.uint32[3*e+0]=r,this.uint16[m+2]=a,this.uint16[m+3]=c,this.uint16[m+4]=d,e}}Lr.prototype.bytesPerElement=12,vt(Lr,"StructArrayLayout1ul3ui12");class xr extends Ee{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r){const a=this.length;return this.resize(a+1),this.emplace(a,e,r)}emplace(e,r,a){const c=2*e;return this.uint16[c+0]=r,this.uint16[c+1]=a,e}}xr.prototype.bytesPerElement=4,vt(xr,"StructArrayLayout2ui4");class bi extends Ee{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const r=this.length;return this.resize(r+1),this.emplace(r,e)}emplace(e,r){return this.uint16[1*e+0]=r,e}}bi.prototype.bytesPerElement=2,vt(bi,"StructArrayLayout1ui2");class oo extends Ee{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r){const a=this.length;return this.resize(a+1),this.emplace(a,e,r)}emplace(e,r,a){const c=2*e;return this.float32[c+0]=r,this.float32[c+1]=a,e}}oo.prototype.bytesPerElement=8,vt(oo,"StructArrayLayout2f8");class Rn extends _e{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}Rn.prototype.size=40;class xn extends Ot{get(e){return new Rn(this,e)}}vt(xn,"CollisionBoxArray");class an extends _e{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(e){this._structArray.uint8[this._pos1+49]=e}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(e){this._structArray.uint8[this._pos1+50]=e}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(e){this._structArray.uint32[this._pos4+13]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(e){this._structArray.uint8[this._pos1+58]=e}}an.prototype.size=60;class Qn extends pn{get(e){return new an(this,e)}}vt(Qn,"PlacedSymbolArray");class jr extends _e{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(e){this._structArray.uint32[this._pos4+15]=e}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}jr.prototype.size=76;class zn extends gn{get(e){return new jr(this,e)}}vt(zn,"SymbolInstanceArray");class Xr extends yn{getoffsetX(e){return this.float32[1*e+0]}}vt(Xr,"GlyphOffsetArray");class B1 extends nt{getx(e){return this.int16[2*e+0]}gety(e){return this.int16[2*e+1]}}vt(B1,"SymbolLineVertexArray");class zs extends _e{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}zs.prototype.size=12;class Al extends Lr{get(e){return new zs(this,e)}}vt(Al,"FeatureIndexArray");class Lo extends xr{geta_centroid_pos0(e){return this.uint16[2*e+0]}geta_centroid_pos1(e){return this.uint16[2*e+1]}}vt(Lo,"FillExtrusionCentroidArray");const is=Te([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Ls=Te([{name:"a_dash",components:4,type:"Uint16"}]);var O1={exports:{}},Il={exports:{}};Il.exports=function(n,e){var r,a,c,d,m,y,w,b;for(a=n.length-(r=3&n.length),c=e,m=3432918353,y=461845907,b=0;b<a;)w=255&n.charCodeAt(b)|(255&n.charCodeAt(++b))<<8|(255&n.charCodeAt(++b))<<16|(255&n.charCodeAt(++b))<<24,++b,c=27492+(65535&(d=5*(65535&(c=(c^=w=(65535&(w=(w=(65535&w)*m+(((w>>>16)*m&65535)<<16)&4294967295)<<15|w>>>17))*y+(((w>>>16)*y&65535)<<16)&4294967295)<<13|c>>>19))+((5*(c>>>16)&65535)<<16)&4294967295))+((58964+(d>>>16)&65535)<<16);switch(w=0,r){case 3:w^=(255&n.charCodeAt(b+2))<<16;case 2:w^=(255&n.charCodeAt(b+1))<<8;case 1:c^=w=(65535&(w=(w=(65535&(w^=255&n.charCodeAt(b)))*m+(((w>>>16)*m&65535)<<16)&4294967295)<<15|w>>>17))*y+(((w>>>16)*y&65535)<<16)&4294967295}return c^=n.length,c=2246822507*(65535&(c^=c>>>16))+((2246822507*(c>>>16)&65535)<<16)&4294967295,c=3266489909*(65535&(c^=c>>>13))+((3266489909*(c>>>16)&65535)<<16)&4294967295,(c^=c>>>16)>>>0};var Wu=Il.exports,c7={exports:{}};c7.exports=function(n,e){for(var r,a=n.length,c=e^a,d=0;a>=4;)r=1540483477*(65535&(r=255&n.charCodeAt(d)|(255&n.charCodeAt(++d))<<8|(255&n.charCodeAt(++d))<<16|(255&n.charCodeAt(++d))<<24))+((1540483477*(r>>>16)&65535)<<16),c=1540483477*(65535&c)+((1540483477*(c>>>16)&65535)<<16)^(r=1540483477*(65535&(r^=r>>>24))+((1540483477*(r>>>16)&65535)<<16)),a-=4,++d;switch(a){case 3:c^=(255&n.charCodeAt(d+2))<<16;case 2:c^=(255&n.charCodeAt(d+1))<<8;case 1:c=1540483477*(65535&(c^=255&n.charCodeAt(d)))+((1540483477*(c>>>16)&65535)<<16)}return c=1540483477*(65535&(c^=c>>>13))+((1540483477*(c>>>16)&65535)<<16),(c^=c>>>15)>>>0};var u7=Wu,Gy=c7.exports;O1.exports=u7,O1.exports.murmur3=u7,O1.exports.murmur2=Gy;var dd=se(O1.exports);class bh{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,r,a,c){this.ids.push(h7(e)),this.positions.push(r,a,c)}getPositions(e){const r=h7(e);let a=0,c=this.ids.length-1;for(;a<c;){const m=a+c>>1;this.ids[m]>=r?c=m:a=m+1}const d=[];for(;this.ids[a]===r;)d.push({index:this.positions[3*a],start:this.positions[3*a+1],end:this.positions[3*a+2]}),a++;return d}static serialize(e,r){const a=new Float64Array(e.ids),c=new Uint32Array(e.positions);return pd(a,c,0,a.length-1),r&&r.push(a.buffer,c.buffer),{ids:a,positions:c}}static deserialize(e){const r=new bh;return r.ids=e.ids,r.positions=e.positions,r.indexed=!0,r}}function h7(n){const e=+n;return!isNaN(e)&&Number.MIN_SAFE_INTEGER<=e&&e<=Number.MAX_SAFE_INTEGER?e:dd(String(n))}function pd(n,e,r,a){for(;r<a;){const c=n[r+a>>1];let d=r-1,m=a+1;for(;;){do d++;while(n[d]<c);do m--;while(n[m]>c);if(d>=m)break;Th(n,d,m),Th(e,3*d,3*m),Th(e,3*d+1,3*m+1),Th(e,3*d+2,3*m+2)}m-r<a-m?(pd(n,e,r,m),r=m+1):(pd(n,e,m+1,a),a=m)}}function Th(n,e,r){const a=n[e];n[e]=n[r],n[r]=a}vt(bh,"FeaturePositionMap");class Ds{constructor(e){this.gl=e.gl,this.initialized=!1}fetchUniformLocation(e,r){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(e,r),this.initialized=!0),!!this.location}}class Eh extends Ds{constructor(e){super(e),this.current=0}set(e,r,a){this.fetchUniformLocation(e,r)&&this.current!==a&&(this.current=a,this.gl.uniform1f(this.location,a))}}class d7 extends Ds{constructor(e){super(e),this.current=[0,0,0,0]}set(e,r,a){this.fetchUniformLocation(e,r)&&(a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]&&a[3]===this.current[3]||(this.current=a,this.gl.uniform4f(this.location,a[0],a[1],a[2],a[3])))}}class p7 extends Ds{constructor(e){super(e),this.current=Wn.transparent}set(e,r,a){this.fetchUniformLocation(e,r)&&(a.r===this.current.r&&a.g===this.current.g&&a.b===this.current.b&&a.a===this.current.a||(this.current=a,this.gl.uniform4f(this.location,a.r,a.g,a.b,a.a)))}}const $y=new Float32Array(16),Zy=new Float32Array(9),qy=new Float32Array(4);function fd(n){return[me(255*n.r,255*n.g),me(255*n.b,255*n.a)]}class Hu{constructor(e,r,a){this.value=e,this.uniformNames=r.map(c=>`u_${c}`),this.type=a}setUniform(e,r,a,c,d){r.set(e,d,c.constantOr(this.value))}getBinding(e,r){return this.type==="color"?new p7(e):new Eh(e)}}class U1{constructor(e,r){this.uniformNames=r.map(a=>`u_${a}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(e){this.pixelRatio=e.pixelRatio||1,this.pattern=e.tl.concat(e.br)}setUniform(e,r,a,c,d){const m=d==="u_pattern"||d==="u_dash"?this.pattern:d==="u_pixel_ratio"?this.pixelRatio:null;m&&r.set(e,d,m)}getBinding(e,r){return r==="u_pattern"||r==="u_dash"?new d7(e):new Eh(e)}}class Rs{constructor(e,r,a,c){this.expression=e,this.type=a,this.maxValue=0,this.paintVertexAttributes=r.map(d=>({name:`a_${d}`,type:"Float32",components:a==="color"?2:1,offset:0})),this.paintVertexArray=new c}populatePaintArray(e,r,a,c,d,m){const y=this.paintVertexArray.length,w=this.expression.evaluate(new C(0),r,{},d,c,m);this.paintVertexArray.resize(e),this._setPaintValue(y,e,w)}updatePaintArray(e,r,a,c,d){const m=this.expression.evaluate({zoom:0},a,c,void 0,d);this._setPaintValue(e,r,m)}_setPaintValue(e,r,a){if(this.type==="color"){const c=fd(a);for(let d=e;d<r;d++)this.paintVertexArray.emplace(d,c[0],c[1])}else{for(let c=e;c<r;c++)this.paintVertexArray.emplace(c,a);this.maxValue=Math.max(this.maxValue,Math.abs(a))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Do{constructor(e,r,a,c,d,m){this.expression=e,this.uniformNames=r.map(y=>`u_${y}_t`),this.type=a,this.useIntegerZoom=c,this.zoom=d,this.maxValue=0,this.paintVertexAttributes=r.map(y=>({name:`a_${y}`,type:"Float32",components:a==="color"?4:2,offset:0})),this.paintVertexArray=new m}populatePaintArray(e,r,a,c,d,m){const y=this.expression.evaluate(new C(this.zoom),r,{},d,c,m),w=this.expression.evaluate(new C(this.zoom+1),r,{},d,c,m),b=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(b,e,y,w)}updatePaintArray(e,r,a,c,d){const m=this.expression.evaluate({zoom:this.zoom},a,c,void 0,d),y=this.expression.evaluate({zoom:this.zoom+1},a,c,void 0,d);this._setPaintValue(e,r,m,y)}_setPaintValue(e,r,a,c){if(this.type==="color"){const d=fd(a),m=fd(c);for(let y=e;y<r;y++)this.paintVertexArray.emplace(y,d[0],d[1],m[0],m[1])}else{for(let d=e;d<r;d++)this.paintVertexArray.emplace(d,a,c);this.maxValue=Math.max(this.maxValue,Math.abs(a),Math.abs(c))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,r,a,c,d){const m=this.useIntegerZoom?Math.floor(a.zoom):a.zoom,y=Ce(this.expression.interpolationFactor(m,this.zoom,this.zoom+1),0,1);r.set(e,d,y)}getBinding(e,r){return new Eh(e)}}class wa{constructor(e,r,a,c,d){this.expression=e,this.layerId=d,this.paintVertexAttributes=(a==="array"?Ls:is).members;for(let m=0;m<r.length;++m);this.paintVertexArray=new c}populatePaintArray(e,r,a){const c=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValues(c,e,r.patterns&&r.patterns[this.layerId],a)}updatePaintArray(e,r,a,c,d,m){this._setPaintValues(e,r,a.patterns&&a.patterns[this.layerId],m)}_setPaintValues(e,r,a,c){if(!c||!a)return;const d=c[a];if(!d)return;const{tl:m,br:y,pixelRatio:w}=d;for(let b=e;b<r;b++)this.paintVertexArray.emplace(b,m[0],m[1],y[0],y[1],w)}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ba{constructor(e,r,a=()=>!0){this.binders={},this._buffers=[];const c=[];for(const d in e.paint._values){if(!a(d))continue;const m=e.paint.get(d);if(!(m instanceof K&&pa(m.property.specification)))continue;const y=Hy(d,e.type),w=m.value,b=m.property.specification.type,M=!!m.property.useIntegerZoom,A=d==="line-dasharray"||d.endsWith("pattern"),I=d==="line-dasharray"&&e.layout.get("line-cap").value.kind!=="constant";if(w.kind!=="constant"||I)if(w.kind==="source"||I||A){const L=f7(d,b,"source");this.binders[d]=A?new wa(w,y,b,L,e.id):new Rs(w,y,b,L),c.push(`/a_${d}`)}else{const L=f7(d,b,"composite");this.binders[d]=new Do(w,y,b,M,r,L),c.push(`/z_${d}`)}else this.binders[d]=A?new U1(w.value,y):new Hu(w.value,y,b),c.push(`/u_${d}`)}this.cacheKey=c.sort().join("")}getMaxValue(e){const r=this.binders[e];return r instanceof Rs||r instanceof Do?r.maxValue:0}populatePaintArrays(e,r,a,c,d,m){for(const y in this.binders){const w=this.binders[y];(w instanceof Rs||w instanceof Do||w instanceof wa)&&w.populatePaintArray(e,r,a,c,d,m)}}setConstantPatternPositions(e){for(const r in this.binders){const a=this.binders[r];a instanceof U1&&a.setConstantPatternPositions(e)}}updatePaintArrays(e,r,a,c,d,m){let y=!1;for(const w in e){const b=r.getPositions(w);for(const M of b){const A=a.feature(M.index);for(const I in this.binders){const L=this.binders[I];if((L instanceof Rs||L instanceof Do||L instanceof wa)&&L.expression.isStateDependent===!0){const D=c.paint.get(I);L.expression=D.value,L.updatePaintArray(M.start,M.end,A,e[w],d,m),y=!0}}}}return y}defines(){const e=[];for(const r in this.binders){const a=this.binders[r];(a instanceof Hu||a instanceof U1)&&e.push(...a.uniformNames.map(c=>`#define HAS_UNIFORM_${c}`))}return e}getBinderAttributes(){const e=[];for(const r in this.binders){const a=this.binders[r];if(a instanceof Rs||a instanceof Do||a instanceof wa)for(let c=0;c<a.paintVertexAttributes.length;c++)e.push(a.paintVertexAttributes[c].name)}return e}getBinderUniforms(){const e=[];for(const r in this.binders){const a=this.binders[r];if(a instanceof Hu||a instanceof U1||a instanceof Do)for(const c of a.uniformNames)e.push(c)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e){const r=[];for(const a in this.binders){const c=this.binders[a];if(c instanceof Hu||c instanceof U1||c instanceof Do)for(const d of c.uniformNames)r.push({name:d,property:a,binding:c.getBinding(e,d)})}return r}setUniforms(e,r,a,c,d){for(const{name:m,property:y,binding:w}of a)this.binders[y].setUniform(e,w,d,c.get(y),m)}updatePaintBuffers(){this._buffers=[];for(const e in this.binders){const r=this.binders[e];(r instanceof Rs||r instanceof Do||r instanceof wa)&&r.paintVertexBuffer&&this._buffers.push(r.paintVertexBuffer)}}upload(e){for(const r in this.binders){const a=this.binders[r];(a instanceof Rs||a instanceof Do||a instanceof wa)&&a.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const r=this.binders[e];(r instanceof Rs||r instanceof Do||r instanceof wa)&&r.destroy()}}}class kl{constructor(e,r,a=()=>!0){this.programConfigurations={};for(const c of e)this.programConfigurations[c.id]=new ba(c,r,a);this.needsUpload=!1,this._featureMap=new bh,this._bufferOffset=0}populatePaintArrays(e,r,a,c,d,m,y){for(const w in this.programConfigurations)this.programConfigurations[w].populatePaintArrays(e,r,c,d,m,y);r.id!==void 0&&this._featureMap.add(r.id,a,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,r,a,c,d){for(const m of a)this.needsUpload=this.programConfigurations[m.id].updatePaintArrays(e,this._featureMap,r,m,c,d)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const r in this.programConfigurations)this.programConfigurations[r].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}const Wy={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function Hy(n,e){return Wy[n]||[n.replace(`${e}-`,"").replace(/-/g,"_")]}const Xy={"line-pattern":{source:ke,composite:ke},"fill-pattern":{source:ke,composite:ke},"fill-extrusion-pattern":{source:ke,composite:ke},"line-dasharray":{source:Ze,composite:Ze}},Ky={color:{source:oo,composite:tt},number:{source:yn,composite:oo}};function f7(n,e,r){const a=Xy[n];return a&&a[r]||Ky[e][r]}vt(Hu,"ConstantBinder"),vt(U1,"PatternConstantBinder"),vt(Rs,"SourceExpressionBinder"),vt(wa,"PatternCompositeBinder"),vt(Do,"CompositeExpressionBinder"),vt(ba,"ProgramConfiguration",{omit:["_buffers"]}),vt(kl,"ProgramConfigurationSet");const m7="-transition";class Ro extends il{constructor(e,r){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,e.type!=="custom"&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,e.type!=="background"&&e.type!=="sky"&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),r.layout&&(this._unevaluatedLayout=new Y(r.layout)),r.paint)){this._transitionablePaint=new F(r.paint);for(const a in e.paint)this.setPaintProperty(a,e.paint[a],{validate:!1});for(const a in e.layout)this.setLayoutProperty(a,e.layout[a],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new J(r.paint)}}getLayoutProperty(e){return e==="visibility"?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,r,a={}){r!=null&&this._validate(ad,`layers.${this.id}.layout.${e}`,e,r,a)||(e!=="visibility"?this._unevaluatedLayout.setValue(e,r):this.visibility=r)}getPaintProperty(e){return Jo(e,m7)?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)}setPaintProperty(e,r,a={}){if(r!=null&&this._validate(sd,`layers.${this.id}.paint.${e}`,e,r,a))return!1;if(Jo(e,m7))return this._transitionablePaint.setTransition(e.slice(0,-11),r||void 0),!1;{const c=this._transitionablePaint._values[e],d=c.value.isDataDriven(),m=c.value;this._transitionablePaint.setValue(e,r),this._handleSpecialPaintPropertyUpdate(e);const y=this._transitionablePaint._values[e].value,w=y.isDataDriven(),b=Jo(e,"pattern")||e==="line-dasharray";return w||d||b||this._handleOverridablePaintPropertyUpdate(e,m,y)}}_handleSpecialPaintPropertyUpdate(e){}getProgramIds(){return null}getProgramConfiguration(e){return null}_handleOverridablePaintPropertyUpdate(e,r,a){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||this.visibility==="none"}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,r){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,r)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,r)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),fi(e,(r,a)=>!(r===void 0||a==="layout"&&!Object.keys(r).length||a==="paint"&&!Object.keys(r).length))}_validate(e,r,a,c,d={}){return(!d||d.validate!==!1)&&yh(this,e.call(gh,{key:r,layerType:this.type,objectKey:a,value:c,styleSpec:Ve,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const r=this.paint.get(e);if(r instanceof K&&pa(r.property.specification)&&(r.value.kind==="source"||r.value.kind==="composite")&&r.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=L1(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const Yy=Te([{name:"a_pos",components:2,type:"Int16"}],4),Jy=Te([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class er{constructor(e=[]){this.segments=e}prepareSegment(e,r,a,c){let d=this.segments[this.segments.length-1];return e>er.MAX_VERTEX_ARRAY_LENGTH&&dn(`Max vertices per segment is ${er.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!d||d.vertexLength+e>er.MAX_VERTEX_ARRAY_LENGTH||d.sortKey!==c)&&(d={vertexOffset:r.length,primitiveOffset:a.length,vertexLength:0,primitiveLength:0},c!==void 0&&(d.sortKey=c),this.segments.push(d)),d}get(){return this.segments}destroy(){for(const e of this.segments)for(const r in e.vaos)e.vaos[r].destroy()}static simpleSegment(e,r,a,c){return new er([{vertexOffset:e,primitiveOffset:r,vertexLength:a,primitiveLength:c,vaos:{},sortKey:0}])}}er.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,vt(er,"SegmentVector");var kt=8192;class Ta{constructor(e,r){e&&(r?this.setSouthWest(e).setNorthEast(r):e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}setNorthEast(e){return this._ne=e instanceof wn?new wn(e.lng,e.lat):wn.convert(e),this}setSouthWest(e){return this._sw=e instanceof wn?new wn(e.lng,e.lat):wn.convert(e),this}extend(e){const r=this._sw,a=this._ne;let c,d;if(e instanceof wn)c=e,d=e;else{if(!(e instanceof Ta))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(Ta.convert(e)):this.extend(wn.convert(e)):typeof e=="object"&&e!==null&&e.hasOwnProperty("lat")&&(e.hasOwnProperty("lon")||e.hasOwnProperty("lng"))?this.extend(wn.convert(e)):this;if(c=e._sw,d=e._ne,!c||!d)return this}return r||a?(r.lng=Math.min(c.lng,r.lng),r.lat=Math.min(c.lat,r.lat),a.lng=Math.max(d.lng,a.lng),a.lat=Math.max(d.lat,a.lat)):(this._sw=new wn(c.lng,c.lat),this._ne=new wn(d.lng,d.lat)),this}getCenter(){return new wn((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new wn(this.getWest(),this.getNorth())}getSouthEast(){return new wn(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:r,lat:a}=wn.convert(e);let c=this._sw.lng<=r&&r<=this._ne.lng;return this._sw.lng>this._ne.lng&&(c=this._sw.lng>=r&&r>=this._ne.lng),this._sw.lat<=a&&a<=this._ne.lat&&c}static convert(e){return!e||e instanceof Ta?e:new Ta(e)}}var Sh=1e-6,Ti=typeof Float32Array<"u"?Float32Array:Array;function _7(){var n=new Ti(9);return Ti!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0),n[0]=1,n[4]=1,n[8]=1,n}function g7(n,e,r){var a=e[0],c=e[1],d=e[2],m=e[3],y=e[4],w=e[5],b=e[6],M=e[7],A=e[8],I=r[0],L=r[1],D=r[2],O=r[3],Z=r[4],Q=r[5],de=r[6],ee=r[7],ce=r[8];return n[0]=I*a+L*m+D*b,n[1]=I*c+L*y+D*M,n[2]=I*d+L*w+D*A,n[3]=O*a+Z*m+Q*b,n[4]=O*c+Z*y+Q*M,n[5]=O*d+Z*w+Q*A,n[6]=de*a+ee*m+ce*b,n[7]=de*c+ee*y+ce*M,n[8]=de*d+ee*w+ce*A,n}function Fo(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function md(n,e){var r=e[0],a=e[1],c=e[2],d=e[3],m=e[4],y=e[5],w=e[6],b=e[7],M=e[8],A=e[9],I=e[10],L=e[11],D=e[12],O=e[13],Z=e[14],Q=e[15],de=r*y-a*m,ee=r*w-c*m,ce=r*b-d*m,fe=a*w-c*y,pe=a*b-d*y,Le=c*b-d*w,Ae=M*O-A*D,$e=M*Z-I*D,rt=M*Q-L*D,Fe=A*Z-I*O,We=A*Q-L*O,He=I*Q-L*Z,et=de*He-ee*We+ce*Fe+fe*rt-pe*$e+Le*Ae;return et?(n[0]=(y*He-w*We+b*Fe)*(et=1/et),n[1]=(c*We-a*He-d*Fe)*et,n[2]=(O*Le-Z*pe+Q*fe)*et,n[3]=(I*pe-A*Le-L*fe)*et,n[4]=(w*rt-m*He-b*$e)*et,n[5]=(r*He-c*rt+d*$e)*et,n[6]=(Z*ce-D*Le-Q*ee)*et,n[7]=(M*Le-I*ce+L*ee)*et,n[8]=(m*We-y*rt+b*Ae)*et,n[9]=(a*rt-r*We-d*Ae)*et,n[10]=(D*pe-O*ce+Q*de)*et,n[11]=(A*ce-M*pe-L*de)*et,n[12]=(y*$e-m*Fe-w*Ae)*et,n[13]=(r*Fe-a*$e+c*Ae)*et,n[14]=(O*ee-D*fe-Z*de)*et,n[15]=(M*fe-A*ee+I*de)*et,n):null}function zl(n,e,r){var a=e[0],c=e[1],d=e[2],m=e[3],y=e[4],w=e[5],b=e[6],M=e[7],A=e[8],I=e[9],L=e[10],D=e[11],O=e[12],Z=e[13],Q=e[14],de=e[15],ee=r[0],ce=r[1],fe=r[2],pe=r[3];return n[0]=ee*a+ce*y+fe*A+pe*O,n[1]=ee*c+ce*w+fe*I+pe*Z,n[2]=ee*d+ce*b+fe*L+pe*Q,n[3]=ee*m+ce*M+fe*D+pe*de,n[4]=(ee=r[4])*a+(ce=r[5])*y+(fe=r[6])*A+(pe=r[7])*O,n[5]=ee*c+ce*w+fe*I+pe*Z,n[6]=ee*d+ce*b+fe*L+pe*Q,n[7]=ee*m+ce*M+fe*D+pe*de,n[8]=(ee=r[8])*a+(ce=r[9])*y+(fe=r[10])*A+(pe=r[11])*O,n[9]=ee*c+ce*w+fe*I+pe*Z,n[10]=ee*d+ce*b+fe*L+pe*Q,n[11]=ee*m+ce*M+fe*D+pe*de,n[12]=(ee=r[12])*a+(ce=r[13])*y+(fe=r[14])*A+(pe=r[15])*O,n[13]=ee*c+ce*w+fe*I+pe*Z,n[14]=ee*d+ce*b+fe*L+pe*Q,n[15]=ee*m+ce*M+fe*D+pe*de,n}function Xu(n,e,r){var a,c,d,m,y,w,b,M,A,I,L,D,O=r[0],Z=r[1],Q=r[2];return e===n?(n[12]=e[0]*O+e[4]*Z+e[8]*Q+e[12],n[13]=e[1]*O+e[5]*Z+e[9]*Q+e[13],n[14]=e[2]*O+e[6]*Z+e[10]*Q+e[14],n[15]=e[3]*O+e[7]*Z+e[11]*Q+e[15]):(c=e[1],d=e[2],m=e[3],y=e[4],w=e[5],b=e[6],M=e[7],A=e[8],I=e[9],L=e[10],D=e[11],n[0]=a=e[0],n[1]=c,n[2]=d,n[3]=m,n[4]=y,n[5]=w,n[6]=b,n[7]=M,n[8]=A,n[9]=I,n[10]=L,n[11]=D,n[12]=a*O+y*Z+A*Q+e[12],n[13]=c*O+w*Z+I*Q+e[13],n[14]=d*O+b*Z+L*Q+e[14],n[15]=m*O+M*Z+D*Q+e[15]),n}function Ll(n,e,r){var a=r[0],c=r[1],d=r[2];return n[0]=e[0]*a,n[1]=e[1]*a,n[2]=e[2]*a,n[3]=e[3]*a,n[4]=e[4]*c,n[5]=e[5]*c,n[6]=e[6]*c,n[7]=e[7]*c,n[8]=e[8]*d,n[9]=e[9]*d,n[10]=e[10]*d,n[11]=e[11]*d,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}function _d(n,e,r){var a=Math.sin(r),c=Math.cos(r),d=e[4],m=e[5],y=e[6],w=e[7],b=e[8],M=e[9],A=e[10],I=e[11];return e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[4]=d*c+b*a,n[5]=m*c+M*a,n[6]=y*c+A*a,n[7]=w*c+I*a,n[8]=b*c-d*a,n[9]=M*c-m*a,n[10]=A*c-y*a,n[11]=I*c-w*a,n}function Mh(n,e,r){var a=Math.sin(r),c=Math.cos(r),d=e[0],m=e[1],y=e[2],w=e[3],b=e[8],M=e[9],A=e[10],I=e[11];return e!==n&&(n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=d*c-b*a,n[1]=m*c-M*a,n[2]=y*c-A*a,n[3]=w*c-I*a,n[8]=d*a+b*c,n[9]=m*a+M*c,n[10]=y*a+A*c,n[11]=w*a+I*c,n}function y7(n,e){return n[0]=e[0],n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=e[1],n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=e[2],n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function v7(n,e,r){var a,c,d,m=r[0],y=r[1],w=r[2],b=Math.hypot(m,y,w);return b<Sh?null:(m*=b=1/b,y*=b,w*=b,a=Math.sin(e),c=Math.cos(e),n[0]=m*m*(d=1-c)+c,n[1]=y*m*d+w*a,n[2]=w*m*d-y*a,n[3]=0,n[4]=m*y*d-w*a,n[5]=y*y*d+c,n[6]=w*y*d+m*a,n[7]=0,n[8]=m*w*d+y*a,n[9]=y*w*d-m*a,n[10]=w*w*d+c,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n)}Math.hypot||(Math.hypot=function(){for(var n=0,e=arguments.length;e--;)n+=arguments[e]*arguments[e];return Math.sqrt(n)});var Qy=zl;function gd(){var n=new Ti(3);return Ti!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function x7(n){var e=new Ti(3);return e[0]=n[0],e[1]=n[1],e[2]=n[2],e}function Ku(n){return Math.hypot(n[0],n[1],n[2])}function N1(n,e,r){var a=new Ti(3);return a[0]=n,a[1]=e,a[2]=r,a}function Fs(n,e,r){return n[0]=e[0]+r[0],n[1]=e[1]+r[1],n[2]=e[2]+r[2],n}function yd(n,e,r){return n[0]=e[0]-r[0],n[1]=e[1]-r[1],n[2]=e[2]-r[2],n}function w7(n,e,r){return n[0]=e[0]*r[0],n[1]=e[1]*r[1],n[2]=e[2]*r[2],n}function Yu(n,e,r){return n[0]=Math.min(e[0],r[0]),n[1]=Math.min(e[1],r[1]),n[2]=Math.min(e[2],r[2]),n}function Ju(n,e,r){return n[0]=Math.max(e[0],r[0]),n[1]=Math.max(e[1],r[1]),n[2]=Math.max(e[2],r[2]),n}function Oi(n,e,r){return n[0]=e[0]*r,n[1]=e[1]*r,n[2]=e[2]*r,n}function Qu(n,e,r,a){return n[0]=e[0]+r[0]*a,n[1]=e[1]+r[1]*a,n[2]=e[2]+r[2]*a,n}function Kr(n,e){var r=e[0],a=e[1],c=e[2],d=r*r+a*a+c*c;return d>0&&(d=1/Math.sqrt(d)),n[0]=e[0]*d,n[1]=e[1]*d,n[2]=e[2]*d,n}function so(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function vd(n,e,r){var a=e[0],c=e[1],d=e[2],m=r[0],y=r[1],w=r[2];return n[0]=c*w-d*y,n[1]=d*m-a*w,n[2]=a*y-c*m,n}function Hn(n,e,r){var a=e[0],c=e[1],d=e[2],m=r[3]*a+r[7]*c+r[11]*d+r[15];return n[0]=(r[0]*a+r[4]*c+r[8]*d+r[12])/(m=m||1),n[1]=(r[1]*a+r[5]*c+r[9]*d+r[13])/m,n[2]=(r[2]*a+r[6]*c+r[10]*d+r[14])/m,n}function b7(n,e,r){var a=r[0],c=r[1],d=r[2],m=e[0],y=e[1],w=e[2],b=c*w-d*y,M=d*m-a*w,A=a*y-c*m,I=c*A-d*M,L=d*b-a*A,D=a*M-c*b,O=2*r[3];return M*=O,A*=O,L*=2,D*=2,n[0]=m+(b*=O)+(I*=2),n[1]=y+M+L,n[2]=w+A+D,n}var e0,Bo=yd,ev=w7,tv=Ku;function T7(n,e,r){return n[0]=e[0]*r,n[1]=e[1]*r,n[2]=e[2]*r,n[3]=e[3]*r,n}function E7(n,e){var r=e[0],a=e[1],c=e[2],d=e[3],m=r*r+a*a+c*c+d*d;return m>0&&(m=1/Math.sqrt(m)),n[0]=r*m,n[1]=a*m,n[2]=c*m,n[3]=d*m,n}function Dl(n,e,r){var a=e[0],c=e[1],d=e[2],m=e[3];return n[0]=r[0]*a+r[4]*c+r[8]*d+r[12]*m,n[1]=r[1]*a+r[5]*c+r[9]*d+r[13]*m,n[2]=r[2]*a+r[6]*c+r[10]*d+r[14]*m,n[3]=r[3]*a+r[7]*c+r[11]*d+r[15]*m,n}function S7(){var n=new Ti(4);return Ti!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n[3]=1,n}function M7(n){return n[0]=0,n[1]=0,n[2]=0,n[3]=1,n}function C7(n,e,r){r*=.5;var a=e[0],c=e[1],d=e[2],m=e[3],y=Math.sin(r),w=Math.cos(r);return n[0]=a*w+m*y,n[1]=c*w+d*y,n[2]=d*w-c*y,n[3]=m*w-a*y,n}function P7(n,e,r){r*=.5;var a=e[0],c=e[1],d=e[2],m=e[3],y=Math.sin(r),w=Math.cos(r);return n[0]=a*w-d*y,n[1]=c*w+m*y,n[2]=d*w+a*y,n[3]=m*w-c*y,n}gd(),e0=new Ti(4),Ti!=Float32Array&&(e0[0]=0,e0[1]=0,e0[2]=0,e0[3]=0);var nv=E7;gd(),N1(1,0,0),N1(0,1,0),S7(),S7(),_7();const rv=Te([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:A7}=rv,I7=Te([{name:"a_pos_3",components:3,type:"Int16"}]);var t0=Te([{name:"a_pos",type:"Int16",components:2}]);class xd{constructor(e,r){this.pos=e,this.dir=r}intersectsPlane(e,r,a){const c=so(r,this.dir);if(Math.abs(c)<1e-6)return!1;const d=((e[0]-this.pos[0])*r[0]+(e[1]-this.pos[1])*r[1]+(e[2]-this.pos[2])*r[2])/c;return a[0]=this.pos[0]+this.dir[0]*d,a[1]=this.pos[1]+this.dir[1]*d,a[2]=this.pos[2]+this.dir[2]*d,!0}closestPointOnSphere(e,r,a){if(function(L,D){var O=L[0],Z=L[1],Q=L[2],de=D[0],ee=D[1],ce=D[2];return Math.abs(O-de)<=Sh*Math.max(1,Math.abs(O),Math.abs(de))&&Math.abs(Z-ee)<=Sh*Math.max(1,Math.abs(Z),Math.abs(ee))&&Math.abs(Q-ce)<=Sh*Math.max(1,Math.abs(Q),Math.abs(ce))}(this.pos,e)||r===0)return a[0]=a[1]=a[2]=0,!1;const[c,d,m]=this.dir,y=this.pos[0]-e[0],w=this.pos[1]-e[1],b=this.pos[2]-e[2],M=c*c+d*d+m*m,A=2*(y*c+w*d+b*m),I=A*A-4*M*(y*y+w*w+b*b-r*r);if(I<0){const L=Math.max(-A/2,0),D=y+c*L,O=w+d*L,Z=b+m*L,Q=Math.hypot(D,O,Z);return a[0]=D*r/Q,a[1]=O*r/Q,a[2]=Z*r/Q,!1}{const L=(-A-Math.sqrt(I))/(2*M);if(L<0){const D=Math.hypot(y,w,b);return a[0]=y*r/D,a[1]=w*r/D,a[2]=b*r/D,!1}return a[0]=y+c*L,a[1]=w+d*L,a[2]=b+m*L,!0}}}class wd{constructor(e,r,a,c,d){this.TL=e,this.TR=r,this.BR=a,this.BL=c,this.horizon=d}static fromInvProjectionMatrix(e,r,a){const c=[-1,1,1],d=[1,1,1],m=[1,-1,1],y=[-1,-1,1],w=Hn(c,c,e),b=Hn(d,d,e),M=Hn(m,m,e),A=Hn(y,y,e);return new wd(w,b,M,A,r/a)}}class bd{constructor(e,r){this.points=e,this.planes=r}static fromInvProjectionMatrix(e,r,a,c){const d=Math.pow(2,a),m=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(w=>{const b=Dl([],w,e),M=1/b[3]/r*d;return function(A,I,L){return A[0]=I[0]*L[0],A[1]=I[1]*L[1],A[2]=I[2]*L[2],A[3]=I[3]*L[3],A}(b,b,[M,M,c?1/b[3]:M,M])}),y=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(w=>{const b=Kr([],vd([],Bo([],m[w[0]],m[w[1]]),Bo([],m[w[2]],m[w[1]]))),M=-so(b,m[w[1]]);return b.concat(M)});return new bd(m,y)}}class Yr{static fromPoints(e){const r=[1/0,1/0,1/0],a=[-1/0,-1/0,-1/0];for(const c of e)Yu(r,r,c),Ju(a,a,c);return new Yr(r,a)}static applyTransform(e,r){const a=e.getCorners();for(let c=0;c<a.length;++c)Hn(a[c],a[c],r);return Yr.fromPoints(a)}constructor(e,r){this.min=e,this.max=r,this.center=Oi([],Fs([],this.min,this.max),.5)}quadrant(e){const r=[e%2==0,e<2],a=x7(this.min),c=x7(this.max);for(let d=0;d<r.length;d++)a[d]=r[d]?this.min[d]:this.center[d],c[d]=r[d]?this.center[d]:this.max[d];return c[2]=this.max[2],new Yr(a,c)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}distanceZ(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}getCorners(){const e=this.min,r=this.max;return[[e[0],e[1],e[2]],[r[0],e[1],e[2]],[r[0],r[1],e[2]],[e[0],r[1],e[2]],[e[0],e[1],r[2]],[r[0],e[1],r[2]],[r[0],r[1],r[2]],[e[0],r[1],r[2]]]}intersects(e){const r=this.getCorners();let a=!0;for(let c=0;c<e.planes.length;c++){const d=e.planes[c];let m=0;for(let y=0;y<r.length;y++)m+=so(d,r[y])+d[3]>=0;if(m===0)return 0;m!==r.length&&(a=!1)}if(a)return 2;for(let c=0;c<3;c++){let d=Number.MAX_VALUE,m=-Number.MAX_VALUE;for(let y=0;y<e.points.length;y++){const w=e.points[y][c]-this.min[c];d=Math.min(d,w),m=Math.max(m,w)}if(m<0||d>this.max[c]-this.min[c])return 0}return 1}}const Td=5,k7=6,os=kt/Math.PI/2,iv=16383,Rl=64,n0=[Rl,32,16],ao=-os,lo=os,ov=[new Yr([ao,ao,ao],[lo,lo,lo]),new Yr([ao,ao,ao],[0,0,lo]),new Yr([0,ao,ao],[lo,0,lo]),new Yr([ao,0,ao],[0,lo,lo]),new Yr([0,0,ao],[lo,lo,lo])];function Ch(n){return n*os/o0}function z7(n,e,r,a=!0){const c=Oi([],n._camera.position,n.worldSize),d=[e,r,1,1];Dl(d,d,n.pixelMatrixInverse),T7(d,d,1/d[3]);const m=Kr([],Bo([],d,c)),y=n.globeMatrix,w=[y[12],y[13],y[14]],b=Bo([],w,c),M=Ku(b),A=Kr([],b),I=n.worldSize/(2*Math.PI),L=so(A,m),D=Math.asin(I/M);if(D<Math.acos(L)){if(!a)return null;const rt=[],Fe=[];Oi(rt,m,M/L),Kr(Fe,Bo(Fe,rt,b)),Kr(m,Fs(m,b,Oi(m,Fe,Math.tan(D)*M)))}const O=[];new xd(c,m).closestPointOnSphere(w,I,O);const Z=Kr([],_i(y,0)),Q=Kr([],_i(y,1)),de=Kr([],_i(y,2)),ee=so(Z,O),ce=so(Q,O),fe=so(de,O),pe=Bt(Math.asin(-ce/I));let Le=Bt(Math.atan2(ee,fe));Le=n.center.lng+function(rt,Fe){const We=(Fe-rt+180)%360-180;return We<-180?We+360:We}(n.center.lng,Le);const Ae=as(Le),$e=Ce(ls(pe),0,1);return new $1(Ae,$e)}class sv{constructor(e,r,a){this.a=Bo([],e,a),this.b=Bo([],r,a),this.center=a;const c=Kr([],this.a),d=Kr([],this.b);this.angle=Math.acos(so(c,d))}}function Ed(n,e){if(n.angle===0)return null;let r;return r=n.a[e]===0?1/n.angle*.5*Math.PI:1/n.angle*Math.atan(n.b[e]/n.a[e]/Math.sin(n.angle)-1/Math.tan(n.angle)),r<0||r>1?null:function(a,c,d,m){const y=Math.sin(d);return a*(Math.sin((1-m)*d)/y)+c*(Math.sin(m*d)/y)}(n.a[e],n.b[e],n.angle,Ce(r,0,1))+n.center[e]}function ss(n){if(n.z<=1)return ov[n.z+2*n.y+n.x];const e=Sd(Ph(n));return Yr.fromPoints(e)}function Fl(n,e,r){return Oi(n,n,1-r),Qu(n,n,e,r)}function L7(n,e){const r=G1(e.zoom);if(r===0)return ss(n);const a=Ph(n),c=Sd(a),d=as(a.getWest())*e.worldSize,m=as(a.getEast())*e.worldSize,y=ls(a.getNorth())*e.worldSize,w=ls(a.getSouth())*e.worldSize,b=[d,y,0],M=[m,y,0],A=[d,w,0],I=[m,w,0],L=md([],e.globeMatrix);return Hn(b,b,L),Hn(M,M,L),Hn(A,A,L),Hn(I,I,L),c[0]=Fl(c[0],A,r),c[1]=Fl(c[1],I,r),c[2]=Fl(c[2],M,r),c[3]=Fl(c[3],b,r),Yr.fromPoints(c)}function D7(n,e,r){for(const a of n)Hn(a,a,e),Oi(a,a,r)}function av(n,e,r){const a=e/n.worldSize,c=n.globeMatrix;if(r.z<=1){const Ae=ss(r).getCorners();return D7(Ae,c,a),Yr.fromPoints(Ae)}const d=Ph(r),m=Sd(d);D7(m,c,a);const y=Number.MAX_VALUE,w=[-y,-y,-y],b=[y,y,y];if(d.contains(n.center)){for(const rt of m)Yu(b,b,rt),Ju(w,w,rt);w[2]=0;const Ae=n.point,$e=[Ae.x*a,Ae.y*a,0];return Yu(b,b,$e),Ju(w,w,$e),new Yr(b,w)}const M=[c[12]*a,c[13]*a,c[14]*a],A=d.getCenter(),I=Ce(n.center.lat,-Rr,Rr),L=Ce(A.lat,-Rr,Rr),D=as(n.center.lng),O=ls(I);let Z=D-as(A.lng);const Q=O-ls(L);Z>.5?Z-=1:Z<-.5&&(Z+=1);let de=0;Math.abs(Z)>Math.abs(Q)?de=Z>=0?1:3:(de=Q>=0?0:2,Qu(M,M,[c[4]*a,c[5]*a,c[6]*a],-Math.sin(bt(Q>=0?d.getSouth():d.getNorth()))*os));const ee=m[de],ce=m[(de+1)%4],fe=new sv(ee,ce,M),pe=[Ed(fe,0)||ee[0],Ed(fe,1)||ee[1],Ed(fe,2)||ee[2]],Le=G1(n.zoom);if(Le>0){const Ae=function({x:rt,y:Fe,z:We},He,et,at,Ne){const dt=1/(1<<We);let wt=rt*dt,ft=wt+dt,jt=Fe*dt,ct=jt+dt,Pt=0;const Vt=(wt+ft)/2-at;return Vt>.5?Pt=-1:Vt<-.5&&(Pt=1),wt=((wt+Pt)*He-(at*=He))*et+at,ft=((ft+Pt)*He-at)*et+at,jt=(jt*He-(Ne*=He))*et+Ne,ct=(ct*He-Ne)*et+Ne,[[wt,ct,0],[ft,ct,0],[ft,jt,0],[wt,jt,0]]}(r,e,n._pixelsPerMercatorPixel,D,O);for(let rt=0;rt<m.length;rt++)Fl(m[rt],Ae[rt],Le);const $e=Fs([],Ae[de],Ae[(de+1)%4]);Oi($e,$e,.5),Fl(pe,$e,Le)}for(const Ae of m)Yu(b,b,Ae),Ju(w,w,Ae);return b[2]=Math.min(ee[2],ce[2]),Yu(b,b,pe),Ju(w,w,pe),new Yr(b,w)}function Ph({x:n,y:e,z:r}){const a=1/(1<<r),c=new wn(Ui(n*a),Dr((e+1)*a)),d=new wn(Ui((n+1)*a),Dr(e*a));return new Ta(c,d)}function Sd(n){const e=bt(n.getNorth()),r=bt(n.getSouth()),a=Math.cos(e),c=Math.cos(r),d=Math.sin(e),m=Math.sin(r),y=n.getWest(),w=n.getEast();return[j1(c,m,y),j1(c,m,w),j1(a,d,w),j1(a,d,y)]}function j1(n,e,r,a=os){return r=bt(r),[n*Math.sin(r)*a,-e*a,n*Math.cos(r)*a]}function V1(n,e,r){return j1(Math.cos(bt(n)),Math.sin(bt(n)),e,r)}function r0(n,e,r,a){const c=1<<r.z,d=(n/kt+r.x)/c;return V1(Dr((e/kt+r.y)/c),Ui(d),a)}function Ah({min:n,max:e}){return iv/Math.max(e[0]-n[0],e[1]-n[1],e[2]-n[2])}const R7=new Float64Array(16);function i0(n){const e=Ah(n),r=y7(R7,[e,e,e]);return Xu(r,r,((a=[])[0]=-(c=n.min)[0],a[1]=-c[1],a[2]=-c[2],a));var a,c}function Md(n){const e=(a=n.min,(r=R7)[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=a[0],r[13]=a[1],r[14]=a[2],r[15]=1,r);var r,a;const c=1/Ah(n);return Ll(e,e,[c,c,c])}function F7(n,e,r,a,c){const d=function(w){const b=kt/(2*Math.PI);return w/(2*Math.PI)/b}(r),m=[n,e,-r/(2*Math.PI)],y=Fo(new Float64Array(16));return Xu(y,y,m),Ll(y,y,[d,d,d]),_d(y,y,bt(-c)),Mh(y,y,bt(-a)),y}function G1(n){return st(Td,k7,n)}function B7(n,e){const r=V1(e.lat,e.lng),a=function(D){const O=V1(D._center.lat,D._center.lng);let Z=vd([],N1(0,1,0),O);const Q=v7([],-D.angle,O);Z=Hn(Z,Z,Q),v7(Q,-D._pitch,Z);const de=Kr([],O);return Oi(de,de,Ch(D.cameraToCenterDistance/D.pixelsPerMeter)),Hn(de,de,Q),Fs([],O,de)}(n);return m=(c=yd([],a,r))[0],y=c[1],w=c[2],b=(d=r)[0],M=d[1],A=d[2],L=(I=Math.sqrt(m*m+y*y+w*w)*Math.sqrt(b*b+M*M+A*A))&&so(c,d)/I,Math.acos(Math.min(Math.max(L,-1),1));var c,d,m,y,w,b,M,A,I,L}function Cd(n,e){return B7(n,e)>Math.PI/2*1.01}const O7=bt(85),lv=Math.cos(O7),cv=Math.sin(O7),o0=63710088e-1,U7=2*Math.PI*o0;class Ea{constructor(e,r){if(isNaN(e)||isNaN(r))throw new Error(`Invalid LngLat object: (${e}, ${r})`);if(this.lng=+e,this.lat=+r,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ea(ht(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const r=Math.PI/180,a=this.lat*r,c=e.lat*r,d=Math.sin(a)*Math.sin(c)+Math.cos(a)*Math.cos(c)*Math.cos((e.lng-this.lng)*r);return o0*Math.acos(Math.min(d,1))}toBounds(e=0){const r=360*e/40075017,a=r/Math.cos(Math.PI/180*this.lat);return new Ta(new Ea(this.lng-a,this.lat-r),new Ea(this.lng+a,this.lat+r))}toEcef(e){const r=Ch(e);return V1(this.lat,this.lng,os+r)}static convert(e){if(e instanceof Ea)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new Ea(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new Ea(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var wn=Ea;function Pd(n){return U7*Math.cos(n*Math.PI/180)}function as(n){return(180+n)/360}function ls(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function Oo(n,e){return n/Pd(e)}function Ui(n){return 360*n-180}function Dr(n){return 360/Math.PI*Math.atan(Math.exp((180-360*n)*Math.PI/180))-90}function N7(n,e){return n*Pd(Dr(e))}const Rr=85.051129;function j7(n){return 1/Math.cos(n*Math.PI/180)}class $1{constructor(e,r,a=0){this.x=+e,this.y=+r,this.z=+a}static fromLngLat(e,r=0){const a=wn.convert(e);return new $1(as(a.lng),ls(a.lat),Oo(r,a.lat))}toLngLat(){return new wn(Ui(this.x),Dr(this.y))}toAltitude(){return N7(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/U7*j7(Dr(this.y))}}function Ad(n,e,r,a,c,d,m,y,w){const b=(e+a)/2,M=(r+c)/2,A=new Me(b,M);y(A),function(I,L,D,O,Z,Q){const de=D-Z,ee=O-Q;return Math.abs((O-L)*de-(D-I)*ee)/Math.hypot(de,ee)}(A.x,A.y,d.x,d.y,m.x,m.y)>=w?(Ad(n,e,r,b,M,d,A,y,w),Ad(n,b,M,a,c,A,m,y,w)):n.push(m)}function V7(n,e,r){let a=n[0],c=a.x,d=a.y;e(a);const m=[a];for(let y=1;y<n.length;y++){const w=n[y],{x:b,y:M}=w;e(w),Ad(m,c,d,b,M,a,w,e,r),c=b,d=M,a=w}return m}function Id(n,e,r,a){if(a(e,r)){const c=e.add(r)._mult(.5);Id(n,e,c,a),Id(n,c,r,a)}else n.push(r)}function uv(n,e){let r=n[0];const a=[r];for(let c=1;c<n.length;c++){const d=n[c];Id(a,r,d,e),r=d}return a}const kd=Math.pow(2,14)-1,G7=-kd-1;function hv(n,e){const r=Math.round(n.x*e),a=Math.round(n.y*e);return n.x=Ce(r,G7,kd),n.y=Ce(a,G7,kd),(r<n.x||r>n.x+1||a<n.y||a>n.y+1)&&dn("Geometry exceeds allowed extent, reduce your vector tile buffer size"),n}function Bs(n,e,r){const a=n.loadGeometry(),c=n.extent,d=kt/c;if(e&&r&&r.projection.isReprojectedInTileSpace){const m=1<<e.z,{scale:y,x:w,y:b,projection:M}=r,A=I=>{const L=Ui((e.x+I.x/c)/m),D=Dr((e.y+I.y/c)/m),O=M.project(L,D);I.x=(O.x*y-w)*c,I.y=(O.y*y-b)*c};for(let I=0;I<a.length;I++)if(n.type!==1)a[I]=V7(a[I],A,1);else{const L=[];for(const D of a[I])D.x<0||D.x>=c||D.y<0||D.y>=c||(A(D),L.push(D));a[I]=L}}for(const m of a)for(const y of m)hv(y,d);return a}function Bl(n,e){return{type:n.type,id:n.id,properties:n.properties,geometry:e?Bs(n):[]}}function Ih(n,e,r,a,c){n.emplaceBack(2*e+(a+1)/2,2*r+(c+1)/2)}function kh(n,e,r){n.emplaceBack(e.x,e.y,e.z,r[0]*16384,r[1]*16384,r[2]*16384)}class zd{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.id),this.index=e.index,this.hasPattern=!1,this.projection=e.projection,this.layoutVertexArray=new nt,this.indexArray=new St,this.segments=new er,this.programConfigurations=new kl(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(e,r,a,c){const d=this.layers[0],m=[];let y=null;d.type==="circle"&&(y=d.layout.get("circle-sort-key"));for(const{feature:b,id:M,index:A,sourceLayerIndex:I}of e){const L=this.layers[0]._featureFilter.needGeometry,D=Bl(b,L);if(!this.layers[0]._featureFilter.filter(new C(this.zoom),D,a))continue;const O=y?y.evaluate(D,{},a):void 0,Z={id:M,properties:b.properties,type:b.type,sourceLayerIndex:I,index:A,geometry:L?D.geometry:Bs(b,a,c),patterns:{},sortKey:O};m.push(Z)}y&&m.sort((b,M)=>b.sortKey-M.sortKey);let w=null;c.projection.name==="globe"&&(this.globeExtVertexArray=new it,w=c.projection);for(const b of m){const{geometry:M,index:A,sourceLayerIndex:I}=b,L=e[A].feature;this.addFeature(b,M,A,r.availableImages,a,w),r.featureIndex.insert(L,M,A,I,this.index)}}update(e,r,a,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,a,c)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Yy.members),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,Jy.members))),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(e,r,a,c,d,m){for(const y of r)for(const w of y){const b=w.x,M=w.y;if(b<0||b>=kt||M<0||M>=kt)continue;if(m){const L=m.projectTilePoint(b,M,d),D=m.upVector(d,b,M),O=this.globeExtVertexArray;kh(O,L,D),kh(O,L,D),kh(O,L,D),kh(O,L,D)}const A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),I=A.vertexLength;Ih(this.layoutVertexArray,b,M,-1,-1),Ih(this.layoutVertexArray,b,M,1,-1),Ih(this.layoutVertexArray,b,M,1,1),Ih(this.layoutVertexArray,b,M,-1,1),this.indexArray.emplaceBack(I,I+1,I+2),this.indexArray.emplaceBack(I,I+2,I+3),A.vertexLength+=4,A.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,a,{},c,d)}}function $7(n,e){for(let r=0;r<n.length;r++)if(Ol(e,n[r]))return!0;for(let r=0;r<e.length;r++)if(Ol(n,e[r]))return!0;return!!Ld(n,e)}function dv(n,e,r){return!!Ol(n,e)||!!Dd(e,n,r)}function Z7(n,e){if(n.length===1)return W7(e,n[0]);for(let r=0;r<e.length;r++){const a=e[r];for(let c=0;c<a.length;c++)if(Ol(n,a[c]))return!0}for(let r=0;r<n.length;r++)if(W7(e,n[r]))return!0;for(let r=0;r<e.length;r++)if(Ld(n,e[r]))return!0;return!1}function pv(n,e,r){if(n.length>1){if(Ld(n,e))return!0;for(let a=0;a<e.length;a++)if(Dd(e[a],n,r))return!0}for(let a=0;a<n.length;a++)if(Dd(n[a],e,r))return!0;return!1}function Ld(n,e){if(n.length===0||e.length===0)return!1;for(let r=0;r<n.length-1;r++){const a=n[r],c=n[r+1];for(let d=0;d<e.length-1;d++)if(fv(a,c,e[d],e[d+1]))return!0}return!1}function fv(n,e,r,a){return Zr(n,r,a)!==Zr(e,r,a)&&Zr(n,e,r)!==Zr(n,e,a)}function Dd(n,e,r){const a=r*r;if(e.length===1)return n.distSqr(e[0])<a;for(let c=1;c<e.length;c++)if(q7(n,e[c-1],e[c])<a)return!0;return!1}function q7(n,e,r){const a=e.distSqr(r);if(a===0)return n.distSqr(e);const c=((n.x-e.x)*(r.x-e.x)+(n.y-e.y)*(r.y-e.y))/a;return n.distSqr(c<0?e:c>1?r:r.sub(e)._mult(c)._add(e))}function W7(n,e){let r,a,c,d=!1;for(let m=0;m<n.length;m++){r=n[m];for(let y=0,w=r.length-1;y<r.length;w=y++)a=r[y],c=r[w],a.y>e.y!=c.y>e.y&&e.x<(c.x-a.x)*(e.y-a.y)/(c.y-a.y)+a.x&&(d=!d)}return d}function Ol(n,e){let r=!1;for(let a=0,c=n.length-1;a<n.length;c=a++){const d=n[a],m=n[c];d.y>e.y!=m.y>e.y&&e.x<(m.x-d.x)*(e.y-d.y)/(m.y-d.y)+d.x&&(r=!r)}return r}function H7(n,e,r,a,c){for(const m of n)if(e<=m.x&&r<=m.y&&a>=m.x&&c>=m.y)return!0;const d=[new Me(e,r),new Me(e,c),new Me(a,c),new Me(a,r)];if(n.length>2){for(const m of d)if(Ol(n,m))return!0}for(let m=0;m<n.length-1;m++)if(mv(n[m],n[m+1],d))return!0;return!1}function mv(n,e,r){const a=r[0],c=r[2];if(n.x<a.x&&e.x<a.x||n.x>c.x&&e.x>c.x||n.y<a.y&&e.y<a.y||n.y>c.y&&e.y>c.y)return!1;const d=Zr(n,e,r[0]);return d!==Zr(n,e,r[1])||d!==Zr(n,e,r[2])||d!==Zr(n,e,r[3])}function Z1(n,e,r){const a=e.paint.get(n).value;return a.kind==="constant"?a.value:r.programConfigurations.get(e.id).getMaxValue(n)}function zh(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function X7(n,e,r,a,c){if(!e[0]&&!e[1])return n;const d=Me.convert(e)._mult(c);r==="viewport"&&d._rotate(-a);const m=[];for(let y=0;y<n.length;y++)m.push(n[y].sub(d));return m}function K7(n,e,r,a){const c=Me.convert(n)._mult(a);return e==="viewport"&&c._rotate(-r),c}vt(zd,"CircleBucket",{omit:["layers"]});const _v=new oe({"circle-sort-key":new H(Ve.layout_circle["circle-sort-key"])});var gv={paint:new oe({"circle-radius":new H(Ve.paint_circle["circle-radius"]),"circle-color":new H(Ve.paint_circle["circle-color"]),"circle-blur":new H(Ve.paint_circle["circle-blur"]),"circle-opacity":new H(Ve.paint_circle["circle-opacity"]),"circle-translate":new B(Ve.paint_circle["circle-translate"]),"circle-translate-anchor":new B(Ve.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new B(Ve.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new B(Ve.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new H(Ve.paint_circle["circle-stroke-width"]),"circle-stroke-color":new H(Ve.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new H(Ve.paint_circle["circle-stroke-opacity"])}),layout:_v};function Y7(n,e,r,a,c,d,m,y,w){if(d&&n.queryGeometry.isAboveHorizon)return!1;d&&(w*=n.pixelToTileUnitsFactor);const b=n.tileID.canonical,M=r.projection.upVectorScale(b,r.center.lat,r.worldSize).metersToTile;for(const A of e)for(const I of A){const L=I.add(y),D=c&&r.elevation?r.elevation.exaggeration()*c.getElevationAt(L.x,L.y,!0):0,O=r.projection.projectTilePoint(L.x,L.y,b);if(D>0){const ee=r.projection.upVector(b,L.x,L.y);O.x+=ee[0]*M*D,O.y+=ee[1]*M*D,O.z+=ee[2]*M*D}const Z=d?L:yv(O.x,O.y,O.z,a),Q=d?n.tilespaceRays.map(ee=>xv(ee,D)):n.queryGeometry.screenGeometry,de=Dl([],[O.x,O.y,O.z,1],a);if(!m&&d?w*=de[3]/r.cameraToCenterDistance:m&&!d&&(w*=r.cameraToCenterDistance/de[3]),d){const ee=Dr((I.y/kt+b.y)/(1<<b.z));w/=r.projection.pixelsPerMeter(ee,1)/Oo(1,ee)}if(dv(Q,Z,w))return!0}return!1}function yv(n,e,r,a){const c=Dl([],[n,e,r,1],a);return new Me(c[0]/c[3],c[1]/c[3])}const J7=N1(0,0,0),vv=N1(0,0,1);function xv(n,e){const r=gd();return J7[2]=e,n.intersectsPlane(J7,vv,r),new Me(r[0],r[1])}class Q7 extends zd{}function ef(n,{width:e,height:r},a,c){if(c){if(c instanceof Uint8ClampedArray)c=new Uint8Array(c.buffer);else if(c.length!==e*r*a)throw new RangeError("mismatched image size")}else c=new Uint8Array(e*r*a);return n.width=e,n.height=r,n.data=c,n}function tf(n,e,r){const{width:a,height:c}=e;a===n.width&&c===n.height||(Rd(n,e,{x:0,y:0},{x:0,y:0},{width:Math.min(n.width,a),height:Math.min(n.height,c)},r),n.width=a,n.height=c,n.data=e.data)}function Rd(n,e,r,a,c,d){if(c.width===0||c.height===0)return e;if(c.width>n.width||c.height>n.height||r.x>n.width-c.width||r.y>n.height-c.height)throw new RangeError("out of range source coordinates for image copy");if(c.width>e.width||c.height>e.height||a.x>e.width-c.width||a.y>e.height-c.height)throw new RangeError("out of range destination coordinates for image copy");const m=n.data,y=e.data;for(let w=0;w<c.height;w++){const b=((r.y+w)*n.width+r.x)*d,M=((a.y+w)*e.width+a.x)*d;for(let A=0;A<c.width*d;A++)y[M+A]=m[b+A]}return e}vt(Q7,"HeatmapBucket",{omit:["layers"]});class Os{constructor(e,r){ef(this,e,1,r)}resize(e){tf(this,new Os(e),1)}clone(){return new Os({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,r,a,c,d){Rd(e,r,a,c,d,1)}}class Ei{constructor(e,r){ef(this,e,4,r)}resize(e){tf(this,new Ei(e),4)}replace(e,r){r?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new Ei({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,r,a,c,d){Rd(e,r,a,c,d,4)}}vt(Os,"AlphaImage"),vt(Ei,"RGBAImage");var wv={paint:new oe({"heatmap-radius":new H(Ve.paint_heatmap["heatmap-radius"]),"heatmap-weight":new H(Ve.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new B(Ve.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ie(Ve.paint_heatmap["heatmap-color"]),"heatmap-opacity":new B(Ve.paint_heatmap["heatmap-opacity"])})};function Fd(n){const e={},r=n.resolution||256,a=n.clips?n.clips.length:1,c=n.image||new Ei({width:r,height:a}),d=(m,y,w)=>{e[n.evaluationKey]=w;const b=n.expression.evaluate(e);c.data[m+y+0]=Math.floor(255*b.r/b.a),c.data[m+y+1]=Math.floor(255*b.g/b.a),c.data[m+y+2]=Math.floor(255*b.b/b.a),c.data[m+y+3]=Math.floor(255*b.a)};if(n.clips)for(let m=0,y=0;m<a;++m,y+=4*r)for(let w=0,b=0;w<r;w++,b+=4){const M=w/(r-1),{start:A,end:I}=n.clips[m];d(y,b,A*(1-M)+I*M)}else for(let m=0,y=0;m<r;m++,y+=4)d(0,y,m/(r-1));return c}var bv={paint:new oe({"hillshade-illumination-direction":new B(Ve.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new B(Ve.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new B(Ve.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new B(Ve.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new B(Ve.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new B(Ve.paint_hillshade["hillshade-accent-color"])})};const Tv=Te([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ev}=Tv;var Bd={exports:{}};function Lh(n,e,r){r=r||2;var a,c,d,m,y,w,b,M=e&&e.length,A=M?e[0]*r:n.length,I=nf(n,0,A,r,!0),L=[];if(!I||I.next===I.prev)return L;if(M&&(I=function(O,Z,Q,de){var ee,ce,fe,pe=[];for(ee=0,ce=Z.length;ee<ce;ee++)(fe=nf(O,Z[ee]*de,ee<ce-1?Z[ee+1]*de:O.length,de,!1))===fe.next&&(fe.steiner=!0),pe.push(zv(fe));for(pe.sort(Av),ee=0;ee<pe.length;ee++)Q=Iv(pe[ee],Q);return Q}(n,e,I,r)),n.length>80*r){a=d=n[0],c=m=n[1];for(var D=r;D<A;D+=r)(y=n[D])<a&&(a=y),(w=n[D+1])<c&&(c=w),y>d&&(d=y),w>m&&(m=w);b=(b=Math.max(d-a,m-c))!==0?32767/b:0}return s0(I,L,r,a,c,b,0),L}function nf(n,e,r,a,c){var d,m;if(c===Nd(n,e,r,a)>0)for(d=e;d<r;d+=a)m=sf(d,n[d],n[d+1],m);else for(d=r-a;d>=e;d-=a)m=sf(d,n[d],n[d+1],m);return m&&Dh(m,m.next)&&(l0(m),m=m.next),m}function Ul(n,e){if(!n)return n;e||(e=n);var r,a=n;do if(r=!1,a.steiner||!Dh(a,a.next)&&tr(a.prev,a,a.next)!==0)a=a.next;else{if(l0(a),(a=e=a.prev)===a.next)break;r=!0}while(r||a!==e);return e}function s0(n,e,r,a,c,d,m){if(n){!m&&d&&function(M,A,I,L){var D=M;do D.z===0&&(D.z=Od(D.x,D.y,A,I,L)),D.prevZ=D.prev,D.nextZ=D.next,D=D.next;while(D!==M);D.prevZ.nextZ=null,D.prevZ=null,function(O){var Z,Q,de,ee,ce,fe,pe,Le,Ae=1;do{for(Q=O,O=null,ce=null,fe=0;Q;){for(fe++,de=Q,pe=0,Z=0;Z<Ae&&(pe++,de=de.nextZ);Z++);for(Le=Ae;pe>0||Le>0&&de;)pe!==0&&(Le===0||!de||Q.z<=de.z)?(ee=Q,Q=Q.nextZ,pe--):(ee=de,de=de.nextZ,Le--),ce?ce.nextZ=ee:O=ee,ee.prevZ=ce,ce=ee;Q=de}ce.nextZ=null,Ae*=2}while(fe>1)}(D)}(n,a,c,d);for(var y,w,b=n;n.prev!==n.next;)if(y=n.prev,w=n.next,d?Mv(n,a,c,d):Sv(n))e.push(y.i/r|0),e.push(n.i/r|0),e.push(w.i/r|0),l0(n),n=w.next,b=w.next;else if((n=w)===b){m?m===1?s0(n=Cv(Ul(n),e,r),e,r,a,c,d,2):m===2&&Pv(n,e,r,a,c,d):s0(Ul(n),e,r,a,c,d,1);break}}}function Sv(n){var e=n.prev,r=n,a=n.next;if(tr(e,r,a)>=0)return!1;for(var c=e.x,d=r.x,m=a.x,y=e.y,w=r.y,b=a.y,M=c<d?c<m?c:m:d<m?d:m,A=y<w?y<b?y:b:w<b?w:b,I=c>d?c>m?c:m:d>m?d:m,L=y>w?y>b?y:b:w>b?w:b,D=a.next;D!==e;){if(D.x>=M&&D.x<=I&&D.y>=A&&D.y<=L&&q1(c,y,d,w,m,b,D.x,D.y)&&tr(D.prev,D,D.next)>=0)return!1;D=D.next}return!0}function Mv(n,e,r,a){var c=n.prev,d=n,m=n.next;if(tr(c,d,m)>=0)return!1;for(var y=c.x,w=d.x,b=m.x,M=c.y,A=d.y,I=m.y,L=y<w?y<b?y:b:w<b?w:b,D=M<A?M<I?M:I:A<I?A:I,O=y>w?y>b?y:b:w>b?w:b,Z=M>A?M>I?M:I:A>I?A:I,Q=Od(L,D,e,r,a),de=Od(O,Z,e,r,a),ee=n.prevZ,ce=n.nextZ;ee&&ee.z>=Q&&ce&&ce.z<=de;){if(ee.x>=L&&ee.x<=O&&ee.y>=D&&ee.y<=Z&&ee!==c&&ee!==m&&q1(y,M,w,A,b,I,ee.x,ee.y)&&tr(ee.prev,ee,ee.next)>=0||(ee=ee.prevZ,ce.x>=L&&ce.x<=O&&ce.y>=D&&ce.y<=Z&&ce!==c&&ce!==m&&q1(y,M,w,A,b,I,ce.x,ce.y)&&tr(ce.prev,ce,ce.next)>=0))return!1;ce=ce.nextZ}for(;ee&&ee.z>=Q;){if(ee.x>=L&&ee.x<=O&&ee.y>=D&&ee.y<=Z&&ee!==c&&ee!==m&&q1(y,M,w,A,b,I,ee.x,ee.y)&&tr(ee.prev,ee,ee.next)>=0)return!1;ee=ee.prevZ}for(;ce&&ce.z<=de;){if(ce.x>=L&&ce.x<=O&&ce.y>=D&&ce.y<=Z&&ce!==c&&ce!==m&&q1(y,M,w,A,b,I,ce.x,ce.y)&&tr(ce.prev,ce,ce.next)>=0)return!1;ce=ce.nextZ}return!0}function Cv(n,e,r){var a=n;do{var c=a.prev,d=a.next.next;!Dh(c,d)&&rf(c,a,a.next,d)&&a0(c,d)&&a0(d,c)&&(e.push(c.i/r|0),e.push(a.i/r|0),e.push(d.i/r|0),l0(a),l0(a.next),a=n=d),a=a.next}while(a!==n);return Ul(a)}function Pv(n,e,r,a,c,d){var m=n;do{for(var y=m.next.next;y!==m.prev;){if(m.i!==y.i&&Lv(m,y)){var w=of(m,y);return m=Ul(m,m.next),w=Ul(w,w.next),s0(m,e,r,a,c,d,0),void s0(w,e,r,a,c,d,0)}y=y.next}m=m.next}while(m!==n)}function Av(n,e){return n.x-e.x}function Iv(n,e){var r=function(c,d){var m,y=d,w=c.x,b=c.y,M=-1/0;do{if(b<=y.y&&b>=y.next.y&&y.next.y!==y.y){var A=y.x+(b-y.y)*(y.next.x-y.x)/(y.next.y-y.y);if(A<=w&&A>M&&(M=A,m=y.x<y.next.x?y:y.next,A===w))return m}y=y.next}while(y!==d);if(!m)return null;var I,L=m,D=m.x,O=m.y,Z=1/0;y=m;do w>=y.x&&y.x>=D&&w!==y.x&&q1(b<O?w:M,b,D,O,b<O?M:w,b,y.x,y.y)&&(I=Math.abs(b-y.y)/(w-y.x),a0(y,c)&&(I<Z||I===Z&&(y.x>m.x||y.x===m.x&&kv(m,y)))&&(m=y,Z=I)),y=y.next;while(y!==L);return m}(n,e);if(!r)return e;var a=of(r,n);return Ul(a,a.next),Ul(r,r.next)}function kv(n,e){return tr(n.prev,n,e.prev)<0&&tr(e.next,n,n.next)<0}function Od(n,e,r,a,c){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-r)*c|0)|n<<8))|n<<4))|n<<2))|n<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-a)*c|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function zv(n){var e=n,r=n;do(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next;while(e!==n);return r}function q1(n,e,r,a,c,d,m,y){return(c-m)*(e-y)>=(n-m)*(d-y)&&(n-m)*(a-y)>=(r-m)*(e-y)&&(r-m)*(d-y)>=(c-m)*(a-y)}function Lv(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!function(r,a){var c=r;do{if(c.i!==r.i&&c.next.i!==r.i&&c.i!==a.i&&c.next.i!==a.i&&rf(c,c.next,r,a))return!0;c=c.next}while(c!==r);return!1}(n,e)&&(a0(n,e)&&a0(e,n)&&function(r,a){var c=r,d=!1,m=(r.x+a.x)/2,y=(r.y+a.y)/2;do c.y>y!=c.next.y>y&&c.next.y!==c.y&&m<(c.next.x-c.x)*(y-c.y)/(c.next.y-c.y)+c.x&&(d=!d),c=c.next;while(c!==r);return d}(n,e)&&(tr(n.prev,n,e.prev)||tr(n,e.prev,e))||Dh(n,e)&&tr(n.prev,n,n.next)>0&&tr(e.prev,e,e.next)>0)}function tr(n,e,r){return(e.y-n.y)*(r.x-e.x)-(e.x-n.x)*(r.y-e.y)}function Dh(n,e){return n.x===e.x&&n.y===e.y}function rf(n,e,r,a){var c=Fh(tr(n,e,r)),d=Fh(tr(n,e,a)),m=Fh(tr(r,a,n)),y=Fh(tr(r,a,e));return c!==d&&m!==y||!(c!==0||!Rh(n,r,e))||!(d!==0||!Rh(n,a,e))||!(m!==0||!Rh(r,n,a))||!(y!==0||!Rh(r,e,a))}function Rh(n,e,r){return e.x<=Math.max(n.x,r.x)&&e.x>=Math.min(n.x,r.x)&&e.y<=Math.max(n.y,r.y)&&e.y>=Math.min(n.y,r.y)}function Fh(n){return n>0?1:n<0?-1:0}function a0(n,e){return tr(n.prev,n,n.next)<0?tr(n,e,n.next)>=0&&tr(n,n.prev,e)>=0:tr(n,e,n.prev)<0||tr(n,n.next,e)<0}function of(n,e){var r=new Ud(n.i,n.x,n.y),a=new Ud(e.i,e.x,e.y),c=n.next,d=e.prev;return n.next=e,e.prev=n,r.next=c,c.prev=r,a.next=r,r.prev=a,d.next=a,a.prev=d,a}function sf(n,e,r,a){var c=new Ud(n,e,r);return a?(c.next=a.next,c.prev=a,a.next.prev=c,a.next=c):(c.prev=c,c.next=c),c}function l0(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Ud(n,e,r){this.i=n,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Nd(n,e,r,a){for(var c=0,d=e,m=r-a;d<r;d+=a)c+=(n[m]-n[d])*(n[d+1]+n[m+1]),m=d;return c}Bd.exports=Lh,Bd.exports.default=Lh,Lh.deviation=function(n,e,r,a){var c=e&&e.length,d=Math.abs(Nd(n,0,c?e[0]*r:n.length,r));if(c)for(var m=0,y=e.length;m<y;m++)d-=Math.abs(Nd(n,e[m]*r,m<y-1?e[m+1]*r:n.length,r));var w=0;for(m=0;m<a.length;m+=3){var b=a[m]*r,M=a[m+1]*r,A=a[m+2]*r;w+=Math.abs((n[b]-n[A])*(n[M+1]-n[b+1])-(n[b]-n[M])*(n[A+1]-n[b+1]))}return d===0&&w===0?0:Math.abs((w-d)/d)},Lh.flatten=function(n){for(var e=n[0][0].length,r={vertices:[],holes:[],dimensions:e},a=0,c=0;c<n.length;c++){for(var d=0;d<n[c].length;d++)for(var m=0;m<e;m++)r.vertices.push(n[c][d][m]);c>0&&r.holes.push(a+=n[c-1].length)}return r};var jd=se(Bd.exports);function Dv(n,e,r,a,c){af(n,e,r||0,a||n.length-1,c||Rv)}function af(n,e,r,a,c){for(;a>r;){if(a-r>600){var d=a-r+1,m=e-r+1,y=Math.log(d),w=.5*Math.exp(2*y/3),b=.5*Math.sqrt(y*w*(d-w)/d)*(m-d/2<0?-1:1);af(n,e,Math.max(r,Math.floor(e-m*w/d+b)),Math.min(a,Math.floor(e+(d-m)*w/d+b)),c)}var M=n[e],A=r,I=a;for(c0(n,r,e),c(n[a],M)>0&&c0(n,r,a);A<I;){for(c0(n,A,I),A++,I--;c(n[A],M)<0;)A++;for(;c(n[I],M)>0;)I--}c(n[r],M)===0?c0(n,r,I):c0(n,++I,a),I<=e&&(r=I+1),e<=I&&(a=I-1)}}function c0(n,e,r){var a=n[e];n[e]=n[r],n[r]=a}function Rv(n,e){return n<e?-1:n>e?1:0}function Vd(n,e){const r=n.length;if(r<=1)return[n];const a=[];let c,d;for(let m=0;m<r;m++){const y=ea(n[m]);y!==0&&(n[m].area=Math.abs(y),d===void 0&&(d=y<0),d===y<0?(c&&a.push(c),c=[n[m]]):c.push(n[m]))}if(c&&a.push(c),e>1)for(let m=0;m<a.length;m++)a[m].length<=e||(Dv(a[m],e,1,a[m].length-1,Fv),a[m]=a[m].slice(0,e));return a}function Fv(n,e){return e.area-n.area}function Gd(n,e,r){const a=r.patternDependencies;let c=!1;for(const d of e){const m=d.paint.get(`${n}-pattern`);m.isConstant()||(c=!0);const y=m.constantOr(null);y&&(c=!0,a[y]=!0)}return c}function $d(n,e,r,a,c){const d=c.patternDependencies;for(const m of e){const y=m.paint.get(`${n}-pattern`).value;if(y.kind!=="constant"){let w=y.evaluate({zoom:a},r,{},c.availableImages);w=w&&w.name?w.name:w,d[w]=!0,r.patterns[m.id]=w}}return r}class Bh{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new nt,this.indexArray=new St,this.indexArray2=new xr,this.programConfigurations=new kl(e.layers,e.zoom),this.segments=new er,this.segments2=new er,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id),this.projection=e.projection}populate(e,r,a,c){this.hasPattern=Gd("fill",this.layers,r);const d=this.layers[0].layout.get("fill-sort-key"),m=[];for(const{feature:y,id:w,index:b,sourceLayerIndex:M}of e){const A=this.layers[0]._featureFilter.needGeometry,I=Bl(y,A);if(!this.layers[0]._featureFilter.filter(new C(this.zoom),I,a))continue;const L=d?d.evaluate(I,{},a,r.availableImages):void 0,D={id:w,properties:y.properties,type:y.type,sourceLayerIndex:M,index:b,geometry:A?I.geometry:Bs(y,a,c),patterns:{},sortKey:L};m.push(D)}d&&m.sort((y,w)=>y.sortKey-w.sortKey);for(const y of m){const{geometry:w,index:b,sourceLayerIndex:M}=y;if(this.hasPattern){const A=$d("fill",this.layers,y,this.zoom,r);this.patternFeatures.push(A)}else this.addFeature(y,w,b,a,{},r.availableImages);r.featureIndex.insert(e[b].feature,w,b,M,this.index)}}update(e,r,a,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,a,c)}addFeatures(e,r,a,c,d){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,r,a,c)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Ev),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,r,a,c,d,m=[]){for(const y of Vd(r,500)){let w=0;for(const D of y)w+=D.length;const b=this.segments.prepareSegment(w,this.layoutVertexArray,this.indexArray),M=b.vertexLength,A=[],I=[];for(const D of y){if(D.length===0)continue;D!==y[0]&&I.push(A.length/2);const O=this.segments2.prepareSegment(D.length,this.layoutVertexArray,this.indexArray2),Z=O.vertexLength;this.layoutVertexArray.emplaceBack(D[0].x,D[0].y),this.indexArray2.emplaceBack(Z+D.length-1,Z),A.push(D[0].x),A.push(D[0].y);for(let Q=1;Q<D.length;Q++)this.layoutVertexArray.emplaceBack(D[Q].x,D[Q].y),this.indexArray2.emplaceBack(Z+Q-1,Z+Q),A.push(D[Q].x),A.push(D[Q].y);O.vertexLength+=D.length,O.primitiveLength+=D.length}const L=jd(A,I);for(let D=0;D<L.length;D+=3)this.indexArray.emplaceBack(M+L[D],M+L[D+1],M+L[D+2]);b.vertexLength+=w,b.primitiveLength+=L.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,a,d,m,c)}}vt(Bh,"FillBucket",{omit:["layers","patternFeatures"]});const Bv=new oe({"fill-sort-key":new H(Ve.layout_fill["fill-sort-key"])});var Ov={paint:new oe({"fill-antialias":new B(Ve.paint_fill["fill-antialias"]),"fill-opacity":new H(Ve.paint_fill["fill-opacity"]),"fill-color":new H(Ve.paint_fill["fill-color"]),"fill-outline-color":new H(Ve.paint_fill["fill-outline-color"]),"fill-translate":new B(Ve.paint_fill["fill-translate"]),"fill-translate-anchor":new B(Ve.paint_fill["fill-translate-anchor"]),"fill-pattern":new H(Ve.paint_fill["fill-pattern"])}),layout:Bv};const Uv=Te([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Nv=Te([{name:"a_centroid_pos",components:2,type:"Uint16"}]),jv=Te([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:Vv}=Uv;var Oh={},Gv=Ye,lf=W1;function W1(n,e,r,a,c){this.properties={},this.extent=r,this.type=0,this._pbf=n,this._geometry=-1,this._keys=a,this._values=c,n.readFields($v,this,e)}function $v(n,e,r){n==1?e.id=r.readVarint():n==2?function(a,c){for(var d=a.readVarint()+a.pos;a.pos<d;){var m=c._keys[a.readVarint()],y=c._values[a.readVarint()];c.properties[m]=y}}(r,e):n==3?e.type=r.readVarint():n==4&&(e._geometry=r.pos)}function Zv(n){for(var e,r,a=0,c=0,d=n.length,m=d-1;c<d;m=c++)a+=((r=n[m]).x-(e=n[c]).x)*(e.y+r.y);return a}W1.types=["Unknown","Point","LineString","Polygon"],W1.prototype.loadGeometry=function(){var n=this._pbf;n.pos=this._geometry;for(var e,r=n.readVarint()+n.pos,a=1,c=0,d=0,m=0,y=[];n.pos<r;){if(c<=0){var w=n.readVarint();a=7&w,c=w>>3}if(c--,a===1||a===2)d+=n.readSVarint(),m+=n.readSVarint(),a===1&&(e&&y.push(e),e=[]),e.push(new Gv(d,m));else{if(a!==7)throw new Error("unknown command "+a);e&&e.push(e[0].clone())}}return e&&y.push(e),y},W1.prototype.bbox=function(){var n=this._pbf;n.pos=this._geometry;for(var e=n.readVarint()+n.pos,r=1,a=0,c=0,d=0,m=1/0,y=-1/0,w=1/0,b=-1/0;n.pos<e;){if(a<=0){var M=n.readVarint();r=7&M,a=M>>3}if(a--,r===1||r===2)(c+=n.readSVarint())<m&&(m=c),c>y&&(y=c),(d+=n.readSVarint())<w&&(w=d),d>b&&(b=d);else if(r!==7)throw new Error("unknown command "+r)}return[m,w,y,b]},W1.prototype.toGeoJSON=function(n,e,r){var a,c,d=this.extent*Math.pow(2,r),m=this.extent*n,y=this.extent*e,w=this.loadGeometry(),b=W1.types[this.type];function M(L){for(var D=0;D<L.length;D++){var O=L[D];L[D]=[360*(O.x+m)/d-180,360/Math.PI*Math.atan(Math.exp((180-360*(O.y+y)/d)*Math.PI/180))-90]}}switch(this.type){case 1:var A=[];for(a=0;a<w.length;a++)A[a]=w[a][0];M(w=A);break;case 2:for(a=0;a<w.length;a++)M(w[a]);break;case 3:for(w=function(L){var D=L.length;if(D<=1)return[L];for(var O,Z,Q=[],de=0;de<D;de++){var ee=Zv(L[de]);ee!==0&&(Z===void 0&&(Z=ee<0),Z===ee<0?(O&&Q.push(O),O=[L[de]]):O.push(L[de]))}return O&&Q.push(O),Q}(w),a=0;a<w.length;a++)for(c=0;c<w[a].length;c++)M(w[a][c])}w.length===1?w=w[0]:b="Multi"+b;var I={type:"Feature",geometry:{type:b,coordinates:w},properties:this.properties};return"id"in this&&(I.id=this.id),I};var qv=lf,cf=uf;function uf(n,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=n,this._keys=[],this._values=[],this._features=[],n.readFields(Wv,this,e),this.length=this._features.length}function Wv(n,e,r){n===15?e.version=r.readVarint():n===1?e.name=r.readString():n===5?e.extent=r.readVarint():n===2?e._features.push(r.pos):n===3?e._keys.push(r.readString()):n===4&&e._values.push(function(a){for(var c=null,d=a.readVarint()+a.pos;a.pos<d;){var m=a.readVarint()>>3;c=m===1?a.readString():m===2?a.readFloat():m===3?a.readDouble():m===4?a.readVarint64():m===5?a.readVarint():m===6?a.readSVarint():m===7?a.readBoolean():null}return c}(r))}uf.prototype.feature=function(n){if(n<0||n>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[n];var e=this._pbf.readVarint()+this._pbf.pos;return new qv(this._pbf,e,this.extent,this._keys,this._values)};var Hv=cf;function Xv(n,e,r){if(n===3){var a=new Hv(r,r.readVarint()+r.pos);a.length&&(e[a.name]=a)}}var Zd=Oh.VectorTile=function(n,e){this.layers=n.readFields(Xv,{},e)},Uh=Oh.VectorTileFeature=lf;function Nh(n,e,r,a){const c=[],d=a===0?(m,y,w,b,M,A)=>{m.push(new Me(A,w+(A-y)/(b-y)*(M-w)))}:(m,y,w,b,M,A)=>{m.push(new Me(y+(A-w)/(M-w)*(b-y),A))};for(const m of n){const y=[];for(const w of m){if(w.length<=2)continue;const b=[];for(let I=0;I<w.length-1;I++){const L=w[I].x,D=w[I].y,O=w[I+1].x,Z=w[I+1].y,Q=a===0?L:D,de=a===0?O:Z;Q<e?de>e&&d(b,L,D,O,Z,e):Q>r?de<r&&d(b,L,D,O,Z,r):b.push(w[I]),de<e&&Q>=e&&d(b,L,D,O,Z,e),de>r&&Q<=r&&d(b,L,D,O,Z,r)}let M=w[w.length-1];const A=a===0?M.x:M.y;A>=e&&A<=r&&b.push(M),b.length&&(M=b[b.length-1],b[0].x===M.x&&b[0].y===M.y||b.push(b[0]),y.push(b))}y.length&&c.push(y)}return c}Oh.VectorTileLayer=cf;const Kv=Uh.types,Yv=Math.pow(2,13);function u0(n,e,r,a,c,d,m,y){n.emplaceBack((e<<1)+m,(r<<1)+d,(Math.floor(a*Yv)<<1)+c,Math.round(y))}function h0(n,e,r){n.emplaceBack(e.x,e.y,e.z,r[0]*16384,r[1]*16384,r[2]*16384)}class hf{constructor(){this.acc=new Me(0,0),this.polyCount=[]}startRing(e){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new Me(e.x,e.y),this.max=new Me(e.x,e.y))}append(e,r){this.currentPolyCount.edges++,this.acc._add(e);const a=this.min,c=this.max;e.x<a.x?a.x=e.x:e.x>c.x&&(c.x=e.x),e.y<a.y?a.y=e.y:e.y>c.y&&(c.y=e.y),((e.x===0||e.x===kt)&&e.x===r.x)!=((e.y===0||e.y===kt)&&e.y===r.y)&&this.processBorderOverlap(e,r),r.x<0!=e.x<0&&this.addBorderIntersection(0,rn(r.y,e.y,(0-r.x)/(e.x-r.x))),r.x>kt!=e.x>kt&&this.addBorderIntersection(1,rn(r.y,e.y,(kt-r.x)/(e.x-r.x))),r.y<0!=e.y<0&&this.addBorderIntersection(2,rn(r.x,e.x,(0-r.y)/(e.y-r.y))),r.y>kt!=e.y>kt&&this.addBorderIntersection(3,rn(r.x,e.x,(kt-r.y)/(e.y-r.y)))}addBorderIntersection(e,r){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const a=this.borders[e];r<a[0]&&(a[0]=r),r>a[1]&&(a[1]=r)}processBorderOverlap(e,r){if(e.x===r.x){if(e.y===r.y)return;const a=e.x===0?0:1;this.addBorderIntersection(a,r.y),this.addBorderIntersection(a,e.y)}else{const a=e.y===0?2:3;this.addBorderIntersection(a,r.x),this.addBorderIntersection(a,e.x)}}centroid(){const e=this.polyCount.reduce((r,a)=>r+a.edges,0);return e!==0?this.acc.div(e)._round():new Me(0,0)}span(){return new Me(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((e,r)=>e+ +(r[0]!==Number.MAX_VALUE),0)}}class d0{constructor(e){this.zoom=e.zoom,this.canonical=e.canonical,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.id),this.index=e.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=e.projection,this.layoutVertexArray=new qe,this.centroidVertexArray=new Lo,this.indexArray=new St,this.programConfigurations=new kl(e.layers,e.zoom),this.segments=new er,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id),this.enableTerrain=e.enableTerrain}populate(e,r,a,c){this.features=[],this.hasPattern=Gd("fill-extrusion",this.layers,r),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(d){const m=Math.exp(Math.PI*(1-d.y/(1<<d.z)*2));return 80150034*m/(m*m+1)/kt/(1<<d.z)}(a),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:d,id:m,index:y,sourceLayerIndex:w}of e){const b=this.layers[0]._featureFilter.needGeometry,M=Bl(d,b);if(!this.layers[0]._featureFilter.filter(new C(this.zoom),M,a))continue;const A={id:m,sourceLayerIndex:w,index:y,geometry:b?M.geometry:Bs(d,a,c),properties:d.properties,type:d.type,patterns:{}},I=this.layoutVertexArray.length;this.hasPattern?this.features.push($d("fill-extrusion",this.layers,A,this.zoom,r)):this.addFeature(A,A.geometry,y,a,{},r.availableImages,c),r.featureIndex.insert(d,A.geometry,y,w,this.index,I)}this.sortBorders()}addFeatures(e,r,a,c,d){for(const m of this.features){const{geometry:y}=m;this.addFeature(m,y,m.index,r,a,c,d)}this.sortBorders()}update(e,r,a,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,a,c)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Vv),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=e.createVertexBuffer(this.layoutVertexExtArray,jv.members,!0))),this.programConfigurations.upload(e),this.uploaded=!0}uploadCentroid(e){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,Nv.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,r,a,c,d,m,y){const w=[new Me(0,0),new Me(kt,kt)],b=y.projection,M=b.name==="globe",A=this.enableTerrain&&!M?new hf:null,I=Kv[e.type]==="Polygon";M&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new it);const L=Vd(r,500);for(let Q=L.length-1;Q>=0;Q--){const de=L[Q];(de.length===0||(D=de[0]).every(ee=>ee.x<=0)||D.every(ee=>ee.x>=kt)||D.every(ee=>ee.y<=0)||D.every(ee=>ee.y>=kt))&&L.splice(Q,1)}var D;let O;if(M)O=yf(L,w,c);else{O=[];for(const Q of L)O.push({polygon:Q,bounds:w})}const Z=I?this.edgeRadius:0;for(const{polygon:Q,bounds:de}of O){let ee=0,ce=0;for(const pe of Q)I&&!pe[0].equals(pe[pe.length-1])&&pe.push(pe[0]),ce+=I?pe.length-1:pe.length;const fe=this.segments.prepareSegment((I?5:4)*ce,this.layoutVertexArray,this.indexArray);if(I){const pe=[],Le=[];ee=fe.vertexLength;for(const $e of Q){let rt,Fe;$e.length&&$e!==Q[0]&&Le.push(pe.length/2),rt=$e[1].sub($e[0])._perp()._unit();for(let We=1;We<$e.length;We++){const He=$e[We],et=$e[We===$e.length-1?1:We+1];let{x:at,y:Ne}=He;if(Z){Fe=et.sub(He)._perp()._unit();const dt=rt.add(Fe)._unit(),wt=Z*Math.min(4,1/(rt.x*dt.x+rt.y*dt.y));at+=wt*dt.x,Ne+=wt*dt.y,rt=Fe}u0(this.layoutVertexArray,at,Ne,0,0,1,1,0),fe.vertexLength++,pe.push(He.x,He.y),M&&h0(this.layoutVertexExtArray,b.projectTilePoint(at,Ne,c),b.upVector(c,at,Ne))}}const Ae=jd(pe,Le);for(let $e=0;$e<Ae.length;$e+=3)this.indexArray.emplaceBack(ee+Ae[$e],ee+Ae[$e+2],ee+Ae[$e+1]),fe.primitiveLength++}for(const pe of Q){A&&pe.length&&A.startRing(pe[0]);let Le,Ae,$e,rt=pe.length>4&&mf(pe[pe.length-2],pe[0],pe[1]),Fe=Z?Jv(pe[pe.length-2],pe[0],pe[1],Z):0;Ae=pe[1].sub(pe[0])._perp()._unit();let We=!0;for(let He=1,et=0;He<pe.length;He++){let at=pe[He-1],Ne=pe[He];const dt=pe[He===pe.length-1?1:He+1];if(A&&I&&A.currentPolyCount.top++,ff(Ne,at,de)){Z&&(Ae=dt.sub(Ne)._perp()._unit(),We=!We);continue}A&&A.append(Ne,at);const wt=Ne.sub(at)._perp(),ft=wt.x/(Math.abs(wt.x)+Math.abs(wt.y)),jt=wt.y>0?1:0,ct=at.dist(Ne);if(et+ct>32768&&(et=0),Z){$e=dt.sub(Ne)._perp()._unit();let Gt=pf(at,Ne,dt,df(Ae,$e),Z);isNaN(Gt)&&(Gt=0);const Lt=Ne.sub(at)._unit();at=at.add(Lt.mult(Fe))._round(),Ne=Ne.add(Lt.mult(-Gt))._round(),Fe=Gt,Ae=$e}const Pt=fe.vertexLength,Vt=pe.length>4&&mf(at,Ne,dt);let sn=_f(et,rt,We);if(u0(this.layoutVertexArray,at.x,at.y,ft,jt,0,0,sn),u0(this.layoutVertexArray,at.x,at.y,ft,jt,0,1,sn),et+=ct,sn=_f(et,Vt,!We),rt=Vt,u0(this.layoutVertexArray,Ne.x,Ne.y,ft,jt,0,0,sn),u0(this.layoutVertexArray,Ne.x,Ne.y,ft,jt,0,1,sn),fe.vertexLength+=4,this.indexArray.emplaceBack(Pt+0,Pt+1,Pt+2),this.indexArray.emplaceBack(Pt+1,Pt+3,Pt+2),fe.primitiveLength+=2,Z){const Gt=ee+(He===1?pe.length-2:He-2),Lt=He===1?ee:Gt+1;if(this.indexArray.emplaceBack(Pt+1,Gt,Pt+3),this.indexArray.emplaceBack(Gt,Lt,Pt+3),fe.primitiveLength+=2,Le===void 0&&(Le=Pt),!ff(dt,pe[He],de)){const An=He===pe.length-1?Le:fe.vertexLength;this.indexArray.emplaceBack(Pt+2,Pt+3,An),this.indexArray.emplaceBack(Pt+3,An+1,An),this.indexArray.emplaceBack(Pt+3,Lt,An+1),fe.primitiveLength+=3}We=!We}if(M){const Gt=this.layoutVertexExtArray,Lt=b.projectTilePoint(at.x,at.y,c),An=b.projectTilePoint(Ne.x,Ne.y,c),$t=b.upVector(c,at.x,at.y),Zt=b.upVector(c,Ne.x,Ne.y);h0(Gt,Lt,$t),h0(Gt,Lt,$t),h0(Gt,An,Zt),h0(Gt,An,Zt)}}I&&(ee+=pe.length-1)}}if(A&&A.polyCount.length>0){if(A.borders){A.vertexArrayOffset=this.centroidVertexArray.length;const Q=A.borders,de=this.featuresOnBorder.push(A)-1;for(let ee=0;ee<4;ee++)Q[ee][0]!==Number.MAX_VALUE&&this.borders[ee].push(de)}this.encodeCentroid(A.borders?void 0:A.centroid(),A)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,a,d,m,c)}sortBorders(){for(let e=0;e<4;e++)this.borders[e].sort((r,a)=>this.featuresOnBorder[r].borders[e][0]-this.featuresOnBorder[a].borders[e][0])}encodeCentroid(e,r,a=!0){let c,d;if(e)if(e.y!==0){const y=r.span()._mult(this.tileToMeter);c=(Math.max(e.x,1)<<3)+Math.min(7,Math.round(y.x/10)),d=(Math.max(e.y,1)<<3)+Math.min(7,Math.round(y.y/10))}else c=Math.ceil(7*(e.x+450)),d=0;else c=0,d=+a;let m=a?this.centroidVertexArray.length:r.vertexArrayOffset;for(const y of r.polyCount){a&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*y.edges+y.top);for(let w=0;w<y.top;w++)this.centroidVertexArray.emplace(m++,c,d);for(let w=0;w<2*y.edges;w++)this.centroidVertexArray.emplace(m++,0,d),this.centroidVertexArray.emplace(m++,c,d)}}}function df(n,e){const r=n.add(e)._unit();return n.x*r.x+n.y*r.y}function Jv(n,e,r,a){const c=e.sub(n)._perp()._unit(),d=r.sub(e)._perp()._unit();return pf(n,e,r,df(c,d),a)}function pf(n,e,r,a,c){const d=Math.sqrt(1-a*a);return Math.min(n.dist(e)/3,e.dist(r)/3,c*d/a)}function ff(n,e,r){return n.x<r[0].x&&e.x<r[0].x||n.x>r[1].x&&e.x>r[1].x||n.y<r[0].y&&e.y<r[0].y||n.y>r[1].y&&e.y>r[1].y}function mf(n,e,r){if(n.x<0||n.x>=kt||e.x<0||e.x>=kt||r.x<0||r.x>=kt)return!1;const a=r.sub(e),c=a.perp(),d=n.sub(e);return(a.x*d.x+a.y*d.y)/Math.sqrt((a.x*a.x+a.y*a.y)*(d.x*d.x+d.y*d.y))>-.866&&c.x*d.x+c.y*d.y<0}function _f(n,e,r){const a=e?2|n:-3&n;return r?1|a:-2&a}function gf(){const n=Math.PI/32,e=Math.tan(n),r=o0;return r*Math.sqrt(1+2*e*e)-r}function yf(n,e,r){const a=1<<r.z,c=Ui(r.x/a),d=Ui((r.x+1)/a),m=Dr(r.y/a),y=Dr((r.y+1)/a);return function(w,b,M,A,I=0,L){const D=[];if(!w.length||!M||!A)return D;const O=(pe,Le)=>{for(const Ae of pe)D.push({polygon:Ae,bounds:Le})},Z=Math.ceil(Math.log2(M)),Q=Math.ceil(Math.log2(A)),de=Z-Q,ee=[];for(let pe=0;pe<Math.abs(de);pe++)ee.push(de>0?0:1);for(let pe=0;pe<Math.min(Z,Q);pe++)ee.push(0),ee.push(1);let ce=w;if(ce=Nh(ce,b[0].y-I,b[1].y+I,1),ce=Nh(ce,b[0].x-I,b[1].x+I,0),!ce.length)return D;const fe=[];for(ee.length?fe.push({polygons:ce,bounds:b,depth:0}):O(ce,b);fe.length;){const pe=fe.pop(),Le=pe.depth,Ae=ee[Le],$e=pe.bounds[0],rt=pe.bounds[1],Fe=Ae===0?$e.x:$e.y,We=Ae===0?rt.x:rt.y,He=L?L(Ae,Fe,We):.5*(Fe+We),et=Nh(pe.polygons,Fe-I,He+I,Ae),at=Nh(pe.polygons,He-I,We+I,Ae);if(et.length){const Ne=[$e,new Me(Ae===0?He:rt.x,Ae===1?He:rt.y)];ee.length>Le+1?fe.push({polygons:et,bounds:Ne,depth:Le+1}):O(et,Ne)}if(at.length){const Ne=[new Me(Ae===0?He:$e.x,Ae===1?He:$e.y),rt];ee.length>Le+1?fe.push({polygons:at,bounds:Ne,depth:Le+1}):O(at,Ne)}}return D}(n,e,Math.ceil((d-c)/11.25),Math.ceil((m-y)/11.25),1,(w,b,M)=>{if(w===0)return .5*(b+M);{const A=Dr((r.y+b/kt)/a);return(ls(.5*(Dr((r.y+M/kt)/a)+A))*a-r.y)*kt}})}vt(d0,"FillExtrusionBucket",{omit:["layers","features"]}),vt(hf,"PartMetadata");const Qv=new oe({"fill-extrusion-edge-radius":new B(Ve["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var ex={paint:new oe({"fill-extrusion-opacity":new B(Ve["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new H(Ve["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new B(Ve["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new B(Ve["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new H(Ve["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new H(Ve["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new H(Ve["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new B(Ve["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new B(Ve["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new B(Ve["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new B(Ve["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:Qv};function vf(n,e,r){var a=2*Math.PI*6378137/256/Math.pow(2,r);return[n*a-2*Math.PI*6378137/2,e*a-2*Math.PI*6378137/2]}class jh{constructor(e,r,a){this.z=e,this.x=r,this.y=a,this.key=p0(0,e,e,r,a)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,r){const a=function(d,m,y){var w=vf(256*d,256*(m=Math.pow(2,y)-m-1),y),b=vf(256*(d+1),256*(m+1),y);return w[0]+","+w[1]+","+b[0]+","+b[1]}(this.x,this.y,this.z),c=function(d,m,y){let w,b="";for(let M=d;M>0;M--)w=1<<M-1,b+=(m&w?1:0)+(y&w?2:0);return b}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(r==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",c).replace("{bbox-epsg-3857}",a)}toString(){return`${this.z}/${this.x}/${this.y}`}}class xf{constructor(e,r){this.wrap=e,this.canonical=r,this.key=p0(e,r.z,r.z,r.x,r.y)}}class Jr{constructor(e,r,a,c,d){this.overscaledZ=e,this.wrap=r,this.canonical=new jh(a,+c,+d),this.key=r===0&&e===a?this.canonical.key:p0(r,e,a,c,d)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){const r=this.canonical.z-e;return e>this.canonical.z?new Jr(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Jr(e,this.wrap,e,this.canonical.x>>r,this.canonical.y>>r)}calculateScaledKey(e,r=!0){if(this.overscaledZ===e&&r)return this.key;if(e>this.canonical.z)return p0(this.wrap*+r,e,this.canonical.z,this.canonical.x,this.canonical.y);{const a=this.canonical.z-e;return p0(this.wrap*+r,e,e,this.canonical.x>>a,this.canonical.y>>a)}}isChildOf(e){if(e.wrap!==this.wrap)return!1;const r=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>r&&e.canonical.y===this.canonical.y>>r}children(e){if(this.overscaledZ>=e)return[new Jr(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const r=this.canonical.z+1,a=2*this.canonical.x,c=2*this.canonical.y;return[new Jr(r,this.wrap,r,a,c),new Jr(r,this.wrap,r,a+1,c),new Jr(r,this.wrap,r,a,c+1),new Jr(r,this.wrap,r,a+1,c+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new Jr(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new Jr(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new xf(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function p0(n,e,r,a,c){const d=1<<Math.min(r,22);let m=d*(c%d)+a%d;return n&&r<22&&(m+=d*d*((n<0?-2*n-1:2*n)%(1<<2*(22-r)))),16*(32*m+r)+(e-r)}vt(jh,"CanonicalTileID"),vt(Jr,"OverscaledTileID",{omit:["projMatrix"]});class H1 extends Me{constructor(e,r,a){super(e,r),this.z=a}}function f0(n,e){return n.x*e.x+n.y*e.y}function wf(n,e){if(n.length===1){let r=0;const a=e[r++];let c;for(;!c||a.equals(c);)if(c=e[r++],!c)return 1/0;for(;r<e.length;r++){const d=e[r],m=n[0],y=c.sub(a),w=d.sub(a),b=m.sub(a),M=f0(y,y),A=f0(y,w),I=f0(w,w),L=f0(b,y),D=f0(b,w),O=M*I-A*A,Z=(I*L-A*D)/O,Q=(M*D-A*L)/O,de=a.z*(1-Z-Q)+c.z*Z+d.z*Q;if(isFinite(de))return de}return 1/0}{let r=1/0;for(const a of e)r=Math.min(r,a.z);return r}}function bf(n,e,r,a,c,d,m,y){const w=m*c.getElevationAt(n,e,!0,!0),b=d[0]!==0,M=b?d[1]===0?m*(d[0]/7-450):m*function(A,I,L){const D=Math.floor(I[0]/8),O=Math.floor(I[1]/8),Z=10*(I[0]-8*D),Q=10*(I[1]-8*O),de=A.getElevationAt(D,O,!0,!0),ee=A.getMeterToDEM(L),ce=Math.floor(.5*(Z*ee-1)),fe=Math.floor(.5*(Q*ee-1)),pe=A.tileCoordToPixel(D,O),Le=2*ce+1,Ae=2*fe+1,$e=function(at,Ne,dt,wt,ft){return[at.getElevationAtPixel(Ne,dt,!0),at.getElevationAtPixel(Ne+ft,dt,!0),at.getElevationAtPixel(Ne,dt+ft,!0),at.getElevationAtPixel(Ne+wt,dt+ft,!0)]}(A,pe.x-ce,pe.y-fe,Le,Ae),rt=Math.abs($e[0]-$e[1]),Fe=Math.abs($e[2]-$e[3]),We=Math.abs($e[0]-$e[2])+Math.abs($e[1]-$e[3]),He=Math.min(.25,.5*ee*(rt+Fe)/Le),et=Math.min(.25,.5*ee*We/Ae);return de+Math.max(He*Z,et*Q)}(c,d,y):w;return{base:w+(r===0)?-1:r,top:b?Math.max(M+a,w+r+2):w+a}}const tx=Te([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:nx}=tx,rx=Te([{name:"a_packed",components:4,type:"Float32"}]),{members:ix}=rx,ox=Uh.types,sx=Math.cos(Math.PI/180*37.5);class Vh{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.id),this.index=e.index,this.projection=e.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(r=>{this.gradients[r.id]={}}),this.layoutVertexArray=new Re,this.layoutVertexArray2=new tt,this.indexArray=new St,this.programConfigurations=new kl(e.layers,e.zoom),this.segments=new er,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(e,r,a,c){this.hasPattern=Gd("line",this.layers,r);const d=this.layers[0].layout.get("line-sort-key"),m=[];for(const{feature:M,id:A,index:I,sourceLayerIndex:L}of e){const D=this.layers[0]._featureFilter.needGeometry,O=Bl(M,D);if(!this.layers[0]._featureFilter.filter(new C(this.zoom),O,a))continue;const Z=d?d.evaluate(O,{},a):void 0,Q={id:A,properties:M.properties,type:M.type,sourceLayerIndex:L,index:I,geometry:D?O.geometry:Bs(M,a,c),patterns:{},sortKey:Z};m.push(Q)}d&&m.sort((M,A)=>M.sortKey-A.sortKey);const{lineAtlas:y,featureIndex:w}=r,b=this.addConstantDashes(y);for(const M of m){const{geometry:A,index:I,sourceLayerIndex:L}=M;if(b&&this.addFeatureDashes(M,y),this.hasPattern){const D=$d("line",this.layers,M,this.zoom,r);this.patternFeatures.push(D)}else this.addFeature(M,A,I,a,y.positions,r.availableImages);w.insert(e[I].feature,A,I,L,this.index)}}addConstantDashes(e){let r=!1;for(const a of this.layers){const c=a.paint.get("line-dasharray").value,d=a.layout.get("line-cap").value;if(c.kind!=="constant"||d.kind!=="constant")r=!0;else{const m=d.value,y=c.value;if(!y)continue;e.addDash(y,m)}}return r}addFeatureDashes(e,r){const a=this.zoom;for(const c of this.layers){const d=c.paint.get("line-dasharray").value,m=c.layout.get("line-cap").value;if(d.kind==="constant"&&m.kind==="constant")continue;let y,w;if(d.kind==="constant"){if(y=d.value,!y)continue}else y=d.evaluate({zoom:a},e);w=m.kind==="constant"?m.value:m.evaluate({zoom:a},e),r.addDash(y,w),e.patterns[c.id]=r.getKey(y,w)}}update(e,r,a,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,a,c)}addFeatures(e,r,a,c,d){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,r,a,c)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,ix)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,nx),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,r,a,c,d,m){const y=this.layers[0].layout,w=y.get("line-join").evaluate(e,{}),b=y.get("line-cap").evaluate(e,{}),M=y.get("line-miter-limit"),A=y.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const I of r)this.addLine(I,e,w,b,M,A);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,a,d,m,c)}addLine(e,r,a,c,d,m){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Q=0;Q<e.length-1;Q++)this.totalDistance+=e[Q].dist(e[Q+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const y=ox[r.type]==="Polygon";let w=e.length;for(;w>=2&&e[w-1].equals(e[w-2]);)w--;let b=0;for(;b<w-1&&e[b].equals(e[b+1]);)b++;if(w<(y?3:2))return;a==="bevel"&&(d=1.05);const M=this.overscaling<=16?15*kt/(512*this.overscaling):0,A=this.segments.prepareSegment(10*w,this.layoutVertexArray,this.indexArray);let I,L,D,O,Z;this.e1=this.e2=-1,y&&(I=e[w-2],Z=e[b].sub(I)._unit()._perp());for(let Q=b;Q<w;Q++){if(D=Q===w-1?y?e[b+1]:void 0:e[Q+1],D&&e[Q].equals(D))continue;Z&&(O=Z),I&&(L=I),I=e[Q],Z=D?D.sub(I)._unit()._perp():O,O=O||Z;let de=O.add(Z);de.x===0&&de.y===0||de._unit();const ee=O.x*Z.x+O.y*Z.y,ce=de.x*Z.x+de.y*Z.y,fe=ce!==0?1/ce:1/0,pe=2*Math.sqrt(2-2*ce),Le=ce<sx&&L&&D,Ae=O.x*Z.y-O.y*Z.x>0;if(Le&&Q>b){const Fe=I.dist(L);if(Fe>2*M){const We=I.sub(I.sub(L)._mult(M/Fe)._round());this.updateDistance(L,We),this.addCurrentVertex(We,O,0,0,A),L=We}}const $e=L&&D;let rt=$e?a:y?"butt":c;if($e&&rt==="round"&&(fe<m?rt="miter":fe<=2&&(rt="fakeround")),rt==="miter"&&fe>d&&(rt="bevel"),rt==="bevel"&&(fe>2&&(rt="flipbevel"),fe<d&&(rt="miter")),L&&this.updateDistance(L,I),rt==="miter")de._mult(fe),this.addCurrentVertex(I,de,0,0,A);else if(rt==="flipbevel"){if(fe>100)de=Z.mult(-1);else{const Fe=fe*O.add(Z).mag()/O.sub(Z).mag();de._perp()._mult(Fe*(Ae?-1:1))}this.addCurrentVertex(I,de,0,0,A),this.addCurrentVertex(I,de.mult(-1),0,0,A)}else if(rt==="bevel"||rt==="fakeround"){const Fe=-Math.sqrt(fe*fe-1),We=Ae?Fe:0,He=Ae?0:Fe;if(L&&this.addCurrentVertex(I,O,We,He,A),rt==="fakeround"){const et=Math.round(180*pe/Math.PI/20);for(let at=1;at<et;at++){let Ne=at/et;if(Ne!==.5){const wt=Ne-.5;Ne+=Ne*wt*(Ne-1)*((1.0904+ee*(ee*(3.55645-1.43519*ee)-3.2452))*wt*wt+(.848013+ee*(.215638*ee-1.06021)))}const dt=Z.sub(O)._mult(Ne)._add(O)._unit()._mult(Ae?-1:1);this.addHalfVertex(I,dt.x,dt.y,!1,Ae,0,A)}}D&&this.addCurrentVertex(I,Z,-We,-He,A)}else if(rt==="butt")this.addCurrentVertex(I,de,0,0,A);else if(rt==="square"){const Fe=L?1:-1;L||this.addCurrentVertex(I,de,Fe,Fe,A),this.addCurrentVertex(I,de,0,0,A),L&&this.addCurrentVertex(I,de,Fe,Fe,A)}else rt==="round"&&(L&&(this.addCurrentVertex(I,O,0,0,A),this.addCurrentVertex(I,O,1,1,A,!0)),D&&(this.addCurrentVertex(I,Z,-1,-1,A,!0),this.addCurrentVertex(I,Z,0,0,A)));if(Le&&Q<w-1){const Fe=I.dist(D);if(Fe>2*M){const We=I.add(D.sub(I)._mult(M/Fe)._round());this.updateDistance(I,We),this.addCurrentVertex(We,Z,0,0,A),I=We}}}}addCurrentVertex(e,r,a,c,d,m=!1){const y=r.y*c-r.x,w=-r.y-r.x*c;this.addHalfVertex(e,r.x+r.y*a,r.y-r.x*a,m,!1,a,d),this.addHalfVertex(e,y,w,m,!0,-c,d)}addHalfVertex({x:e,y:r},a,c,d,m,y,w){this.layoutVertexArray.emplaceBack((e<<1)+(d?1:0),(r<<1)+(m?1:0),Math.round(63*a)+128,Math.round(63*c)+128,1+(y===0?0:y<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const b=w.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,b),w.primitiveLength++),m?this.e2=b:this.e1=b}updateScaledDistance(){if(this.lineClips){const e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(e,r){this.distance+=e.dist(r),this.updateScaledDistance()}}vt(Vh,"LineBucket",{omit:["layers","patternFeatures"]});const ax=new oe({"line-cap":new H(Ve.layout_line["line-cap"]),"line-join":new H(Ve.layout_line["line-join"]),"line-miter-limit":new B(Ve.layout_line["line-miter-limit"]),"line-round-limit":new B(Ve.layout_line["line-round-limit"]),"line-sort-key":new H(Ve.layout_line["line-sort-key"])});var Tf={paint:new oe({"line-opacity":new H(Ve.paint_line["line-opacity"]),"line-color":new H(Ve.paint_line["line-color"]),"line-translate":new B(Ve.paint_line["line-translate"]),"line-translate-anchor":new B(Ve.paint_line["line-translate-anchor"]),"line-width":new H(Ve.paint_line["line-width"]),"line-gap-width":new H(Ve.paint_line["line-gap-width"]),"line-offset":new H(Ve.paint_line["line-offset"]),"line-blur":new H(Ve.paint_line["line-blur"]),"line-dasharray":new H(Ve.paint_line["line-dasharray"]),"line-pattern":new H(Ve.paint_line["line-pattern"]),"line-gradient":new ie(Ve.paint_line["line-gradient"]),"line-trim-offset":new B(Ve.paint_line["line-trim-offset"])}),layout:ax};const Ef=new class extends H{possiblyEvaluate(n,e){return e=new C(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,transition:e.transition}),super.possiblyEvaluate(n,e)}evaluate(n,e,r,a){return e=Nt({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(n,e,r,a)}}(Tf.paint.properties["line-width"].specification);function Sf(n,e){return e>0?e+2*n:n}Ef.useIntegerZoom=!0;const lx=Te([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),cx=Te([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),ux=Te([{name:"a_projected_pos",components:4,type:"Float32"}],4);Te([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const hx=Te([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),dx=Te([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Te([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Mf=Te([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),px=Te([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Te([{name:"triangle",components:3,type:"Uint16"}]),Te([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Te([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Te([{type:"Float32",name:"offsetX"}]),Te([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Cr=24;const Uo=128;function qd(n,e){const{expression:r}=e;if(r.kind==="constant")return{kind:"constant",layoutSize:r.evaluate(new C(n+1))};if(r.kind==="source")return{kind:"source"};{const{zoomStops:a,interpolationType:c}=r;let d=0;for(;d<a.length&&a[d]<=n;)d++;d=Math.max(0,d-1);let m=d;for(;m<a.length&&a[m]<n+1;)m++;m=Math.min(a.length-1,m);const y=a[d],w=a[m];return r.kind==="composite"?{kind:"composite",minZoom:y,maxZoom:w,interpolationType:c}:{kind:"camera",minZoom:y,maxZoom:w,minSize:r.evaluate(new C(y)),maxSize:r.evaluate(new C(w)),interpolationType:c}}}function Gh(n,{uSize:e,uSizeT:r},{lowerSize:a,upperSize:c}){return n.kind==="source"?a/Uo:n.kind==="composite"?rn(a/Uo,c/Uo,r):e}function X1(n,e){let r=0,a=0;if(n.kind==="constant")a=n.layoutSize;else if(n.kind!=="source"){const{interpolationType:c,minZoom:d,maxZoom:m}=n,y=c?Ce(ro.interpolationFactor(c,e,d,m),0,1):0;n.kind==="camera"?a=rn(n.minSize,n.maxSize,y):r=y}return{uSizeT:r,uSize:a}}var fx=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:Uo,evaluateSizeForFeature:Gh,evaluateSizeForZoom:X1,getSizeData:qd});function mx(n,e,r){return n.sections.forEach(a=>{a.text=function(c,d,m){const y=d.layout.get("text-transform").evaluate(m,{});return y==="uppercase"?c=c.toLocaleUpperCase():y==="lowercase"&&(c=c.toLocaleLowerCase()),S.applyArabicShaping&&(c=S.applyArabicShaping(c)),c}(a.text,e,r)}),n}const m0={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function _x(n){return n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""}function gx(n){return n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""}var Cf=Sn,Pf=function(n,e,r,a,c){var d,m,y=8*c-a-1,w=(1<<y)-1,b=w>>1,M=-7,A=r?c-1:0,I=r?-1:1,L=n[e+A];for(A+=I,d=L&(1<<-M)-1,L>>=-M,M+=y;M>0;d=256*d+n[e+A],A+=I,M-=8);for(m=d&(1<<-M)-1,d>>=-M,M+=a;M>0;m=256*m+n[e+A],A+=I,M-=8);if(d===0)d=1-b;else{if(d===w)return m?NaN:1/0*(L?-1:1);m+=Math.pow(2,a),d-=b}return(L?-1:1)*m*Math.pow(2,d-a)},Af=function(n,e,r,a,c,d){var m,y,w,b=8*d-c-1,M=(1<<b)-1,A=M>>1,I=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,L=a?0:d-1,D=a?1:-1,O=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(y=isNaN(e)?1:0,m=M):(m=Math.floor(Math.log(e)/Math.LN2),e*(w=Math.pow(2,-m))<1&&(m--,w*=2),(e+=m+A>=1?I/w:I*Math.pow(2,1-A))*w>=2&&(m++,w/=2),m+A>=M?(y=0,m=M):m+A>=1?(y=(e*w-1)*Math.pow(2,c),m+=A):(y=e*Math.pow(2,A-1)*Math.pow(2,c),m=0));c>=8;n[r+L]=255&y,L+=D,y/=256,c-=8);for(m=m<<c|y,b+=c;b>0;n[r+L]=255&m,L+=D,m/=256,b-=8);n[r+L-D]|=128*O};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function Sn(n){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(n)?n:new Uint8Array(n||0),this.pos=0,this.type=0,this.length=this.buf.length}Sn.Varint=0,Sn.Fixed64=1,Sn.Bytes=2,Sn.Fixed32=5;var Wd=4294967296,If=1/Wd,kf=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Us(n){return n.type===Sn.Bytes?n.readVarint()+n.pos:n.pos+1}function K1(n,e,r){return r?4294967296*e+(n>>>0):4294967296*(e>>>0)+(n>>>0)}function zf(n,e,r){var a=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));r.realloc(a);for(var c=r.pos-1;c>=n;c--)r.buf[c+a]=r.buf[c]}function yx(n,e){for(var r=0;r<n.length;r++)e.writeVarint(n[r])}function vx(n,e){for(var r=0;r<n.length;r++)e.writeSVarint(n[r])}function xx(n,e){for(var r=0;r<n.length;r++)e.writeFloat(n[r])}function wx(n,e){for(var r=0;r<n.length;r++)e.writeDouble(n[r])}function bx(n,e){for(var r=0;r<n.length;r++)e.writeBoolean(n[r])}function Tx(n,e){for(var r=0;r<n.length;r++)e.writeFixed32(n[r])}function Ex(n,e){for(var r=0;r<n.length;r++)e.writeSFixed32(n[r])}function Sx(n,e){for(var r=0;r<n.length;r++)e.writeFixed64(n[r])}function Mx(n,e){for(var r=0;r<n.length;r++)e.writeSFixed64(n[r])}function $h(n,e){return(n[e]|n[e+1]<<8|n[e+2]<<16)+16777216*n[e+3]}function Y1(n,e,r){n[r]=e,n[r+1]=e>>>8,n[r+2]=e>>>16,n[r+3]=e>>>24}function Lf(n,e){return(n[e]|n[e+1]<<8|n[e+2]<<16)+(n[e+3]<<24)}Sn.prototype={destroy:function(){this.buf=null},readFields:function(n,e,r){for(r=r||this.length;this.pos<r;){var a=this.readVarint(),c=a>>3,d=this.pos;this.type=7&a,n(c,e,this),this.pos===d&&this.skip(a)}return e},readMessage:function(n,e){return this.readFields(n,e,this.readVarint()+this.pos)},readFixed32:function(){var n=$h(this.buf,this.pos);return this.pos+=4,n},readSFixed32:function(){var n=Lf(this.buf,this.pos);return this.pos+=4,n},readFixed64:function(){var n=$h(this.buf,this.pos)+$h(this.buf,this.pos+4)*Wd;return this.pos+=8,n},readSFixed64:function(){var n=$h(this.buf,this.pos)+Lf(this.buf,this.pos+4)*Wd;return this.pos+=8,n},readFloat:function(){var n=Pf(this.buf,this.pos,!0,23,4);return this.pos+=4,n},readDouble:function(){var n=Pf(this.buf,this.pos,!0,52,8);return this.pos+=8,n},readVarint:function(n){var e,r,a=this.buf;return e=127&(r=a[this.pos++]),r<128?e:(e|=(127&(r=a[this.pos++]))<<7,r<128?e:(e|=(127&(r=a[this.pos++]))<<14,r<128?e:(e|=(127&(r=a[this.pos++]))<<21,r<128?e:function(c,d,m){var y,w,b=m.buf;if(y=(112&(w=b[m.pos++]))>>4,w<128||(y|=(127&(w=b[m.pos++]))<<3,w<128)||(y|=(127&(w=b[m.pos++]))<<10,w<128)||(y|=(127&(w=b[m.pos++]))<<17,w<128)||(y|=(127&(w=b[m.pos++]))<<24,w<128)||(y|=(1&(w=b[m.pos++]))<<31,w<128))return K1(c,y,d);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(r=a[this.pos]))<<28,n,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var n=this.readVarint();return n%2==1?(n+1)/-2:n/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var n=this.readVarint()+this.pos,e=this.pos;return this.pos=n,n-e>=12&&kf?function(r,a,c){return kf.decode(r.subarray(a,c))}(this.buf,e,n):function(r,a,c){for(var d="",m=a;m<c;){var y,w,b,M=r[m],A=null,I=M>239?4:M>223?3:M>191?2:1;if(m+I>c)break;I===1?M<128&&(A=M):I===2?(192&(y=r[m+1]))==128&&(A=(31&M)<<6|63&y)<=127&&(A=null):I===3?(w=r[m+2],(192&(y=r[m+1]))==128&&(192&w)==128&&((A=(15&M)<<12|(63&y)<<6|63&w)<=2047||A>=55296&&A<=57343)&&(A=null)):I===4&&(w=r[m+2],b=r[m+3],(192&(y=r[m+1]))==128&&(192&w)==128&&(192&b)==128&&((A=(15&M)<<18|(63&y)<<12|(63&w)<<6|63&b)<=65535||A>=1114112)&&(A=null)),A===null?(A=65533,I=1):A>65535&&(A-=65536,d+=String.fromCharCode(A>>>10&1023|55296),A=56320|1023&A),d+=String.fromCharCode(A),m+=I}return d}(this.buf,e,n)},readBytes:function(){var n=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,n);return this.pos=n,e},readPackedVarint:function(n,e){if(this.type!==Sn.Bytes)return n.push(this.readVarint(e));var r=Us(this);for(n=n||[];this.pos<r;)n.push(this.readVarint(e));return n},readPackedSVarint:function(n){if(this.type!==Sn.Bytes)return n.push(this.readSVarint());var e=Us(this);for(n=n||[];this.pos<e;)n.push(this.readSVarint());return n},readPackedBoolean:function(n){if(this.type!==Sn.Bytes)return n.push(this.readBoolean());var e=Us(this);for(n=n||[];this.pos<e;)n.push(this.readBoolean());return n},readPackedFloat:function(n){if(this.type!==Sn.Bytes)return n.push(this.readFloat());var e=Us(this);for(n=n||[];this.pos<e;)n.push(this.readFloat());return n},readPackedDouble:function(n){if(this.type!==Sn.Bytes)return n.push(this.readDouble());var e=Us(this);for(n=n||[];this.pos<e;)n.push(this.readDouble());return n},readPackedFixed32:function(n){if(this.type!==Sn.Bytes)return n.push(this.readFixed32());var e=Us(this);for(n=n||[];this.pos<e;)n.push(this.readFixed32());return n},readPackedSFixed32:function(n){if(this.type!==Sn.Bytes)return n.push(this.readSFixed32());var e=Us(this);for(n=n||[];this.pos<e;)n.push(this.readSFixed32());return n},readPackedFixed64:function(n){if(this.type!==Sn.Bytes)return n.push(this.readFixed64());var e=Us(this);for(n=n||[];this.pos<e;)n.push(this.readFixed64());return n},readPackedSFixed64:function(n){if(this.type!==Sn.Bytes)return n.push(this.readSFixed64());var e=Us(this);for(n=n||[];this.pos<e;)n.push(this.readSFixed64());return n},skip:function(n){var e=7&n;if(e===Sn.Varint)for(;this.buf[this.pos++]>127;);else if(e===Sn.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Sn.Fixed32)this.pos+=4;else{if(e!==Sn.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(n,e){this.writeVarint(n<<3|e)},realloc:function(n){for(var e=this.length||16;e<this.pos+n;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(n){this.realloc(4),Y1(this.buf,n,this.pos),this.pos+=4},writeSFixed32:function(n){this.realloc(4),Y1(this.buf,n,this.pos),this.pos+=4},writeFixed64:function(n){this.realloc(8),Y1(this.buf,-1&n,this.pos),Y1(this.buf,Math.floor(n*If),this.pos+4),this.pos+=8},writeSFixed64:function(n){this.realloc(8),Y1(this.buf,-1&n,this.pos),Y1(this.buf,Math.floor(n*If),this.pos+4),this.pos+=8},writeVarint:function(n){(n=+n||0)>268435455||n<0?function(e,r){var a,c;if(e>=0?(a=e%4294967296|0,c=e/4294967296|0):(c=~(-e/4294967296),4294967295^(a=~(-e%4294967296))?a=a+1|0:(a=0,c=c+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");r.realloc(10),function(d,m,y){y.buf[y.pos++]=127&d|128,d>>>=7,y.buf[y.pos++]=127&d|128,d>>>=7,y.buf[y.pos++]=127&d|128,d>>>=7,y.buf[y.pos++]=127&d|128,y.buf[y.pos]=127&(d>>>=7)}(a,0,r),function(d,m){var y=(7&d)<<4;m.buf[m.pos++]|=y|((d>>>=3)?128:0),d&&(m.buf[m.pos++]=127&d|((d>>>=7)?128:0),d&&(m.buf[m.pos++]=127&d|((d>>>=7)?128:0),d&&(m.buf[m.pos++]=127&d|((d>>>=7)?128:0),d&&(m.buf[m.pos++]=127&d|((d>>>=7)?128:0),d&&(m.buf[m.pos++]=127&d)))))}(c,r)}(n,this):(this.realloc(4),this.buf[this.pos++]=127&n|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=n>>>7&127))))},writeSVarint:function(n){this.writeVarint(n<0?2*-n-1:2*n)},writeBoolean:function(n){this.writeVarint(!!n)},writeString:function(n){n=String(n),this.realloc(4*n.length),this.pos++;var e=this.pos;this.pos=function(a,c,d){for(var m,y,w=0;w<c.length;w++){if((m=c.charCodeAt(w))>55295&&m<57344){if(!y){m>56319||w+1===c.length?(a[d++]=239,a[d++]=191,a[d++]=189):y=m;continue}if(m<56320){a[d++]=239,a[d++]=191,a[d++]=189,y=m;continue}m=y-55296<<10|m-56320|65536,y=null}else y&&(a[d++]=239,a[d++]=191,a[d++]=189,y=null);m<128?a[d++]=m:(m<2048?a[d++]=m>>6|192:(m<65536?a[d++]=m>>12|224:(a[d++]=m>>18|240,a[d++]=m>>12&63|128),a[d++]=m>>6&63|128),a[d++]=63&m|128)}return d}(this.buf,n,this.pos);var r=this.pos-e;r>=128&&zf(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeFloat:function(n){this.realloc(4),Af(this.buf,n,this.pos,!0,23,4),this.pos+=4},writeDouble:function(n){this.realloc(8),Af(this.buf,n,this.pos,!0,52,8),this.pos+=8},writeBytes:function(n){var e=n.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=n[r]},writeRawMessage:function(n,e){this.pos++;var r=this.pos;n(e,this);var a=this.pos-r;a>=128&&zf(r,a,this),this.pos=r-1,this.writeVarint(a),this.pos+=a},writeMessage:function(n,e,r){this.writeTag(n,Sn.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(n,e){e.length&&this.writeMessage(n,yx,e)},writePackedSVarint:function(n,e){e.length&&this.writeMessage(n,vx,e)},writePackedBoolean:function(n,e){e.length&&this.writeMessage(n,bx,e)},writePackedFloat:function(n,e){e.length&&this.writeMessage(n,xx,e)},writePackedDouble:function(n,e){e.length&&this.writeMessage(n,wx,e)},writePackedFixed32:function(n,e){e.length&&this.writeMessage(n,Tx,e)},writePackedSFixed32:function(n,e){e.length&&this.writeMessage(n,Ex,e)},writePackedFixed64:function(n,e){e.length&&this.writeMessage(n,Sx,e)},writePackedSFixed64:function(n,e){e.length&&this.writeMessage(n,Mx,e)},writeBytesField:function(n,e){this.writeTag(n,Sn.Bytes),this.writeBytes(e)},writeFixed32Field:function(n,e){this.writeTag(n,Sn.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(n,e){this.writeTag(n,Sn.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(n,e){this.writeTag(n,Sn.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(n,e){this.writeTag(n,Sn.Fixed64),this.writeSFixed64(e)},writeVarintField:function(n,e){this.writeTag(n,Sn.Varint),this.writeVarint(e)},writeSVarintField:function(n,e){this.writeTag(n,Sn.Varint),this.writeSVarint(e)},writeStringField:function(n,e){this.writeTag(n,Sn.Bytes),this.writeString(e)},writeFloatField:function(n,e){this.writeTag(n,Sn.Fixed32),this.writeFloat(e)},writeDoubleField:function(n,e){this.writeTag(n,Sn.Fixed64),this.writeDouble(e)},writeBooleanField:function(n,e){this.writeVarintField(n,!!e)}};var Zh=se(Cf);const Hd=3;function Cx(n,e,r){e.glyphs=[],n===1&&r.readMessage(Px,e)}function Px(n,e,r){if(n===3){const{id:a,bitmap:c,width:d,height:m,left:y,top:w,advance:b}=r.readMessage(Ax,{});e.glyphs.push({id:a,bitmap:new Os({width:d+2*Hd,height:m+2*Hd},c),metrics:{width:d,height:m,left:y,top:w,advance:b}})}else n===4?e.ascender=r.readSVarint():n===5&&(e.descender=r.readSVarint())}function Ax(n,e,r){n===1?e.id=r.readVarint():n===2?e.bitmap=r.readBytes():n===3?e.width=r.readVarint():n===4?e.height=r.readVarint():n===5?e.left=r.readSVarint():n===6?e.top=r.readSVarint():n===7&&(e.advance=r.readVarint())}const Df=Hd;function Xd(n){let e=0,r=0;for(const m of n)e+=m.w*m.h,r=Math.max(r,m.w);n.sort((m,y)=>y.h-m.h);const a=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),r),h:1/0}];let c=0,d=0;for(const m of n)for(let y=a.length-1;y>=0;y--){const w=a[y];if(!(m.w>w.w||m.h>w.h)){if(m.x=w.x,m.y=w.y,d=Math.max(d,m.y+m.h),c=Math.max(c,m.x+m.w),m.w===w.w&&m.h===w.h){const b=a.pop();y<a.length&&(a[y]=b)}else m.h===w.h?(w.x+=m.w,w.w-=m.w):m.w===w.w?(w.y+=m.h,w.h-=m.h):(a.push({x:w.x+m.w,y:w.y,w:w.w-m.w,h:m.h}),w.y+=m.h,w.h-=m.h);break}}return{w:c,h:d,fill:e/(c*d)||0}}const li=1;class Kd{constructor(e,{pixelRatio:r,version:a,stretchX:c,stretchY:d,content:m}){this.paddedRect=e,this.pixelRatio=r,this.stretchX=c,this.stretchY=d,this.content=m,this.version=a}get tl(){return[this.paddedRect.x+li,this.paddedRect.y+li]}get br(){return[this.paddedRect.x+this.paddedRect.w-li,this.paddedRect.y+this.paddedRect.h-li]}get displaySize(){return[(this.paddedRect.w-2*li)/this.pixelRatio,(this.paddedRect.h-2*li)/this.pixelRatio]}}class Rf{constructor(e,r){const a={},c={};this.haveRenderCallbacks=[];const d=[];this.addImages(e,a,d),this.addImages(r,c,d);const{w:m,h:y}=Xd(d),w=new Ei({width:m||1,height:y||1});for(const b in e){const M=e[b],A=a[b].paddedRect;Ei.copy(M.data,w,{x:0,y:0},{x:A.x+li,y:A.y+li},M.data)}for(const b in r){const M=r[b],A=c[b].paddedRect,I=A.x+li,L=A.y+li,D=M.data.width,O=M.data.height;Ei.copy(M.data,w,{x:0,y:0},{x:I,y:L},M.data),Ei.copy(M.data,w,{x:0,y:O-1},{x:I,y:L-1},{width:D,height:1}),Ei.copy(M.data,w,{x:0,y:0},{x:I,y:L+O},{width:D,height:1}),Ei.copy(M.data,w,{x:D-1,y:0},{x:I-1,y:L},{width:1,height:O}),Ei.copy(M.data,w,{x:0,y:0},{x:I+D,y:L},{width:1,height:O})}this.image=w,this.iconPositions=a,this.patternPositions=c}addImages(e,r,a){for(const c in e){const d=e[c],m={x:0,y:0,w:d.data.width+2*li,h:d.data.height+2*li};a.push(m),r[c]=new Kd(m,d),d.hasRenderCallback&&this.haveRenderCallbacks.push(c)}}patchUpdatedImages(e,r){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(a=>e.hasImage(a)),e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const a in e.updatedImages)this.patchUpdatedImage(this.iconPositions[a],e.getImage(a),r),this.patchUpdatedImage(this.patternPositions[a],e.getImage(a),r)}patchUpdatedImage(e,r,a){if(!e||!r||e.version===r.version)return;e.version=r.version;const[c,d]=e.tl;a.update(r.data,void 0,{x:c,y:d})}}vt(Kd,"ImagePosition"),vt(Rf,"ImageAtlas");const Ni={horizontal:1,vertical:2,horizontalOnly:3},Ff=-17;class _0{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,r){const a=new _0;return a.scale=e||1,a.fontStack=r,a}static forImage(e){const r=new _0;return r.imageName=e,r}}class J1{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,r){const a=new J1;for(let c=0;c<e.sections.length;c++){const d=e.sections[c];d.image?a.addImageSection(d):a.addTextSection(d,r)}return a}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSections(){return this.sections}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(e){this.text=function(r,a){let c="";for(let d=0;d<r.length;d++){const m=r.charCodeAt(d+1)||null,y=r.charCodeAt(d-1)||null;c+=!a&&(m&&xh(m)&&!m0[r[d+1]]||y&&xh(y)&&!m0[r[d-1]])||!m0[r[d]]?r[d]:m0[r[d]]}return c}(this.text,e)}trim(){let e=0;for(let a=0;a<this.text.length&&qh[this.text.charCodeAt(a)];a++)e++;let r=this.text.length;for(let a=this.text.length-1;a>=0&&a>=e&&qh[this.text.charCodeAt(a)];a--)r--;this.text=this.text.substring(e,r),this.sectionIndex=this.sectionIndex.slice(e,r)}substring(e,r){const a=new J1;return a.text=this.text.substring(e,r),a.sectionIndex=this.sectionIndex.slice(e,r),a.sections=this.sections,a}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((e,r)=>Math.max(e,this.sections[r].scale),0)}addTextSection(e,r){this.text+=e.text,this.sections.push(_0.forText(e.scale,e.fontStack||r));const a=this.sections.length-1;for(let c=0;c<e.text.length;++c)this.sectionIndex.push(a)}addImageSection(e){const r=e.image?e.image.name:"";if(r.length===0)return void dn("Can't add FormattedSection with an empty image.");const a=this.getNextImageSectionCharCode();a?(this.text+=String.fromCharCode(a),this.sections.push(_0.forImage(r)),this.sectionIndex.push(this.sections.length-1)):dn("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Yd(n,e,r,a,c,d,m,y,w,b,M,A,I,L,D){const O=J1.fromFeature(n,c);A===Ni.vertical&&O.verticalizePunctuation(I);let Z=[];const Q=function(pe,Le,Ae,$e,rt,Fe){if(!pe)return[];const We=[],He=function(dt,wt,ft,jt,ct,Pt){let Vt=0;for(let sn=0;sn<dt.length();sn++){const Gt=dt.getSection(sn);Vt+=Bf(dt.getCharCode(sn),Gt,jt,ct,wt,Pt)}return Vt/Math.max(1,Math.ceil(Vt/ft))}(pe,Le,Ae,$e,rt,Fe),et=pe.text.indexOf("")>=0;let at=0;for(let dt=0;dt<pe.length();dt++){const wt=pe.getSection(dt),ft=pe.getCharCode(dt);if(qh[ft]||(at+=Bf(ft,wt,$e,rt,Le,Fe)),dt<pe.length()-1){const jt=!((Ne=ft)<11904||!(mt["Bopomofo Extended"](Ne)||mt.Bopomofo(Ne)||mt["CJK Compatibility Forms"](Ne)||mt["CJK Compatibility Ideographs"](Ne)||mt["CJK Compatibility"](Ne)||mt["CJK Radicals Supplement"](Ne)||mt["CJK Strokes"](Ne)||mt["CJK Symbols and Punctuation"](Ne)||mt["CJK Unified Ideographs Extension A"](Ne)||mt["CJK Unified Ideographs"](Ne)||mt["Enclosed CJK Letters and Months"](Ne)||mt["Halfwidth and Fullwidth Forms"](Ne)||mt.Hiragana(Ne)||mt["Ideographic Description Characters"](Ne)||mt["Kangxi Radicals"](Ne)||mt["Katakana Phonetic Extensions"](Ne)||mt.Katakana(Ne)||mt["Vertical Forms"](Ne)||mt["Yi Radicals"](Ne)||mt["Yi Syllables"](Ne)));(Ix[ft]||jt||wt.imageName)&&We.push(Uf(dt+1,at,He,We,kx(ft,pe.getCharCode(dt+1),jt&&et),!1))}}var Ne;return Nf(Uf(pe.length(),at,He,We,0,!0))}(O,b,d,e,a,L),{processBidirectionalText:de,processStyledBidirectionalText:ee}=S;if(de&&O.sections.length===1){const pe=de(O.toString(),Q);for(const Le of pe){const Ae=new J1;Ae.text=Le,Ae.sections=O.sections;for(let $e=0;$e<Le.length;$e++)Ae.sectionIndex.push(0);Z.push(Ae)}}else if(ee){const pe=ee(O.text,O.sectionIndex,Q);for(const Le of pe){const Ae=new J1;Ae.text=Le[0],Ae.sectionIndex=Le[1],Ae.sections=O.sections,Z.push(Ae)}}else Z=function(pe,Le){const Ae=[],$e=pe.text;let rt=0;for(const Fe of Le)Ae.push(pe.substring(rt,Fe)),rt=Fe;return rt<$e.length&&Ae.push(pe.substring(rt,$e.length)),Ae}(O,Q);const ce=[],fe={positionedLines:ce,text:O.toString(),top:M[1],bottom:M[1],left:M[0],right:M[0],writingMode:A,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(pe,Le,Ae,$e,rt,Fe,We,He,et,at,Ne,dt){let wt=0,ft=0,jt=0;const ct=He==="right"?1:He==="left"?0:.5;let Pt=!1;for(const $t of rt){const Zt=$t.getSections();for(const bn of Zt){if(bn.imageName)continue;const Mn=Le[bn.fontStack];if(Mn&&(Pt=Mn.ascender!==void 0&&Mn.descender!==void 0,!Pt))break}if(!Pt)break}let Vt=0;for(const $t of rt){$t.trim();const Zt=$t.getMaxScale(),bn=(Zt-1)*Cr,Mn={positionedGlyphs:[],lineOffset:0};pe.positionedLines[Vt]=Mn;const Cn=Mn.positionedGlyphs;let Tn=0;if(!$t.length()){ft+=Fe,++Vt;continue}let Fn=0,$n=0;for(let En=0;En<$t.length();En++){const ur=$t.getSection(En),rr=$t.getSectionIndex(En),On=$t.getCharCode(En);let ln=ur.scale,ir=null,Pn=null,Qr=null,or=Cr,Pr=0;const wr=!(et===Ni.horizontal||!Ne&&!Gu(On)||Ne&&(qh[On]||(sn=On,mt.Arabic(sn)||mt["Arabic Supplement"](sn)||mt["Arabic Extended-A"](sn)||mt["Arabic Presentation Forms-A"](sn)||mt["Arabic Presentation Forms-B"](sn))));if(ur.imageName){const ei=$e[ur.imageName];if(!ei)continue;Qr=ur.imageName,pe.iconsInText=pe.iconsInText||!0,Pn=ei.paddedRect;const br=ei.displaySize;ln=ln*Cr/dt,ir={width:br[0],height:br[1],left:li,top:-Df,advance:wr?br[1]:br[0],localGlyph:!1},Pr=Pt?-ir.height*ln:Ff+Zt*Cr-br[1]*ln,or=ir.advance;const Vo=(wr?br[0]:br[1])*ln-Cr*Zt;Vo>0&&Vo>Tn&&(Tn=Vo)}else{const ei=Ae[ur.fontStack];if(!ei)continue;ei[On]&&(Pn=ei[On]);const br=Le[ur.fontStack];if(!br)continue;const Vo=br.glyphs[On];if(!Vo)continue;if(ir=Vo.metrics,or=On!==8203?Cr:0,Pt){const oc=br.ascender!==void 0?Math.abs(br.ascender):0,M0=br.descender!==void 0?Math.abs(br.descender):0,C0=(oc+M0)*ln;Fn<C0&&(Fn=C0,$n=(oc-M0)/2*ln),Pr=-oc*ln}else Pr=Ff+(Zt-ln)*Cr}wr?(pe.verticalizable=!0,Cn.push({glyph:On,imageName:Qr,x:wt,y:ft+Pr,vertical:wr,scale:ln,localGlyph:ir.localGlyph,fontStack:ur.fontStack,sectionIndex:rr,metrics:ir,rect:Pn}),wt+=or*ln+at):(Cn.push({glyph:On,imageName:Qr,x:wt,y:ft+Pr,vertical:wr,scale:ln,localGlyph:ir.localGlyph,fontStack:ur.fontStack,sectionIndex:rr,metrics:ir,rect:Pn}),wt+=ir.advance*ln+at)}Cn.length!==0&&(jt=Math.max(wt-at,jt),Pt?jf(Cn,ct,Tn,$n,Fe*Zt/2):jf(Cn,ct,Tn,0,Fe/2)),wt=0;const nr=Fe*Zt+Tn;Mn.lineOffset=Math.max(Tn,bn),ft+=nr,++Vt}var sn;const Gt=ft,{horizontalAlign:Lt,verticalAlign:An}=Jd(We);(function($t,Zt,bn,Mn,Cn,Tn){const Fn=(Zt-bn)*Cn,$n=-Tn*Mn;for(const nr of $t)for(const En of nr.positionedGlyphs)En.x+=Fn,En.y+=$n})(pe.positionedLines,ct,Lt,An,jt,Gt),pe.top+=-An*Gt,pe.bottom=pe.top+Gt,pe.left+=-Lt*jt,pe.right=pe.left+jt,pe.hasBaseline=Pt}(fe,e,r,a,Z,m,y,w,A,b,I,D),!function(pe){for(const Le of pe)if(Le.positionedGlyphs.length!==0)return!1;return!0}(ce)&&fe}const qh={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Ix={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Bf(n,e,r,a,c,d){if(e.imageName){const m=a[e.imageName];return m?m.displaySize[0]*e.scale*Cr/d+c:0}{const m=r[e.fontStack],y=m&&m.glyphs[n];return y?y.metrics.advance*e.scale+c:0}}function Of(n,e,r,a){const c=Math.pow(n-e,2);return a?n<e?c/2:2*c:c+Math.abs(r)*r}function kx(n,e,r){let a=0;return n===10&&(a-=1e4),r&&(a+=150),n!==40&&n!==65288||(a+=50),e!==41&&e!==65289||(a+=50),a}function Uf(n,e,r,a,c,d){let m=null,y=Of(e,r,c,d);for(const w of a){const b=Of(e-w.x,r,c,d)+w.badness;b<=y&&(m=w,y=b)}return{index:n,x:e,priorBreak:m,badness:y}}function Nf(n){return n?Nf(n.priorBreak).concat(n.index):[]}function Jd(n){let e=.5,r=.5;switch(n){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(n){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0}return{horizontalAlign:e,verticalAlign:r}}function jf(n,e,r,a,c){if(!(e||r||a||c))return;const d=n.length-1,m=n[d],y=(m.x+m.metrics.advance*m.scale)*e;for(let w=0;w<=d;w++)n[w].x-=y,n[w].y+=r+a+c}function zx(n,e,r){const{horizontalAlign:a,verticalAlign:c}=Jd(r),d=e[0]-n.displaySize[0]*a,m=e[1]-n.displaySize[1]*c;return{image:n,top:m,bottom:m+n.displaySize[1],left:d,right:d+n.displaySize[0]}}function Vf(n,e,r,a,c,d){const m=n.image;let y;if(m.content){const Z=m.content,Q=m.pixelRatio||1;y=[Z[0]/Q,Z[1]/Q,m.displaySize[0]-Z[2]/Q,m.displaySize[1]-Z[3]/Q]}const w=e.left*d,b=e.right*d;let M,A,I,L;r==="width"||r==="both"?(L=c[0]+w-a[3],A=c[0]+b+a[1]):(L=c[0]+(w+b-m.displaySize[0])/2,A=L+m.displaySize[0]);const D=e.top*d,O=e.bottom*d;return r==="height"||r==="both"?(M=c[1]+D-a[0],I=c[1]+O+a[2]):(M=c[1]+(D+O-m.displaySize[1])/2,I=M+m.displaySize[1]),{image:m,top:M,right:A,bottom:I,left:L,collisionPadding:y}}class Ns extends Me{constructor(e,r,a,c,d){super(e,r),this.angle=c,this.z=a,d!==void 0&&(this.segment=d)}clone(){return new Ns(this.x,this.y,this.z,this.angle,this.segment)}}function Gf(n,e,r,a,c){if(e.segment===void 0)return!0;let d=e,m=e.segment+1,y=0;for(;y>-r/2;){if(m--,m<0)return!1;y-=n[m].dist(d),d=n[m]}y+=n[m].dist(n[m+1]),m++;const w=[];let b=0;for(;y<r/2;){const M=n[m],A=n[m+1];if(!A)return!1;let I=n[m-1].angleTo(M)-M.angleTo(A);for(I=Math.abs((I+3*Math.PI)%(2*Math.PI)-Math.PI),w.push({distance:y,angleDelta:I}),b+=I;y-w[0].distance>a;)b-=w.shift().angleDelta;if(b>c)return!1;m++,y+=M.dist(A)}return!0}function $f(n){let e=0;for(let r=0;r<n.length-1;r++)e+=n[r].dist(n[r+1]);return e}function Zf(n,e,r){return n?.6*e*r:0}function qf(n,e){return Math.max(n?n.right-n.left:0,e?e.right-e.left:0)}function Lx(n,e,r,a,c,d){const m=Zf(r,c,d),y=qf(r,a)*d;let w=0;const b=$f(n)/2;for(let M=0;M<n.length-1;M++){const A=n[M],I=n[M+1],L=A.dist(I);if(w+L>b){const D=(b-w)/L,O=rn(A.x,I.x,D),Z=rn(A.y,I.y,D),Q=new Ns(O,Z,0,I.angleTo(A),M);return!m||Gf(n,Q,y,m,e)?Q:void 0}w+=L}}function Dx(n,e,r,a,c,d,m,y,w){const b=Zf(a,d,m),M=qf(a,c),A=M*m,I=n[0].x===0||n[0].x===w||n[0].y===0||n[0].y===w;return e-A<e/4&&(e=A+e/4),Wf(n,I?e/2*y%e:(M/2+2*d)*m*y%e,e,b,r,A,I,!1,w)}function Wf(n,e,r,a,c,d,m,y,w){const b=d/2,M=$f(n);let A=0,I=e-r,L=[];for(let D=0;D<n.length-1;D++){const O=n[D],Z=n[D+1],Q=O.dist(Z),de=Z.angleTo(O);for(;I+r<A+Q;){I+=r;const ee=(I-A)/Q,ce=rn(O.x,Z.x,ee),fe=rn(O.y,Z.y,ee);if(ce>=0&&ce<w&&fe>=0&&fe<w&&I-b>=0&&I+b<=M){const pe=new Ns(ce,fe,0,de,D);pe._round(),a&&!Gf(n,pe,d,a,c)||L.push(pe)}}A+=Q}return y||L.length||m||(L=Wf(n,A/2,r,a,c,d,m,!0,w)),L}function Hf(n,e,r,a,c){const d=[];for(let m=0;m<n.length;m++){const y=n[m];let w;for(let b=0;b<y.length-1;b++){let M=y[b],A=y[b+1];M.x<e&&A.x<e||(M.x<e?M=new Me(e,M.y+(e-M.x)/(A.x-M.x)*(A.y-M.y))._round():A.x<e&&(A=new Me(e,M.y+(e-M.x)/(A.x-M.x)*(A.y-M.y))._round()),M.y<r&&A.y<r||(M.y<r?M=new Me(M.x+(r-M.y)/(A.y-M.y)*(A.x-M.x),r)._round():A.y<r&&(A=new Me(M.x+(r-M.y)/(A.y-M.y)*(A.x-M.x),r)._round()),M.x>=a&&A.x>=a||(M.x>=a?M=new Me(a,M.y+(a-M.x)/(A.x-M.x)*(A.y-M.y))._round():A.x>=a&&(A=new Me(a,M.y+(a-M.x)/(A.x-M.x)*(A.y-M.y))._round()),M.y>=c&&A.y>=c||(M.y>=c?M=new Me(M.x+(c-M.y)/(A.y-M.y)*(A.x-M.x),c)._round():A.y>=c&&(A=new Me(M.x+(c-M.y)/(A.y-M.y)*(A.x-M.x),c)._round()),w&&M.equals(w[w.length-1])||(w=[M],d.push(w)),w.push(A)))))}}return d}vt(Ns,"Anchor");const g0=1e20;function Xf(n,e,r,a,c,d,m,y,w){for(let b=e;b<e+a;b++)Kf(n,r*d+b,d,c,m,y,w);for(let b=r;b<r+c;b++)Kf(n,b*d+e,1,a,m,y,w)}function Kf(n,e,r,a,c,d,m){d[0]=0,m[0]=-g0,m[1]=g0,c[0]=n[e];for(let y=1,w=0,b=0;y<a;y++){c[y]=n[e+y*r];const M=y*y;do{const A=d[w];b=(c[y]-c[A]+M-A*A)/(y-A)/2}while(b<=m[w]&&--w>-1);w++,d[w]=y,m[w]=b,m[w+1]=g0}for(let y=0,w=0;y<a;y++){for(;m[w+1]<y;)w++;const b=d[w],M=y-b;n[e+y*r]=c[b]+M*M}}const No=2,Qd={none:0,ideographs:1,all:2};class Q1{constructor(e,r,a){this.requestManager=e,this.localGlyphMode=r,this.localFontFamily=a,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(e){this.url=e}getGlyphs(e,r){const a=[];for(const c in e)for(const d of e[c])a.push({stack:c,id:d});Tt(a,({stack:c,id:d},m)=>{let y=this.entries[c];y||(y=this.entries[c]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let w=y.glyphs[d];if(w!==void 0)return void m(null,{stack:c,id:d,glyph:w});if(w=this._tinySDF(y,c,d),w)return y.glyphs[d]=w,void m(null,{stack:c,id:d,glyph:w});const b=Math.floor(d/256);if(256*b>65535)return void m(new Error("glyphs > 65535 not supported"));if(y.ranges[b])return void m(null,{stack:c,id:d,glyph:w});let M=y.requests[b];M||(M=y.requests[b]=[],Q1.loadGlyphRange(c,b,this.url,this.requestManager,(A,I)=>{if(I){y.ascender=I.ascender,y.descender=I.descender;for(const L in I.glyphs)this._doesCharSupportLocalGlyph(+L)||(y.glyphs[+L]=I.glyphs[+L]);y.ranges[b]=!0}for(const L of M)L(A,I);delete y.requests[b]})),M.push((A,I)=>{A?m(A):I&&m(null,{stack:c,id:d,glyph:I.glyphs[d]||null})})},(c,d)=>{if(c)r(c);else if(d){const m={};for(const{stack:y,id:w,glyph:b}of d)m[y]===void 0&&(m[y]={}),m[y].glyphs===void 0&&(m[y].glyphs={}),m[y].glyphs[w]=b&&{id:b.id,bitmap:b.bitmap.clone(),metrics:b.metrics},m[y].ascender=this.entries[y].ascender,m[y].descender=this.entries[y].descender;r(null,m)}})}_doesCharSupportLocalGlyph(e){return this.localGlyphMode!==Qd.none&&(this.localGlyphMode===Qd.all?!!this.localFontFamily:!!this.localFontFamily&&(mt["CJK Unified Ideographs"](e)||mt["Hangul Syllables"](e)||mt.Hiragana(e)||mt.Katakana(e)||mt["CJK Symbols and Punctuation"](e)))}_tinySDF(e,r,a){const c=this.localFontFamily;if(!c||!this._doesCharSupportLocalGlyph(a))return;let d=e.tinySDF;if(!d){let O="400";/bold/i.test(r)?O="900":/medium/i.test(r)?O="500":/light/i.test(r)&&(O="200"),d=e.tinySDF=new Q1.TinySDF({fontFamily:c,fontWeight:O,fontSize:24*No,buffer:3*No,radius:8*No}),d.fontWeight=O}if(this.localGlyphs[d.fontWeight][a])return this.localGlyphs[d.fontWeight][a];const m=String.fromCharCode(a),{data:y,width:w,height:b,glyphWidth:M,glyphHeight:A,glyphLeft:I,glyphTop:L,glyphAdvance:D}=d.draw(m);return this.localGlyphs[d.fontWeight][a]={id:a,bitmap:new Os({width:w,height:b},y),metrics:{width:M/No,height:A/No,left:I/No,top:L/No-27,advance:D/No,localGlyph:!0}}}}Q1.loadGlyphRange=function(n,e,r,a,c){const d=256*e,m=d+255,y=a.transformRequest(a.normalizeGlyphsURL(r).replace("{fontstack}",n).replace("{range}",`${d}-${m}`),To.Glyphs);Qi(y,(w,b)=>{if(w)c(w);else if(b){const M={},A=function(I){return new Zh(I).readFields(Cx,{})}(b);for(const I of A.glyphs)M[I.id]=I;c(null,{glyphs:M,ascender:A.ascender,descender:A.descender})}})},Q1.TinySDF=class{constructor({fontSize:n=24,buffer:e=3,radius:r=8,cutoff:a=.25,fontFamily:c="sans-serif",fontWeight:d="normal",fontStyle:m="normal"}={}){this.buffer=e,this.cutoff=a,this.radius=r;const y=this.size=n+4*e,w=this._createCanvas(y),b=this.ctx=w.getContext("2d",{willReadFrequently:!0});b.font=`${m} ${d} ${n}px ${c}`,b.textBaseline="alphabetic",b.textAlign="left",b.fillStyle="black",this.gridOuter=new Float64Array(y*y),this.gridInner=new Float64Array(y*y),this.f=new Float64Array(y),this.z=new Float64Array(y+1),this.v=new Uint16Array(y)}_createCanvas(n){const e=document.createElement("canvas");return e.width=e.height=n,e}draw(n){const{width:e,actualBoundingBoxAscent:r,actualBoundingBoxDescent:a,actualBoundingBoxLeft:c,actualBoundingBoxRight:d}=this.ctx.measureText(n),m=Math.ceil(r),y=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(d-c))),w=Math.min(this.size-this.buffer,m+Math.ceil(a)),b=y+2*this.buffer,M=w+2*this.buffer,A=Math.max(b*M,0),I=new Uint8ClampedArray(A),L={data:I,width:b,height:M,glyphWidth:y,glyphHeight:w,glyphTop:m,glyphLeft:0,glyphAdvance:e};if(y===0||w===0)return L;const{ctx:D,buffer:O,gridInner:Z,gridOuter:Q}=this;D.clearRect(O,O,y,w),D.fillText(n,O,O+m);const de=D.getImageData(O,O,y,w);Q.fill(g0,0,A),Z.fill(0,0,A);for(let ee=0;ee<w;ee++)for(let ce=0;ce<y;ce++){const fe=de.data[4*(ee*y+ce)+3]/255;if(fe===0)continue;const pe=(ee+O)*b+ce+O;if(fe===1)Q[pe]=0,Z[pe]=g0;else{const Le=.5-fe;Q[pe]=Le>0?Le*Le:0,Z[pe]=Le<0?Le*Le:0}}Xf(Q,0,0,b,M,b,this.f,this.v,this.z),Xf(Z,O,O,y,w,b,this.f,this.v,this.z);for(let ee=0;ee<A;ee++){const ce=Math.sqrt(Q[ee])-Math.sqrt(Z[ee]);I[ee]=Math.round(255-255*(ce/this.radius+this.cutoff))}return L}};const ec=li;function Yf(n,e,r,a){const c=[],d=n.image,m=d.pixelRatio,y=d.paddedRect.w-2*ec,w=d.paddedRect.h-2*ec,b=n.right-n.left,M=n.bottom-n.top,A=d.stretchX||[[0,y]],I=d.stretchY||[[0,w]],L=(Fe,We)=>Fe+We[1]-We[0],D=A.reduce(L,0),O=I.reduce(L,0),Z=y-D,Q=w-O;let de=0,ee=D,ce=0,fe=O,pe=0,Le=Z,Ae=0,$e=Q;if(d.content&&a){const Fe=d.content;de=Wh(A,0,Fe[0]),ce=Wh(I,0,Fe[1]),ee=Wh(A,Fe[0],Fe[2]),fe=Wh(I,Fe[1],Fe[3]),pe=Fe[0]-de,Ae=Fe[1]-ce,Le=Fe[2]-Fe[0]-ee,$e=Fe[3]-Fe[1]-fe}const rt=(Fe,We,He,et)=>{const at=Hh(Fe.stretch-de,ee,b,n.left),Ne=Xh(Fe.fixed-pe,Le,Fe.stretch,D),dt=Hh(We.stretch-ce,fe,M,n.top),wt=Xh(We.fixed-Ae,$e,We.stretch,O),ft=Hh(He.stretch-de,ee,b,n.left),jt=Xh(He.fixed-pe,Le,He.stretch,D),ct=Hh(et.stretch-ce,fe,M,n.top),Pt=Xh(et.fixed-Ae,$e,et.stretch,O),Vt=new Me(at,dt),sn=new Me(ft,dt),Gt=new Me(ft,ct),Lt=new Me(at,ct),An=new Me(Ne/m,wt/m),$t=new Me(jt/m,Pt/m),Zt=e*Math.PI/180;if(Zt){const Cn=Math.sin(Zt),Tn=Math.cos(Zt),Fn=[Tn,-Cn,Cn,Tn];Vt._matMult(Fn),sn._matMult(Fn),Lt._matMult(Fn),Gt._matMult(Fn)}const bn=Fe.stretch+Fe.fixed,Mn=We.stretch+We.fixed;return{tl:Vt,tr:sn,bl:Lt,br:Gt,tex:{x:d.paddedRect.x+ec+bn,y:d.paddedRect.y+ec+Mn,w:He.stretch+He.fixed-bn,h:et.stretch+et.fixed-Mn},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:An,pixelOffsetBR:$t,minFontScaleX:Le/m/b,minFontScaleY:$e/m/M,isSDF:r}};if(a&&(d.stretchX||d.stretchY)){const Fe=Jf(A,Z,D),We=Jf(I,Q,O);for(let He=0;He<Fe.length-1;He++){const et=Fe[He],at=Fe[He+1];for(let Ne=0;Ne<We.length-1;Ne++)c.push(rt(et,We[Ne],at,We[Ne+1]))}}else c.push(rt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:y+1},{fixed:0,stretch:w+1}));return c}function Wh(n,e,r){let a=0;for(const c of n)a+=Math.max(e,Math.min(r,c[1]))-Math.max(e,Math.min(r,c[0]));return a}function Jf(n,e,r){const a=[{fixed:-ec,stretch:0}];for(const[c,d]of n){const m=a[a.length-1];a.push({fixed:c-m.stretch,stretch:m.stretch}),a.push({fixed:c-m.stretch,stretch:m.stretch+(d-c)})}return a.push({fixed:e+ec,stretch:r}),a}function Hh(n,e,r,a){return n/e*r+a}function Xh(n,e,r,a){return n-e*r/a}function Rx(n,e,r,a){const c=e+n.positionedLines[a].lineOffset;return a===0?r+c/2:r+(c+(e+n.positionedLines[a-1].lineOffset))/2}class Fx{constructor(e=[],r=Bx){if(this.data=e,this.length=this.data.length,this.compare=r,this.length>0)for(let a=(this.length>>1)-1;a>=0;a--)this._down(a)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],r=this.data.pop();return this.length--,this.length>0&&(this.data[0]=r,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:r,compare:a}=this,c=r[e];for(;e>0;){const d=e-1>>1,m=r[d];if(a(c,m)>=0)break;r[e]=m,e=d}r[e]=c}_down(e){const{data:r,compare:a}=this,c=this.length>>1,d=r[e];for(;e<c;){let m=1+(e<<1),y=r[m];const w=m+1;if(w<this.length&&a(r[w],y)<0&&(m=w,y=r[w]),a(y,d)>=0)break;r[e]=y,e=m}r[e]=d}}function Bx(n,e){return n<e?-1:n>e?1:0}function Ox(n,e=1,r=!1){let a=1/0,c=1/0,d=-1/0,m=-1/0;const y=n[0];for(let L=0;L<y.length;L++){const D=y[L];(!L||D.x<a)&&(a=D.x),(!L||D.y<c)&&(c=D.y),(!L||D.x>d)&&(d=D.x),(!L||D.y>m)&&(m=D.y)}const w=Math.min(d-a,m-c);let b=w/2;const M=new Fx([],Ux);if(w===0)return new Me(a,c);for(let L=a;L<d;L+=w)for(let D=c;D<m;D+=w)M.push(new tc(L+b,D+b,b,n));let A=function(L){let D=0,O=0,Z=0;const Q=L[0];for(let de=0,ee=Q.length,ce=ee-1;de<ee;ce=de++){const fe=Q[de],pe=Q[ce],Le=fe.x*pe.y-pe.x*fe.y;O+=(fe.x+pe.x)*Le,Z+=(fe.y+pe.y)*Le,D+=3*Le}return new tc(O/D,Z/D,0,L)}(n),I=M.length;for(;M.length;){const L=M.pop();(L.d>A.d||!A.d)&&(A=L,r&&console.log("found best %d after %d probes",Math.round(1e4*L.d)/1e4,I)),L.max-A.d<=e||(b=L.h/2,M.push(new tc(L.p.x-b,L.p.y-b,b,n)),M.push(new tc(L.p.x+b,L.p.y-b,b,n)),M.push(new tc(L.p.x-b,L.p.y+b,b,n)),M.push(new tc(L.p.x+b,L.p.y+b,b,n)),I+=4)}return r&&(console.log(`num probes: ${I}`),console.log(`best distance: ${A.d}`)),A.p}function Ux(n,e){return e.max-n.max}class tc{constructor(e,r,a,c){this.p=new Me(e,r),this.h=a,this.d=function(d,m){let y=!1,w=1/0;for(let b=0;b<m.length;b++){const M=m[b];for(let A=0,I=M.length,L=I-1;A<I;L=A++){const D=M[A],O=M[L];D.y>d.y!=O.y>d.y&&d.x<(O.x-D.x)*(d.y-D.y)/(O.y-D.y)+D.x&&(y=!y),w=Math.min(w,q7(d,D,O))}}return(y?1:-1)*Math.sqrt(w)}(this.p,c),this.max=this.d+this.h*Math.SQRT2}}const nc=7,e4=Number.POSITIVE_INFINITY,Nx=Math.sqrt(2);function Qf(n,[e,r]){let a=0,c=0;if(r===e4){e<0&&(e=0);const d=e/Nx;switch(n){case"top-right":case"top-left":c=d-nc;break;case"bottom-right":case"bottom-left":c=-d+nc;break;case"bottom":c=-e+nc;break;case"top":c=e-nc}switch(n){case"top-right":case"bottom-right":a=-d;break;case"top-left":case"bottom-left":a=d;break;case"left":a=e;break;case"right":a=-e}}else{switch(e=Math.abs(e),r=Math.abs(r),n){case"top-right":case"top-left":case"top":c=r-nc;break;case"bottom-right":case"bottom-left":case"bottom":c=-r+nc}switch(n){case"top-right":case"bottom-right":case"right":a=-e;break;case"top-left":case"bottom-left":case"left":a=e}}return[a,c]}function jx(n,e,r,a,c,d,m,y,w,b){n.createArrays(),n.tilePixelRatio=kt/(512*n.overscaling),n.compareText={},n.iconsNeedLinear=!1;const M=n.layers[0].layout,A=n.layers[0]._unevaluatedLayout._values,I={};if(n.textSizeData.kind==="composite"){const{minZoom:O,maxZoom:Z}=n.textSizeData;I.compositeTextSizes=[A["text-size"].possiblyEvaluate(new C(O),y),A["text-size"].possiblyEvaluate(new C(Z),y)]}if(n.iconSizeData.kind==="composite"){const{minZoom:O,maxZoom:Z}=n.iconSizeData;I.compositeIconSizes=[A["icon-size"].possiblyEvaluate(new C(O),y),A["icon-size"].possiblyEvaluate(new C(Z),y)]}I.layoutTextSize=A["text-size"].possiblyEvaluate(new C(w+1),y),I.layoutIconSize=A["icon-size"].possiblyEvaluate(new C(w+1),y),I.textMaxSize=A["text-size"].possiblyEvaluate(new C(18),y);const L=M.get("text-rotation-alignment")==="map"&&M.get("symbol-placement")!=="point",D=M.get("text-size");for(const O of n.features){const Z=M.get("text-font").evaluate(O,{},y).join(","),Q=D.evaluate(O,{},y),de=I.layoutTextSize.evaluate(O,{},y),ee=(I.layoutIconSize.evaluate(O,{},y),{horizontal:{},vertical:void 0}),ce=O.text;let fe,pe=[0,0];if(ce){const $e=ce.toString(),rt=M.get("text-letter-spacing").evaluate(O,{},y)*Cr,Fe=M.get("text-line-height").evaluate(O,{},y)*Cr,We=cd($e)?rt:0,He=M.get("text-anchor").evaluate(O,{},y),et=M.get("text-variable-anchor");if(!et){const ft=M.get("text-radial-offset").evaluate(O,{},y);pe=ft?Qf(He,[ft*Cr,e4]):M.get("text-offset").evaluate(O,{},y).map(jt=>jt*Cr)}let at=L?"center":M.get("text-justify").evaluate(O,{},y);const Ne=M.get("symbol-placement")==="point",dt=Ne?M.get("text-max-width").evaluate(O,{},y)*Cr:1/0,wt=ft=>{n.allowVerticalPlacement&&Vu($e)&&(ee.vertical=Yd(ce,e,r,c,Z,dt,Fe,He,ft,We,pe,Ni.vertical,!0,de,Q))};if(!L&&et){const ft=at==="auto"?et.map(ct=>t4(ct)):[at];let jt=!1;for(let ct=0;ct<ft.length;ct++){const Pt=ft[ct];if(!ee.horizontal[Pt])if(jt)ee.horizontal[Pt]=ee.horizontal[0];else{const Vt=Yd(ce,e,r,c,Z,dt,Fe,"center",Pt,We,pe,Ni.horizontal,!1,de,Q);Vt&&(ee.horizontal[Pt]=Vt,jt=Vt.positionedLines.length===1)}}wt("left")}else{if(at==="auto"&&(at=t4(He)),Ne||M.get("text-writing-mode").indexOf("horizontal")>=0||!Vu($e)){const ft=Yd(ce,e,r,c,Z,dt,Fe,He,at,We,pe,Ni.horizontal,!1,de,Q);ft&&(ee.horizontal[at]=ft)}wt(Ne?"left":at)}}let Le=!1;if(O.icon&&O.icon.name){const $e=a[O.icon.name];$e&&(fe=zx(c[O.icon.name],M.get("icon-offset").evaluate(O,{},y),M.get("icon-anchor").evaluate(O,{},y)),Le=$e.sdf,n.sdfIcons===void 0?n.sdfIcons=$e.sdf:n.sdfIcons!==$e.sdf&&dn("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),($e.pixelRatio!==n.pixelRatio||M.get("icon-rotate").constantOr(1)!==0)&&(n.iconsNeedLinear=!0))}const Ae=t8(ee.horizontal)||ee.vertical;n.iconsInText||(n.iconsInText=!!Ae&&Ae.iconsInText),(Ae||fe)&&Vx(n,O,ee,fe,a,I,de,0,pe,Le,m,y,b)}d&&n.generateCollisionDebugBuffers(w,n.collisionBoxArray)}function t4(n){switch(n){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Vx(n,e,r,a,c,d,m,y,w,b,M,A,I){let L=d.textMaxSize.evaluate(e,{},A);L===void 0&&(L=m);const D=n.layers[0].layout,O=D.get("icon-offset").evaluate(e,{},A),Z=t8(r.horizontal)||r.vertical,Q=I.name==="globe",de=Cr,ee=m/de,ce=n.tilePixelRatio*L/de,fe=(He=n.overscaling,n.zoom>18&&He>2&&(He>>=1),Math.max(kt/(512*He),1)*D.get("symbol-spacing")),pe=D.get("text-padding")*n.tilePixelRatio,Le=D.get("icon-padding")*n.tilePixelRatio,Ae=bt(D.get("text-max-angle")),$e=D.get("text-rotation-alignment")==="map"&&D.get("symbol-placement")!=="point",rt=D.get("icon-rotation-alignment")==="map"&&D.get("symbol-placement")!=="point",Fe=D.get("symbol-placement"),We=fe/2;var He;const et=D.get("icon-text-fit");let at;a&&et!=="none"&&(n.allowVerticalPlacement&&r.vertical&&(at=Vf(a,r.vertical,et,D.get("icon-text-fit-padding"),O,ee)),Z&&(a=Vf(a,Z,et,D.get("icon-text-fit-padding"),O,ee)));const Ne=(dt,wt,ft)=>{if(wt.x<0||wt.x>=kt||wt.y<0||wt.y>=kt)return;let jt=null;if(Q){const{x:ct,y:Pt,z:Vt}=I.projectTilePoint(wt.x,wt.y,ft);jt={anchor:new Ns(ct,Pt,Vt,0,void 0),up:I.upVector(ft,wt.x,wt.y)}}(function(ct,Pt,Vt,sn,Gt,Lt,An,$t,Zt,bn,Mn,Cn,Tn,Fn,$n,nr,En,ur,rr,On,ln,ir,Pn,Qr,or){const Pr=ct.addToLineVertexArray(Pt,sn);let wr,ei,br,Vo,oc,M0,C0,D8=0,R8=0,F8=0,B8=0,_4=-1,g4=-1;const ds={};let O8=dd("");const Vl=Vt?Vt.anchor:Pt;let y4=0,v4=0;if(Zt._unevaluatedLayout.getValue("text-radial-offset")===void 0?[y4,v4]=Zt.layout.get("text-offset").evaluate(ln,{},or).map(Si=>Si*Cr):(y4=Zt.layout.get("text-radial-offset").evaluate(ln,{},or)*Cr,v4=e4),ct.allowVerticalPlacement&&Gt.vertical){const Si=Gt.vertical;if($n)M0=n4(Si),$t&&(C0=n4($t));else{const Mi=Zt.layout.get("text-rotate").evaluate(ln,{},or)+90;br=Kh(bn,Vl,Pt,Mn,Cn,Tn,Si,Fn,Mi,nr),$t&&(Vo=Kh(bn,Vl,Pt,Mn,Cn,Tn,$t,ur,Mi))}}if(Lt){const Si=Zt.layout.get("icon-rotate").evaluate(ln,{},or),Mi=Zt.layout.get("icon-text-fit")!=="none",P0=Yf(Lt,Si,Pn,Mi),w4=$t?Yf($t,Si,Pn,Mi):void 0;ei=Kh(bn,Vl,Pt,Mn,Cn,Tn,Lt,ur,Si),D8=4*P0.length;const U8=ct.iconSizeData;let Gl=null;U8.kind==="source"?(Gl=[Uo*Zt.layout.get("icon-size").evaluate(ln,{},or)],Gl[0]>Sa&&dn(`${ct.layerIds[0]}: Value for "icon-size" is >= ${y0}. Reduce your "icon-size".`)):U8.kind==="composite"&&(Gl=[Uo*ir.compositeIconSizes[0].evaluate(ln,{},or),Uo*ir.compositeIconSizes[1].evaluate(ln,{},or)],(Gl[0]>Sa||Gl[1]>Sa)&&dn(`${ct.layerIds[0]}: Value for "icon-size" is >= ${y0}. Reduce your "icon-size".`)),ct.addSymbols(ct.icon,P0,Gl,On,rr,ln,!1,Vt,Pt,Pr.lineStartIndex,Pr.lineLength,-1,Qr,or),_4=ct.icon.placedSymbolArray.length-1,w4&&(R8=4*w4.length,ct.addSymbols(ct.icon,w4,Gl,On,rr,ln,Ni.vertical,Vt,Pt,Pr.lineStartIndex,Pr.lineLength,-1,Qr,or),g4=ct.icon.placedSymbolArray.length-1)}for(const Si in Gt.horizontal){const Mi=Gt.horizontal[Si];wr||(O8=dd(Mi.text),$n?oc=n4(Mi):wr=Kh(bn,Vl,Pt,Mn,Cn,Tn,Mi,Fn,Zt.layout.get("text-rotate").evaluate(ln,{},or),nr));const P0=Mi.positionedLines.length===1;if(F8+=e8(ct,Vt,Pt,Mi,An,Zt,$n,ln,nr,Pr,Gt.vertical?Ni.horizontal:Ni.horizontalOnly,P0?Object.keys(Gt.horizontal):[Si],ds,_4,ir,Qr,or),P0)break}Gt.vertical&&(B8+=e8(ct,Vt,Pt,Gt.vertical,An,Zt,$n,ln,nr,Pr,Ni.vertical,["vertical"],ds,g4,ir,Qr,or));let ka=-1;const x4=(Si,Mi)=>Si?Math.max(Si,Mi):Mi;ka=x4(oc,ka),ka=x4(M0,ka),ka=x4(C0,ka);const _w=ka>-1?1:0;ct.glyphOffsetArray.length>=Ca.MAX_GLYPHS&&dn("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ln.sortKey!==void 0&&ct.addToSortKeyRanges(ct.symbolInstances.length,ln.sortKey),ct.symbolInstances.emplaceBack(Vl.x,Vl.y,Vl.z,Pt.x,Pt.y,ds.right>=0?ds.right:-1,ds.center>=0?ds.center:-1,ds.left>=0?ds.left:-1,ds.vertical>=0?ds.vertical:-1,_4,g4,O8,wr!==void 0?wr:ct.collisionBoxArray.length,wr!==void 0?wr+1:ct.collisionBoxArray.length,br!==void 0?br:ct.collisionBoxArray.length,br!==void 0?br+1:ct.collisionBoxArray.length,ei!==void 0?ei:ct.collisionBoxArray.length,ei!==void 0?ei+1:ct.collisionBoxArray.length,Vo||ct.collisionBoxArray.length,Vo?Vo+1:ct.collisionBoxArray.length,Mn,F8,B8,D8,R8,_w,0,y4,v4,ka)})(n,wt,jt,dt,r,a,c,at,n.layers[0],n.collisionBoxArray,e.index,e.sourceLayerIndex,n.index,pe,$e,w,0,Le,rt,O,e,d,b,M,A)};if(Fe==="line")for(const dt of Hf(e.geometry,0,0,kt,kt)){const wt=Dx(dt,fe,Ae,r.vertical||Z,a,de,ce,n.overscaling,kt);for(const ft of wt)Z&&Gx(n,Z.text,We,ft)||Ne(dt,ft,A)}else if(Fe==="line-center"){for(const dt of e.geometry)if(dt.length>1){const wt=Lx(dt,Ae,r.vertical||Z,a,de,ce);wt&&Ne(dt,wt,A)}}else if(e.type==="Polygon")for(const dt of Vd(e.geometry,0)){const wt=Ox(dt,16);Ne(dt[0],new Ns(wt.x,wt.y,0,0,void 0),A)}else if(e.type==="LineString")for(const dt of e.geometry)Ne(dt,new Ns(dt[0].x,dt[0].y,0,0,void 0),A);else if(e.type==="Point")for(const dt of e.geometry)for(const wt of dt)Ne([wt],new Ns(wt.x,wt.y,0,0,void 0),A)}const y0=255,Sa=y0*Uo;function e8(n,e,r,a,c,d,m,y,w,b,M,A,I,L,D,O,Z){const Q=function(ce,fe,pe,Le,Ae,$e,rt,Fe){const We=[];if(fe.positionedLines.length===0)return We;const He=Le.layout.get("text-rotate").evaluate($e,{})*Math.PI/180,et=function(ft){const jt=ft[0],ct=ft[1],Pt=jt*ct;return Pt>0?[jt,-ct]:Pt<0?[-jt,ct]:jt===0?[ct,jt]:[ct,-jt]}(pe);let at=Math.abs(fe.top-fe.bottom);for(const ft of fe.positionedLines)at-=ft.lineOffset;const Ne=fe.positionedLines.length,dt=at/Ne;let wt=fe.top-pe[1];for(let ft=0;ft<Ne;++ft){const jt=fe.positionedLines[ft];wt=Rx(fe,dt,wt,ft);for(const ct of jt.positionedGlyphs){if(!ct.rect)continue;const Pt=ct.rect||{};let Vt=Df+1,sn=!0,Gt=1,Lt=0;if(ct.imageName){const Pn=rt[ct.imageName];if(!Pn)continue;if(Pn.sdf){dn("SDF images are not supported in formatted text and will be ignored.");continue}sn=!1,Gt=Pn.pixelRatio,Vt=li/Gt}const An=(Ae||Fe)&&ct.vertical,$t=ct.metrics.advance*ct.scale/2,Zt=ct.metrics,bn=ct.rect;if(bn===null)continue;Fe&&fe.verticalizable&&(Lt=ct.imageName?$t-ct.metrics.width*ct.scale/2:0);const Mn=Ae?[ct.x+$t,ct.y]:[0,0];let Cn=[0,0],Tn=[0,0],Fn=!1;Ae||(An?(Tn=[ct.x+$t+et[0],ct.y+et[1]-Lt],Fn=!0):Cn=[ct.x+$t+pe[0],ct.y+pe[1]-Lt]);const $n=bn.w*ct.scale/(Gt*(ct.localGlyph?No:1)),nr=bn.h*ct.scale/(Gt*(ct.localGlyph?No:1));let En,ur,rr,On;if(An){const Pn=ct.y-wt,Qr=new Me(-$t,$t-Pn),or=-Math.PI/2,Pr=new Me(...Tn);En=new Me(-$t+Cn[0],Cn[1]),En._rotateAround(or,Qr)._add(Pr),En.x+=-Pn+$t,En.y-=(Zt.left-Vt)*ct.scale;const wr=ct.imageName?Zt.advance*ct.scale:Cr*ct.scale,ei=String.fromCharCode(ct.glyph);_x(ei)?En.x+=(1-Vt)*ct.scale:gx(ei)?En.x+=wr-Zt.height*ct.scale+(-Vt-1)*ct.scale:En.x+=ct.imageName||Zt.width+2*Vt===bn.w&&Zt.height+2*Vt===bn.h?(wr-nr)/2:(wr-(Zt.height+2*Vt)*ct.scale)/2,ur=new Me(En.x,En.y-$n),rr=new Me(En.x+nr,En.y),On=new Me(En.x+nr,En.y-$n)}else{const Pn=(Zt.left-Vt)*ct.scale-$t+Cn[0],Qr=(-Zt.top-Vt)*ct.scale+Cn[1],or=Pn+$n,Pr=Qr+nr;En=new Me(Pn,Qr),ur=new Me(or,Qr),rr=new Me(Pn,Pr),On=new Me(or,Pr)}if(He){let Pn;Pn=Ae?new Me(0,0):Fn?new Me(et[0],et[1]):new Me(pe[0],pe[1]),En._rotateAround(He,Pn),ur._rotateAround(He,Pn),rr._rotateAround(He,Pn),On._rotateAround(He,Pn)}const ln=new Me(0,0),ir=new Me(0,0);We.push({tl:En,tr:ur,bl:rr,br:On,tex:Pt,writingMode:fe.writingMode,glyphOffset:Mn,sectionIndex:ct.sectionIndex,isSDF:sn,pixelOffsetTL:ln,pixelOffsetBR:ir,minFontScaleX:0,minFontScaleY:0})}}return We}(0,a,w,d,m,y,c,n.allowVerticalPlacement),de=n.textSizeData;let ee=null;de.kind==="source"?(ee=[Uo*d.layout.get("text-size").evaluate(y,{},Z)],ee[0]>Sa&&dn(`${n.layerIds[0]}: Value for "text-size" is >= ${y0}. Reduce your "text-size".`)):de.kind==="composite"&&(ee=[Uo*D.compositeTextSizes[0].evaluate(y,{},Z),Uo*D.compositeTextSizes[1].evaluate(y,{},Z)],(ee[0]>Sa||ee[1]>Sa)&&dn(`${n.layerIds[0]}: Value for "text-size" is >= ${y0}. Reduce your "text-size".`)),n.addSymbols(n.text,Q,ee,w,m,y,M,e,r,b.lineStartIndex,b.lineLength,L,O,Z);for(const ce of A)I[ce]=n.text.placedSymbolArray.length-1;return 4*Q.length}function t8(n){for(const e in n)return n[e];return null}function Kh(n,e,r,a,c,d,m,y,w,b){let M=m.top,A=m.bottom,I=m.left,L=m.right;const D=m.collisionPadding;if(D&&(I-=D[0],M-=D[1],L+=D[2],A+=D[3]),w){const O=new Me(I,M),Z=new Me(L,M),Q=new Me(I,A),de=new Me(L,A),ee=bt(w);let ce=new Me(0,0);b&&(ce=new Me(b[0],b[1])),O._rotateAround(ee,ce),Z._rotateAround(ee,ce),Q._rotateAround(ee,ce),de._rotateAround(ee,ce),I=Math.min(O.x,Z.x,Q.x,de.x),L=Math.max(O.x,Z.x,Q.x,de.x),M=Math.min(O.y,Z.y,Q.y,de.y),A=Math.max(O.y,Z.y,Q.y,de.y)}return n.emplaceBack(e.x,e.y,e.z,r.x,r.y,I,M,L,A,y,a,c,d),n.length-1}function n4(n){n.collisionPadding&&(n.top-=n.collisionPadding[1],n.bottom+=n.collisionPadding[3]);const e=n.bottom-n.top;return e>0?Math.max(10,e):null}function Gx(n,e,r,a){const c=n.compareText;if(e in c){const d=c[e];for(let m=d.length-1;m>=0;m--)if(a.dist(d[m])<r)return!0}else c[e]=[];return c[e].push(a),!1}function n8(n,e){const r=n.fovAboveCenter,a=n.elevation?n.elevation.getMinElevationBelowMSL()*e:0,c=(n._camera.position[2]*n.worldSize-a)/Math.cos(n._pitch),d=Math.sin(r)*c/Math.sin(Math.max(Math.PI/2-n._pitch-r,.01)),m=Math.sin(n._pitch)*d+c;return Math.min(1.01*m,c*(1/n._horizonShift))}function Nl(n,e){if(!e.isReprojectedInTileSpace)return{scale:1<<n.z,x:n.x,y:n.y,x2:n.x+1,y2:n.y+1,projection:e};const r=Math.pow(2,-n.z),a=n.x*r,c=(n.x+1)*r,d=n.y*r,m=(n.y+1)*r,y=Ui(a),w=Ui(c),b=Dr(d),M=Dr(m),A=e.project(y,b),I=e.project(w,b),L=e.project(w,M),D=e.project(y,M);let O=Math.min(A.x,I.x,L.x,D.x),Z=Math.min(A.y,I.y,L.y,D.y),Q=Math.max(A.x,I.x,L.x,D.x),de=Math.max(A.y,I.y,L.y,D.y);const ee=r/16;function ce(pe,Le,Ae,$e,rt,Fe){const We=(Ae+rt)/2,He=($e+Fe)/2,et=e.project(Ui(We),Dr(He)),at=Math.max(0,O-et.x,Z-et.y,et.x-Q,et.y-de);O=Math.min(O,et.x),Q=Math.max(Q,et.x),Z=Math.min(Z,et.y),de=Math.max(de,et.y),at>ee&&(ce(pe,et,Ae,$e,We,He),ce(et,Le,We,He,rt,Fe))}ce(A,I,a,d,c,d),ce(I,L,c,d,c,m),ce(L,D,c,m,a,m),ce(D,A,a,m,a,d),O-=ee,Z-=ee,Q+=ee,de+=ee;const fe=1/Math.max(Q-O,de-Z);return{scale:fe,x:O*fe,y:Z*fe,x2:Q*fe,y2:de*fe,projection:e}}const $x=Fo(new Float32Array(16));class Ma{constructor(e){this.spec=e,this.name=e.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(e,r){return{x:0,y:0,z:0}}unproject(e,r){return new wn(0,0)}projectTilePoint(e,r,a){return{x:e,y:r,z:0}}locationPoint(e,r,a=!0){return e._coordinatePoint(e.locationCoordinate(r),a)}pixelsPerMeter(e,r){return Oo(1,e)*r}pixelSpaceConversion(e,r,a){return 1}farthestPixelDistance(e){return n8(e,e.pixelsPerMeter)}pointCoordinate(e,r,a,c){const d=e.horizonLineFromTop(!1),m=new Me(r,Math.max(d,a));return e.rayIntersectionCoordinate(e.pointRayIntersection(m,c))}pointCoordinate3D(e,r,a){const c=new Me(r,a);if(e.elevation)return e.elevation.pointCoordinate(c);{const d=this.pointCoordinate(e,c.x,c.y,0);return[d.x,d.y,d.z]}}isPointAboveHorizon(e,r){if(e.elevation)return!this.pointCoordinate3D(e,r.x,r.y);const a=e.horizonLineFromTop();return r.y<a}createInversionMatrix(e,r){return $x}createTileMatrix(e,r,a){let c,d,m;const y=a.canonical,w=Fo(new Float64Array(16));if(this.isReprojectedInTileSpace){const b=Nl(y,this);c=1,d=b.x+a.wrap*b.scale,m=b.y,Ll(w,w,[c/b.scale,c/b.scale,e.pixelsPerMeter/r])}else c=r/e.zoomScale(y.z),d=(y.x+Math.pow(2,y.z)*a.wrap)*c,m=y.y*c;return Xu(w,w,[d,m,0]),Ll(w,w,[c/kt,c/kt,1]),w}upVector(e,r,a){return[0,0,1]}upVectorScale(e,r,a){return{metersToTile:1}}}class Zx extends Ma{constructor(e){super(e),this.range=[4,7],this.center=e.center||[-96,37.5];const[r,a]=this.parallels=e.parallels||[29.5,45.5],c=Math.sin(bt(r));this.n=(c+Math.sin(bt(a)))/2,this.c=1+c*(2*this.n-c),this.r0=Math.sqrt(this.c)/this.n}project(e,r){const{n:a,c,r0:d}=this,m=bt(e-this.center[0]),y=bt(r),w=Math.sqrt(c-2*a*Math.sin(y))/a;return{x:w*Math.sin(m*a),y:w*Math.cos(m*a)-d,z:0}}unproject(e,r){const{n:a,c,r0:d}=this,m=d+r;let y=Math.atan2(e,Math.abs(m))*Math.sign(m);m*a<0&&(y-=Math.PI*Math.sign(e)*Math.sign(m));const w=bt(this.center[0])*a;y=ht(y,-Math.PI-w,Math.PI-w);const b=Ce(Bt(y/a)+this.center[0],-180,180),M=Math.asin(Ce((c-(e*e+m*m)*a*a)/(2*a),-1,1)),A=Ce(Bt(M),-Rr,Rr);return new wn(b,A)}}const v0=1.340264,x0=-.081106,w0=893e-6,b0=.003796,Yh=Math.sqrt(3)/2;class qx extends Ma{project(e,r){r=r/180*Math.PI,e=e/180*Math.PI;const a=Math.asin(Yh*Math.sin(r)),c=a*a,d=c*c*c;return{x:.5*(e*Math.cos(a)/(Yh*(v0+3*x0*c+d*(7*w0+9*b0*c)))/Math.PI+.5),y:1-.5*(a*(v0+x0*c+d*(w0+b0*c))/Math.PI+1),z:0}}unproject(e,r){e=(2*e-.5)*Math.PI;let a=r=(2*(1-r)-1)*Math.PI,c=a*a,d=c*c*c;for(let M,A,I,L=0;L<12&&(A=a*(v0+x0*c+d*(w0+b0*c))-r,I=v0+3*x0*c+d*(7*w0+9*b0*c),M=A/I,a=Ce(a-M,-Math.PI/3,Math.PI/3),c=a*a,d=c*c*c,!(Math.abs(M)<1e-12));++L);const m=Yh*e*(v0+3*x0*c+d*(7*w0+9*b0*c))/Math.cos(a),y=Math.asin(Math.sin(a)/Yh),w=Ce(180*m/Math.PI,-180,180),b=Ce(180*y/Math.PI,-Rr,Rr);return new wn(w,b)}}class Wx extends Ma{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0}project(e,r){return{x:.5+e/360,y:.5-r/360,z:0}}unproject(e,r){const a=360*(e-.5),c=Ce(360*(.5-r),-Rr,Rr);return new wn(a,c)}}const rc=Math.PI/2;function Jh(n){return Math.tan((rc+n)/2)}class Hx extends Ma{constructor(e){super(e),this.center=e.center||[0,30];const[r,a]=this.parallels=e.parallels||[30,30];let c=bt(r),d=bt(a);this.southernCenter=c+d<0,this.southernCenter&&(c=-c,d=-d);const m=Math.cos(c),y=Jh(c);this.n=c===d?Math.sin(c):Math.log(m/Math.cos(d))/Math.log(Jh(d)/y),this.f=m*Math.pow(Jh(c),this.n)/this.n}project(e,r){r=bt(r),this.southernCenter&&(r=-r),e=bt(e-this.center[0]);const a=1e-6,{n:c,f:d}=this;d>0?r<-rc+a&&(r=-rc+a):r>rc-a&&(r=rc-a);const m=d/Math.pow(Jh(r),c);let y=m*Math.sin(c*e),w=d-m*Math.cos(c*e);return y=.5*(y/Math.PI+.5),w=.5*(w/Math.PI+.5),{x:y,y:this.southernCenter?w:1-w,z:0}}unproject(e,r){e=(2*e-.5)*Math.PI,this.southernCenter&&(r=1-r),r=(2*(1-r)-.5)*Math.PI;const{n:a,f:c}=this,d=c-r,m=Math.sign(d),y=Math.sign(a)*Math.sqrt(e*e+d*d);let w=Math.atan2(e,Math.abs(d))*m;d*a<0&&(w-=Math.PI*Math.sign(e)*m);const b=Ce(Bt(w/a)+this.center[0],-180,180),M=Ce(Bt(2*Math.atan(Math.pow(c/y,1/a))-rc),-Rr,Rr);return new wn(b,this.southernCenter?-M:M)}}class r8 extends Ma{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(e,r){return{x:as(e),y:ls(r),z:0}}unproject(e,r){const a=Ui(e),c=Dr(r);return new wn(a,c)}}const i8=bt(Rr);class Xx extends Ma{project(e,r){const a=(r=bt(r))*r,c=a*a;return{x:.5*((e=bt(e))*(.8707-.131979*a+c*(c*(.003971*a-.001529*c)-.013791))/Math.PI+.5),y:1-.5*(r*(1.007226+a*(.015085+c*(.028874*a-.044475-.005916*c)))/Math.PI+1),z:0}}unproject(e,r){e=(2*e-.5)*Math.PI;let a=r=(2*(1-r)-1)*Math.PI,c=25,d=0,m=a*a;do{m=a*a;const b=m*m;d=(a*(1.007226+m*(.015085+b*(.028874*m-.044475-.005916*b)))-r)/(1.007226+m*(.045255+b*(.259866*m-.311325-.005916*11*b))),a=Ce(a-d,-i8,i8)}while(Math.abs(d)>1e-6&&--c>0);m=a*a;const y=Ce(Bt(e/(.8707+m*(m*(m*m*m*(.003971-.001529*m)-.013791)-.131979))),-180,180),w=Bt(a);return new wn(y,w)}}const o8=bt(Rr);class Kx extends Ma{project(e,r){r=bt(r),e=bt(e);const a=Math.cos(r),c=2/Math.PI,d=Math.acos(a*Math.cos(e/2)),m=Math.sin(d)/d,y=.5*(e*c+2*a*Math.sin(e/2)/m)||0,w=.5*(r+Math.sin(r)/m)||0;return{x:.5*(y/Math.PI+.5),y:1-.5*(w/Math.PI+1),z:0}}unproject(e,r){let a=e=(2*e-.5)*Math.PI,c=r=(2*(1-r)-1)*Math.PI,d=25;const m=1e-6;let y=0,w=0;do{const b=Math.cos(c),M=Math.sin(c),A=2*M*b,I=M*M,L=b*b,D=Math.cos(a/2),O=Math.sin(a/2),Z=2*D*O,Q=O*O,de=1-L*D*D,ee=de?1/de:0,ce=de?Math.acos(b*D)*Math.sqrt(1/de):0,fe=.5*(2*ce*b*O+2*a/Math.PI)-e,pe=.5*(ce*M+c)-r,Le=.5*ee*(L*Q+ce*b*D*I)+1/Math.PI,Ae=ee*(Z*A/4-ce*M*O),$e=.125*ee*(A*O-ce*M*L*Z),rt=.5*ee*(I*D+ce*Q*b)+.5,Fe=Ae*$e-rt*Le;y=(pe*Ae-fe*rt)/Fe,w=(fe*$e-pe*Le)/Fe,a=Ce(a-y,-Math.PI,Math.PI),c=Ce(c-w,-o8,o8)}while((Math.abs(y)>m||Math.abs(w)>m)&&--d>0);return new wn(Bt(a),Bt(c))}}class s8 extends Ma{constructor(e){super(e),this.center=e.center||[0,0],this.parallels=e.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(bt(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(e,r){const{scale:a,cosPhi:c}=this;return{x:bt(e)*c*a+.5,y:-Math.sin(bt(r))/c*a+.5,z:0}}unproject(e,r){const{scale:a,cosPhi:c}=this,d=-(r-.5)/a,m=Ce(Bt((e-.5)/a)/c,-180,180),y=Math.asin(Ce(d*c,-1,1)),w=Ce(Bt(y),-Rr,Rr);return new wn(m,w)}}class Yx extends r8{constructor(e){super(e),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(e,r,a){const c=r0(e,r,a);return Hn(c,c,i0(ss(a))),{x:c[0],y:c[1],z:c[2]}}locationPoint(e,r){const a=V1(r.lat,r.lng),c=Kr([],a),d=e.elevation?e.elevation.getAtPointOrZero(e.locationCoordinate(r),e._centerAltitude):e._centerAltitude;Qu(a,a,c,Oo(1,0)*kt*d);const m=Fo(new Float64Array(16));return zl(m,e.pixelMatrix,e.globeMatrix),Hn(a,a,m),new Me(a[0],a[1])}pixelsPerMeter(e,r){return Oo(1,0)*r}pixelSpaceConversion(e,r,a){const c=Oo(1,e)*r,d=rn(Oo(1,45)*r,c,a);return this.pixelsPerMeter(e,r)/d}createTileMatrix(e,r,a){const c=Md(ss(a.canonical));return zl(new Float64Array(16),e.globeMatrix,c)}createInversionMatrix(e,r){const{center:a}=e,c=i0(ss(r));return Mh(c,c,bt(a.lng)),_d(c,c,bt(a.lat)),Ll(c,c,[e._pixelsPerMercatorPixel,e._pixelsPerMercatorPixel,1]),Float32Array.from(c)}pointCoordinate(e,r,a,c){return z7(e,r,a,!0)||new $1(0,0)}pointCoordinate3D(e,r,a){const c=this.pointCoordinate(e,r,a,0);return[c.x,c.y,c.z]}isPointAboveHorizon(e,r){return!z7(e,r.x,r.y,!1)}farthestPixelDistance(e){const r=function(c,d){const m=c.cameraToCenterDistance,y=c._centerAltitude*d,w=c._camera,b=c._camera.forward(),M=Fs([],Oi([],b,-m),[0,0,y]),A=c.worldSize/(2*Math.PI),I=[0,0,-A],L=c.width/c.height,D=Math.tan(c.fovAboveCenter),O=Oi([],w.up(),D),Z=Oi([],w.right(),D*L),Q=Kr([],Fs([],Fs([],b,O),Z)),de=[];let ee;if(new xd(M,Q).closestPointOnSphere(I,A,de)){const ce=Fs([],de,I),fe=Bo([],ce,M);ee=Math.cos(c.fovAboveCenter)*Ku(fe)}else{const ce=Bo([],M,I),fe=Bo([],I,M);Kr(fe,fe);const pe=Ku(ce)-A;ee=Math.sqrt(pe*(pe+2*A));const Le=Math.acos(ee/(A+pe))-Math.acos(so(b,fe));ee*=Math.cos(Le)}return 1.01*ee}(e,this.pixelsPerMeter(e.center.lat,e.worldSize)),a=G1(e.zoom);if(a>0){const c=n8(e,Oo(1,e.center.lat)*e.worldSize),d=e.worldSize/(2*Math.PI),m=Math.max(e.width,e.height)/e.worldSize*Math.PI;return rn(r,c+d*(1-Math.cos(m)),Math.pow(a,10))}return r}upVector(e,r,a){return r0(r,a,e,1)}upVectorScale(e){return{metersToTile:Ch(Ah(ss(e)))}}}function a8(n){const e=n.parallels,r=!!e&&Math.abs(e[0]+e[1])<.01;switch(n.name){case"mercator":return new r8(n);case"equirectangular":return new Wx(n);case"naturalEarth":return new Xx(n);case"equalEarth":return new qx(n);case"winkelTripel":return new Kx(n);case"albers":return r?new s8(n):new Zx(n);case"lambertConformalConic":return r?new s8(n):new Hx(n);case"globe":return new Yx(n)}throw new Error(`Invalid projection name: ${n.name}`)}const Jx=Uh.types,Qx=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Qh(n,e,r,a,c,d,m,y,w,b,M,A,I){const L=y?Math.min(Sa,Math.round(y[0])):0,D=y?Math.min(Sa,Math.round(y[1])):0;n.emplaceBack(e,r,Math.round(32*a),Math.round(32*c),d,m,(L<<1)+(w?1:0),D,16*b,16*M,256*A,256*I)}function e3(n,e,r,a,c,d,m){n.emplaceBack(e,r,a,c,d,m)}function t3(n,e,r,a,c){n.emplaceBack(e,r,a,c),n.emplaceBack(e,r,a,c),n.emplaceBack(e,r,a,c),n.emplaceBack(e,r,a,c)}function ew(n){for(const e of n.sections)if(hd(e.text))return!0;return!1}class r4{constructor(e){this.layoutVertexArray=new Qe,this.indexArray=new St,this.programConfigurations=e,this.segments=new er,this.dynamicLayoutVertexArray=new tt,this.opacityVertexArray=new Ct,this.placedSymbolArray=new Qn,this.globeExtVertexArray=new ot}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(e,r,a,c){this.isEmpty()||(a&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,lx.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,r),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,ux.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,Qx,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,cx.members,!0)),this.opacityVertexBuffer.itemSize=1),(a||c)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}vt(r4,"SymbolBuffers");class i4{constructor(e,r,a){this.layoutVertexArray=new e,this.layoutAttributes=r,this.indexArray=new a,this.segments=new er,this.collisionVertexArray=new Kt,this.collisionVertexArrayExt=new Wt}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,hx.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,dx.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}vt(i4,"CollisionBuffers");class Ca{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(m=>m.id),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Fo([]),this.placementViewportMatrix=Fo([]);const r=this.layers[0]._unevaluatedLayout._values;this.textSizeData=qd(this.zoom,r["text-size"]),this.iconSizeData=qd(this.zoom,r["icon-size"]);const a=this.layers[0].layout,c=a.get("symbol-sort-key"),d=a.get("symbol-z-order");this.canOverlap=a.get("text-allow-overlap")||a.get("icon-allow-overlap")||a.get("text-ignore-placement")||a.get("icon-ignore-placement"),this.sortFeaturesByKey=d!=="viewport-y"&&c.constantOr(1)!==void 0,this.sortFeaturesByY=(d==="viewport-y"||d==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=a.get("text-writing-mode").map(m=>Ni[m]),this.stateDependentLayerIds=this.layers.filter(m=>m.isStateDependent()).map(m=>m.id),this.sourceID=e.sourceID,this.projection=e.projection}createArrays(){this.text=new r4(new kl(this.layers,this.zoom,e=>/^text/.test(e))),this.icon=new r4(new kl(this.layers,this.zoom,e=>/^icon/.test(e))),this.glyphOffsetArray=new Xr,this.lineVertexArray=new B1,this.symbolInstances=new zn}calculateGlyphDependencies(e,r,a,c,d){for(let m=0;m<e.length;m++)if(r[e.charCodeAt(m)]=!0,c&&d){const y=m0[e.charAt(m)];y&&(r[y.charCodeAt(0)]=!0)}}populate(e,r,a,c){const d=this.layers[0],m=d.layout,y=this.projection.name==="globe",w=m.get("text-font"),b=m.get("text-field"),M=m.get("icon-image"),A=(b.value.kind!=="constant"||b.value.value instanceof Hr&&!b.value.value.isEmpty()||b.value.value.toString().length>0)&&(w.value.kind!=="constant"||w.value.value.length>0),I=M.value.kind!=="constant"||!!M.value.value||Object.keys(M.parameters).length>0,L=m.get("symbol-sort-key");if(this.features=[],!A&&!I)return;const D=r.iconDependencies,O=r.glyphDependencies,Z=r.availableImages,Q=new C(this.zoom);for(const{feature:de,id:ee,index:ce,sourceLayerIndex:fe}of e){const pe=d._featureFilter.needGeometry,Le=Bl(de,pe);if(!d._featureFilter.filter(Q,Le,a))continue;if(pe||(Le.geometry=Bs(de,a,c)),y&&de.type!==1&&a.z<=5){const Fe=Le.geometry,We=.98078528056,He=(et,at)=>so(r0(et.x,et.y,a,1),r0(at.x,at.y,a,1))<We;for(let et=0;et<Fe.length;et++)Fe[et]=uv(Fe[et],He)}let Ae,$e;if(A){const Fe=d.getValueAndResolveTokens("text-field",Le,a,Z),We=Hr.factory(Fe);ew(We)&&(this.hasRTLText=!0),(!this.hasRTLText||v()==="unavailable"||this.hasRTLText&&S.isParsed())&&(Ae=mx(We,d,Le))}if(I){const Fe=d.getValueAndResolveTokens("icon-image",Le,a,Z);$e=Fe instanceof vi?Fe:vi.fromString(Fe)}if(!Ae&&!$e)continue;const rt=this.sortFeaturesByKey?L.evaluate(Le,{},a):void 0;if(this.features.push({id:ee,text:Ae,icon:$e,index:ce,sourceLayerIndex:fe,geometry:Le.geometry,properties:de.properties,type:Jx[de.type],sortKey:rt}),$e&&(D[$e.name]=!0),Ae){const Fe=w.evaluate(Le,{},a).join(","),We=m.get("text-rotation-alignment")==="map"&&m.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Ni.vertical)>=0;for(const He of Ae.sections)if(He.image)D[He.image.name]=!0;else{const et=Vu(Ae.toString()),at=He.fontStack||Fe,Ne=O[at]=O[at]||{};this.calculateGlyphDependencies(He.text,Ne,We,this.allowVerticalPlacement,et)}}}m.get("symbol-placement")==="line"&&(this.features=function(de){const ee={},ce={},fe=[];let pe=0;function Le(Fe){fe.push(de[Fe]),pe++}function Ae(Fe,We,He){const et=ce[Fe];return delete ce[Fe],ce[We]=et,fe[et].geometry[0].pop(),fe[et].geometry[0]=fe[et].geometry[0].concat(He[0]),et}function $e(Fe,We,He){const et=ee[We];return delete ee[We],ee[Fe]=et,fe[et].geometry[0].shift(),fe[et].geometry[0]=He[0].concat(fe[et].geometry[0]),et}function rt(Fe,We,He){const et=He?We[0][We[0].length-1]:We[0][0];return`${Fe}:${et.x}:${et.y}`}for(let Fe=0;Fe<de.length;Fe++){const We=de[Fe],He=We.geometry,et=We.text?We.text.toString():null;if(!et){Le(Fe);continue}const at=rt(et,He),Ne=rt(et,He,!0);if(at in ce&&Ne in ee&&ce[at]!==ee[Ne]){const dt=$e(at,Ne,He),wt=Ae(at,Ne,fe[dt].geometry);delete ee[at],delete ce[Ne],ce[rt(et,fe[wt].geometry,!0)]=wt,fe[dt].geometry=null}else at in ce?Ae(at,Ne,He):Ne in ee?$e(at,Ne,He):(Le(Fe),ee[at]=pe-1,ce[Ne]=pe-1)}return fe.filter(Fe=>Fe.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((de,ee)=>de.sortKey-ee.sortKey)}update(e,r,a,c){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,r,this.layers,a,c),this.icon.programConfigurations.updatePaintArrays(e,r,this.layers,a,c))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=a8(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,r){const a=this.lineVertexArray.length;if(e.segment!==void 0)for(const{x:c,y:d}of r)this.lineVertexArray.emplaceBack(c,d);return{lineStartIndex:a,lineLength:this.lineVertexArray.length-a}}addSymbols(e,r,a,c,d,m,y,w,b,M,A,I,L,D){const O=e.indexArray,Z=e.layoutVertexArray,Q=e.globeExtVertexArray,de=e.segments.prepareSegment(4*r.length,Z,O,this.canOverlap?m.sortKey:void 0),ee=this.glyphOffsetArray.length,ce=de.vertexLength,fe=this.allowVerticalPlacement&&y===Ni.vertical?Math.PI/2:0,pe=m.text&&m.text.sections;for(let Ae=0;Ae<r.length;Ae++){const{tl:$e,tr:rt,bl:Fe,br:We,tex:He,pixelOffsetTL:et,pixelOffsetBR:at,minFontScaleX:Ne,minFontScaleY:dt,glyphOffset:wt,isSDF:ft,sectionIndex:jt}=r[Ae],ct=de.vertexLength,Pt=wt[1];if(Qh(Z,b.x,b.y,$e.x,Pt+$e.y,He.x,He.y,a,ft,et.x,et.y,Ne,dt),Qh(Z,b.x,b.y,rt.x,Pt+rt.y,He.x+He.w,He.y,a,ft,at.x,et.y,Ne,dt),Qh(Z,b.x,b.y,Fe.x,Pt+Fe.y,He.x,He.y+He.h,a,ft,et.x,at.y,Ne,dt),Qh(Z,b.x,b.y,We.x,Pt+We.y,He.x+He.w,He.y+He.h,a,ft,at.x,at.y,Ne,dt),w){const{x:Vt,y:sn,z:Gt}=w.anchor,[Lt,An,$t]=w.up;e3(Q,Vt,sn,Gt,Lt,An,$t),e3(Q,Vt,sn,Gt,Lt,An,$t),e3(Q,Vt,sn,Gt,Lt,An,$t),e3(Q,Vt,sn,Gt,Lt,An,$t),t3(e.dynamicLayoutVertexArray,Vt,sn,Gt,fe)}else t3(e.dynamicLayoutVertexArray,b.x,b.y,b.z,fe);O.emplaceBack(ct,ct+1,ct+2),O.emplaceBack(ct+1,ct+2,ct+3),de.vertexLength+=4,de.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(wt[0]),Ae!==r.length-1&&jt===r[Ae+1].sectionIndex||e.programConfigurations.populatePaintArrays(Z.length,m,m.index,{},L,D,pe&&pe[jt])}const Le=w?w.anchor:b;e.placedSymbolArray.emplaceBack(Le.x,Le.y,Le.z,b.x,b.y,ee,this.glyphOffsetArray.length-ee,ce,M,A,b.segment,a?a[0]:0,a?a[1]:0,c[0],c[1],y,0,!1,0,I,0)}_commitLayoutVertex(e,r,a,c,d,m,y){e.emplaceBack(r,a,c,d,m,Math.round(y.x),Math.round(y.y))}_addCollisionDebugVertices(e,r,a,c,d,m,y){const w=a.segments.prepareSegment(4,a.layoutVertexArray,a.indexArray),b=w.vertexLength,M=y.tileAnchorX,A=y.tileAnchorY;for(let L=0;L<4;L++)a.collisionVertexArray.emplaceBack(0,0,0,0);a.collisionVertexArrayExt.emplaceBack(r,-e.padding,-e.padding),a.collisionVertexArrayExt.emplaceBack(r,e.padding,-e.padding),a.collisionVertexArrayExt.emplaceBack(r,e.padding,e.padding),a.collisionVertexArrayExt.emplaceBack(r,-e.padding,e.padding),this._commitLayoutVertex(a.layoutVertexArray,c,d,m,M,A,new Me(e.x1,e.y1)),this._commitLayoutVertex(a.layoutVertexArray,c,d,m,M,A,new Me(e.x2,e.y1)),this._commitLayoutVertex(a.layoutVertexArray,c,d,m,M,A,new Me(e.x2,e.y2)),this._commitLayoutVertex(a.layoutVertexArray,c,d,m,M,A,new Me(e.x1,e.y2)),w.vertexLength+=4;const I=a.indexArray;I.emplaceBack(b,b+1),I.emplaceBack(b+1,b+2),I.emplaceBack(b+2,b+3),I.emplaceBack(b+3,b),w.primitiveLength+=4}_addTextDebugCollisionBoxes(e,r,a,c,d,m){for(let y=c;y<d;y++){const w=a.get(y),b=this.getSymbolInstanceTextSize(e,m,r,y);this._addCollisionDebugVertices(w,b,this.textCollisionBox,w.projectedAnchorX,w.projectedAnchorY,w.projectedAnchorZ,m)}}_addIconDebugCollisionBoxes(e,r,a,c,d,m){for(let y=c;y<d;y++){const w=a.get(y),b=this.getSymbolInstanceIconSize(e,r,m.placedIconSymbolIndex);this._addCollisionDebugVertices(w,b,this.iconCollisionBox,w.projectedAnchorX,w.projectedAnchorY,w.projectedAnchorZ,m)}}generateCollisionDebugBuffers(e,r){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new i4(xt,Mf.members,xr),this.iconCollisionBox=new i4(xt,Mf.members,xr);const a=X1(this.iconSizeData,e),c=X1(this.textSizeData,e);for(let d=0;d<this.symbolInstances.length;d++){const m=this.symbolInstances.get(d);this._addTextDebugCollisionBoxes(c,e,r,m.textBoxStartIndex,m.textBoxEndIndex,m),this._addTextDebugCollisionBoxes(c,e,r,m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m),this._addIconDebugCollisionBoxes(a,e,r,m.iconBoxStartIndex,m.iconBoxEndIndex,m),this._addIconDebugCollisionBoxes(a,e,r,m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex,m)}}getSymbolInstanceTextSize(e,r,a,c){const d=this.text.placedSymbolArray.get(r.rightJustifiedTextSymbolIndex>=0?r.rightJustifiedTextSymbolIndex:r.centerJustifiedTextSymbolIndex>=0?r.centerJustifiedTextSymbolIndex:r.leftJustifiedTextSymbolIndex>=0?r.leftJustifiedTextSymbolIndex:r.verticalPlacedTextSymbolIndex>=0?r.verticalPlacedTextSymbolIndex:c),m=Gh(this.textSizeData,e,d)/Cr;return this.tilePixelRatio*m}getSymbolInstanceIconSize(e,r,a){const c=this.icon.placedSymbolArray.get(a),d=Gh(this.iconSizeData,e,c);return this.tilePixelRatio*d}_commitDebugCollisionVertexUpdate(e,r,a){e.emplaceBack(r,-a,-a),e.emplaceBack(r,a,-a),e.emplaceBack(r,a,a),e.emplaceBack(r,-a,a)}_updateTextDebugCollisionBoxes(e,r,a,c,d,m){for(let y=c;y<d;y++){const w=a.get(y),b=this.getSymbolInstanceTextSize(e,m,r,y);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,b,w.padding)}}_updateIconDebugCollisionBoxes(e,r,a,c,d,m){for(let y=c;y<d;y++){const w=a.get(y),b=this.getSymbolInstanceIconSize(e,r,m);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,b,w.padding)}}updateCollisionDebugBuffers(e,r){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const a=X1(this.iconSizeData,e),c=X1(this.textSizeData,e);for(let d=0;d<this.symbolInstances.length;d++){const m=this.symbolInstances.get(d);this._updateTextDebugCollisionBoxes(c,e,r,m.textBoxStartIndex,m.textBoxEndIndex,m),this._updateTextDebugCollisionBoxes(c,e,r,m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m),this._updateIconDebugCollisionBoxes(a,e,r,m.iconBoxStartIndex,m.iconBoxEndIndex,m.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(a,e,r,m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex,m.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(e,r,a,c,d,m,y,w,b){const M={};if(r<a){const{x1:A,y1:I,x2:L,y2:D,padding:O,projectedAnchorX:Z,projectedAnchorY:Q,projectedAnchorZ:de,tileAnchorX:ee,tileAnchorY:ce,featureIndex:fe}=e.get(r);M.textBox={x1:A,y1:I,x2:L,y2:D,padding:O,projectedAnchorX:Z,projectedAnchorY:Q,projectedAnchorZ:de,tileAnchorX:ee,tileAnchorY:ce},M.textFeatureIndex=fe}if(c<d){const{x1:A,y1:I,x2:L,y2:D,padding:O,projectedAnchorX:Z,projectedAnchorY:Q,projectedAnchorZ:de,tileAnchorX:ee,tileAnchorY:ce,featureIndex:fe}=e.get(c);M.verticalTextBox={x1:A,y1:I,x2:L,y2:D,padding:O,projectedAnchorX:Z,projectedAnchorY:Q,projectedAnchorZ:de,tileAnchorX:ee,tileAnchorY:ce},M.verticalTextFeatureIndex=fe}if(m<y){const{x1:A,y1:I,x2:L,y2:D,padding:O,projectedAnchorX:Z,projectedAnchorY:Q,projectedAnchorZ:de,tileAnchorX:ee,tileAnchorY:ce,featureIndex:fe}=e.get(m);M.iconBox={x1:A,y1:I,x2:L,y2:D,padding:O,projectedAnchorX:Z,projectedAnchorY:Q,projectedAnchorZ:de,tileAnchorX:ee,tileAnchorY:ce},M.iconFeatureIndex=fe}if(w<b){const{x1:A,y1:I,x2:L,y2:D,padding:O,projectedAnchorX:Z,projectedAnchorY:Q,projectedAnchorZ:de,tileAnchorX:ee,tileAnchorY:ce,featureIndex:fe}=e.get(w);M.verticalIconBox={x1:A,y1:I,x2:L,y2:D,padding:O,projectedAnchorX:Z,projectedAnchorY:Q,projectedAnchorZ:de,tileAnchorX:ee,tileAnchorY:ce},M.verticalIconFeatureIndex=fe}return M}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let r=0;r<this.symbolInstances.length;r++){const a=this.symbolInstances.get(r);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,a.textBoxStartIndex,a.textBoxEndIndex,a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a.iconBoxStartIndex,a.iconBoxEndIndex,a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,r){const a=e.placedSymbolArray.get(r),c=a.vertexStartIndex+4*a.numGlyphs;for(let d=a.vertexStartIndex;d<c;d+=4)e.indexArray.emplaceBack(d,d+1,d+2),e.indexArray.emplaceBack(d+1,d+2,d+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const r=Math.sin(e),a=Math.cos(e),c=[],d=[],m=[];for(let y=0;y<this.symbolInstances.length;++y){m.push(y);const w=this.symbolInstances.get(y);c.push(0|Math.round(r*w.tileAnchorX+a*w.tileAnchorY)),d.push(w.featureIndex)}return m.sort((y,w)=>c[y]-c[w]||d[w]-d[y]),m}addToSortKeyRanges(e,r){const a=this.sortKeyRanges[this.sortKeyRanges.length-1];a&&a.sortKey===r?a.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:r,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const r of this.symbolInstanceIndexes){const a=this.symbolInstances.get(r);this.featureSortOrder.push(a.featureIndex);const{rightJustifiedTextSymbolIndex:c,centerJustifiedTextSymbolIndex:d,leftJustifiedTextSymbolIndex:m,verticalPlacedTextSymbolIndex:y,placedIconSymbolIndex:w,verticalPlacedIconSymbolIndex:b}=a;c>=0&&this.addIndicesForPlacedSymbol(this.text,c),d>=0&&d!==c&&this.addIndicesForPlacedSymbol(this.text,d),m>=0&&m!==d&&m!==c&&this.addIndicesForPlacedSymbol(this.text,m),y>=0&&this.addIndicesForPlacedSymbol(this.text,y),w>=0&&this.addIndicesForPlacedSymbol(this.icon,w),b>=0&&this.addIndicesForPlacedSymbol(this.icon,b)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}vt(Ca,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),Ca.MAX_GLYPHS=65535,Ca.addDynamicAttributes=t3;const tw=new oe({"symbol-placement":new B(Ve.layout_symbol["symbol-placement"]),"symbol-spacing":new B(Ve.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new B(Ve.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new H(Ve.layout_symbol["symbol-sort-key"]),"symbol-z-order":new B(Ve.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new B(Ve.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new B(Ve.layout_symbol["icon-ignore-placement"]),"icon-optional":new B(Ve.layout_symbol["icon-optional"]),"icon-rotation-alignment":new B(Ve.layout_symbol["icon-rotation-alignment"]),"icon-size":new H(Ve.layout_symbol["icon-size"]),"icon-text-fit":new B(Ve.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new B(Ve.layout_symbol["icon-text-fit-padding"]),"icon-image":new H(Ve.layout_symbol["icon-image"]),"icon-rotate":new H(Ve.layout_symbol["icon-rotate"]),"icon-padding":new B(Ve.layout_symbol["icon-padding"]),"icon-keep-upright":new B(Ve.layout_symbol["icon-keep-upright"]),"icon-offset":new H(Ve.layout_symbol["icon-offset"]),"icon-anchor":new H(Ve.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new B(Ve.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new B(Ve.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new B(Ve.layout_symbol["text-rotation-alignment"]),"text-field":new H(Ve.layout_symbol["text-field"]),"text-font":new H(Ve.layout_symbol["text-font"]),"text-size":new H(Ve.layout_symbol["text-size"]),"text-max-width":new H(Ve.layout_symbol["text-max-width"]),"text-line-height":new H(Ve.layout_symbol["text-line-height"]),"text-letter-spacing":new H(Ve.layout_symbol["text-letter-spacing"]),"text-justify":new H(Ve.layout_symbol["text-justify"]),"text-radial-offset":new H(Ve.layout_symbol["text-radial-offset"]),"text-variable-anchor":new B(Ve.layout_symbol["text-variable-anchor"]),"text-anchor":new H(Ve.layout_symbol["text-anchor"]),"text-max-angle":new B(Ve.layout_symbol["text-max-angle"]),"text-writing-mode":new B(Ve.layout_symbol["text-writing-mode"]),"text-rotate":new H(Ve.layout_symbol["text-rotate"]),"text-padding":new B(Ve.layout_symbol["text-padding"]),"text-keep-upright":new B(Ve.layout_symbol["text-keep-upright"]),"text-transform":new H(Ve.layout_symbol["text-transform"]),"text-offset":new H(Ve.layout_symbol["text-offset"]),"text-allow-overlap":new B(Ve.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new B(Ve.layout_symbol["text-ignore-placement"]),"text-optional":new B(Ve.layout_symbol["text-optional"])});var o4={paint:new oe({"icon-opacity":new H(Ve.paint_symbol["icon-opacity"]),"icon-color":new H(Ve.paint_symbol["icon-color"]),"icon-halo-color":new H(Ve.paint_symbol["icon-halo-color"]),"icon-halo-width":new H(Ve.paint_symbol["icon-halo-width"]),"icon-halo-blur":new H(Ve.paint_symbol["icon-halo-blur"]),"icon-translate":new B(Ve.paint_symbol["icon-translate"]),"icon-translate-anchor":new B(Ve.paint_symbol["icon-translate-anchor"]),"text-opacity":new H(Ve.paint_symbol["text-opacity"]),"text-color":new H(Ve.paint_symbol["text-color"],{runtimeType:si,getOverride:n=>n.textColor,hasOverride:n=>!!n.textColor}),"text-halo-color":new H(Ve.paint_symbol["text-halo-color"]),"text-halo-width":new H(Ve.paint_symbol["text-halo-width"]),"text-halo-blur":new H(Ve.paint_symbol["text-halo-blur"]),"text-translate":new B(Ve.paint_symbol["text-translate"]),"text-translate-anchor":new B(Ve.paint_symbol["text-translate-anchor"])}),layout:tw};class l8{constructor(e){this.type=e.property.overrides?e.property.overrides.runtimeType:ra,this.defaultValue=e}evaluate(e){if(e.formattedSection){const r=this.defaultValue.property.overrides;if(r&&r.hasOverride(e.formattedSection))return r.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}vt(l8,"FormatSectionOverride",{omit:["defaultValue"]});class n3 extends Ro{constructor(e){super(e,o4)}recalculate(e,r){super.recalculate(e,r),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const a=this.layout.get("text-writing-mode");if(a){const c=[];for(const d of a)c.indexOf(d)<0&&c.push(d);this.layout._values["text-writing-mode"]=c}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(e,r,a,c){const d=this.layout.get(e).evaluate(r,{},a,c),m=this._unevaluatedLayout._values[e];return m.isDataDriven()||ma(m.value)||!d?d:function(y,w){return w.replace(/{([^{}]+)}/g,(b,M)=>M in y?String(y[M]):"")}(r.properties,d)}createBucket(e){return new Ca(e)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const e of o4.paint.overridableProperties){if(!n3.hasPaintOverride(this.layout,e))continue;const r=this.paint.get(e),a=new l8(r),c=new A1(a,r.property.specification);let d=null;d=r.value.kind==="constant"||r.value.kind==="source"?new ku("source",c):new bl("composite",c,r.value.zoomStops,r.value._interpolationType),this.paint._values[e]=new K(r.property,d,r.parameters)}}_handleOverridablePaintPropertyUpdate(e,r,a){return!(!this.layout||r.isDataDriven()||a.isDataDriven())&&n3.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,r){const a=e.get("text-field"),c=o4.paint.properties[r];let d=!1;const m=y=>{for(const w of y)if(c.overrides&&c.overrides.hasOverride(w))return void(d=!0)};if(a.value.kind==="constant"&&a.value.value instanceof Hr)m(a.value.value.sections);else if(a.value.kind==="source"){const y=b=>{d||(b instanceof Ss&&Gn(b.value)===ol?m(b.value.sections):b instanceof ns?m(b.sections):b.eachChild(y))},w=a.value;w._styleExpression&&y(w._styleExpression.expression)}return d}getProgramConfiguration(e){return new ba(this,e)}}var nw={paint:new oe({"background-color":new B(Ve.paint_background["background-color"]),"background-pattern":new B(Ve.paint_background["background-pattern"]),"background-opacity":new B(Ve.paint_background["background-opacity"])})},rw={paint:new oe({"raster-opacity":new B(Ve.paint_raster["raster-opacity"]),"raster-hue-rotate":new B(Ve.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new B(Ve.paint_raster["raster-brightness-min"]),"raster-brightness-max":new B(Ve.paint_raster["raster-brightness-max"]),"raster-saturation":new B(Ve.paint_raster["raster-saturation"]),"raster-contrast":new B(Ve.paint_raster["raster-contrast"]),"raster-resampling":new B(Ve.paint_raster["raster-resampling"]),"raster-fade-duration":new B(Ve.paint_raster["raster-fade-duration"])})};class iw extends Ro{constructor(e){super(e,{}),this.implementation=e}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isLayerDraped(){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}onRemove(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}var ow={paint:new oe({"sky-type":new B(Ve.paint_sky["sky-type"]),"sky-atmosphere-sun":new B(Ve.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new B(Ve.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new B(Ve.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new B(Ve.paint_sky["sky-gradient-radius"]),"sky-gradient":new ie(Ve.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new B(Ve.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new B(Ve.paint_sky["sky-atmosphere-color"]),"sky-opacity":new B(Ve.paint_sky["sky-opacity"])})};function s4(n,e,r){const a=[0,0,1],c=M7([]);return P7(c,c,r?-bt(n)+Math.PI:bt(n)),C7(c,c,-bt(e)),b7(a,a,c),Kr(a,a)}const sw={circle:class extends Ro{constructor(n){super(n,gv)}createBucket(n){return new zd(n)}queryRadius(n){const e=n;return Z1("circle-radius",this,e)+Z1("circle-stroke-width",this,e)+zh(this.paint.get("circle-translate"))}queryIntersectsFeature(n,e,r,a,c,d,m,y){const w=K7(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),d.angle,n.pixelToTileUnitsFactor),b=this.paint.get("circle-radius").evaluate(e,r)+this.paint.get("circle-stroke-width").evaluate(e,r);return Y7(n,a,d,m,y,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",w,b)}getProgramIds(){return["circle"]}getProgramConfiguration(n){return new ba(this,n)}},heatmap:class extends Ro{createBucket(n){return new Q7(n)}constructor(n){super(n,wv),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Fd({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(n){return Z1("heatmap-radius",this,n)}queryIntersectsFeature(n,e,r,a,c,d,m,y){const w=this.paint.get("heatmap-radius").evaluate(e,r);return Y7(n,a,d,m,y,!0,!0,new Me(0,0),w)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(n){return new ba(this,n)}},hillshade:class extends Ro{constructor(n){super(n,bv)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends Ro{constructor(n){super(n,Ov)}getProgramIds(){const n=this.paint.get("fill-pattern"),e=n&&n.constantOr(1),r=[e?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&r.push(e&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),r}getProgramConfiguration(n){return new ba(this,n)}recalculate(n,e){super.recalculate(n,e);const r=this.paint._values["fill-outline-color"];r.value.kind==="constant"&&r.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new Bh(n)}queryRadius(){return zh(this.paint.get("fill-translate"))}queryIntersectsFeature(n,e,r,a,c,d){return!n.queryGeometry.isAboveHorizon&&Z7(X7(n.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),d.angle,n.pixelToTileUnitsFactor),a)}isTileClipped(){return!0}},"fill-extrusion":class extends Ro{constructor(n){super(n,ex)}createBucket(n){return new d0(n)}queryRadius(){return zh(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(n){return new ba(this,n)}queryIntersectsFeature(n,e,r,a,c,d,m,y,w){const b=K7(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),d.angle,n.pixelToTileUnitsFactor),M=this.paint.get("fill-extrusion-height").evaluate(e,r),A=this.paint.get("fill-extrusion-base").evaluate(e,r),I=[0,0],L=y&&d.elevation,D=d.elevation?d.elevation.exaggeration():1,O=n.tile.getBucket(this);if(L&&O instanceof d0){const ce=O.centroidVertexArray,fe=w+1;fe<ce.length&&(I[0]=ce.geta_centroid_pos0(fe),I[1]=ce.geta_centroid_pos1(fe))}if(I[0]===0&&I[1]===1)return!1;d.projection.name==="globe"&&(a=yf([a],[new Me(0,0),new Me(kt,kt)],n.tileID.canonical).map(ce=>ce.polygon).flat());const Z=L?y:null,[Q,de]=function(ce,fe,pe,Le,Ae,$e,rt,Fe,We,He,et){return ce.projection.name==="globe"?function(at,Ne,dt,wt,ft,jt,ct,Pt,Vt,sn,Gt){const Lt=[],An=[],$t=at.projection.upVectorScale(Gt,at.center.lat,at.worldSize).metersToTile,Zt=[0,0,0,1],bn=[0,0,0,1],Mn=(Tn,Fn,$n,nr)=>{Tn[0]=Fn,Tn[1]=$n,Tn[2]=nr,Tn[3]=1},Cn=gf();dt>0&&(dt+=Cn),wt+=Cn;for(const Tn of Ne){const Fn=[],$n=[];for(const nr of Tn){const En=nr.x+ft.x,ur=nr.y+ft.y,rr=at.projection.projectTilePoint(En,ur,Gt),On=at.projection.upVector(Gt,nr.x,nr.y);let ln=dt,ir=wt;if(ct){const Pn=bf(En,ur,dt,wt,ct,Pt,Vt,sn);ln+=Pn.base,ir+=Pn.top}dt!==0?Mn(Zt,rr.x+On[0]*$t*ln,rr.y+On[1]*$t*ln,rr.z+On[2]*$t*ln):Mn(Zt,rr.x,rr.y,rr.z),Mn(bn,rr.x+On[0]*$t*ir,rr.y+On[1]*$t*ir,rr.z+On[2]*$t*ir),Hn(Zt,Zt,jt),Hn(bn,bn,jt),Fn.push(new H1(Zt[0],Zt[1],Zt[2])),$n.push(new H1(bn[0],bn[1],bn[2]))}Lt.push(Fn),An.push($n)}return[Lt,An]}(ce,fe,pe,Le,Ae,$e,rt,Fe,We,He,et):rt?function(at,Ne,dt,wt,ft,jt,ct,Pt,Vt){const sn=[],Gt=[],Lt=[0,0,0,1];for(const An of at){const $t=[],Zt=[];for(const bn of An){const Mn=bn.x+wt.x,Cn=bn.y+wt.y,Tn=bf(Mn,Cn,Ne,dt,jt,ct,Pt,Vt);Lt[0]=Mn,Lt[1]=Cn,Lt[2]=Tn.base,Lt[3]=1,Dl(Lt,Lt,ft),Lt[3]=Math.max(Lt[3],1e-5);const Fn=new H1(Lt[0]/Lt[3],Lt[1]/Lt[3],Lt[2]/Lt[3]);Lt[0]=Mn,Lt[1]=Cn,Lt[2]=Tn.top,Lt[3]=1,Dl(Lt,Lt,ft),Lt[3]=Math.max(Lt[3],1e-5);const $n=new H1(Lt[0]/Lt[3],Lt[1]/Lt[3],Lt[2]/Lt[3]);$t.push(Fn),Zt.push($n)}sn.push($t),Gt.push(Zt)}return[sn,Gt]}(fe,pe,Le,Ae,$e,rt,Fe,We,He):function(at,Ne,dt,wt,ft){const jt=[],ct=[],Pt=ft[8]*Ne,Vt=ft[9]*Ne,sn=ft[10]*Ne,Gt=ft[11]*Ne,Lt=ft[8]*dt,An=ft[9]*dt,$t=ft[10]*dt,Zt=ft[11]*dt;for(const bn of at){const Mn=[],Cn=[];for(const Tn of bn){const Fn=Tn.x+wt.x,$n=Tn.y+wt.y,nr=ft[0]*Fn+ft[4]*$n+ft[12],En=ft[1]*Fn+ft[5]*$n+ft[13],ur=ft[2]*Fn+ft[6]*$n+ft[14],rr=ft[3]*Fn+ft[7]*$n+ft[15],On=nr+Pt,ln=En+Vt,ir=ur+sn,Pn=Math.max(rr+Gt,1e-5),Qr=nr+Lt,or=En+An,Pr=ur+$t,wr=Math.max(rr+Zt,1e-5);Mn.push(new H1(On/Pn,ln/Pn,ir/Pn)),Cn.push(new H1(Qr/wr,or/wr,Pr/wr))}jt.push(Mn),ct.push(Cn)}return[jt,ct]}(fe,pe,Le,Ae,$e)}(d,a,A,M,b,m,Z,I,D,d.center.lat,n.tileID.canonical),ee=n.queryGeometry;return function(ce,fe,pe){let Le=1/0;Z7(pe,fe)&&(Le=wf(pe,fe[0]));for(let Ae=0;Ae<fe.length;Ae++){const $e=fe[Ae],rt=ce[Ae];for(let Fe=0;Fe<$e.length-1;Fe++){const We=$e[Fe],He=[We,$e[Fe+1],rt[Fe+1],rt[Fe],We];$7(pe,He)&&(Le=Math.min(Le,wf(pe,He)))}}return Le!==1/0&&Le}(Q,de,ee.isPointQuery()?ee.screenBounds:ee.screenGeometry)}},line:class extends Ro{constructor(n){super(n,Tf),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const e=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=e._styleExpression&&e._styleExpression.expression instanceof yu,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(n,e){super.recalculate(n,e),this.paint._values["line-floorwidth"]=Ef.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new Vh(n)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(n){return new ba(this,n)}queryRadius(n){const e=n,r=Sf(Z1("line-width",this,e),Z1("line-gap-width",this,e)),a=Z1("line-offset",this,e);return r/2+Math.abs(a)+zh(this.paint.get("line-translate"))}queryIntersectsFeature(n,e,r,a,c,d){if(n.queryGeometry.isAboveHorizon)return!1;const m=X7(n.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),d.angle,n.pixelToTileUnitsFactor),y=n.pixelToTileUnitsFactor/2*Sf(this.paint.get("line-width").evaluate(e,r),this.paint.get("line-gap-width").evaluate(e,r)),w=this.paint.get("line-offset").evaluate(e,r);return w&&(a=function(b,M){const A=[],I=new Me(0,0);for(let L=0;L<b.length;L++){const D=b[L],O=[];for(let Z=0;Z<D.length;Z++){const Q=D[Z],de=D[Z+1],ee=Z===0?I:Q.sub(D[Z-1])._unit()._perp(),ce=Z===D.length-1?I:de.sub(Q)._unit()._perp(),fe=ee._add(ce)._unit();fe._mult(1/(fe.x*ce.x+fe.y*ce.y)),O.push(fe._mult(M)._add(Q))}A.push(O)}return A}(a,w*n.pixelToTileUnitsFactor)),function(b,M,A){for(let I=0;I<M.length;I++){const L=M[I];if(b.length>=3){for(let D=0;D<L.length;D++)if(Ol(b,L[D]))return!0}if(pv(b,L,A))return!0}return!1}(m,a,y)}isTileClipped(){return!0}},symbol:n3,background:class extends Ro{constructor(n){super(n,nw)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Ro{constructor(n){super(n,rw)}getProgramIds(){return["raster"]}},sky:class extends Ro{constructor(n){super(n,ow),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="sky-gradient"?this._updateColorRamp():n!=="sky-atmosphere-sun"&&n!=="sky-atmosphere-halo-color"&&n!=="sky-atmosphere-color"&&n!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Fd({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(n){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const e=n.style.light.properties.get("position");return this._lightPosition.azimuthal!==e.azimuthal||this._lightPosition.polar!==e.polar}return!1}getCenter(n,e){if(this.paint.get("sky-type")==="atmosphere"){const a=this.paint.get("sky-atmosphere-sun"),c=!a,d=n.style.light,m=d.properties.get("position");return c&&d.properties.get("anchor")==="viewport"&&dn("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),c?s4(m.azimuthal,90-m.polar,e):s4(a[0],90-a[1],e)}const r=this.paint.get("sky-gradient-center");return s4(r[0],90-r[1],e)}is3D(){return!1}isSky(){return!0}markSkyboxValid(n){this._skyboxInvalidated=!1,this._lightPosition=n.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const n=this.paint.get("sky-type");return n==="atmosphere"?["skyboxCapture","skybox"]:n==="gradient"?["skyboxGradient"]:null}}};class T0{constructor(e,r,a,c){this.context=e,this.format=a,this.texture=e.gl.createTexture(),this.update(r,c)}update(e,r,a){const{width:c,height:d}=e,{context:m}=this,{gl:y}=m,{HTMLImageElement:w,HTMLCanvasElement:b,HTMLVideoElement:M,ImageData:A,ImageBitmap:I}=P;if(y.bindTexture(y.TEXTURE_2D,this.texture),m.pixelStoreUnpackFlipY.set(!1),m.pixelStoreUnpack.set(1),m.pixelStoreUnpackPremultiplyAlpha.set(this.format===y.RGBA&&(!r||r.premultiply!==!1)),a||this.size&&this.size[0]===c&&this.size[1]===d){const{x:L,y:D}=a||{x:0,y:0};e instanceof w||e instanceof b||e instanceof M||e instanceof A||I&&e instanceof I?y.texSubImage2D(y.TEXTURE_2D,0,L,D,y.RGBA,y.UNSIGNED_BYTE,e):y.texSubImage2D(y.TEXTURE_2D,0,L,D,c,d,y.RGBA,y.UNSIGNED_BYTE,e.data)}else this.size=[c,d],e instanceof w||e instanceof b||e instanceof M||e instanceof A||I&&e instanceof I?y.texImage2D(y.TEXTURE_2D,0,this.format,this.format,y.UNSIGNED_BYTE,e):y.texImage2D(y.TEXTURE_2D,0,this.format,c,d,0,this.format,y.UNSIGNED_BYTE,e.data);this.useMipmap=!!(r&&r.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&y.generateMipmap(y.TEXTURE_2D)}bind(e,r){const{context:a}=this,{gl:c}=a;c.bindTexture(c.TEXTURE_2D,this.texture),e!==this.filter&&(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,e),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,this.useMipmap?e===c.NEAREST?c.NEAREST_MIPMAP_NEAREST:c.LINEAR_MIPMAP_NEAREST:e),this.filter=e),r!==this.wrap&&(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,r),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,r),this.wrap=r)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class aw{constructor(e){this._callback=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class lw{constructor(){this.tasks={},this.taskQueue=[],wo(["process"],this),this.invoker=new aw(this.process),this.nextId=0}add(e,r){const a=this.nextId++,c=function({type:d,isSymbolTile:m,zoom:y}){return y=y||0,d==="message"?0:d!=="maybePrepare"||m?d!=="parseTile"||m?d==="parseTile"&&m?300-y:d==="maybePrepare"&&m?400-y:500:200-y:100-y}(r);if(c===0){zi();try{e()}finally{}return{cancel:()=>{}}}return this.tasks[a]={fn:e,metadata:r,priority:c,id:a},this.taskQueue.push(a),this.invoker.trigger(),{cancel:()=>{delete this.tasks[a]}}}process(){zi();try{if(this.taskQueue=this.taskQueue.filter(a=>!!this.tasks[a]),!this.taskQueue.length)return;const e=this.pick();if(e===null)return;const r=this.tasks[e];if(delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),!r)return;r.fn()}finally{}}pick(){let e=null,r=1/0;for(let c=0;c<this.taskQueue.length;c++){const d=this.tasks[this.taskQueue[c]];d.priority<r&&(r=d.priority,e=c)}if(e===null)return null;const a=this.taskQueue[e];return this.taskQueue.splice(e,1),a}remove(){this.invoker.remove()}}class c8{constructor(e){this._stringToNumber={},this._numberToString=[];for(let r=0;r<e.length;r++){const a=e[r];this._stringToNumber[a]=r,this._numberToString[r]=a}}encode(e){return this._stringToNumber[e]}decode(e){return this._numberToString[e]}}const cw=["tile","layer","source","sourceLayer","state"];class u8{constructor(e,r,a,c,d){this.type="Feature",this._vectorTileFeature=e,this._z=r,this._x=a,this._y=c,this.properties=e.properties,this.id=d}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};this.id!==void 0&&(e.id=this.id);for(const r of cw)this[r]!==void 0&&(e[r]=this[r]);return e}}const co=32,cs=33,Pa=new Uint16Array(8184);for(let n=0;n<2046;n++){let e=n+2,r=0,a=0,c=0,d=0,m=0,y=0;for(1&e?c=d=m=co:r=a=y=co;(e>>=1)>1;){const b=r+c>>1,M=a+d>>1;1&e?(c=r,d=a,r=m,a=y):(r=c,a=d,c=m,d=y),m=b,y=M}const w=4*n;Pa[w+0]=r,Pa[w+1]=a,Pa[w+2]=c,Pa[w+3]=d}const us=new Uint16Array(2178),Aa=new Uint8Array(1089),r3=new Uint16Array(1089);function h8(n){return n===0?-.03125:n===32?.03125:0}var d8=Te([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const p8={type:2,extent:kt,loadGeometry:()=>[[new Me(0,0),new Me(kt+1,0),new Me(kt+1,kt+1),new Me(0,kt+1),new Me(0,0)]]};class a4{constructor(e,r,a,c,d){this.tileID=e,this.uid=Yn(),this.uses=0,this.tileSize=r,this.tileZoom=a,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=d,this.expiredRequestCount=0,this.state="loading",c&&c.transform&&(this.projection=c.transform.projection)}registerFadeDuration(e){const r=e+this.timeAdded;r<Di.now()||this.fadeEndTime&&r<this.fadeEndTime||(this.fadeEndTime=r)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=Nl(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(e,r,a){if(this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(c,d){const m={};if(!d)return m;for(const y of c){const w=y.layerIds.map(b=>d.getLayer(b)).filter(Boolean);if(w.length!==0){y.layers=w,y.stateDependentLayerIds&&(y.stateDependentLayers=y.stateDependentLayerIds.map(b=>w.filter(M=>M.id===b)[0]));for(const b of w)m[b.id]=y}}return m}(e.buckets,r.style),this.hasSymbolBuckets=!1;for(const c in this.buckets){const d=this.buckets[c];if(d instanceof Ca){if(this.hasSymbolBuckets=!0,!a)break;d.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const c in this.buckets){const d=this.buckets[c];if(d instanceof Ca&&d.hasRTLText){this.hasRTLText=!0,S.isLoading()||S.isLoaded()||v()!=="deferred"||T();break}}this.queryPadding=0;for(const c in this.buckets){const d=this.buckets[c];this.queryPadding=Math.max(this.queryPadding,r.style.getLayer(c).queryRadius(d))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),e.lineAtlas&&(this.lineAtlas=e.lineAtlas)}else this.collisionBoxArray=new xn}unloadVectorData(){if(this.hasData()){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(e){return this.buckets[e.id]}upload(e){for(const a in this.buckets){const c=this.buckets[a];c.uploadPending()&&c.upload(e)}const r=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new T0(e,this.imageAtlas.image,r.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new T0(e,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new T0(e,this.lineAtlas.image,r.ALPHA),this.lineAtlas.uploaded=!0)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,r,a,c,d,m,y,w){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:c,pixelPosMatrix:y,transform:m,params:d,tileTransform:this.tileTransform},e,r,a):{}}querySourceFeatures(e,r){const a=this.latestFeatureIndex;if(!a||!a.rawTileData)return;const c=a.loadVTLayers(),d=r?r.sourceLayer:"",m=c._geojsonTileLayer||c[d];if(!m)return;const y=L1(r&&r.filter),{z:w,x:b,y:M}=this.tileID.canonical,A={z:w,x:b,y:M};for(let I=0;I<m.length;I++){const L=m.feature(I);if(y.needGeometry){const Z=Bl(L,!0);if(!y.filter(new C(this.tileID.overscaledZ),Z,this.tileID.canonical))continue}else if(!y.filter(new C(this.tileID.overscaledZ),L))continue;const D=a.getId(L,d),O=new u8(L,w,b,M,D);O.tile=A,e.push(O)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const r=this.expirationTime;if(e.cacheControl){const a=Or(e.cacheControl);a["max-age"]&&(this.expirationTime=Date.now()+1e3*a["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const a=Date.now();let c=!1;if(this.expirationTime>a)c=!1;else if(r)if(this.expirationTime<r)c=!0;else{const d=this.expirationTime-r;d?this.expirationTime=a+Math.max(d,3e4):c=!0}else c=!0;c?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(e,r){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(e).length===0||!r)return;const a=this.latestFeatureIndex.loadVTLayers(),c=r.style.listImages();for(const d in this.buckets){if(!r.style.hasLayer(d))continue;const m=this.buckets[d],y=m.layers[0].sourceLayer||"_geojsonTileLayer",w=a[y],b=e[y];if(!w||!b||Object.keys(b).length===0)continue;if(m.update(b,w,c,this.imageAtlas&&this.imageAtlas.patternPositions||{}),m instanceof Vh||m instanceof Bh){const A=r.style._getSourceCache(m.layers[0].source);r._terrain&&r._terrain.enabled&&A&&m.programConfigurations.needsUpload&&r._terrain._clearRenderCacheForTile(A.id,this.tileID)}const M=r&&r.style&&r.style.getLayer(d);M&&(this.queryPadding=Math.max(this.queryPadding,M.queryRadius(m)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Di.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=Di.now()+e}setTexture(e,r){const a=r.context,c=a.gl;this.texture=this.texture||r.getTileTexture(e.width),this.texture?this.texture.update(e,{useMipmap:!0}):(this.texture=new T0(a,e,c.RGBA,{useMipmap:!0}),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE))}setDependencies(e,r){const a={};for(const c of r)a[c]=!0;this.dependencies[e]=a}hasDependency(e,r){for(const a of e){const c=this.dependencies[a];if(c){for(const d of r)if(c[d])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(e,r){if(!r||r.name==="mercator"||this._tileDebugBuffer)return;const a=Bs(p8,this.tileID.canonical,this.tileTransform)[0],c=new nt,d=new bi;for(let m=0;m<a.length;m++){const{x:y,y:w}=a[m];c.emplaceBack(y,w),d.emplaceBack(m)}d.emplaceBack(0),this._tileDebugIndexBuffer=e.createIndexBuffer(d),this._tileDebugBuffer=e.createVertexBuffer(c,t0.members),this._tileDebugSegments=er.simpleSegment(0,0,c.length,d.length)}_makeTileBoundsBuffers(e,r){if(this._tileBoundsBuffer||!r||r.name==="mercator")return;const a=Bs(p8,this.tileID.canonical,this.tileTransform)[0];let c,d;if(this.isRaster){const m=function(y,w){const b=Nl(y,w),M=Math.pow(2,y.z);for(let Z=0;Z<cs;Z++)for(let Q=0;Q<cs;Q++){const de=Ui((y.x+(Q+h8(Q))/co)/M),ee=Dr((y.y+(Z+h8(Z))/co)/M),ce=w.project(de,ee),fe=Z*cs+Q;us[2*fe+0]=Math.round((ce.x*b.scale-b.x)*kt),us[2*fe+1]=Math.round((ce.y*b.scale-b.y)*kt)}Aa.fill(0),r3.fill(0);for(let Z=2045;Z>=0;Z--){const Q=4*Z,de=Pa[Q+0],ee=Pa[Q+1],ce=Pa[Q+2],fe=Pa[Q+3],pe=de+ce>>1,Le=ee+fe>>1,Ae=pe+Le-ee,$e=Le+de-pe,rt=ee*cs+de,Fe=fe*cs+ce,We=Le*cs+pe,He=Math.hypot((us[2*rt+0]+us[2*Fe+0])/2-us[2*We+0],(us[2*rt+1]+us[2*Fe+1])/2-us[2*We+1])>=16;Aa[We]=Aa[We]||(He?1:0),Z<1022&&(Aa[We]=Aa[We]||Aa[(ee+$e>>1)*cs+(de+Ae>>1)]||Aa[(fe+$e>>1)*cs+(ce+Ae>>1)])}const A=new qe,I=new St;let L=0;function D(Z,Q){const de=Q*cs+Z;return r3[de]===0&&(A.emplaceBack(us[2*de+0],us[2*de+1],Z*kt/co,Q*kt/co),r3[de]=++L),r3[de]-1}function O(Z,Q,de,ee,ce,fe){const pe=Z+de>>1,Le=Q+ee>>1;if(Math.abs(Z-ce)+Math.abs(Q-fe)>1&&Aa[Le*cs+pe])O(ce,fe,Z,Q,pe,Le),O(de,ee,ce,fe,pe,Le);else{const Ae=D(Z,Q),$e=D(de,ee),rt=D(ce,fe);I.emplaceBack(Ae,$e,rt)}}return O(0,0,co,co,co,0),O(co,co,0,0,0,co),{vertices:A,indices:I}}(this.tileID.canonical,r);c=m.vertices,d=m.indices}else{c=new qe,d=new St;for(const{x:y,y:w}of a)c.emplaceBack(y,w,0,0);const m=jd(c.int16,void 0,4);for(let y=0;y<m.length;y+=3)d.emplaceBack(m[y],m[y+1],m[y+2])}this._tileBoundsBuffer=e.createVertexBuffer(c,d8.members),this._tileBoundsIndexBuffer=e.createIndexBuffer(d),this._tileBoundsSegments=er.simpleSegment(0,0,c.length,d.length)}_makeGlobeTileDebugBuffers(e,r){const a=r.projection;if(!a||a.name!=="globe"||r.freezeTileCoverage)return;const c=this.tileID.canonical,d=i0(L7(c,r)),m=G1(r.zoom);let y;m>0&&(y=md(new Float64Array(16),r.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(e,c,r,d,y,m),this._makeGlobeTileDebugTextBuffer(e,c,r,d,y,m)}_globePoint(e,r,a,c,d,m,y){let w=r0(e,r,a);if(m){const b=1<<a.z,M=as(c.center.lng),A=ls(c.center.lat),I=(a.x+.5)/b-M;let L=0;I>.5?L=-1:I<-.5&&(L=1);let D=(e/kt+a.x)/b+L,O=(r/kt+a.y)/b;D=(D-M)*c._pixelsPerMercatorPixel+M,O=(O-A)*c._pixelsPerMercatorPixel+A;const Z=[D*c.worldSize,O*c.worldSize,0];Hn(Z,Z,m),w=Fl(w,Z,y)}return Hn(w,w,d)}_makeGlobeTileDebugBorderBuffer(e,r,a,c,d,m){const y=new nt,w=new bi,b=new Pe,M=(I,L,D,O,Z)=>{const Q=(D-I)/(Z-1),de=(O-L)/(Z-1),ee=y.length;for(let ce=0;ce<Z;ce++){const fe=I+ce*Q,pe=L+ce*de;y.emplaceBack(fe,pe);const Le=this._globePoint(fe,pe,r,a,c,d,m);b.emplaceBack(Le[0],Le[1],Le[2]),w.emplaceBack(ee+ce)}},A=kt;M(0,0,A,0,16),M(A,0,A,A,16),M(A,A,0,A,16),M(0,A,0,0,16),this._tileDebugIndexBuffer=e.createIndexBuffer(w),this._tileDebugBuffer=e.createVertexBuffer(y,t0.members),this._globeTileDebugBorderBuffer=e.createVertexBuffer(b,I7.members),this._tileDebugSegments=er.simpleSegment(0,0,y.length,w.length)}_makeGlobeTileDebugTextBuffer(e,r,a,c,d,m){const y=kt/4,w=new nt,b=new St,M=new Pe,A=25;b.reserve(32),w.reserve(A),M.reserve(A);const I=(L,D)=>A*L+D;for(let L=0;L<A;L++){const D=L*y;for(let O=0;O<A;O++){const Z=O*y;w.emplaceBack(Z,D);const Q=this._globePoint(Z,D,r,a,c,d,m);M.emplaceBack(Q[0],Q[1],Q[2])}}for(let L=0;L<4;L++)for(let D=0;D<4;D++){const O=I(L,D),Z=I(L,D+1),Q=I(L+1,D),de=I(L+1,D+1);b.emplaceBack(O,Z,Q),b.emplaceBack(Q,Z,de)}this._tileDebugTextIndexBuffer=e.createIndexBuffer(b),this._tileDebugTextBuffer=e.createVertexBuffer(w,t0.members),this._globeTileDebugTextBuffer=e.createVertexBuffer(M,I7.members),this._tileDebugTextSegments=er.simpleSegment(0,0,A,32)}}class uw{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,r,a){const c=String(r);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][c]=this.stateChanges[e][c]||{},Nt(this.stateChanges[e][c],a),this.deletedStates[e]===null){this.deletedStates[e]={};for(const d in this.state[e])d!==c&&(this.deletedStates[e][d]=null)}else if(this.deletedStates[e]&&this.deletedStates[e][c]===null){this.deletedStates[e][c]={};for(const d in this.state[e][c])a[d]||(this.deletedStates[e][c][d]=null)}else for(const d in a)this.deletedStates[e]&&this.deletedStates[e][c]&&this.deletedStates[e][c][d]===null&&delete this.deletedStates[e][c][d]}removeFeatureState(e,r,a){if(this.deletedStates[e]===null)return;const c=String(r);if(this.deletedStates[e]=this.deletedStates[e]||{},a&&r!==void 0)this.deletedStates[e][c]!==null&&(this.deletedStates[e][c]=this.deletedStates[e][c]||{},this.deletedStates[e][c][a]=null);else if(r!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][c])for(a in this.deletedStates[e][c]={},this.stateChanges[e][c])this.deletedStates[e][c][a]=null;else this.deletedStates[e][c]=null;else this.deletedStates[e]=null}getState(e,r){const a=String(r),c=Nt({},(this.state[e]||{})[a],(this.stateChanges[e]||{})[a]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){const d=this.deletedStates[e][r];if(d===null)return{};for(const m in d)delete c[m]}return c}initializeTileState(e,r){e.setFeatureState(this.state,r)}coalesceChanges(e,r){const a={};for(const c in this.stateChanges){this.state[c]=this.state[c]||{};const d={};for(const m in this.stateChanges[c])this.state[c][m]||(this.state[c][m]={}),Nt(this.state[c][m],this.stateChanges[c][m]),d[m]=this.state[c][m];a[c]=d}for(const c in this.deletedStates){this.state[c]=this.state[c]||{};const d={};if(this.deletedStates[c]===null)for(const m in this.state[c])d[m]={},this.state[c][m]={};else for(const m in this.deletedStates[c]){if(this.deletedStates[c][m]===null)this.state[c][m]={};else if(this.state[c][m])for(const y of Object.keys(this.deletedStates[c][m]))delete this.state[c][m][y];d[m]=this.state[c][m]}a[c]=a[c]||{},Nt(a[c],d)}if(this.stateChanges={},this.deletedStates={},Object.keys(a).length!==0)for(const c in e)e[c].setFeatureState(a,r)}}class f8{constructor(e){this.size=e,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(e,r){const a=this.toIdx(e,r);return{min:this.minimums[a],max:this.maximums[a]}}isLeaf(e,r){return this.leaves[this.toIdx(e,r)]}toIdx(e,r){return r*this.size+e}}function m8(n,e,r,a){let c=0,d=Number.MAX_VALUE;for(let m=0;m<3;m++)if(Math.abs(a[m])<1e-15){if(r[m]<n[m]||r[m]>e[m])return null}else{const y=1/a[m];let w=(n[m]-r[m])*y,b=(e[m]-r[m])*y;if(w>b){const M=w;w=b,b=M}if(w>c&&(c=w),b<d&&(d=b),c>d)return null}return c}function _8(n,e,r,a,c,d,m,y,w,b,M){const A=a-n,I=c-e,L=d-r,D=m-n,O=y-e,Z=w-r,Q=M[1]*Z-M[2]*O,de=M[2]*D-M[0]*Z,ee=M[0]*O-M[1]*D,ce=A*Q+I*de+L*ee;if(Math.abs(ce)<1e-15)return null;const fe=1/ce,pe=b[0]-n,Le=b[1]-e,Ae=b[2]-r,$e=(pe*Q+Le*de+Ae*ee)*fe;if($e<0||$e>1)return null;const rt=Le*L-Ae*I,Fe=Ae*A-pe*L,We=pe*I-Le*A,He=(M[0]*rt+M[1]*Fe+M[2]*We)*fe;return He<0||$e+He>1?null:(D*rt+O*Fe+Z*We)*fe}function g8(n,e,r){return(n-e)/(r-e)}function y8(n,e,r,a,c,d,m,y,w){const b=1<<r,M=d-a,A=m-c,I=(n+1)/b*M+a,L=(e+0)/b*A+c,D=(e+1)/b*A+c;y[0]=(n+0)/b*M+a,y[1]=L,w[0]=I,w[1]=D}class v8{constructor(e){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=e,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const r=function(d){const m=Math.ceil(Math.log2(d.dim/8)),y=[];let w=Math.ceil(Math.pow(2,m));const b=1/w,M=(L,D,O,Z,Q)=>{const de=Z?1:0,ee=(L+1)*O-de,ce=D*O,fe=(D+1)*O-de;Q[0]=L*O,Q[1]=ce,Q[2]=ee,Q[3]=fe};let A=new f8(w);const I=[];for(let L=0;L<w*w;L++){M(L%w,Math.floor(L/w),b,!1,I);const D=Ia(I[0],I[1],d),O=Ia(I[2],I[1],d),Z=Ia(I[2],I[3],d),Q=Ia(I[0],I[3],d);A.minimums.push(Math.min(D,O,Z,Q)),A.maximums.push(Math.max(D,O,Z,Q)),A.leaves.push(1)}for(y.push(A),w/=2;w>=1;w/=2){const L=y[y.length-1];A=new f8(w);for(let D=0;D<w*w;D++){M(D%w,Math.floor(D/w),2,!0,I);const O=L.getElevation(I[0],I[1]),Z=L.getElevation(I[2],I[1]),Q=L.getElevation(I[2],I[3]),de=L.getElevation(I[0],I[3]),ee=L.isLeaf(I[0],I[1]),ce=L.isLeaf(I[2],I[1]),fe=L.isLeaf(I[2],I[3]),pe=L.isLeaf(I[0],I[3]),Le=Math.min(O.min,Z.min,Q.min,de.min),Ae=Math.max(O.max,Z.max,Q.max,de.max),$e=ee&&ce&&fe&&pe;A.maximums.push(Ae),A.minimums.push(Le),A.leaves.push(Ae-Le<=5&&$e?1:0)}y.push(A)}return y}(this.dem),a=r.length-1,c=r[a];this._addNode(c.minimums[0],c.maximums[0],c.leaves[0]),this._construct(r,0,0,a,0)}raycastRoot(e,r,a,c,d,m,y=1){return m8([e,r,-100],[a,c,this.maximums[0]*y],d,m)}raycast(e,r,a,c,d,m,y=1){if(!this.nodeCount)return null;const w=this.raycastRoot(e,r,a,c,d,m,y);if(w==null)return null;const b=[],M=[],A=[],I=[],L=[{idx:0,t:w,nodex:0,nodey:0,depth:0}];for(;L.length>0;){const{idx:D,t:O,nodex:Z,nodey:Q,depth:de}=L.pop();if(this.leaves[D]){y8(Z,Q,de,e,r,a,c,A,I);const ce=1<<de,fe=(Z+0)/ce,pe=(Z+1)/ce,Le=(Q+0)/ce,Ae=(Q+1)/ce,$e=Ia(fe,Le,this.dem)*y,rt=Ia(pe,Le,this.dem)*y,Fe=Ia(pe,Ae,this.dem)*y,We=Ia(fe,Ae,this.dem)*y,He=_8(A[0],A[1],$e,I[0],A[1],rt,I[0],I[1],Fe,d,m),et=_8(I[0],I[1],Fe,A[0],I[1],We,A[0],A[1],$e,d,m),at=Math.min(He!==null?He:Number.MAX_VALUE,et!==null?et:Number.MAX_VALUE);if(at!==Number.MAX_VALUE)return at;{const Ne=Qu([],d,m,O);if(x8($e,rt,We,Fe,g8(Ne[0],A[0],I[0]),g8(Ne[1],A[1],I[1]))>=Ne[2])return O}continue}let ee=0;for(let ce=0;ce<this._siblingOffset.length;ce++){y8((Z<<1)+this._siblingOffset[ce][0],(Q<<1)+this._siblingOffset[ce][1],de+1,e,r,a,c,A,I),A[2]=-100,I[2]=this.maximums[this.childOffsets[D]+ce]*y;const fe=m8(A,I,d,m);if(fe!=null){const pe=fe;b[ce]=pe;let Le=!1;for(let Ae=0;Ae<ee&&!Le;Ae++)pe>=b[M[Ae]]&&(M.splice(Ae,0,ce),Le=!0);Le||(M[ee]=ce),ee++}}for(let ce=0;ce<ee;ce++){const fe=M[ce];L.push({idx:this.childOffsets[D]+fe,t:b[fe],nodex:(Z<<1)+this._siblingOffset[fe][0],nodey:(Q<<1)+this._siblingOffset[fe][1],depth:de+1})}}return null}_addNode(e,r,a){return this.minimums.push(e),this.maximums.push(r),this.leaves.push(a),this.childOffsets.push(0),this.nodeCount++}_construct(e,r,a,c,d){if(e[c].isLeaf(r,a)===1)return;this.childOffsets[d]||(this.childOffsets[d]=this.nodeCount);const m=c-1,y=e[m];let w=0,b=0;for(let M=0;M<this._siblingOffset.length;M++){const A=2*r+this._siblingOffset[M][0],I=2*a+this._siblingOffset[M][1],L=y.getElevation(A,I),D=y.isLeaf(A,I),O=this._addNode(L.min,L.max,D);D&&(w|=1<<M),b||(b=O)}for(let M=0;M<this._siblingOffset.length;M++)w&1<<M||this._construct(e,2*r+this._siblingOffset[M][0],2*a+this._siblingOffset[M][1],m,b+M)}}function x8(n,e,r,a,c,d){return rn(rn(n,r,d),rn(e,a,d),c)}function Ia(n,e,r){const a=r.dim,c=Ce(n*a-.5,0,a-1),d=Ce(e*a-.5,0,a-1),m=Math.floor(c),y=Math.floor(d),w=Math.min(m+1,a-1),b=Math.min(y+1,a-1);return x8(r.get(m,y),r.get(w,y),r.get(m,b),r.get(w,b),c-m,d-y)}const w8={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function hw(n,e,r){return(256*n*256+256*e+r)/10-1e4}function dw(n,e,r){return 256*n+e+r/256-32768}class i3{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(e,r,a,c=!1,d=!1){if(this.uid=e,r.height!==r.width)throw new RangeError("DEM tiles must be square");if(a&&a!=="mapbox"&&a!=="terrarium")return dn(`"${a}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=r.height;const m=this.dim=r.height-2,y=new Uint32Array(r.data.buffer);if(this.pixels=new Uint8Array(r.data.buffer),this.encoding=a||"mapbox",this.borderReady=c,!c){for(let w=0;w<m;w++)y[this._idx(-1,w)]=y[this._idx(0,w)],y[this._idx(m,w)]=y[this._idx(m-1,w)],y[this._idx(w,-1)]=y[this._idx(w,0)],y[this._idx(w,m)]=y[this._idx(w,m-1)];y[this._idx(-1,-1)]=y[this._idx(0,0)],y[this._idx(m,-1)]=y[this._idx(m-1,0)],y[this._idx(-1,m)]=y[this._idx(0,m-1)],y[this._idx(m,m)]=y[this._idx(m-1,m-1)],d&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new v8(this)}get(e,r,a=!1){a&&(e=Ce(e,-1,this.dim),r=Ce(r,-1,this.dim));const c=4*this._idx(e,r);return(this.encoding==="terrarium"?dw:hw)(this.pixels[c],this.pixels[c+1],this.pixels[c+2])}static getUnpackVector(e){return w8[e]}get unpackVector(){return w8[this.encoding]}_idx(e,r){if(e<-1||e>=this.dim+1||r<-1||r>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(r+1)*this.stride+(e+1)}static pack(e,r){const a=[0,0,0,0],c=i3.getUnpackVector(r);let d=Math.floor((e+c[3])/c[2]);return a[2]=d%256,d=Math.floor(d/256),a[1]=d%256,d=Math.floor(d/256),a[0]=d,a}getPixels(){return new Ei({width:this.stride,height:this.stride},this.pixels)}backfillBorder(e,r,a){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let c=r*this.dim,d=r*this.dim+this.dim,m=a*this.dim,y=a*this.dim+this.dim;switch(r){case-1:c=d-1;break;case 1:d=c+1}switch(a){case-1:m=y-1;break;case 1:y=m+1}const w=-r*this.dim,b=-a*this.dim;for(let M=m;M<y;M++)for(let A=c;A<d;A++){const I=4*this._idx(A,M),L=4*this._idx(A+w,M+b);this.pixels[I+0]=e.pixels[L+0],this.pixels[I+1]=e.pixels[L+1],this.pixels[I+2]=e.pixels[L+2],this.pixels[I+3]=e.pixels[L+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}vt(i3,"DEMData"),vt(v8,"DemMinMaxQuadTree",{omit:["dem"]});class pw{constructor(e,r){this.max=e,this.onRemove=r,this.reset()}reset(){for(const e in this.data)for(const r of this.data[e])r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value);return this.data={},this.order=[],this}add(e,r,a){const c=e.wrapped().key;this.data[c]===void 0&&(this.data[c]=[]);const d={value:r,timeout:void 0};if(a!==void 0&&(d.timeout=setTimeout(()=>{this.remove(e,d)},a)),this.data[c].push(d),this.order.push(c),this.order.length>this.max){const m=this._getAndRemoveByKey(this.order[0]);m&&this.onRemove(m)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const r=this.data[e].shift();return r.timeout&&clearTimeout(r.timeout),this.data[e].length===0&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),r.value}getByKey(e){const r=this.data[e];return r?r[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,r){if(!this.has(e))return this;const a=e.wrapped().key,c=r===void 0?0:this.data[a].indexOf(r),d=this.data[a][c];return this.data[a].splice(c,1),d.timeout&&clearTimeout(d.timeout),this.data[a].length===0&&delete this.data[a],this.onRemove(d.value),this.order.splice(this.order.indexOf(a),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const r=this._getAndRemoveByKey(this.order[0]);r&&this.onRemove(r)}return this}filter(e){const r=[];for(const a in this.data)for(const c of this.data[a])e(c.value)||r.push(c);for(const a of r)this.remove(a.value.tileID,a)}}class ic{constructor(e,r,a){this.func=e,this.mask=r,this.range=a}}ic.ReadOnly=!1,ic.ReadWrite=!0,ic.disabled=new ic(519,ic.ReadOnly,[0,1]);const l4=7680;class c4{constructor(e,r,a,c,d,m){this.test=e,this.ref=r,this.mask=a,this.fail=c,this.depthFail=d,this.pass=m}}c4.disabled=new c4({func:519,mask:0},0,0,l4,l4,l4);class hs{constructor(e,r,a){this.blendFunction=e,this.blendColor=r,this.mask=a}}hs.Replace=[1,0],hs.disabled=new hs(hs.Replace,Wn.transparent,[!1,!1,!1,!1]),hs.unblended=new hs(hs.Replace,Wn.transparent,[!0,!0,!0,!0]),hs.alphaBlended=new hs([1,771],Wn.transparent,[!0,!0,!0,!0]);const u4=1029,h4=2305;class jo{constructor(e,r,a){this.enable=e,this.mode=r,this.frontFace=a}}jo.disabled=new jo(!1,u4,h4),jo.backCCW=new jo(!0,u4,h4),jo.backCW=new jo(!0,u4,2304),jo.frontCW=new jo(!0,1028,2304),jo.frontCCW=new jo(!0,1028,h4);class jl extends il{constructor(e,r,a){super(),this.id=e,this._onlySymbols=a,r.on("data",c=>{c.dataType==="source"&&c.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&c.dataType==="source"&&c.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),r.on("error",()=>{this._sourceErrored=!0}),this._source=r,this._tiles={},this._cache=new pw(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=r.minTileCacheSize,this._maxTileCacheSize=r.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new uw,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(e){this.map=e,this._minTileCacheSize=this._minTileCacheSize===void 0&&e?e._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&e?e._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const e in this._tiles){const r=this._tiles[e];if(r.state!=="loaded"&&r.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(e,r){return e.isSymbolTile=this._onlySymbols,this._source.loadTile(e,r)}_unloadTile(e){if(this._source.unloadTile)return this._source.unloadTile(e,()=>{})}_abortTile(e){if(this._source.abortTile)return this._source.abortTile(e,()=>{})}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const r in this._tiles){const a=this._tiles[r];a.upload(e),a.prepare(this.map.style.imageManager)}}getIds(){return Rt(this._tiles).map(e=>e.tileID).sort(b8).map(e=>e.key)}getRenderableIds(e){const r=[];for(const a in this._tiles)this._isIdRenderable(+a,e)&&r.push(this._tiles[a]);return e?r.sort((a,c)=>{const d=a.tileID,m=c.tileID,y=new Me(d.canonical.x,d.canonical.y)._rotate(this.transform.angle),w=new Me(m.canonical.x,m.canonical.y)._rotate(this.transform.angle);return d.overscaledZ-m.overscaledZ||w.y-y.y||w.x-y.x}).map(a=>a.tileID.key):r.map(a=>a.tileID).sort(b8).map(a=>a.key)}hasRenderableParent(e){const r=this.findLoadedParent(e,0);return!!r&&this._isIdRenderable(r.tileID.key)}_isIdRenderable(e,r){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(r||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)this._tiles[e].state!=="errored"&&this._reloadTile(+e,"reloading")}}_reloadTile(e,r){const a=this._tiles[e];a&&(a.state!=="loading"&&(a.state=r),this._loadTile(a,this._tileLoaded.bind(this,a,e,r)))}_tileLoaded(e,r,a,c){if(c)if(e.state="errored",c.status!==404)this._source.fire(new Eo(c,{tile:e}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const d=this.map.painter.terrain;this.update(this.transform,d.getScaledDemTileSize(),!0),d.resetTileLookupCache(this.id)}else this.update(this.transform);else e.timeAdded=Di.now(),a==="expired"&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(r,e),this._source.type==="raster-dem"&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new Ts("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}_backfillDEM(e){const r=this.getRenderableIds();for(let c=0;c<r.length;c++){const d=r[c];if(e.neighboringTiles&&e.neighboringTiles[d]){const m=this.getTileByID(d);a(e,m),a(m,e)}}function a(c,d){if(!c.dem||c.dem.borderReady)return;c.needsHillshadePrepare=!0,c.needsDEMTextureUpload=!0;let m=d.tileID.canonical.x-c.tileID.canonical.x;const y=d.tileID.canonical.y-c.tileID.canonical.y,w=Math.pow(2,c.tileID.canonical.z),b=d.tileID.key;m===0&&y===0||Math.abs(y)>1||(Math.abs(m)>1&&(Math.abs(m+w)===1?m+=w:Math.abs(m-w)===1&&(m-=w)),d.dem&&c.dem&&(c.dem.backfillBorder(d.dem,m,y),c.neighboringTiles&&c.neighboringTiles[b]&&(c.neighboringTiles[b].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,r,a,c){for(const d in this._tiles){let m=this._tiles[d];if(c[d]||!m.hasData()||m.tileID.overscaledZ<=r||m.tileID.overscaledZ>a)continue;let y=m.tileID;for(;m&&m.tileID.overscaledZ>r+1;){const b=m.tileID.scaledTo(m.tileID.overscaledZ-1);m=this._tiles[b.key],m&&m.hasData()&&(y=b)}let w=y;for(;w.overscaledZ>r;)if(w=w.scaledTo(w.overscaledZ-1),e[w.key]){c[y.key]=y;break}}}findLoadedParent(e,r){if(e.key in this._loadedParentTiles){const a=this._loadedParentTiles[e.key];return a&&a.tileID.overscaledZ>=r?a:null}for(let a=e.overscaledZ-1;a>=r;a--){const c=e.scaledTo(a),d=this._getLoadedTile(c);if(d)return d}}_getLoadedTile(e){const r=this._tiles[e.key];return r&&r.hasData()?r:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}updateCacheSize(e,r){r=r||this._source.tileSize;const a=Math.ceil(e.width/r)+1,c=Math.ceil(e.height/r)+1,d=Math.floor(a*c*5),m=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,d):d,y=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,m):m;this._cache.setMaxSize(y)}handleWrapJump(e){const r=Math.round((e-(this._prevLng===void 0?e:this._prevLng))/360);if(this._prevLng=e,r){const a={};for(const c in this._tiles){const d=this._tiles[c];d.tileID=d.tileID.unwrapTo(d.tileID.wrap+r),a[d.tileID.key]=d}this._tiles=a;for(const c in this._timers)clearTimeout(this._timers[c]),delete this._timers[c];for(const c in this._tiles)this._setTileReloadTimer(+c,this._tiles[c])}}update(e,r,a){if(this.transform=e,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!a)return;let c;this.updateCacheSize(e,r),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?c=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(y=>new Jr(y.canonical.z,y.wrap,y.canonical.z,y.canonical.x,y.canonical.y)):(c=e.coveringTiles({tileSize:r||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!a,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(c=c.filter(y=>this._source.hasTile(y)))):c=[];const d=this._updateRetainedTiles(c);if(T8(this._source.type)&&c.length!==0){const y={},w={},b=Object.keys(d);for(const A of b){const I=d[A],L=this._tiles[A];if(!L||L.fadeEndTime&&L.fadeEndTime<=Di.now())continue;const D=this.findLoadedParent(I,Math.max(I.overscaledZ-jl.maxOverzooming,this._source.minzoom));D&&(this._addTile(D.tileID),y[D.tileID.key]=D.tileID),w[A]=I}const M=c[c.length-1].overscaledZ;for(const A in this._tiles){const I=this._tiles[A];if(d[A]||!I.hasData())continue;let L=I.tileID;for(;L.overscaledZ>M;){L=L.scaledTo(L.overscaledZ-1);const D=this._tiles[L.key];if(D&&D.hasData()&&w[L.key]){d[A]=I.tileID;break}}}for(const A in y)d[A]||(this._coveredTiles[A]=!0,d[A]=y[A])}for(const y in d)this._tiles[y].clearFadeHold();const m=function(y,w){const b=[];for(const M in y)M in w||b.push(M);return b}(this._tiles,d);for(const y of m){const w=this._tiles[y];w.hasSymbolBuckets&&!w.holdingForFade()?w.setHoldDuration(this.map._fadeDuration):w.hasSymbolBuckets&&!w.symbolFadeFinished()||this._removeTile(+y)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}_updateRetainedTiles(e){const r={};if(e.length===0)return r;const a={},c=e.reduce((b,M)=>Math.min(b,M.overscaledZ),1/0),d=e[0].overscaledZ,m=Math.max(d-jl.maxOverzooming,this._source.minzoom),y=Math.max(d+jl.maxUnderzooming,this._source.minzoom),w={};for(const b of e){const M=this._addTile(b);r[b.key]=b,M.hasData()||c<this._source.maxzoom&&(w[b.key]=b)}this._retainLoadedChildren(w,c,y,r);for(const b of e){let M=this._tiles[b.key];if(M.hasData())continue;if(b.canonical.z>=this._source.maxzoom){const I=b.children(this._source.maxzoom)[0],L=this.getTile(I);if(L&&L.hasData()){r[I.key]=I;continue}}else{const I=b.children(this._source.maxzoom);if(r[I[0].key]&&r[I[1].key]&&r[I[2].key]&&r[I[3].key])continue}let A=M.wasRequested();for(let I=b.overscaledZ-1;I>=m;--I){const L=b.scaledTo(I);if(a[L.key]||(a[L.key]=!0,M=this.getTile(L),!M&&A&&(M=this._addTile(L)),M&&(r[L.key]=L,A=M.wasRequested(),M.hasData())))break}}return r}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const r=[];let a,c=this._tiles[e].tileID;for(;c.overscaledZ>0;){if(c.key in this._loadedParentTiles){a=this._loadedParentTiles[c.key];break}r.push(c.key);const d=c.scaledTo(c.overscaledZ-1);if(a=this._getLoadedTile(d),a)break;c=d}for(const d of r)this._loadedParentTiles[d]=a}}_addTile(e){let r=this._tiles[e.key];if(r)return r;r=this._cache.getAndRemove(e),r&&(this._setTileReloadTimer(e.key,r),r.tileID=e,this._state.initializeTileState(r,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,r)));const a=!!r;if(!a){const c=this.map?this.map.painter:null;r=new a4(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,c,this._isRaster),this._loadTile(r,this._tileLoaded.bind(this,r,e.key,r.state))}return r?(r.uses++,this._tiles[e.key]=r,a||this._source.fire(new Ts("dataloading",{tile:r,coord:r.tileID,dataType:"source"})),r):null}_setTileReloadTimer(e,r){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const a=r.getExpiryTimeout();a&&(this._timers[e]=setTimeout(()=>{this._reloadTile(e,"expired"),delete this._timers[e]},a))}_removeTile(e){const r=this._tiles[e];r&&(r.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),r.uses>0||(r.hasData()&&r.state!=="reloading"?this._cache.add(r.tileID,r,r.getExpiryTimeout()):(r.aborted=!0,this._abortTile(r),this._unloadTile(r))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(+e);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(e,r,a){const c=[],d=this.transform;if(!d)return c;const m=d.projection.name==="globe",y=as(d.center.lng);for(const w in this._tiles){const b=this._tiles[w];if(a&&b.clearQueryDebugViz(),b.holdingForFade())continue;let M;if(m){const A=b.tileID.canonical;if(A.z===0){const I=[Math.abs(Ce(y,...E0(A,-1))-y),Math.abs(Ce(y,...E0(A,1))-y)];M=[0,2*I.indexOf(Math.min(...I))-1]}else{const I=[Math.abs(Ce(y,...E0(A,-1))-y),Math.abs(Ce(y,...E0(A,0))-y),Math.abs(Ce(y,...E0(A,1))-y)];M=[I.indexOf(Math.min(...I))-1]}}else M=[0];for(const A of M){const I=e.containsTile(b,d,r,A);I&&c.push(I)}}return c}getVisibleCoordinates(e){const r=this.getRenderableIds(e).map(a=>this._tiles[a].tileID);for(const a of r)a.projMatrix=this.transform.calculateProjMatrix(a.toUnwrapped());return r}hasTransition(){if(this._source.hasTransition())return!0;if(T8(this._source.type))for(const e in this._tiles){const r=this._tiles[e];if(r.fadeEndTime!==void 0&&r.fadeEndTime>=Di.now())return!0}return!1}setFeatureState(e,r,a){this._state.updateState(e=e||"_geojsonTileLayer",r,a)}removeFeatureState(e,r,a){this._state.removeFeatureState(e=e||"_geojsonTileLayer",r,a)}getFeatureState(e,r){return this._state.getState(e=e||"_geojsonTileLayer",r)}setDependencies(e,r,a){const c=this._tiles[e];c&&c.setDependencies(r,a)}reloadTilesForDependencies(e,r){for(const a in this._tiles)this._tiles[a].hasDependency(e,r)&&this._reloadTile(+a,"reloading");this._cache.filter(a=>!a.hasDependency(e,r))}_preloadTiles(e,r){if(!this._sourceLoaded){const y=()=>{this._sourceLoaded&&(this._source.off("data",y),this._preloadTiles(e,r))};return void this._source.on("data",y)}const a=new Map,c=Array.isArray(e)?e:[e],d=this.map.painter.terrain,m=this.usedForTerrain&&d?d.getScaledDemTileSize():this._source.tileSize;for(const y of c){const w=y.coveringTiles({tileSize:m,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const b of w)a.set(b.key,b);this.usedForTerrain&&y.updateElevation(!1)}Tt(Array.from(a.values()),(y,w)=>{const b=new a4(y,this._source.tileSize*y.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(b,M=>{this._source.type==="raster-dem"&&b.dem&&this._backfillDEM(b),w(M,b)})},r)}}function b8(n,e){const r=Math.abs(2*n.wrap)-+(n.wrap<0),a=Math.abs(2*e.wrap)-+(e.wrap<0);return n.overscaledZ-e.overscaledZ||a-r||e.canonical.y-n.canonical.y||e.canonical.x-n.canonical.x}function T8(n){return n==="raster"||n==="image"||n==="video"||n==="custom"}function E0(n,e){const r=1<<n.z;return[n.x/r+e,(n.x+1)/r+e]}jl.maxOverzooming=10,jl.maxUnderzooming=3;class o3{constructor(e,r,a){this._demTile=e,this._dem=this._demTile.dem,this._scale=r,this._offset=a}static create(e,r,a){const c=a||e.findDEMTileFor(r);if(!c||!c.dem)return;const d=c.dem,m=c.tileID,y=1<<r.canonical.z-m.canonical.z;return new o3(c,c.tileSize/kt/y,[(r.canonical.x/y-m.canonical.x)*d.dim,(r.canonical.y/y-m.canonical.y)*d.dim])}tileCoordToPixel(e,r){const a=r*this._scale+this._offset[1],c=Math.floor(e*this._scale+this._offset[0]),d=Math.floor(a);return new Me(c,d)}getElevationAt(e,r,a,c){const d=e*this._scale+this._offset[0],m=r*this._scale+this._offset[1],y=Math.floor(d),w=Math.floor(m),b=this._dem;return c=!!c,a?rn(rn(b.get(y,w,c),b.get(y,w+1,c),m-w),rn(b.get(y+1,w,c),b.get(y+1,w+1,c),m-w),d-y):b.get(y,w,c)}getElevationAtPixel(e,r,a){return this._dem.get(e,r,!!a)}getMeterToDEM(e){return(1<<this._demTile.tileID.canonical.z)*Oo(1,e)*this._dem.stride}}class E8{constructor(e,r){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Is(kt,16,0),this.featureIndexArray=new Al,this.promoteId=r}insert(e,r,a,c,d,m=0){const y=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(a,c,d,m);const w=this.grid;for(let b=0;b<r.length;b++){const M=r[b],A=[1/0,1/0,-1/0,-1/0];for(let I=0;I<M.length;I++){const L=M[I];A[0]=Math.min(A[0],L.x),A[1]=Math.min(A[1],L.y),A[2]=Math.max(A[2],L.x),A[3]=Math.max(A[3],L.y)}A[0]<kt&&A[1]<kt&&A[2]>=0&&A[3]>=0&&w.insert(y,A[0],A[1],A[2],A[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Zd(new Zh(this.rawTileData)).layers,this.sourceLayerCoder=new c8(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const e in this.vtLayers)this.vtFeatures[e]=[]}return this.vtLayers}query(e,r,a,c){this.loadVTLayers();const d=e.params||{},m=L1(d.filter),y=e.tileResult,w=e.transform,b=y.bufferedTilespaceBounds,M=this.grid.query(b.min.x,b.min.y,b.max.x,b.max.y,(D,O,Z,Q)=>H7(y.bufferedTilespaceGeometry,D,O,Z,Q));M.sort(fw);let A=null;w.elevation&&M.length>0&&(A=o3.create(w.elevation,this.tileID));const I={};let L;for(let D=0;D<M.length;D++){const O=M[D];if(O===L)continue;L=O;const Z=this.featureIndexArray.get(O);let Q=null;this.loadMatchingFeature(I,Z,m,d.layers,d.availableImages,r,a,c,(de,ee,ce,fe=0)=>(Q||(Q=Bs(de,this.tileID.canonical,e.tileTransform)),ee.queryIntersectsFeature(y,de,ce,Q,this.z,e.transform,e.pixelPosMatrix,A,fe)))}return I}loadMatchingFeature(e,r,a,c,d,m,y,w,b){const{featureIndex:M,bucketIndex:A,sourceLayerIndex:I,layoutVertexArrayOffset:L}=r,D=this.bucketLayerIDs[A];if(c&&!function(de,ee){for(let ce=0;ce<de.length;ce++)if(ee.indexOf(de[ce])>=0)return!0;return!1}(c,D))return;const O=this.sourceLayerCoder.decode(I),Z=this.vtLayers[O].feature(M);if(a.needGeometry){const de=Bl(Z,!0);if(!a.filter(new C(this.tileID.overscaledZ),de,this.tileID.canonical))return}else if(!a.filter(new C(this.tileID.overscaledZ),Z))return;const Q=this.getId(Z,O);for(let de=0;de<D.length;de++){const ee=D[de];if(c&&c.indexOf(ee)<0)continue;const ce=m[ee];if(!ce)continue;let fe={};Q!==void 0&&w&&(fe=w.getState(ce.sourceLayer||"_geojsonTileLayer",Q));const pe=Nt({},y[ee]);pe.paint=S8(pe.paint,ce.paint,Z,fe,d),pe.layout=S8(pe.layout,ce.layout,Z,fe,d);const Le=!b||b(Z,ce,fe,L);if(!Le)continue;const Ae=new u8(Z,this.z,this.x,this.y,Q);Ae.layer=pe;let $e=e[ee];$e===void 0&&($e=e[ee]=[]),$e.push({featureIndex:M,feature:Ae,intersectionZ:Le})}}lookupSymbolFeatures(e,r,a,c,d,m,y,w){const b={};this.loadVTLayers();const M=L1(d);for(const A of e)this.loadMatchingFeature(b,{bucketIndex:a,sourceLayerIndex:c,featureIndex:A,layoutVertexArrayOffset:0},M,m,y,w,r);return b}loadFeature(e){const{featureIndex:r,sourceLayerIndex:a}=e;this.loadVTLayers();const c=this.sourceLayerCoder.decode(a),d=this.vtFeatures[c];if(d[r])return d[r];const m=this.vtLayers[c].feature(r);return d[r]=m,m}hasLayer(e){for(const r of this.bucketLayerIDs)for(const a of r)if(e===a)return!0;return!1}getId(e,r){let a=e.id;if(this.promoteId){const c=typeof this.promoteId=="string"?this.promoteId:this.promoteId[r];c!=null&&(a=e.properties[c]),typeof a=="boolean"&&(a=Number(a))}return a}}function S8(n,e,r,a,c){return Ft(n,(d,m)=>{const y=e instanceof J?e.get(m):null;return y&&y.evaluate?y.evaluate(r,a,c):y})}function fw(n,e){return e-n}vt(E8,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class M8{constructor(e,r){this.width=e,this.height=r,this.nextRow=0,this.image=new Os({width:e,height:r}),this.positions={},this.uploaded=!1}getDash(e,r){const a=this.getKey(e,r);return this.positions[a]}trim(){const e=this.width,r=this.height=Nn(this.nextRow);this.image.resize({width:e,height:r})}getKey(e,r){return e.join(",")+r}getDashRanges(e,r,a){const c=[];let d=e.length%2==1?-e[e.length-1]*a:0,m=e[0]*a,y=!0;c.push({left:d,right:m,isDash:y,zeroLength:e[0]===0});let w=e[0];for(let b=1;b<e.length;b++){y=!y;const M=e[b];d=w*a,w+=M,m=w*a,c.push({left:d,right:m,isDash:y,zeroLength:M===0})}return c}addRoundDash(e,r,a){const c=r/2;for(let d=-a;d<=a;d++){const m=this.width*(this.nextRow+a+d);let y=0,w=e[y];for(let b=0;b<this.width;b++){b/w.right>1&&(w=e[++y]);const M=Math.abs(b-w.left),A=Math.abs(b-w.right),I=Math.min(M,A);let L;const D=d/a*(c+1);if(w.isDash){const O=c-Math.abs(D);L=Math.sqrt(I*I+O*O)}else L=c-Math.sqrt(I*I+D*D);this.image.data[m+b]=Math.max(0,Math.min(255,L+128))}}}addRegularDash(e,r){for(let w=e.length-1;w>=0;--w){const b=e[w],M=e[w+1];b.zeroLength?e.splice(w,1):M&&M.isDash===b.isDash&&(M.left=b.left,e.splice(w,1))}const a=e[0],c=e[e.length-1];a.isDash===c.isDash&&(a.left=c.left-this.width,c.right=a.right+this.width);const d=this.width*this.nextRow;let m=0,y=e[m];for(let w=0;w<this.width;w++){w/y.right>1&&(y=e[++m]);const b=Math.abs(w-y.left),M=Math.abs(w-y.right),A=Math.min(b,M);this.image.data[d+w]=Math.max(0,Math.min(255,(y.isDash?A:-A)+r+128))}}addDash(e,r){const a=this.getKey(e,r);if(this.positions[a])return this.positions[a];const c=r==="round",d=c?7:0,m=2*d+1;if(this.nextRow+m>this.height)return dn("LineAtlas out of space"),null;e.length===0&&e.push(1);let y=0;for(let M=0;M<e.length;M++)e[M]<0&&(dn("Negative value is found in line dasharray, replacing values with 0"),e[M]=0),y+=e[M];if(y!==0){const M=this.width/y,A=this.getDashRanges(e,this.width,M);c?this.addRoundDash(A,M,d):this.addRegularDash(A,r==="square"?.5*M:0)}const w=this.nextRow+d;this.nextRow+=m;const b={tl:[w,d],br:[y,0]};return this.positions[a]=b,b}}vt(M8,"LineAtlas");const C8=1*No;class P8{constructor(e){const r={},a=[];for(const y in e){const w=e[y],b=r[y]={};for(const M in w.glyphs){const A=w.glyphs[+M];if(!A||A.bitmap.width===0||A.bitmap.height===0)continue;const I=A.metrics.localGlyph?C8:1,L={x:0,y:0,w:A.bitmap.width+2*I,h:A.bitmap.height+2*I};a.push(L),b[M]=L}}const{w:c,h:d}=Xd(a),m=new Os({width:c||1,height:d||1});for(const y in e){const w=e[y];for(const b in w.glyphs){const M=w.glyphs[+b];if(!M||M.bitmap.width===0||M.bitmap.height===0)continue;const A=r[y][b],I=M.metrics.localGlyph?C8:1;Os.copy(M.bitmap,m,{x:0,y:0},{x:A.x+I,y:A.y+I},M.bitmap)}}this.image=m,this.positions=r}}vt(P8,"GlyphAtlas");class mw{constructor(e){this.tileID=new Jr(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.tileZoom=e.tileZoom,this.uid=e.uid,this.zoom=e.zoom,this.canonical=e.tileID.canonical,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId,this.enableTerrain=!!e.enableTerrain,this.isSymbolTile=e.isSymbolTile,this.tileTransform=Nl(e.tileID.canonical,e.projection),this.projection=e.projection}parse(e,r,a,c,d){this.status="parsing",this.data=e,this.collisionBoxArray=new xn;const m=new c8(Object.keys(e.layers).sort()),y=new E8(this.tileID,this.promoteId);y.bucketLayerIDs=[];const w={},b=new M8(256,256),M={featureIndex:y,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:b,availableImages:a},A=r.familiesBySource[this.source];for(const fe in A){const pe=e.layers[fe];if(!pe)continue;let Le=!1,Ae=!1;for(const Fe of A[fe])Fe[0].type==="symbol"?Le=!0:Ae=!0;if(this.isSymbolTile===!0&&!Le||this.isSymbolTile===!1&&!Ae)continue;pe.version===1&&dn(`Vector tile source "${this.source}" layer "${fe}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const $e=m.encode(fe),rt=[];for(let Fe=0;Fe<pe.length;Fe++){const We=pe.feature(Fe),He=y.getId(We,fe);rt.push({feature:We,id:He,index:Fe,sourceLayerIndex:$e})}for(const Fe of A[fe]){const We=Fe[0];this.isSymbolTile!==void 0&&We.type==="symbol"!==this.isSymbolTile||We.minzoom&&this.zoom<Math.floor(We.minzoom)||We.maxzoom&&this.zoom>=We.maxzoom||We.visibility!=="none"&&(d4(Fe,this.zoom,a),(w[We.id]=We.createBucket({index:y.bucketLayerIDs.length,layers:Fe,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:$e,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:a})).populate(rt,M,this.tileID.canonical,this.tileTransform),y.bucketLayerIDs.push(Fe.map(He=>He.id)))}}let I,L,D,O;b.trim();const Z={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},Q=()=>{if(I)return d(I);if(L&&D&&O){const fe=new P8(L),pe=new Rf(D,O);for(const Le in w){const Ae=w[Le];Ae instanceof Ca?(d4(Ae.layers,this.zoom,a),jx(Ae,L,fe.positions,D,pe.iconPositions,this.showCollisionBoxes,a,this.tileID.canonical,this.tileZoom,this.projection)):Ae.hasPattern&&(Ae instanceof Vh||Ae instanceof Bh||Ae instanceof d0)&&(d4(Ae.layers,this.zoom,a),Ae.addFeatures(M,this.tileID.canonical,pe.patternPositions,a,this.tileTransform))}this.status="done",d(null,{buckets:Rt(w).filter(Le=>!Le.isEmpty()),featureIndex:y,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:fe.image,lineAtlas:b,imageAtlas:pe,glyphMap:this.returnDependencies?L:null,iconMap:this.returnDependencies?D:null,glyphPositions:this.returnDependencies?fe.positions:null})}},de=Ft(M.glyphDependencies,fe=>Object.keys(fe).map(Number));Object.keys(de).length?c.send("getGlyphs",{uid:this.uid,stacks:de},(fe,pe)=>{I||(I=fe,L=pe,Q())},void 0,!1,Z):L={};const ee=Object.keys(M.iconDependencies);ee.length?c.send("getImages",{icons:ee,source:this.source,tileID:this.tileID,type:"icons"},(fe,pe)=>{I||(I=fe,D=pe,Q())},void 0,!1,Z):D={};const ce=Object.keys(M.patternDependencies);ce.length?c.send("getImages",{icons:ce,source:this.source,tileID:this.tileID,type:"patterns"},(fe,pe)=>{I||(I=fe,O=pe,Q())},void 0,!1,Z):O={},Q()}}function d4(n,e,r){const a=new C(e);for(const c of n)c.recalculate(a,r)}class A8{constructor(e){this.entries={},this.scheduler=e}request(e,r,a,c){const d=this.entries[e]=this.entries[e]||{callbacks:[]};if(d.result){const[m,y]=d.result;return this.scheduler?this.scheduler.add(()=>{c(m,y)},r):c(m,y),()=>{}}return d.callbacks.push(c),d.cancel||(d.cancel=a((m,y)=>{d.result=[m,y];for(const w of d.callbacks)this.scheduler?this.scheduler.add(()=>{w(m,y)},r):w(m,y);setTimeout(()=>delete this.entries[e],3e3)})),()=>{d.result||(d.callbacks=d.callbacks.filter(m=>m!==c),d.callbacks.length||(d.cancel(),delete this.entries[e]))}}}function I8(n,e,r){const a=JSON.stringify(n.request);return n.data&&(this.deduped.entries[a]={result:[null,n.data]}),this.deduped.request(a,{type:"parseTile",isSymbolTile:n.isSymbolTile,zoom:n.tileZoom},c=>{const d=Qi(n.request,(m,y,w,b)=>{m?c(m):y&&c(null,{vectorTile:r?void 0:new Zd(new Zh(y)),rawData:y,cacheControl:w,expires:b})});return()=>{d.cancel(),c()}},e)}const k8=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class p4{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[r,a]=new Uint8Array(e,0,2);if(r!==219)throw new Error("Data does not appear to be in a KDBush format.");const c=a>>4;if(c!==1)throw new Error(`Got v${c} data when expected v1.`);const d=k8[15&a];if(!d)throw new Error("Unrecognized array type.");const[m]=new Uint16Array(e,2,1),[y]=new Uint32Array(e,4,1);return new p4(y,m,d,e)}constructor(e,r=64,a=Float64Array,c){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+r,2),65535),this.ArrayType=a,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const d=k8.indexOf(this.ArrayType),m=2*e*this.ArrayType.BYTES_PER_ELEMENT,y=e*this.IndexArrayType.BYTES_PER_ELEMENT,w=(8-y%8)%8;if(d<0)throw new Error(`Unexpected typed array class: ${a}.`);c&&c instanceof ArrayBuffer?(this.data=c,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+y+w,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+m+y+w),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+y+w,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+d]),new Uint16Array(this.data,2,1)[0]=r,new Uint32Array(this.data,4,1)[0]=e)}add(e,r){const a=this._pos>>1;return this.ids[a]=a,this.coords[this._pos++]=e,this.coords[this._pos++]=r,a}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return f4(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,r,a,c){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:d,coords:m,nodeSize:y}=this,w=[0,d.length-1,0],b=[];for(;w.length;){const M=w.pop()||0,A=w.pop()||0,I=w.pop()||0;if(A-I<=y){for(let Z=I;Z<=A;Z++){const Q=m[2*Z],de=m[2*Z+1];Q>=e&&Q<=a&&de>=r&&de<=c&&b.push(d[Z])}continue}const L=I+A>>1,D=m[2*L],O=m[2*L+1];D>=e&&D<=a&&O>=r&&O<=c&&b.push(d[L]),(M===0?e<=D:r<=O)&&(w.push(I),w.push(L-1),w.push(1-M)),(M===0?a>=D:c>=O)&&(w.push(L+1),w.push(A),w.push(1-M))}return b}within(e,r,a){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:c,coords:d,nodeSize:m}=this,y=[0,c.length-1,0],w=[],b=a*a;for(;y.length;){const M=y.pop()||0,A=y.pop()||0,I=y.pop()||0;if(A-I<=m){for(let Z=I;Z<=A;Z++)L8(d[2*Z],d[2*Z+1],e,r)<=b&&w.push(c[Z]);continue}const L=I+A>>1,D=d[2*L],O=d[2*L+1];L8(D,O,e,r)<=b&&w.push(c[L]),(M===0?e-a<=D:r-a<=O)&&(y.push(I),y.push(L-1),y.push(1-M)),(M===0?e+a>=D:r+a>=O)&&(y.push(L+1),y.push(A),y.push(1-M))}return w}}function f4(n,e,r,a,c,d){if(c-a<=r)return;const m=a+c>>1;z8(n,e,m,a,c,d),f4(n,e,r,a,m-1,1-d),f4(n,e,r,m+1,c,1-d)}function z8(n,e,r,a,c,d){for(;c>a;){if(c-a>600){const b=c-a+1,M=r-a+1,A=Math.log(b),I=.5*Math.exp(2*A/3),L=.5*Math.sqrt(A*I*(b-I)/b)*(M-b/2<0?-1:1);z8(n,e,r,Math.max(a,Math.floor(r-M*I/b+L)),Math.min(c,Math.floor(r+(b-M)*I/b+L)),d)}const m=e[2*r+d];let y=a,w=c;for(S0(n,e,a,r),e[2*c+d]>m&&S0(n,e,a,c);y<w;){for(S0(n,e,y,w),y++,w--;e[2*y+d]<m;)y++;for(;e[2*w+d]>m;)w--}e[2*a+d]===m?S0(n,e,a,w):(w++,S0(n,e,w,c)),w<=r&&(a=w+1),r<=w&&(c=w-1)}}function S0(n,e,r,a){m4(n,r,a),m4(e,2*r,2*a),m4(e,2*r+1,2*a+1)}function m4(n,e,r){const a=n[e];n[e]=n[r],n[r]=a}function L8(n,e,r,a){const c=n-r,d=e-a;return c*c+d*d}s.ARRAY_TYPE=Ti,s.AUTH_ERR_MSG=j,s.Aabb=Yr,s.Actor=class{constructor(n,e,r){this.target=n,this.parent=e,this.mapId=r,this.callbacks={},this.cancelCallbacks={},wo(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=zi()?n:P,this.scheduler=new lw}send(n,e,r,a,c=!1,d){const m=Math.round(1e18*Math.random()).toString(36).substring(0,10);r&&(r.metadata=d,this.callbacks[m]=r);const y=mi(this.globalScope)?void 0:[];return this.target.postMessage({id:m,type:n,hasCallback:!!r,targetMapId:a,mustQueue:c,sourceMapId:this.mapId,data:va(e,y)},y),{cancel:()=>{r&&delete this.callbacks[m],this.target.postMessage({id:m,type:"<cancel>",targetMapId:a,sourceMapId:this.mapId})}}}receive(n){const e=n.data,r=e.id;if(r&&(!e.targetMapId||this.mapId===e.targetMapId))if(e.type==="<cancel>"){const a=this.cancelCallbacks[r];delete this.cancelCallbacks[r],a&&a.cancel()}else if(e.mustQueue||zi()){const a=this.callbacks[r];this.cancelCallbacks[r]=this.scheduler.add(()=>this.processTask(r,e),a&&a.metadata||{type:"message"})}else this.processTask(r,e)}processTask(n,e){if(e.type==="<response>"){const r=this.callbacks[n];delete this.callbacks[n],r&&(e.error?r(ks(e.error)):r(null,ks(e.data)))}else{const r=mi(this.globalScope)?void 0:[],a=e.hasCallback?(d,m)=>{delete this.cancelCallbacks[n],this.target.postMessage({id:n,type:"<response>",sourceMapId:this.mapId,error:d?va(d):null,data:va(m,r)},r)}:d=>{},c=ks(e.data);if(this.parent[e.type])this.parent[e.type](e.sourceMapId,c,a);else if(this.parent.getWorkerSource){const d=e.type.split(".");this.parent.getWorkerSource(e.sourceMapId,d[0],c.source)[d[1]](c,a)}else a(new Error(`Could not find function ${e.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},s.CanonicalTileID=jh,s.Color=Wn,s.ColorMode=hs,s.CullFaceMode=jo,s.DEMData=i3,s.DataConstantProperty=B,s.DedupedRequest=A8,s.DepthMode=ic,s.EXTENT=kt,s.Elevation=class{isDataAvailableAtPoint(n){const e=this._source();if(this.isUsingMockSource()||!e||n.y<0||n.y>1)return!1;const r=e.getSource().maxzoom,a=1<<r,c=Math.floor(n.x),d=Math.floor((n.x-c)*a),m=Math.floor(n.y*a),y=this.findDEMTileFor(new Jr(r,c,r,d,m));return!(!y||!y.dem)}getAtPointOrZero(n,e=0){return this.getAtPoint(n,e)||0}getAtPoint(n,e,r=!0){if(this.isUsingMockSource())return null;e==null&&(e=null);const a=this._source();if(!a||n.y<0||n.y>1)return e;const c=a.getSource().maxzoom,d=1<<c,m=Math.floor(n.x),y=n.x-m,w=new Jr(c,m,c,Math.floor(y*d),Math.floor(n.y*d)),b=this.findDEMTileFor(w);if(!b||!b.dem)return e;const M=b.dem,A=1<<b.tileID.canonical.z,I=(y*A-b.tileID.canonical.x)*M.dim,L=(n.y*A-b.tileID.canonical.y)*M.dim,D=Math.floor(I),O=Math.floor(L);return(r?this.exaggeration():1)*rn(rn(M.get(D,O),M.get(D,O+1),L-O),rn(M.get(D+1,O),M.get(D+1,O+1),L-O),I-D)}getAtTileOffset(n,e,r){const a=1<<n.canonical.z;return this.getAtPointOrZero(new $1(n.wrap+(n.canonical.x+e/kt)/a,(n.canonical.y+r/kt)/a))}getAtTileOffsetFunc(n,e,r,a){return c=>{const d=this.getAtTileOffset(n,c.x,c.y),m=a.upVector(n.canonical,c.x,c.y);return Oi(m,m,d*a.upVectorScale(n.canonical,e,r).metersToTile),m}}getForTilePoints(n,e,r,a){if(this.isUsingMockSource())return!1;const c=o3.create(this,n,a);return!!c&&(e.forEach(d=>{d[2]=this.exaggeration()*c.getElevationAt(d[0],d[1],r)}),!0)}getMinMaxForTile(n){if(this.isUsingMockSource())return null;const e=this.findDEMTileFor(n);if(!e||!e.dem)return null;const r=e.dem.tree,a=e.tileID,c=1<<n.canonical.z-a.canonical.z;let d=n.canonical.x/c-a.canonical.x,m=n.canonical.y/c-a.canonical.y,y=0;for(let w=0;w<n.canonical.z-a.canonical.z&&!r.leaves[y];w++){d*=2,m*=2;const b=2*Math.floor(m)+Math.floor(d);y=r.childOffsets[y]+b,d%=1,m%=1}return{min:this.exaggeration()*r.minimums[y],max:this.exaggeration()*r.maximums[y]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(n,e,r){throw new Error("Pure virtual method called.")}pointCoordinate(n){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(n){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},s.ErrorEvent=Eo,s.EvaluationParameters=C,s.Event=Ts,s.Evented=il,s.FillExtrusionBucket=d0,s.Frustum=bd,s.FrustumCorners=wd,s.GLOBE_RADIUS=os,s.GLOBE_SCALE_MATCH_LATITUDE=45,s.GLOBE_ZOOM_THRESHOLD_MAX=k7,s.GLOBE_ZOOM_THRESHOLD_MIN=Td,s.GlobeSharedBuffers=class{constructor(n){this._createGrid(n),this._createPoles(n)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const n of this._poleSegments)n.destroy();for(const n of this._gridSegments)n.withSkirts.destroy(),n.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const n of this._wireframeSegments)n.destroy()}}_fillGridMeshWithLods(n,e){const r=new nt,a=new St,c=[],d=n+1+2,m=e[0]+1,y=e[0]+1+(1+e.length),w=(b,M,A)=>{let I=b===d-1?b-2:b===0?b:b-1;return I+=A?24575:0,[I,M]};for(let b=0;b<d;++b)r.emplaceBack(...w(b,0,!0));for(let b=0;b<m;++b)for(let M=0;M<d;++M)r.emplaceBack(...w(M,b,(M===0||M===d-1)&&!0));for(let b=0;b<e.length;++b){const M=e[b];for(let A=0;A<d;++A)r.emplaceBack(...w(A,M,!0))}for(let b=0;b<e.length;++b){const M=a.length,A=e[b]+1+2,I=new St;for(let O=0;O<A-1;O++){const Z=O===A-2,Q=Z?d*(y-e.length+b-O):d;for(let de=0;de<d-1;de++){const ee=O*d+de;O===0||Z||de===0||de===d-2?(I.emplaceBack(ee+1,ee,ee+Q),I.emplaceBack(ee+Q,ee+Q+1,ee+1)):(a.emplaceBack(ee+1,ee,ee+Q),a.emplaceBack(ee+Q,ee+Q+1,ee+1))}}const L=er.simpleSegment(0,M,r.length,a.length-M);for(let O=0;O<I.uint16.length;O+=3)a.emplaceBack(I.uint16[O],I.uint16[O+1],I.uint16[O+2]);const D=er.simpleSegment(0,M,r.length,a.length-M);c.push({withoutSkirts:L,withSkirts:D})}return{vertices:r,indices:a,segments:c}}_createGrid(n){const e=this._fillGridMeshWithLods(Rl,n0);this._gridSegments=e.segments,this._gridBuffer=n.createVertexBuffer(e.vertices,t0.members),this._gridIndexBuffer=n.createIndexBuffer(e.indices,!0)}_createPoles(n){const e=new St;for(let c=0;c<=Rl;c++)e.emplaceBack(0,c+1,c+2);this._poleIndexBuffer=n.createIndexBuffer(e,!0);const r=new vn,a=new vn;this._poleSegments=[];for(let c=0,d=0;c<Td;c++){const m=360/(1<<c);r.emplaceBack(0,-os,0,.5,0),a.emplaceBack(0,-os,0,.5,1);for(let y=0;y<=Rl;y++){const w=y/Rl,b=rn(0,m,w),[M,A,I]=j1(lv,cv,b,os);r.emplaceBack(M,A,I,w,0),a.emplaceBack(M,A,I,w,1)}this._poleSegments.push(er.simpleSegment(d,0,66,64)),d+=66}this._poleNorthVertexBuffer=n.createVertexBuffer(r,A7,!1),this._poleSouthVertexBuffer=n.createVertexBuffer(a,A7,!1)}getGridBuffers(n,e){return[this._gridBuffer,this._gridIndexBuffer,e?this._gridSegments[n].withSkirts:this._gridSegments[n].withoutSkirts]}getPoleBuffers(n){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[n]]}getWirefameBuffers(n,e){if(!this._wireframeSegments){const r=new xr,a=Rl,c=a+1+2,d=1;this._wireframeSegments=[];for(let m=0,y=0;m<n0.length;m++){const w=n0[m];for(let M=d;M<w+d;M++)for(let A=d;A<a+d;A++){const I=M*c+A;r.emplaceBack(I,I+1),r.emplaceBack(I,I+c),r.emplaceBack(I,I+c+1)}const b=w*a*3;this._wireframeSegments.push(er.simpleSegment(0,y,(w+1)*c,b)),y+=b}this._wireframeIndexBuffer=n.createIndexBuffer(r)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[e]]}},s.GlyphManager=Q1,s.ImagePosition=Kd,s.KDBush=p4,s.LivePerformanceUtils=bs,s.LngLat=wn,s.LngLatBounds=Ta,s.LocalGlyphMode=Qd,s.MAX_MERCATOR_LATITUDE=Rr,s.MercatorCoordinate=$1,s.ONE_EM=Cr,s.OverscaledTileID=Jr,s.PerformanceMarkers=eo,s.Point=Me,s.Properties=oe,s.RGBAImage=Ei,s.Ray=xd,s.RequestManager=class{constructor(n,e,r){this._transformRequestFn=n,this._customAccessToken=e,this._silenceAuthErrors=!!r,this._createSkuToken()}_createSkuToken(){const n=function(){let e="";for(let r=0;r<10;r++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",ne,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=n.token,this._skuTokenExpiresAt=n.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(n,e){return this._transformRequestFn&&this._transformRequestFn(n,e)||{url:n}}normalizeStyleURL(n,e){if(!W(n))return n;const r=je(n);return r.path=`/styles/v1${r.path}`,this._makeAPIURL(r,this._customAccessToken||e)}normalizeGlyphsURL(n,e){if(!W(n))return n;const r=je(n);return r.path=`/fonts/v1${r.path}`,this._makeAPIURL(r,this._customAccessToken||e)}normalizeSourceURL(n,e,r,a){if(!W(n))return n;const c=je(n);return c.path=`/v4/${c.authority}.json`,c.params.push("secure"),r&&c.params.push(`language=${r}`),a&&c.params.push(`worldview=${a}`),this._makeAPIURL(c,this._customAccessToken||e)}normalizeSpriteURL(n,e,r,a){const c=je(n);return W(n)?(c.path=`/styles/v1${c.path}/sprite${e}${r}`,this._makeAPIURL(c,this._customAccessToken||a)):(c.path+=`${e}${r}`,De(c))}normalizeTileURL(n,e,r){if(this._isSkuTokenExpired()&&this._createSkuToken(),n&&!W(n))return n;const a=je(n);a.path=a.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${e||r&&a.authority!=="raster"&&r===512?"@2x":""}${q.supported?".webp":"$1"}`),a.authority==="raster"?a.path=`/${V.RASTER_URL_PREFIX}${a.path}`:(a.path=a.path.replace(/^.+\/v4\//,"/"),a.path=`/${V.TILE_URL_VERSION}${a.path}`);const c=this._customAccessToken||function(d){for(const m of d){const y=m.match(/^access_token=(.*)$/);if(y)return y[1]}return null}(a.params)||V.ACCESS_TOKEN;return V.REQUIRE_ACCESS_TOKEN&&c&&this._skuToken&&a.params.push(`sku=${this._skuToken}`),this._makeAPIURL(a,c)}canonicalizeTileURL(n,e){const r=je(n);if(!r.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!r.path.match(/\.[\w]+$/))return n;let a="mapbox://";r.path.match(/^\/raster\/v1\//)?a+=`raster/${r.path.replace(`/${V.RASTER_URL_PREFIX}/`,"")}`:a+=`tiles/${r.path.replace(`/${V.TILE_URL_VERSION}/`,"")}`;let c=r.params;return e&&(c=c.filter(d=>!d.match(/^access_token=/))),c.length&&(a+=`?${c.join("&")}`),a}canonicalizeTileset(n,e){const r=!!e&&W(e),a=[];for(const c of n.tiles||[])re(c)?a.push(this.canonicalizeTileURL(c,r)):a.push(c);return a}_makeAPIURL(n,e){const r="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",a=je(V.API_URL);if(n.protocol=a.protocol,n.authority=a.authority,n.protocol==="http"){const c=n.params.indexOf("secure");c>=0&&n.params.splice(c,1)}if(a.path!=="/"&&(n.path=`${a.path}${n.path}`),!V.REQUIRE_ACCESS_TOKEN)return De(n);if(e=e||V.ACCESS_TOKEN,!this._silenceAuthErrors){if(!e)throw new Error(`An API access token is required to use Mapbox GL. ${r}`);if(e[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${r}`)}return n.params=n.params.filter(c=>c.indexOf("access_token")===-1),n.params.push(`access_token=${e||""}`),De(n)}},s.ResourceType=To,s.SegmentVector=er,s.SourceCache=jl,s.StencilMode=c4,s.StructArrayLayout1ui2=bi,s.StructArrayLayout2f1f2i16=zt,s.StructArrayLayout2i4=nt,s.StructArrayLayout2ui4=xr,s.StructArrayLayout3f12=Wt,s.StructArrayLayout3ui6=St,s.StructArrayLayout4i8=qe,s.StructArrayLayout5f20=vn,s.Texture=T0,s.Tile=a4,s.Transitionable=F,s.Uniform1f=Eh,s.Uniform1i=class extends Ds{constructor(n){super(n),this.current=0}set(n,e,r){this.fetchUniformLocation(n,e)&&this.current!==r&&(this.current=r,this.gl.uniform1i(this.location,r))}},s.Uniform2f=class extends Ds{constructor(n){super(n),this.current=[0,0]}set(n,e,r){this.fetchUniformLocation(n,e)&&(r[0]===this.current[0]&&r[1]===this.current[1]||(this.current=r,this.gl.uniform2f(this.location,r[0],r[1])))}},s.Uniform3f=class extends Ds{constructor(n){super(n),this.current=[0,0,0]}set(n,e,r){this.fetchUniformLocation(n,e)&&(r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]||(this.current=r,this.gl.uniform3f(this.location,r[0],r[1],r[2])))}},s.Uniform4f=d7,s.UniformColor=p7,s.UniformMatrix2f=class extends Ds{constructor(n){super(n),this.current=qy}set(n,e,r){if(this.fetchUniformLocation(n,e)){for(let a=0;a<4;a++)if(r[a]!==this.current[a]){this.current=r,this.gl.uniformMatrix2fv(this.location,!1,r);break}}}},s.UniformMatrix3f=class extends Ds{constructor(n){super(n),this.current=Zy}set(n,e,r){if(this.fetchUniformLocation(n,e)){for(let a=0;a<9;a++)if(r[a]!==this.current[a]){this.current=r,this.gl.uniformMatrix3fv(this.location,!1,r);break}}}},s.UniformMatrix4f=class extends Ds{constructor(n){super(n),this.current=$y}set(n,e,r){if(this.fetchUniformLocation(n,e)){if(r[12]!==this.current[12]||r[0]!==this.current[0])return this.current=r,void this.gl.uniformMatrix4fv(this.location,!1,r);for(let a=1;a<16;a++)if(r[a]!==this.current[a]){this.current=r,this.gl.uniformMatrix4fv(this.location,!1,r);break}}}},s.UnwrappedTileID=xf,s.ValidationError=yt,s.VectorTileFeature=Uh,s.VectorTileWorkerSource=class extends il{constructor(n,e,r,a,c){super(),this.actor=n,this.layerIndex=e,this.availableImages=r,this.loadVectorData=c||I8,this.loading={},this.loaded={},this.deduped=new A8(n.scheduler),this.isSpriteLoaded=a,this.scheduler=n.scheduler}loadTile(n,e){const r=n.uid,a=n&&n.request,c=a&&a.collectResourceTiming,d=this.loading[r]=new mw(n);d.abort=this.loadVectorData(n,(m,y)=>{const w=!this.loading[r];if(delete this.loading[r],w||m||!y)return d.status="done",w||(this.loaded[r]=d),e(m);const b=y.rawData,M={};y.expires&&(M.expires=y.expires),y.cacheControl&&(M.cacheControl=y.cacheControl),d.vectorTile=y.vectorTile||new Zd(new Zh(b));const A=()=>{d.parse(d.vectorTile,this.layerIndex,this.availableImages,this.actor,(I,L)=>{if(I||!L)return e(I);const D={};if(c){const O=ts(a);O.length>0&&(D.resourceTiming=JSON.parse(JSON.stringify(O)))}e(null,Nt({rawTileData:b.slice(0)},L,M,D))})};this.isSpriteLoaded?A():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(A,{type:"parseTile",isSymbolTile:n.isSymbolTile,zoom:n.tileZoom}):A()}),this.loaded=this.loaded||{},this.loaded[r]=d})}reloadTile(n,e){const r=this.loaded,a=n.uid,c=this;if(r&&r[a]){const d=r[a];d.showCollisionBoxes=n.showCollisionBoxes,d.enableTerrain=!!n.enableTerrain,d.projection=n.projection,d.tileTransform=Nl(n.tileID.canonical,n.projection);const m=(y,w)=>{const b=d.reloadCallback;b&&(delete d.reloadCallback,d.parse(d.vectorTile,c.layerIndex,this.availableImages,c.actor,b)),e(y,w)};d.status==="parsing"?d.reloadCallback=m:d.status==="done"&&(d.vectorTile?d.parse(d.vectorTile,this.layerIndex,this.availableImages,this.actor,m):m())}}abortTile(n,e){const r=n.uid,a=this.loading[r];a&&(a.abort&&a.abort(),delete this.loading[r]),e()}removeTile(n,e){const r=this.loaded,a=n.uid;r&&r[a]&&delete r[a],e()}},s.WritingMode=Ni,s.ZoomDependentExpression=bl,s.add=Fs,s.addDynamicAttributes=t3,s.adjoint=function(n,e){var r=e[0],a=e[1],c=e[2],d=e[3],m=e[4],y=e[5],w=e[6],b=e[7],M=e[8];return n[0]=m*M-y*b,n[1]=c*b-a*M,n[2]=a*y-c*m,n[3]=y*w-d*M,n[4]=r*M-c*w,n[5]=c*d-r*y,n[6]=d*b-m*w,n[7]=a*w-r*b,n[8]=r*m-a*d,n},s.asyncAll=Tt,s.bezier=Je,s.bindAll=wo,s.boundsAttributes=d8,s.bufferConvexPolygon=function(n,e){const r=[];for(let a=0;a<n.length;a++){const c=ht(a-1,-1,n.length-1),d=ht(a+1,-1,n.length-1),m=n[a],y=n[d],w=n[c].sub(m).unit(),b=y.sub(m).unit(),M=b.angleWithSep(w.x,w.y),A=w.add(b).unit().mult(-1*e/Math.sin(M/2));r.push(m.add(A))}return r},s.cacheEntryPossiblyAdded=function(n){es++,es>ws&&(n.getActor().send("enforceCacheSizeLimit",Xi),es=0)},s.calculateGlobeLabelMatrix=function(n,e){const{x:r,y:a}=n.point,c=F7(r,a,n.worldSize/n._pixelsPerMercatorPixel,0,0);return zl(c,c,Md(ss(e)))},s.calculateGlobeMatrix=function(n){const{x:e,y:r}=n.point,{lng:a,lat:c}=n._center;return F7(e,r,n.worldSize,a,c)},s.calculateGlobeMercatorMatrix=function(n){const e=n.pixelsPerMeter,r=e/Oo(1,n.center.lat),a=Fo(new Float64Array(16));return Xu(a,a,[n.point.x,n.point.y,0]),Ll(a,a,[r,r,e]),Float32Array.from(a)},s.circumferenceAtLatitude=Pd,s.clamp=Ce,s.clearTileCache=function(n){if(!qr())return;const e=P.caches.delete(Ur);n&&e.catch(n).then(()=>n())},s.clipLine=Hf,s.clone=function(n){var e=new Ti(16);return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],e},s.clone$1=kr,s.collisionCircleLayout=px,s.config=V,s.conjugate=function(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n[3]=e[3],n},s.create=function(){var n=new Ti(16);return Ti!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0),n[0]=1,n[5]=1,n[10]=1,n[15]=1,n},s.create$1=_7,s.createExpression=_a,s.createLayout=Te,s.createStyleLayer=function(n){return n.type==="custom"?new iw(n):new sw[n.type](n)},s.cross=vd,s.degToRad=bt,s.distance=function(n,e){return Math.hypot(e[0]-n[0],e[1]-n[1],e[2]-n[2])},s.div=function(n,e,r){return n[0]=e[0]/r[0],n[1]=e[1]/r[1],n[2]=e[2]/r[2],n},s.dot=so,s.earthRadius=o0,s.ease=Xe,s.easeCubicInOut=Ge,s.ecefToLatLng=function([n,e,r]){const a=Math.hypot(n,e,r),c=Math.atan2(n,r),d=.5*Math.PI-Math.acos(-e/a);return new wn(Bt(c),Bt(d))},s.emitValidationErrors=yh,s.endsWith=Jo,s.enforceCacheSizeLimit=function(n){Yi(),Er&&Er.then(e=>{e.keys().then(r=>{for(let a=0;a<r.length-n;a++)e.delete(r[a])})})},s.evaluateSizeForFeature=Gh,s.evaluateSizeForZoom=X1,s.evaluateVariableOffset=Qf,s.evented=g,s.exactEquals=function(n,e){return n[0]===e[0]&&n[1]===e[1]&&n[2]===e[2]&&n[3]===e[3]},s.exactEquals$1=function(n,e){return n[0]===e[0]&&n[1]===e[1]&&n[2]===e[2]},s.exported=Di,s.exported$1=q,s.extend=Nt,s.extend$1=So,s.fillExtrusionHeightLift=gf,s.filterObject=fi,s.fromMat4=function(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[4],n[4]=e[5],n[5]=e[6],n[6]=e[8],n[7]=e[9],n[8]=e[10],n},s.fromQuat=function(n,e){var r=e[0],a=e[1],c=e[2],d=e[3],m=r+r,y=a+a,w=c+c,b=r*m,M=a*m,A=a*y,I=c*m,L=c*y,D=c*w,O=d*m,Z=d*y,Q=d*w;return n[0]=1-A-D,n[1]=M+Q,n[2]=I-Z,n[3]=0,n[4]=M-Q,n[5]=1-b-D,n[6]=L+O,n[7]=0,n[8]=I+Z,n[9]=L-O,n[10]=1-b-A,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},s.fromRotation=function(n,e){var r=Math.sin(e),a=Math.cos(e);return n[0]=a,n[1]=r,n[2]=0,n[3]=-r,n[4]=a,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n},s.fromScaling=y7,s.furthestTileCorner=function(n){const e=Math.round((n+45+360)%360/90)%4;return Ke[e]},s.getAABBPointSquareDist=function(n,e,r){let a=0;for(let c=0;c<2;++c){const d=r?r[c]:0;n[c]>d&&(a+=(n[c]-d)*(n[c]-d)),e[c]<d&&(a+=(d-e[c])*(d-e[c]))}return a},s.getAnchorAlignment=Jd,s.getAnchorJustification=t4,s.getBounds=function(n){let e=1/0,r=1/0,a=-1/0,c=-1/0;for(const d of n)e=Math.min(e,d.x),r=Math.min(r,d.y),a=Math.max(a,d.x),c=Math.max(c,d.y);return{min:new Me(e,r),max:new Me(a,c)}},s.getColumn=_i,s.getDefaultExportFromCjs=se,s.getGridMatrix=function(n,e,r,a){const c=e.getNorth(),d=e.getSouth(),m=e.getWest(),y=e.getEast(),w=1<<n.z,b=y-m,M=c-d,A=b/Rl,I=-M/n0[r],L=[0,A,0,I,0,0,c,m,0];if(n.z>0){const D=180/a;g7(L,L,[D/b+1,0,0,0,D/M+1,0,-.5*D/A,.5*D/I,1])}return L[2]=w,L[5]=n.x,L[8]=n.y,L},s.getImage=ae,s.getJSON=function(n,e){return Ji(Nt(n,{type:"json"}),e)},s.getLatitudinalLod=function(n){const e=Rr-5;n=Ce(n,-e,e)/e*90;const r=Math.pow(Math.abs(Math.sin(bt(n))),3);return Math.round(r*(n0.length-1))},s.getMapSessionAPI=kn,s.getPerformanceMeasurement=ts,s.getProjection=a8,s.getRTLTextPluginStatus=v,s.getReferrer=gi,s.getTilePoint=function(n,{x:e,y:r},a=0){return new Me(((e-a)*n.scale-n.x)*kt,(r*n.scale-n.y)*kt)},s.getTileVec3=function(n,e,r=0){return N1(((e.x-r)*n.scale-n.x)*kt,(e.y*n.scale-n.y)*kt,N7(e.z,e.y))},s.getVideo=function(n,e){const r=P.document.createElement("video");r.muted=!0,r.onloadstart=function(){e(null,r)};for(let a=0;a<n.length;a++){const c=P.document.createElement("source");ta(n[a])||(r.crossOrigin="Anonymous"),c.src=n[a],r.appendChild(c)}return{cancel:()=>{}}},s.globeCenterToScreenPoint=function(n){const e=[0,0,0],r=Fo(new Float64Array(16));return zl(r,n.pixelMatrix,n.globeMatrix),Hn(e,e,r),new Me(e[0],e[1])},s.globeDenormalizeECEF=Md,s.globeECEFOrigin=function(n,e){const r=[0,0,0];return Hn(r,r,i0(ss(e.canonical))),Hn(r,r,n),r},s.globeMetersToEcef=Ch,s.globeNormalizeECEF=i0,s.globePixelsToTileUnits=function(n,e){return kt/(512*Math.pow(2,n))*Ah(ss(e))},s.globePoleMatrixForTile=function(n,e,r){const a=Fo(new Float64Array(16)),c=(e/(1<<n)-.5)*Math.PI*2;return Mh(a,r.globeMatrix,c),Float32Array.from(a)},s.globeTileBounds=ss,s.globeTiltAtLngLat=B7,s.globeToMercatorTransition=G1,s.globeUseCustomAntiAliasing=function(n,e,r){const a=G1(r.zoom),c=n.style.map._antialias,d=!!e.extStandardDerivatives,m=e.extStandardDerivativesForceOff||n.terrain&&n.terrain.exaggeration()>0;return a===0&&!c&&!m&&d},s.identity=Fo,s.identity$1=M7,s.invert=md,s.isFullscreen=function(){return!!P.document.fullscreenElement||!!P.document.webkitFullscreenElement},s.isLngLatBehindGlobe=Cd,s.isMapAuthenticated=function(n){return Vn.has(n)},s.isMapboxURL=W,s.isSafariWithAntialiasingBug=function(n){const e=n.navigator?n.navigator.userAgent:null;return!!mi(n)&&e&&(e.match("Version/15.4")||e.match("Version/15.5")||e.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},s.latFromMercatorY=Dr,s.latLngToECEF=V1,s.len=tv,s.length=Ku,s.length$1=function(n){return Math.hypot(n[0],n[1],n[2],n[3])},s.lngFromMercatorX=Ui,s.loadVectorTile=I8,s.makeRequest=Ji,s.mapValue=function(n,e,r,a,c){return Ce((n-e)/(r-e)*(c-a)+a,a,c)},s.mercatorScale=j7,s.mercatorXfromLng=as,s.mercatorYfromLat=ls,s.mercatorZfromAltitude=Oo,s.mul=Qy,s.mul$1=ev,s.multiply=zl,s.multiply$1=g7,s.multiply$2=w7,s.nextPowerOfTwo=Nn,s.normalize=Kr,s.normalize$1=nv,s.normalize$2=E7,s.number=rn,s.ortho=function(n,e,r,a,c,d,m){var y=1/(e-r),w=1/(a-c),b=1/(d-m);return n[0]=-2*y,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*w,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*b,n[11]=0,n[12]=(e+r)*y,n[13]=(c+a)*w,n[14]=(m+d)*b,n[15]=1,n},s.pbf=Cf,s.perspective=function(n,e,r,a,c){var d,m=1/Math.tan(e/2);return n[0]=m/r,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=m,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,c!=null&&c!==1/0?(n[10]=(c+a)*(d=1/(a-c)),n[14]=2*c*a*d):(n[10]=-1,n[14]=-2*a),n},s.pick=function(n,e){const r={};for(let a=0;a<e.length;a++){const c=e[a];c in n&&(r[c]=n[c])}return r},s.plugin=S,s.pointGeometry=Ye,s.polesInViewport=function(n){const e=Fo(new Float64Array(16));zl(e,n.pixelMatrix,n.globeMatrix);const r=[0,ao,0],a=[0,lo,0];return Hn(r,r,e),Hn(a,a,e),[r[0]>0&&r[0]<=n.width&&r[1]>0&&r[1]<=n.height&&!Cd(n,new wn(n.center.lat,90)),a[0]>0&&a[0]<=n.width&&a[1]>0&&a[1]<=n.height&&!Cd(n,new wn(n.center.lat,-90))]},s.polygonContainsPoint=Ol,s.polygonIntersectsBox=H7,s.polygonIntersectsPolygon=$7,s.polygonizeBounds=function(n,e,r=0,a=!0){const c=new Me(r,r),d=n.sub(c),m=e.add(c),y=[d,new Me(m.x,d.y),m,new Me(d.x,m.y)];return a&&y.push(d.clone()),y},s.posAttributes=t0,s.postMapLoadEvent=en,s.postPerformanceEvent=Bn,s.postTurnstileEvent=Dt,s.potpack=Xd,s.prevPowerOfTwo=function(n){return n<=1?1:Math.pow(2,Math.floor(Math.log(n)/Math.LN2))},s.radToDeg=Bt,s.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],s.registerForPluginStateChange=function(n){return n({pluginStatus:h,pluginURL:i}),g.on("pluginStateChange",n),n},s.removeAuthState=function(n){Vn.delete(n)},s.renderColorRamp=Fd,s.resample=V7,s.rotateX=_d,s.rotateX$1=C7,s.rotateY=Mh,s.rotateY$1=P7,s.rotateZ=function(n,e,r){var a=Math.sin(r),c=Math.cos(r),d=e[0],m=e[1],y=e[2],w=e[3],b=e[4],M=e[5],A=e[6],I=e[7];return e!==n&&(n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=d*c+b*a,n[1]=m*c+M*a,n[2]=y*c+A*a,n[3]=w*c+I*a,n[4]=b*c-d*a,n[5]=M*c-m*a,n[6]=A*c-y*a,n[7]=I*c-w*a,n},s.rotateZ$1=function(n,e,r){r*=.5;var a=e[0],c=e[1],d=e[2],m=e[3],y=Math.sin(r),w=Math.cos(r);return n[0]=a*w+c*y,n[1]=c*w-a*y,n[2]=d*w+m*y,n[3]=m*w-d*y,n},s.scale=Ll,s.scale$1=T7,s.scale$2=Oi,s.scaleAndAdd=Qu,s.set=function(n,e,r,a){return n[0]=e,n[1]=r,n[2]=a,n},s.setCacheLimits=function(n,e){Xi=n,ws=e},s.setColumn=function(n,e,r){n[4*e+0]=r[0],n[4*e+1]=r[1],n[4*e+2]=r[2],n[4*e+3]=r[3]},s.setRTLTextPlugin=function(n,e,r=!1){if(h===$u||h===Zu||h===qu)throw new Error("setRTLTextPlugin cannot be called multiple times.");i=Di.resolveURL(n),h=$u,xa=e,f(),r||T()},s.smoothstep=st,s.spec=Ve,s.squaredLength=function(n){var e=n[0],r=n[1],a=n[2];return e*e+r*r+a*a},s.storeAuthState=function(n,e){e?Vn.add(n):Vn.delete(n)},s.sub=Bo,s.subtract=yd,s.symbolSize=fx,s.tileAABB=function(n,e,r,a,c,d,m,y,w){if(w.name==="globe")return av(n,e,new jh(r,a,c));const b=Nl({z:r,x:a,y:c},w);return new Yr([(d+b.x/b.scale)*e,e*(b.y/b.scale),m],[(d+b.x2/b.scale)*e,e*(b.y2/b.scale),y])},s.tileCornersToBounds=Ph,s.tileTransform=Nl,s.transformMat3=function(n,e,r){var a=e[0],c=e[1],d=e[2];return n[0]=a*r[0]+c*r[3]+d*r[6],n[1]=a*r[1]+c*r[4]+d*r[7],n[2]=a*r[2]+c*r[5]+d*r[8],n},s.transformMat4=Hn,s.transformMat4$1=Dl,s.transformQuat=b7,s.transitionTileAABBinECEF=L7,s.translate=Xu,s.transpose=function(n,e){if(n===e){var r=e[1],a=e[2],c=e[5];n[1]=e[3],n[2]=e[6],n[3]=r,n[5]=e[7],n[6]=a,n[7]=c}else n[0]=e[0],n[1]=e[3],n[2]=e[6],n[3]=e[1],n[4]=e[4],n[5]=e[7],n[6]=e[2],n[7]=e[5],n[8]=e[8];return n},s.triggerPluginCompletionEvent=l,s.uniqueId=Yn,s.updateGlobeVertexNormal=function(n,e,r,a,c){const d=5*e+2;n.float32[d+0]=r,n.float32[d+1]=a,n.float32[d+2]=c},s.validateCustomStyleLayer=function(n){const e=[],r=n.id;return r===void 0&&e.push({message:`layers.${r}: missing required property "id"`}),n.render===void 0&&e.push({message:`layers.${r}: missing required method "render"`}),n.renderingMode&&n.renderingMode!=="2d"&&n.renderingMode!=="3d"&&e.push({message:`layers.${r}: property "renderingMode" must be either "2d" or "3d"`}),e},s.validateFilter=n=>wi(Cl(n)),s.validateFog=n=>wi(mh(n)),s.validateLayer=n=>wi(hh(n)),s.validateLight=n=>wi(fh(n)),s.validateSource=n=>wi(ph(n)),s.validateStyle=gh,s.validateTerrain=n=>wi(Uu(n)),s.values=Rt,s.vectorTile=Oh,s.version=R,s.warnOnce=dn,s.window=P,s.wrap=ht}),x(["./shared"],function(s){function P(ue){if(typeof ue=="number"||typeof ue=="boolean"||typeof ue=="string"||ue==null)return JSON.stringify(ue);if(Array.isArray(ue)){let G="[";for(const ae of ue)G+=`${P(ae)},`;return`${G}]`}let N="{";for(const G of Object.keys(ue).sort())N+=`${G}:${P(ue[G])},`;return`${N}}`}function R(ue){let N="";for(const G of s.refProperties)N+=`/${P(ue[G])}`;return N}class U{constructor(N){this.keyCache={},N&&this.replace(N)}replace(N){this._layerConfigs={},this._layers={},this.update(N,[])}update(N,G){for(const j of N)this._layerConfigs[j.id]=j,(this._layers[j.id]=s.createStyleLayer(j)).compileFilter(),this.keyCache[j.id]&&delete this.keyCache[j.id];for(const j of G)delete this.keyCache[j],delete this._layerConfigs[j],delete this._layers[j];this.familiesBySource={};const ae=function(j,W){const re={};for(let le=0;le<j.length;le++){const be=W&&W[j[le].id]||R(j[le]);W&&(W[j[le].id]=be);let Oe=re[be];Oe||(Oe=re[be]=[]),Oe.push(j[le])}const he=[];for(const le in re)he.push(re[le]);return he}(s.values(this._layerConfigs),this.keyCache);for(const j of ae){const W=j.map(je=>this._layers[je.id]),re=W[0];if(re.visibility==="none")continue;const he=re.source||"";let le=this.familiesBySource[he];le||(le=this.familiesBySource[he]={});const be=re.sourceLayer||"_geojsonTileLayer";let Oe=le[be];Oe||(Oe=le[be]=[]),Oe.push(W)}}}class V{loadTile(N,G){const{uid:ae,encoding:j,rawImageData:W,padding:re,buildQuadTree:he}=N,le=s.window.ImageBitmap&&W instanceof s.window.ImageBitmap?this.getImageData(W,re):W;G(null,new s.DEMData(ae,le,j,re<1,he))}getImageData(N,G){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(N.width,N.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=N.width,this.offscreenCanvas.height=N.height,this.offscreenCanvasContext.drawImage(N,0,0,N.width,N.height);const ae=this.offscreenCanvasContext.getImageData(-G,-G,N.width+2*G,N.height+2*G);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),ae}}function q(ue,N){if(ue.length!==0){ve(ue[0],N);for(var G=1;G<ue.length;G++)ve(ue[G],!N)}}function ve(ue,N){for(var G=0,ae=0,j=0,W=ue.length,re=W-1;j<W;re=j++){var he=(ue[j][0]-ue[re][0])*(ue[re][1]+ue[j][1]),le=G+he;ae+=Math.abs(G)>=Math.abs(he)?G-le+he:he-le+G,G=le}G+ae>=0!=!!N&&ue.reverse()}var we=s.getDefaultExportFromCjs(function ue(N,G){var ae,j=N&&N.type;if(j==="FeatureCollection")for(ae=0;ae<N.features.length;ae++)ue(N.features[ae],G);else if(j==="GeometryCollection")for(ae=0;ae<N.geometries.length;ae++)ue(N.geometries[ae],G);else if(j==="Feature")ue(N.geometry,G);else if(j==="Polygon")q(N.coordinates,G);else if(j==="MultiPolygon")for(ae=0;ae<N.coordinates.length;ae++)q(N.coordinates[ae],G);return N});const xe=s.VectorTileFeature.prototype.toGeoJSON;var Ie={exports:{}},te=s.pointGeometry,ne=s.vectorTile.VectorTileFeature,se=Se;function Se(ue,N){this.options=N||{},this.features=ue,this.length=ue.length}function Be(ue,N){this.id=typeof ue.id=="number"?ue.id:void 0,this.type=ue.type,this.rawGeometry=ue.type===1?[ue.geometry]:ue.geometry,this.properties=ue.tags,this.extent=N||4096}Se.prototype.feature=function(ue){return new Be(this.features[ue],this.options.extent)},Be.prototype.loadGeometry=function(){var ue=this.rawGeometry;this.geometry=[];for(var N=0;N<ue.length;N++){for(var G=ue[N],ae=[],j=0;j<G.length;j++)ae.push(new te(G[j][0],G[j][1]));this.geometry.push(ae)}return this.geometry},Be.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ue=this.geometry,N=1/0,G=-1/0,ae=1/0,j=-1/0,W=0;W<ue.length;W++)for(var re=ue[W],he=0;he<re.length;he++){var le=re[he];N=Math.min(N,le.x),G=Math.max(G,le.x),ae=Math.min(ae,le.y),j=Math.max(j,le.y)}return[N,ae,G,j]},Be.prototype.toGeoJSON=ne.prototype.toGeoJSON;var ye=s.pbf,Ye=se;function lt(ue){var N=new ye;return function(G,ae){for(var j in G.layers)ae.writeMessage(3,Me,G.layers[j])}(ue,N),N.finish()}function Me(ue,N){var G;N.writeVarintField(15,ue.version||1),N.writeStringField(1,ue.name||""),N.writeVarintField(5,ue.extent||4096);var ae={keys:[],values:[],keycache:{},valuecache:{}};for(G=0;G<ue.length;G++)ae.feature=ue.feature(G),N.writeMessage(2,Mt,ae);var j=ae.keys;for(G=0;G<j.length;G++)N.writeStringField(3,j[G]);var W=ae.values;for(G=0;G<W.length;G++)N.writeMessage(4,Ge,W[G])}function Mt(ue,N){var G=ue.feature;G.id!==void 0&&N.writeVarintField(1,G.id),N.writeMessage(2,Ut,ue),N.writeVarintField(3,G.type),N.writeMessage(4,Ke,G)}function Ut(ue,N){var G=ue.feature,ae=ue.keys,j=ue.values,W=ue.keycache,re=ue.valuecache;for(var he in G.properties){var le=G.properties[he],be=W[he];if(le!==null){be===void 0&&(ae.push(he),W[he]=be=ae.length-1),N.writeVarint(be);var Oe=typeof le;Oe!=="string"&&Oe!=="boolean"&&Oe!=="number"&&(le=JSON.stringify(le));var je=Oe+":"+le,De=re[je];De===void 0&&(j.push(le),re[je]=De=j.length-1),N.writeVarint(De)}}}function bt(ue,N){return(N<<3)+(7&ue)}function Bt(ue){return ue<<1^ue>>31}function Ke(ue,N){for(var G=ue.loadGeometry(),ae=ue.type,j=0,W=0,re=G.length,he=0;he<re;he++){var le=G[he],be=1;ae===1&&(be=le.length),N.writeVarint(bt(1,be));for(var Oe=ae===3?le.length-1:le.length,je=0;je<Oe;je++){je===1&&ae!==1&&N.writeVarint(bt(2,Oe-1));var De=le[je].x-j,gt=le[je].y-W;N.writeVarint(Bt(De)),N.writeVarint(Bt(gt)),j+=De,W+=gt}ae===3&&N.writeVarint(bt(7,1))}}function Ge(ue,N){var G=typeof ue;G==="string"?N.writeStringField(1,ue):G==="boolean"?N.writeBooleanField(7,ue):G==="number"&&(ue%1!=0?N.writeDoubleField(3,ue):ue<0?N.writeSVarintField(6,ue):N.writeVarintField(5,ue))}Ie.exports=lt,Ie.exports.fromVectorTileJs=lt,Ie.exports.fromGeojsonVt=function(ue,N){N=N||{};var G={};for(var ae in ue)G[ae]=new Ye(ue[ae].features,N),G[ae].name=ae,G[ae].version=N.version,G[ae].extent=N.extent;return lt({layers:G})},Ie.exports.GeoJSONWrapper=Ye;var Je=s.getDefaultExportFromCjs(Ie.exports);const Xe={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ue=>ue},Ce=Math.fround||(st=new Float32Array(1),ue=>(st[0]=+ue,st[0]));var st;const ht=3,Tt=5,Rt=6;class Nt{constructor(N){this.options=Object.assign(Object.create(Xe),N),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(N){const{log:G,minZoom:ae,maxZoom:j}=this.options;G&&console.time("total time");const W=`prepare ${N.length} points`;G&&console.time(W),this.points=N;const re=[];for(let le=0;le<N.length;le++){const be=N[le];if(!be.geometry)continue;const[Oe,je]=be.geometry.coordinates,De=Ce(In(Oe)),gt=Ce(Nn(je));re.push(De,gt,1/0,le,-1,1),this.options.reduce&&re.push(0)}let he=this.trees[j+1]=this._createTree(re);G&&console.timeEnd(W);for(let le=j;le>=ae;le--){const be=+Date.now();he=this.trees[le]=this._createTree(this._cluster(he,le)),G&&console.log("z%d: %d clusters in %dms",le,he.numItems,+Date.now()-be)}return G&&console.timeEnd("total time"),this}getClusters(N,G){let ae=((N[0]+180)%360+360)%360-180;const j=Math.max(-90,Math.min(90,N[1]));let W=N[2]===180?180:((N[2]+180)%360+360)%360-180;const re=Math.max(-90,Math.min(90,N[3]));if(N[2]-N[0]>=360)ae=-180,W=180;else if(ae>W){const je=this.getClusters([ae,j,180,re],G),De=this.getClusters([-180,j,W,re],G);return je.concat(De)}const he=this.trees[this._limitZoom(G)],le=he.range(In(ae),Nn(re),In(W),Nn(j)),be=he.data,Oe=[];for(const je of le){const De=this.stride*je;Oe.push(be[De+Tt]>1?Yt(be,De,this.clusterProps):this.points[be[De+ht]])}return Oe}getChildren(N){const G=this._getOriginId(N),ae=this._getOriginZoom(N),j="No cluster with the specified id.",W=this.trees[ae];if(!W)throw new Error(j);const re=W.data;if(G*this.stride>=re.length)throw new Error(j);const he=this.options.radius/(this.options.extent*Math.pow(2,ae-1)),le=W.within(re[G*this.stride],re[G*this.stride+1],he),be=[];for(const Oe of le){const je=Oe*this.stride;re[je+4]===N&&be.push(re[je+Tt]>1?Yt(re,je,this.clusterProps):this.points[re[je+ht]])}if(be.length===0)throw new Error(j);return be}getLeaves(N,G,ae){const j=[];return this._appendLeaves(j,N,G=G||10,ae=ae||0,0),j}getTile(N,G,ae){const j=this.trees[this._limitZoom(N)],W=Math.pow(2,N),{extent:re,radius:he}=this.options,le=he/re,be=(ae-le)/W,Oe=(ae+1+le)/W,je={features:[]};return this._addTileFeatures(j.range((G-le)/W,be,(G+1+le)/W,Oe),j.data,G,ae,W,je),G===0&&this._addTileFeatures(j.range(1-le/W,be,1,Oe),j.data,W,ae,W,je),G===W-1&&this._addTileFeatures(j.range(0,be,le/W,Oe),j.data,-1,ae,W,je),je.features.length?je:null}getClusterExpansionZoom(N){let G=this._getOriginZoom(N)-1;for(;G<=this.options.maxZoom;){const ae=this.getChildren(N);if(G++,ae.length!==1)break;N=ae[0].properties.cluster_id}return G}_appendLeaves(N,G,ae,j,W){const re=this.getChildren(G);for(const he of re){const le=he.properties;if(le&&le.cluster?W+le.point_count<=j?W+=le.point_count:W=this._appendLeaves(N,le.cluster_id,ae,j,W):W<j?W++:N.push(he),N.length===ae)break}return W}_createTree(N){const G=new s.KDBush(N.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ae=0;ae<N.length;ae+=this.stride)G.add(N[ae],N[ae+1]);return G.finish(),G.data=N,G}_addTileFeatures(N,G,ae,j,W,re){for(const he of N){const le=he*this.stride,be=G[le+Tt]>1;let Oe,je,De;if(be)Oe=Yn(G,le,this.clusterProps),je=G[le],De=G[le+1];else{const pt=this.points[G[le+ht]];Oe=pt.properties;const[Et,Dt]=pt.geometry.coordinates;je=In(Et),De=Nn(Dt)}const gt={type:1,geometry:[[Math.round(this.options.extent*(je*W-ae)),Math.round(this.options.extent*(De*W-j))]],tags:Oe};let It;It=be||this.options.generateId?G[le+ht]:this.points[G[le+ht]].id,It!==void 0&&(gt.id=It),re.features.push(gt)}}_limitZoom(N){return Math.max(this.options.minZoom,Math.min(Math.floor(+N),this.options.maxZoom+1))}_cluster(N,G){const{radius:ae,extent:j,reduce:W,minPoints:re}=this.options,he=ae/(j*Math.pow(2,G)),le=N.data,be=[],Oe=this.stride;for(let je=0;je<le.length;je+=Oe){if(le[je+2]<=G)continue;le[je+2]=G;const De=le[je],gt=le[je+1],It=N.within(le[je],le[je+1],he),pt=le[je+Tt];let Et=pt;for(const Dt of It){const tn=Dt*Oe;le[tn+2]>G&&(Et+=le[tn+Tt])}if(Et>pt&&Et>=re){let Dt,tn=De*pt,en=gt*pt,jn=-1;const Bn=((je/Oe|0)<<5)+(G+1)+this.points.length;for(const Sr of It){const kn=Sr*Oe;if(le[kn+2]<=G)continue;le[kn+2]=G;const Vn=le[kn+Tt];tn+=le[kn]*Vn,en+=le[kn+1]*Vn,le[kn+4]=Bn,W&&(Dt||(Dt=this._map(le,je,!0),jn=this.clusterProps.length,this.clusterProps.push(Dt)),W(Dt,this._map(le,kn)))}le[je+4]=Bn,be.push(tn/Et,en/Et,1/0,Bn,-1,Et),W&&be.push(jn)}else{for(let Dt=0;Dt<Oe;Dt++)be.push(le[je+Dt]);if(Et>1)for(const Dt of It){const tn=Dt*Oe;if(!(le[tn+2]<=G)){le[tn+2]=G;for(let en=0;en<Oe;en++)be.push(le[tn+en])}}}}return be}_getOriginId(N){return N-this.points.length>>5}_getOriginZoom(N){return(N-this.points.length)%32}_map(N,G,ae){if(N[G+Tt]>1){const re=this.clusterProps[N[G+Rt]];return ae?Object.assign({},re):re}const j=this.points[N[G+ht]].properties,W=this.options.map(j);return ae&&W===j?Object.assign({},W):W}}function Yt(ue,N,G){return{type:"Feature",id:ue[N+ht],properties:Yn(ue,N,G),geometry:{type:"Point",coordinates:[(ae=ue[N],360*(ae-.5)),xo(ue[N+1])]}};var ae}function Yn(ue,N,G){const ae=ue[N+Tt],j=ae>=1e4?`${Math.round(ae/1e3)}k`:ae>=1e3?Math.round(ae/100)/10+"k":ae,W=ue[N+Rt],re=W===-1?{}:Object.assign({},G[W]);return Object.assign(re,{cluster:!0,cluster_id:ue[N+ht],point_count:ae,point_count_abbreviated:j})}function In(ue){return ue/360+.5}function Nn(ue){const N=Math.sin(ue*Math.PI/180),G=.5-.25*Math.log((1+N)/(1-N))/Math.PI;return G<0?0:G>1?1:G}function xo(ue){const N=(180-360*ue)*Math.PI/180;return 360*Math.atan(Math.exp(N))/Math.PI-90}function wo(ue,N,G,ae){for(var j,W=ae,re=G-N>>1,he=G-N,le=ue[N],be=ue[N+1],Oe=ue[G],je=ue[G+1],De=N+3;De<G;De+=3){var gt=Jo(ue[De],ue[De+1],le,be,Oe,je);if(gt>W)j=De,W=gt;else if(gt===W){var It=Math.abs(De-re);It<he&&(j=De,he=It)}}W>ae&&(j-N>3&&wo(ue,N,j,ae),ue[j+2]=W,G-j>3&&wo(ue,j,G,ae))}function Jo(ue,N,G,ae,j,W){var re=j-G,he=W-ae;if(re!==0||he!==0){var le=((ue-G)*re+(N-ae)*he)/(re*re+he*he);le>1?(G=j,ae=W):le>0&&(G+=re*le,ae+=he*le)}return(re=ue-G)*re+(he=N-ae)*he}function Ft(ue,N,G,ae){var j={id:ue===void 0?null:ue,type:N,geometry:G,tags:ae,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(W){var re=W.geometry,he=W.type;if(he==="Point"||he==="MultiPoint"||he==="LineString")fi(W,re);else if(he==="Polygon"||he==="MultiLineString")for(var le=0;le<re.length;le++)fi(W,re[le]);else if(he==="MultiPolygon")for(le=0;le<re.length;le++)for(var be=0;be<re[le].length;be++)fi(W,re[le][be])}(j),j}function fi(ue,N){for(var G=0;G<N.length;G+=3)ue.minX=Math.min(ue.minX,N[G]),ue.minY=Math.min(ue.minY,N[G+1]),ue.maxX=Math.max(ue.maxX,N[G]),ue.maxY=Math.max(ue.maxY,N[G+1])}function kr(ue,N,G,ae){if(N.geometry){var j=N.geometry.coordinates,W=N.geometry.type,re=Math.pow(G.tolerance/((1<<G.maxZoom)*G.extent),2),he=[],le=N.id;if(G.promoteId?le=N.properties[G.promoteId]:G.generateId&&(le=ae||0),W==="Point")vs(j,he);else if(W==="MultiPoint")for(var be=0;be<j.length;be++)vs(j[be],he);else if(W==="LineString")dn(j,he,re,!1);else if(W==="MultiLineString"){if(G.lineMetrics){for(be=0;be<j.length;be++)dn(j[be],he=[],re,!1),ue.push(Ft(le,"LineString",he,N.properties));return}Zr(j,he,re,!1)}else if(W==="Polygon")Zr(j,he,re,!0);else{if(W!=="MultiPolygon"){if(W==="GeometryCollection"){for(be=0;be<N.geometry.geometries.length;be++)kr(ue,{id:le,geometry:N.geometry.geometries[be],properties:N.properties},G,ae);return}throw new Error("Input data is not a valid GeoJSON object.")}for(be=0;be<j.length;be++){var Oe=[];Zr(j[be],Oe,re,!0),he.push(Oe)}}ue.push(Ft(le,W,he,N.properties))}}function vs(ue,N){N.push(ea(ue[0])),N.push(zi(ue[1])),N.push(0)}function dn(ue,N,G,ae){for(var j,W,re=0,he=0;he<ue.length;he++){var le=ea(ue[he][0]),be=zi(ue[he][1]);N.push(le),N.push(be),N.push(0),he>0&&(re+=ae?(j*be-le*W)/2:Math.sqrt(Math.pow(le-j,2)+Math.pow(be-W,2))),j=le,W=be}var Oe=N.length-3;N[2]=1,wo(N,0,Oe,G),N[Oe+2]=1,N.size=Math.abs(re),N.start=0,N.end=N.size}function Zr(ue,N,G,ae){for(var j=0;j<ue.length;j++){var W=[];dn(ue[j],W,G,ae),N.push(W)}}function ea(ue){return ue/360+.5}function zi(ue){var N=Math.sin(ue*Math.PI/180),G=.5-.25*Math.log((1+N)/(1-N))/Math.PI;return G<0?0:G>1?1:G}function Or(ue,N,G,ae,j,W,re,he){if(ae/=N,W>=(G/=N)&&re<ae)return ue;if(re<G||W>=ae)return null;for(var le=[],be=0;be<ue.length;be++){var Oe=ue[be],je=Oe.geometry,De=Oe.type,gt=j===0?Oe.minX:Oe.minY,It=j===0?Oe.maxX:Oe.maxY;if(gt>=G&&It<ae)le.push(Oe);else if(!(It<G||gt>=ae)){var pt=[];if(De==="Point"||De==="MultiPoint")xs(je,pt,G,ae,j);else if(De==="LineString")mi(je,pt,G,ae,j,!1,he.lineMetrics);else if(De==="MultiLineString")_i(je,pt,G,ae,j,!1);else if(De==="Polygon")_i(je,pt,G,ae,j,!0);else if(De==="MultiPolygon")for(var Et=0;Et<je.length;Et++){var Dt=[];_i(je[Et],Dt,G,ae,j,!0),Dt.length&&pt.push(Dt)}if(pt.length){if(he.lineMetrics&&De==="LineString"){for(Et=0;Et<pt.length;Et++)le.push(Ft(Oe.id,De,pt[Et],Oe.tags));continue}De!=="LineString"&&De!=="MultiLineString"||(pt.length===1?(De="LineString",pt=pt[0]):De="MultiLineString"),De!=="Point"&&De!=="MultiPoint"||(De=pt.length===3?"Point":"MultiPoint"),le.push(Ft(Oe.id,De,pt,Oe.tags))}}}return le.length?le:null}function xs(ue,N,G,ae,j){for(var W=0;W<ue.length;W+=3){var re=ue[W+j];re>=G&&re<=ae&&(N.push(ue[W]),N.push(ue[W+1]),N.push(ue[W+2]))}}function mi(ue,N,G,ae,j,W,re){for(var he,le,be=Qo(ue),Oe=j===0?Xi:ws,je=ue.start,De=0;De<ue.length-3;De+=3){var gt=ue[De],It=ue[De+1],pt=ue[De+2],Et=ue[De+3],Dt=ue[De+4],tn=j===0?gt:It,en=j===0?Et:Dt,jn=!1;re&&(he=Math.sqrt(Math.pow(gt-Et,2)+Math.pow(It-Dt,2))),tn<G?en>G&&(le=Oe(be,gt,It,Et,Dt,G),re&&(be.start=je+he*le)):tn>ae?en<ae&&(le=Oe(be,gt,It,Et,Dt,ae),re&&(be.start=je+he*le)):Ur(be,gt,It,pt),en<G&&tn>=G&&(le=Oe(be,gt,It,Et,Dt,G),jn=!0),en>ae&&tn<=ae&&(le=Oe(be,gt,It,Et,Dt,ae),jn=!0),!W&&jn&&(re&&(be.end=je+he*le),N.push(be),be=Qo(ue)),re&&(je+=he)}var Bn=ue.length-3;gt=ue[Bn],It=ue[Bn+1],pt=ue[Bn+2],(tn=j===0?gt:It)>=G&&tn<=ae&&Ur(be,gt,It,pt),Bn=be.length-3,W&&Bn>=3&&(be[Bn]!==be[0]||be[Bn+1]!==be[1])&&Ur(be,be[0],be[1],be[2]),be.length&&N.push(be)}function Qo(ue){var N=[];return N.size=ue.size,N.start=ue.start,N.end=ue.end,N}function _i(ue,N,G,ae,j,W){for(var re=0;re<ue.length;re++)mi(ue[re],N,G,ae,j,W,!1)}function Ur(ue,N,G,ae){ue.push(N),ue.push(G),ue.push(ae)}function Xi(ue,N,G,ae,j,W){var re=(W-N)/(ae-N);return ue.push(W),ue.push(G+(j-G)*re),ue.push(1),re}function ws(ue,N,G,ae,j,W){var re=(W-G)/(j-G);return ue.push(N+(ae-N)*re),ue.push(W),ue.push(1),re}function Er(ue,N){for(var G=[],ae=0;ae<ue.length;ae++){var j,W=ue[ae],re=W.type;if(re==="Point"||re==="MultiPoint"||re==="LineString")j=Ki(W.geometry,N);else if(re==="MultiLineString"||re==="Polygon"){j=[];for(var he=0;he<W.geometry.length;he++)j.push(Ki(W.geometry[he],N))}else if(re==="MultiPolygon")for(j=[],he=0;he<W.geometry.length;he++){for(var le=[],be=0;be<W.geometry[he].length;be++)le.push(Ki(W.geometry[he][be],N));j.push(le)}G.push(Ft(W.id,re,j,W.tags))}return G}function Ki(ue,N){var G=[];G.size=ue.size,ue.start!==void 0&&(G.start=ue.start,G.end=ue.end);for(var ae=0;ae<ue.length;ae+=3)G.push(ue[ae]+N,ue[ae+1],ue[ae+2]);return G}function qr(ue,N){if(ue.transformed)return ue;var G,ae,j,W=1<<ue.z,re=ue.x,he=ue.y;for(G=0;G<ue.features.length;G++){var le=ue.features[G],be=le.geometry,Oe=le.type;if(le.geometry=[],Oe===1)for(ae=0;ae<be.length;ae+=2)le.geometry.push(Yi(be[ae],be[ae+1],N,W,re,he));else for(ae=0;ae<be.length;ae++){var je=[];for(j=0;j<be[ae].length;j+=2)je.push(Yi(be[ae][j],be[ae][j+1],N,W,re,he));le.geometry.push(je)}}return ue.transformed=!0,ue}function Yi(ue,N,G,ae,j,W){return[Math.round(G*(ue*ae-j)),Math.round(G*(N*ae-W))]}function bo(ue,N,G,ae,j){for(var W=N===j.maxZoom?0:j.tolerance/((1<<N)*j.extent),re={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:G,y:ae,z:N,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},he=0;he<ue.length;he++){re.numFeatures++,es(re,ue[he],W,j);var le=ue[he].minX,be=ue[he].minY,Oe=ue[he].maxX,je=ue[he].maxY;le<re.minX&&(re.minX=le),be<re.minY&&(re.minY=be),Oe>re.maxX&&(re.maxX=Oe),je>re.maxY&&(re.maxY=je)}return re}function es(ue,N,G,ae){var j=N.geometry,W=N.type,re=[];if(W==="Point"||W==="MultiPoint")for(var he=0;he<j.length;he+=3)re.push(j[he]),re.push(j[he+1]),ue.numPoints++,ue.numSimplified++;else if(W==="LineString")To(re,j,ue,G,!1,!1);else if(W==="MultiLineString"||W==="Polygon")for(he=0;he<j.length;he++)To(re,j[he],ue,G,W==="Polygon",he===0);else if(W==="MultiPolygon")for(var le=0;le<j.length;le++){var be=j[le];for(he=0;he<be.length;he++)To(re,be[he],ue,G,!0,he===0)}if(re.length){var Oe=N.tags||null;if(W==="LineString"&&ae.lineMetrics){for(var je in Oe={},N.tags)Oe[je]=N.tags[je];Oe.mapbox_clip_start=j.start/j.size,Oe.mapbox_clip_end=j.end/j.size}var De={geometry:re,type:W==="Polygon"||W==="MultiPolygon"?3:W==="LineString"||W==="MultiLineString"?2:1,tags:Oe};N.id!==null&&(De.id=N.id),ue.features.push(De)}}function To(ue,N,G,ae,j,W){var re=ae*ae;if(ae>0&&N.size<(j?re:ae))G.numPoints+=N.length/3;else{for(var he=[],le=0;le<N.length;le+=3)(ae===0||N[le+2]>re)&&(G.numSimplified++,he.push(N[le]),he.push(N[le+1])),G.numPoints++;j&&function(be,Oe){for(var je=0,De=0,gt=be.length,It=gt-2;De<gt;It=De,De+=2)je+=(be[De]-be[It])*(be[De+1]+be[It+1]);if(je>0===Oe)for(De=0,gt=be.length;De<gt/2;De+=2){var pt=be[De],Et=be[De+1];be[De]=be[gt-2-De],be[De+1]=be[gt-1-De],be[gt-2-De]=pt,be[gt-1-De]=Et}}(he,W),ue.push(he)}}function Li(ue,N){var G=(N=this.options=function(j,W){for(var re in W)j[re]=W[re];return j}(Object.create(this.options),N)).debug;if(G&&console.time("preprocess data"),N.maxZoom<0||N.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(N.promoteId&&N.generateId)throw new Error("promoteId and generateId cannot be used together.");var ae=function(j,W){var re=[];if(j.type==="FeatureCollection")for(var he=0;he<j.features.length;he++)kr(re,j.features[he],W,he);else kr(re,j.type==="Feature"?j:{geometry:j},W);return re}(ue,N);this.tiles={},this.tileCoords=[],G&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",N.indexMaxZoom,N.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ae=function(j,W){var re=W.buffer/W.extent,he=j,le=Or(j,1,-1-re,re,0,-1,2,W),be=Or(j,1,1-re,2+re,0,-1,2,W);return(le||be)&&(he=Or(j,1,-re,1+re,0,-1,2,W)||[],le&&(he=Er(le,1).concat(he)),be&&(he=he.concat(Er(be,-1)))),he}(ae,N),ae.length&&this.splitTile(ae,0,0,0),G&&(ae.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function gi(ue,N,G){return 32*((1<<ue)*G+N)+ue}function Ji(ue,N){const G=ue.tileID.canonical;if(!this._geoJSONIndex)return N(null,null);const ae=this._geoJSONIndex.getTile(G.z,G.x,G.y);if(!ae)return N(null,null);const j=new class{constructor(re){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=s.EXTENT,this.length=re.length,this._features=re}feature(re){return new class{constructor(he){this._feature=he,this.extent=s.EXTENT,this.type=he.type,this.properties=he.tags,"id"in he&&!isNaN(he.id)&&(this.id=parseInt(he.id,10))}loadGeometry(){if(this._feature.type===1){const he=[];for(const le of this._feature.geometry)he.push([new s.Point(le[0],le[1])]);return he}{const he=[];for(const le of this._feature.geometry){const be=[];for(const Oe of le)be.push(new s.Point(Oe[0],Oe[1]));he.push(be)}return he}}toGeoJSON(he,le,be){return xe.call(this,he,le,be)}}(this._features[re])}}(ae.features);let W=Je(j);W.byteOffset===0&&W.byteLength===W.buffer.byteLength||(W=new Uint8Array(W)),N(null,{vectorTile:j,rawData:W.buffer})}Li.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Li.prototype.splitTile=function(ue,N,G,ae,j,W,re){for(var he=[ue,N,G,ae],le=this.options,be=le.debug;he.length;){ae=he.pop(),G=he.pop(),N=he.pop(),ue=he.pop();var Oe=1<<N,je=gi(N,G,ae),De=this.tiles[je];if(!De&&(be>1&&console.time("creation"),De=this.tiles[je]=bo(ue,N,G,ae,le),this.tileCoords.push({z:N,x:G,y:ae}),be)){be>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",N,G,ae,De.numFeatures,De.numPoints,De.numSimplified),console.timeEnd("creation"));var gt="z"+N;this.stats[gt]=(this.stats[gt]||0)+1,this.total++}if(De.source=ue,j){if(N===le.maxZoom||N===j)continue;var It=1<<j-N;if(G!==Math.floor(W/It)||ae!==Math.floor(re/It))continue}else if(N===le.indexMaxZoom||De.numPoints<=le.indexMaxPoints)continue;if(De.source=null,ue.length!==0){be>1&&console.time("clipping");var pt,Et,Dt,tn,en,jn,Bn=.5*le.buffer/le.extent,Sr=.5-Bn,kn=.5+Bn,Vn=1+Bn;pt=Et=Dt=tn=null,en=Or(ue,Oe,G-Bn,G+kn,0,De.minX,De.maxX,le),jn=Or(ue,Oe,G+Sr,G+Vn,0,De.minX,De.maxX,le),ue=null,en&&(pt=Or(en,Oe,ae-Bn,ae+kn,1,De.minY,De.maxY,le),Et=Or(en,Oe,ae+Sr,ae+Vn,1,De.minY,De.maxY,le),en=null),jn&&(Dt=Or(jn,Oe,ae-Bn,ae+kn,1,De.minY,De.maxY,le),tn=Or(jn,Oe,ae+Sr,ae+Vn,1,De.minY,De.maxY,le),jn=null),be>1&&console.timeEnd("clipping"),he.push(pt||[],N+1,2*G,2*ae),he.push(Et||[],N+1,2*G,2*ae+1),he.push(Dt||[],N+1,2*G+1,2*ae),he.push(tn||[],N+1,2*G+1,2*ae+1)}}},Li.prototype.getTile=function(ue,N,G){var ae=this.options,j=ae.extent,W=ae.debug;if(ue<0||ue>24)return null;var re=1<<ue,he=gi(ue,N=(N%re+re)%re,G);if(this.tiles[he])return qr(this.tiles[he],j);W>1&&console.log("drilling down to z%d-%d-%d",ue,N,G);for(var le,be=ue,Oe=N,je=G;!le&&be>0;)be--,Oe=Math.floor(Oe/2),je=Math.floor(je/2),le=this.tiles[gi(be,Oe,je)];return le&&le.source?(W>1&&console.log("found parent tile z%d-%d-%d",be,Oe,je),W>1&&console.time("drilling down"),this.splitTile(le.source,be,Oe,je,ue,N,G),W>1&&console.timeEnd("drilling down"),this.tiles[he]?qr(this.tiles[he],j):null):null};class Qi extends s.VectorTileWorkerSource{constructor(N,G,ae,j,W){super(N,G,ae,j,Ji),W&&(this.loadGeoJSON=W)}loadData(N,G){const ae=N&&N.request,j=ae&&ae.collectResourceTiming;this.loadGeoJSON(N,(W,re)=>{if(W||!re)return G(W);if(typeof re!="object")return G(new Error(`Input data given to '${N.source}' is not a valid GeoJSON object.`));{we(re,!0);try{if(N.filter){const le=s.createExpression(N.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(le.result==="error")throw new Error(le.value.map(Oe=>`${Oe.key}: ${Oe.message}`).join(", "));re={type:"FeatureCollection",features:re.features.filter(Oe=>le.value.evaluate({zoom:0},Oe))}}this._geoJSONIndex=N.cluster?new Nt(function({superclusterOptions:le,clusterProperties:be}){if(!be||!le)return le;const Oe={},je={},De={accumulated:null,zoom:0},gt={properties:null},It=Object.keys(be);for(const pt of It){const[Et,Dt]=be[pt],tn=s.createExpression(Dt),en=s.createExpression(typeof Et=="string"?[Et,["accumulated"],["get",pt]]:Et);Oe[pt]=tn.value,je[pt]=en.value}return le.map=pt=>{gt.properties=pt;const Et={};for(const Dt of It)Et[Dt]=Oe[Dt].evaluate(De,gt);return Et},le.reduce=(pt,Et)=>{gt.properties=Et;for(const Dt of It)De.accumulated=pt[Dt],pt[Dt]=je[Dt].evaluate(De,gt)},le}(N)).load(re.features):function(le,be){return new Li(le,be)}(re,N.geojsonVtOptions)}catch(le){return G(le)}this.loaded={};const he={};if(j){const le=s.getPerformanceMeasurement(ae);le&&(he.resourceTiming={},he.resourceTiming[N.source]=JSON.parse(JSON.stringify(le)))}G(null,he)}})}reloadTile(N,G){const ae=this.loaded;return ae&&ae[N.uid]?super.reloadTile(N,G):this.loadTile(N,G)}loadGeoJSON(N,G){if(N.request)s.getJSON(N.request,G);else{if(typeof N.data!="string")return G(new Error(`Input data given to '${N.source}' is not a valid GeoJSON object.`));try{return G(null,JSON.parse(N.data))}catch{return G(new Error(`Input data given to '${N.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(N,G){try{G(null,this._geoJSONIndex.getClusterExpansionZoom(N.clusterId))}catch(ae){G(ae)}}getClusterChildren(N,G){try{G(null,this._geoJSONIndex.getChildren(N.clusterId))}catch(ae){G(ae)}}getClusterLeaves(N,G){try{G(null,this._geoJSONIndex.getLeaves(N.clusterId,N.limit,N.offset))}catch(ae){G(ae)}}}class ta{constructor(N){this.self=N,this.actor=new s.Actor(N,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=s.getProjection({name:"mercator"}),this.workerSourceTypes={vector:s.VectorTileWorkerSource,geojson:Qi},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(G,ae)=>{if(this.workerSourceTypes[G])throw new Error(`Worker source with name "${G}" already registered.`);this.workerSourceTypes[G]=ae},this.self.registerRTLTextPlugin=G=>{if(s.plugin.isParsed())throw new Error("RTL text plugin already registered.");s.plugin.applyArabicShaping=G.applyArabicShaping,s.plugin.processBidirectionalText=G.processBidirectionalText,s.plugin.processStyledBidirectionalText=G.processStyledBidirectionalText}}clearCaches(N,G,ae){delete this.layerIndexes[N],delete this.availableImages[N],delete this.workerSources[N],delete this.demWorkerSources[N],ae()}checkIfReady(N,G,ae){ae()}setReferrer(N,G){this.referrer=G}spriteLoaded(N,G){this.isSpriteLoaded[N]=G;for(const ae in this.workerSources[N]){const j=this.workerSources[N][ae];for(const W in j)j[W]instanceof s.VectorTileWorkerSource&&(j[W].isSpriteLoaded=G,j[W].fire(new s.Event("isSpriteLoaded")))}}setImages(N,G,ae){this.availableImages[N]=G;for(const j in this.workerSources[N]){const W=this.workerSources[N][j];for(const re in W)W[re].availableImages=G}ae()}enableTerrain(N,G,ae){this.terrain=G,ae()}setProjection(N,G){this.projections[N]=s.getProjection(G)}setLayers(N,G,ae){this.getLayerIndex(N).replace(G),ae()}updateLayers(N,G,ae){this.getLayerIndex(N).update(G.layers,G.removedIds),ae()}loadTile(N,G,ae){const j=this.enableTerrain?s.extend({enableTerrain:this.terrain},G):G;j.projection=this.projections[N]||this.defaultProjection,this.getWorkerSource(N,G.type,G.source).loadTile(j,ae)}loadDEMTile(N,G,ae){const j=this.enableTerrain?s.extend({buildQuadTree:this.terrain},G):G;this.getDEMWorkerSource(N,G.source).loadTile(j,ae)}reloadTile(N,G,ae){const j=this.enableTerrain?s.extend({enableTerrain:this.terrain},G):G;j.projection=this.projections[N]||this.defaultProjection,this.getWorkerSource(N,G.type,G.source).reloadTile(j,ae)}abortTile(N,G,ae){this.getWorkerSource(N,G.type,G.source).abortTile(G,ae)}removeTile(N,G,ae){this.getWorkerSource(N,G.type,G.source).removeTile(G,ae)}removeSource(N,G,ae){if(!this.workerSources[N]||!this.workerSources[N][G.type]||!this.workerSources[N][G.type][G.source])return;const j=this.workerSources[N][G.type][G.source];delete this.workerSources[N][G.type][G.source],j.removeSource!==void 0?j.removeSource(G,ae):ae()}loadWorkerSource(N,G,ae){try{this.self.importScripts(G.url),ae()}catch(j){ae(j.toString())}}syncRTLPluginState(N,G,ae){try{s.plugin.setState(G);const j=s.plugin.getPluginURL();if(s.plugin.isLoaded()&&!s.plugin.isParsed()&&j!=null){this.self.importScripts(j);const W=s.plugin.isParsed();ae(W?void 0:new Error(`RTL Text Plugin failed to import scripts from ${j}`),W)}}catch(j){ae(j.toString())}}getAvailableImages(N){let G=this.availableImages[N];return G||(G=[]),G}getLayerIndex(N){let G=this.layerIndexes[N];return G||(G=this.layerIndexes[N]=new U),G}getWorkerSource(N,G,ae){if(this.workerSources[N]||(this.workerSources[N]={}),this.workerSources[N][G]||(this.workerSources[N][G]={}),!this.workerSources[N][G][ae]){const j={send:(W,re,he,le,be,Oe)=>{this.actor.send(W,re,he,N,be,Oe)},scheduler:this.actor.scheduler};this.workerSources[N][G][ae]=new this.workerSourceTypes[G](j,this.getLayerIndex(N),this.getAvailableImages(N),this.isSpriteLoaded[N])}return this.workerSources[N][G][ae]}getDEMWorkerSource(N,G){return this.demWorkerSources[N]||(this.demWorkerSources[N]={}),this.demWorkerSources[N][G]||(this.demWorkerSources[N][G]=new V),this.demWorkerSources[N][G]}enforceCacheSizeLimit(N,G){s.enforceCacheSizeLimit(G)}getWorkerPerformanceMetrics(N,G,ae){ae(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new ta(self)),ta}),x(["./shared"],function(s){function P(h,i){if(Array.isArray(h)){if(!Array.isArray(i)||h.length!==i.length)return!1;for(let l=0;l<h.length;l++)if(!P(h[l],i[l]))return!1;return!0}if(typeof h=="object"&&h!==null&&i!==null){if(typeof i!="object"||Object.keys(h).length!==Object.keys(i).length)return!1;for(const l in h)if(!P(h[l],i[l]))return!1;return!0}return h===i}var R=U;function U(h){return!function(i){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var f,g,v=new Blob([""],{type:"text/javascript"}),T=URL.createObjectURL(v);try{g=new Worker(T),f=!0}catch{f=!1}return g&&g.terminate(),URL.revokeObjectURL(T),f}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var f=document.createElement("canvas");f.width=f.height=1;var g=f.getContext("2d");if(!g)return!1;var v=g.getImageData(0,0,1,1);return v&&v.width===f.width}()?(V[l=i&&i.failIfMajorPerformanceCaveat]===void 0&&(V[l]=function(f){var g,v=function(T){var S=document.createElement("canvas"),C=Object.create(U.webGLContextAttributes);return C.failIfMajorPerformanceCaveat=T,S.getContext("webgl",C)||S.getContext("experimental-webgl",C)}(f);if(!v)return!1;try{g=v.createShader(v.VERTEX_SHADER)}catch{return!1}return!(!g||v.isContextLost())&&(v.shaderSource(g,"void main() {}"),v.compileShader(g),v.getShaderParameter(g,v.COMPILE_STATUS)===!0)}(l)),V[l]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var l}(h)}var V={};function q(h,i,l){const f=s.window.document.createElement(h);return i!==void 0&&(f.className=i),l&&l.appendChild(f),f}function ve(h,i,l){const f=s.window.document.createElementNS("http://www.w3.org/2000/svg",h);for(const g of Object.keys(i))f.setAttributeNS(null,g,i[g]);return l&&l.appendChild(f),f}U.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const we=s.window.document&&s.window.document.documentElement.style,xe=we&&we.userSelect!==void 0?"userSelect":"WebkitUserSelect";let Ie;function te(){we&&xe&&(Ie=we[xe],we[xe]="none")}function ne(){we&&xe&&(we[xe]=Ie)}function se(h){h.preventDefault(),h.stopPropagation(),s.window.removeEventListener("click",se,!0)}function Se(){s.window.addEventListener("click",se,!0),s.window.setTimeout(()=>{s.window.removeEventListener("click",se,!0)},0)}function Be(h,i){const l=h.getBoundingClientRect();return lt(h,l,i)}function ye(h,i){const l=h.getBoundingClientRect(),f=[];for(let g=0;g<i.length;g++)f.push(lt(h,l,i[g]));return f}function Ye(h){return s.window.InstallTrigger!==void 0&&h.button===2&&h.ctrlKey&&s.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:h.button}function lt(h,i,l){const f=h.offsetWidth===i.width?1:h.offsetWidth/i.width;return new s.Point((l.clientX-i.left)*f,(l.clientY-i.top)*f)}function Me(h,i){var l=i[0],f=i[1],g=i[2],v=i[3],T=l*v-g*f;return T?(h[0]=v*(T=1/T),h[1]=-f*T,h[2]=-g*T,h[3]=l*T,h):null}function Mt(h){const{userImage:i}=h;return!!(i&&i.render&&i.render())&&(h.data.replace(new Uint8Array(i.data.buffer)),!0)}class Ut extends s.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:l,callback:f}of this.requestors)this._notify(l,f);this.requestors=[]}}hasImage(i){return!!this.getImage(i)}getImage(i){return this.images[i]}addImage(i,l){this._validate(i,l)&&(this.images[i]=l)}_validate(i,l){let f=!0;return this._validateStretch(l.stretchX,l.data&&l.data.width)||(this.fire(new s.ErrorEvent(new Error(`Image "${i}" has invalid "stretchX" value`))),f=!1),this._validateStretch(l.stretchY,l.data&&l.data.height)||(this.fire(new s.ErrorEvent(new Error(`Image "${i}" has invalid "stretchY" value`))),f=!1),this._validateContent(l.content,l)||(this.fire(new s.ErrorEvent(new Error(`Image "${i}" has invalid "content" value`))),f=!1),f}_validateStretch(i,l){if(!i)return!0;let f=0;for(const g of i){if(g[0]<f||g[1]<g[0]||l<g[1])return!1;f=g[1]}return!0}_validateContent(i,l){return!(i&&(i.length!==4||i[0]<0||l.data.width<i[0]||i[1]<0||l.data.height<i[1]||i[2]<0||l.data.width<i[2]||i[3]<0||l.data.height<i[3]||i[2]<i[0]||i[3]<i[1]))}updateImage(i,l){l.version=this.images[i].version+1,this.images[i]=l,this.updatedImages[i]=!0}removeImage(i){const l=this.images[i];delete this.images[i],delete this.patterns[i],l.userImage&&l.userImage.onRemove&&l.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,l){let f=!0;if(!this.isLoaded())for(const g of i)this.images[g]||(f=!1);this.isLoaded()||f?this._notify(i,l):this.requestors.push({ids:i,callback:l})}_notify(i,l){const f={};for(const g of i){this.images[g]||this.fire(new s.Event("styleimagemissing",{id:g}));const v=this.images[g];v?f[g]={data:v.data.clone(),pixelRatio:v.pixelRatio,sdf:v.sdf,version:v.version,stretchX:v.stretchX,stretchY:v.stretchY,content:v.content,hasRenderCallback:!!(v.userImage&&v.userImage.render)}:s.warnOnce(`Image "${g}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}l(null,f)}getPixelSize(){const{width:i,height:l}=this.atlasImage;return{width:i,height:l}}getPattern(i){const l=this.patterns[i],f=this.getImage(i);if(!f)return null;if(l&&l.position.version===f.version)return l.position;if(l)l.position.version=f.version;else{const g={w:f.data.width+2,h:f.data.height+2,x:0,y:0},v=new s.ImagePosition(g,f);this.patterns[i]={bin:g,position:v}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const l=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new s.Texture(i,this.atlasImage,l.RGBA),this.atlasTexture&&this.atlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const v in this.patterns)i.push(this.patterns[v].bin);const{w:l,h:f}=s.potpack(i),g=this.atlasImage;g.resize({width:l||1,height:f||1});for(const v in this.patterns){const{bin:T}=this.patterns[v],S=T.x+1,C=T.y+1,z=this.images[v].data,k=z.width,F=z.height;s.RGBAImage.copy(z,g,{x:0,y:0},{x:S,y:C},{width:k,height:F}),s.RGBAImage.copy(z,g,{x:0,y:F-1},{x:S,y:C-1},{width:k,height:1}),s.RGBAImage.copy(z,g,{x:0,y:0},{x:S,y:C+F},{width:k,height:1}),s.RGBAImage.copy(z,g,{x:k-1,y:0},{x:S-1,y:C},{width:1,height:F}),s.RGBAImage.copy(z,g,{x:0,y:0},{x:S+k,y:C},{width:1,height:F})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const l of i){if(this.callbackDispatchedThisFrame[l])continue;this.callbackDispatchedThisFrame[l]=!0;const f=this.images[l];Mt(f)&&this.updateImage(l,f)}}}const bt=new s.Properties({anchor:new s.DataConstantProperty(s.spec.light.anchor),position:new class{constructor(){this.specification=s.spec.light.position}possiblyEvaluate(h,i){return function([l,f,g]){const v=s.degToRad(f+90),T=s.degToRad(g);return{x:l*Math.cos(v)*Math.sin(T),y:l*Math.sin(v)*Math.sin(T),z:l*Math.cos(T),azimuthal:f,polar:g}}(h.expression.evaluate(i))}interpolate(h,i,l){return{x:s.number(h.x,i.x,l),y:s.number(h.y,i.y,l),z:s.number(h.z,i.z,l),azimuthal:s.number(h.azimuthal,i.azimuthal,l),polar:s.number(h.polar,i.polar,l)}}},color:new s.DataConstantProperty(s.spec.light.color),intensity:new s.DataConstantProperty(s.spec.light.intensity)});class Bt extends s.Evented{constructor(i){super(),this._transitionable=new s.Transitionable(bt),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,l={}){if(!this._validate(s.validateLight,i,l))for(const f in i){const g=i[f];s.endsWith(f,"-transition")?this._transitionable.setTransition(f.slice(0,-11),g):this._transitionable.setValue(f,g)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,l,f){return(!f||f.validate!==!1)&&s.emitValidationErrors(this,i.call(s.validateStyle,s.extend({value:l,style:{glyphs:!0,sprite:!0},styleSpec:s.spec})))}}const Ke=new s.Properties({source:new s.DataConstantProperty(s.spec.terrain.source),exaggeration:new s.DataConstantProperty(s.spec.terrain.exaggeration)});let Ge=class extends s.Evented{constructor(h,i){super(),this._transitionable=new s.Transitionable(Ke),this.set(h),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=i}get(){return this._transitionable.serialize()}set(h){for(const i in h){const l=h[i];s.endsWith(i,"-transition")?this._transitionable.setTransition(i.slice(0,-11),l):this._transitionable.setValue(i,l)}}updateTransitions(h){this._transitioning=this._transitionable.transitioned(h,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(h){this.properties=this._transitioning.possiblyEvaluate(h)}};function Je(h,i,l,f){const g=s.smoothstep(45,65,l),[v,T]=Xe(h,f),S=s.length(i);let C=1-Math.min(1,Math.exp((S-v)/(T-v)*-6));return C*=C*C,C=Math.min(1,1.00747*C),C*g*h.alpha}function Xe(h,i){const l=.5/Math.tan(.5*i);return[h.range[0]+l,h.range[1]+l]}const Ce=new s.Properties({range:new s.DataConstantProperty(s.spec.fog.range),color:new s.DataConstantProperty(s.spec.fog.color),"high-color":new s.DataConstantProperty(s.spec.fog["high-color"]),"space-color":new s.DataConstantProperty(s.spec.fog["space-color"]),"horizon-blend":new s.DataConstantProperty(s.spec.fog["horizon-blend"]),"star-intensity":new s.DataConstantProperty(s.spec.fog["star-intensity"])});class st extends s.Evented{constructor(i,l){super(),this._transitionable=new s.Transitionable(Ce),this.set(i),this._transitioning=this._transitionable.untransitioned(),this._transform=l}get state(){const i=this._transform,l=i.projection.name==="globe",f=s.globeToMercatorTransition(i.zoom),g=this.properties.get("range"),v=[.5,3];return{range:l?[s.number(v[0],g[0],f),s.number(v[1],g[1],f)]:g,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(i,l={}){if(!this._validate(s.validateFog,i,l)){for(const f of Object.keys(s.spec.fog))i&&i[f]===void 0&&(i[f]=s.spec.fog[f].default);for(const f in i){const g=i[f];s.endsWith(f,"-transition")?this._transitionable.setTransition(f.slice(0,-11),g):this._transitionable.setValue(f,g)}}}getOpacity(i){if(!this._transform.projection.supportsFog)return 0;const l=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:s.smoothstep(45,65,i))*l.a}getOpacityAtLatLng(i,l){return this._transform.projection.supportsFog?function(f,g,v){const T=s.MercatorCoordinate.fromLngLat(g),S=v.elevation?v.elevation.getAtPointOrZero(T):0,C=[T.x,T.y,S];return s.transformMat4(C,C,v.mercatorFogMatrix),Je(f,C,v.pitch,v._fov)}(this.state,i,l):0}getFovAdjustedRange(i){return this._transform.projection.supportsFog?Xe(this.state,i):[0,1]}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,l,f){return(!f||f.validate!==!1)&&s.emitValidationErrors(this,i.call(s.validateStyle,s.extend({value:l,style:{glyphs:!0,sprite:!0},styleSpec:s.spec})))}}class ht{constructor(i,l){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=s.uniqueId();const f=this.workerPool.acquire(this.id);for(let g=0;g<f.length;g++){const v=new ht.Actor(f[g],l,this.id);v.name=`Worker ${g}`,this.actors.push(v)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(i,l,f){s.asyncAll(this.actors,(g,v)=>{g.send(i,l,v)},f=f||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(i=>{i.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Tt(h,i,l){return i*(s.EXTENT/(h.tileSize*Math.pow(2,l-h.tileID.overscaledZ)))}ht.Actor=s.Actor;class Rt{constructor(i,l,f,g){this.screenBounds=i,this.cameraPoint=l,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=f,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,g)}static createFromScreenPoints(i,l){let f,g;if(i instanceof s.Point||typeof i[0]=="number"){const v=s.Point.convert(i);f=[v],g=l.isPointAboveHorizon(v)}else{const v=s.Point.convert(i[0]),T=s.Point.convert(i[1]);f=[v,T],g=s.polygonizeBounds(v,T).every(S=>l.isPointAboveHorizon(S))}return new Rt(f,l.getCameraPoint(),g,l)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(i){return s.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],i)}bufferedCameraGeometry(i){const l=this.screenBounds[0],f=this.screenBounds.length===1?this.screenBounds[0].add(new s.Point(1,1)):this.screenBounds[1],g=s.polygonizeBounds(l,f,0,!1);return this.cameraPoint.y>f.y&&(this.cameraPoint.x>l.x&&this.cameraPoint.x<f.x?g.splice(3,0,this.cameraPoint):this.cameraPoint.x>=f.x?g[2]=this.cameraPoint:this.cameraPoint.x<=l.x&&(g[3]=this.cameraPoint)),s.bufferConvexPolygon(g,i)}bufferedCameraGeometryGlobe(i){const l=this.screenBounds[0],f=this.screenBounds.length===1?this.screenBounds[0].add(new s.Point(1,1)):this.screenBounds[1],g=s.polygonizeBounds(l,f,i),v=this.cameraPoint.clone();switch(3*((v.y>l.y)+(v.y>f.y))+((v.x>l.x)+(v.x>f.x))){case 0:g[0]=v,g[4]=v.clone();break;case 1:g.splice(1,0,v);break;case 2:g[1]=v;break;case 3:g.splice(4,0,v);break;case 5:g.splice(2,0,v);break;case 6:g[3]=v;break;case 7:g.splice(3,0,v);break;case 8:g[2]=v}return g}containsTile(i,l,f,g=0){const v=i.queryPadding/l._pixelsPerMercatorPixel+1,T=f?this._bufferedCameraMercator(v,l):this._bufferedScreenMercator(v,l);let S=i.tileID.wrap+(T.unwrapped?g:0);const C=T.polygon.map(J=>s.getTilePoint(i.tileTransform,J,S));if(!s.polygonIntersectsBox(C,0,0,s.EXTENT,s.EXTENT))return;S=i.tileID.wrap+(this.screenGeometryMercator.unwrapped?g:0);const z=this.screenGeometryMercator.polygon.map(J=>s.getTileVec3(i.tileTransform,J,S)),k=z.map(J=>new s.Point(J[0],J[1])),F=l.getFreeCameraOptions().position||new s.MercatorCoordinate(0,0,0),$=s.getTileVec3(i.tileTransform,F,S),X=z.map(J=>{const B=s.sub(J,J,$);return s.normalize(B,B),new s.Ray($,B)}),Y=Tt(i,1,l.zoom)*l._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:k,tilespaceRays:X,bufferedTilespaceGeometry:C,bufferedTilespaceBounds:(K=s.getBounds(C),K.min.x=s.clamp(K.min.x,0,s.EXTENT),K.min.y=s.clamp(K.min.y,0,s.EXTENT),K.max.x=s.clamp(K.max.x,0,s.EXTENT),K.max.y=s.clamp(K.max.y,0,s.EXTENT),K),tile:i,tileID:i.tileID,pixelToTileUnitsFactor:Y};var K}_bufferedScreenMercator(i,l){const f=Yn(i);if(this._screenRaycastCache[f])return this._screenRaycastCache[f];{let g;return g=l.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(i),l):{polygon:this.bufferedScreenGeometry(i).map(v=>l.pointCoordinate3D(v)),unwrapped:!0},this._screenRaycastCache[f]=g,g}}_bufferedCameraMercator(i,l){const f=Yn(i);if(this._cameraRaycastCache[f])return this._cameraRaycastCache[f];{let g;return g=l.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(i),l):{polygon:this.bufferedCameraGeometry(i).map(v=>l.pointCoordinate3D(v)),unwrapped:!0},this._cameraRaycastCache[f]=g,g}}_projectAndResample(i,l){const f=function(v,T){const S=s.multiply([],T.pixelMatrix,T.globeMatrix),C=[0,-s.GLOBE_RADIUS,0,1],z=[0,s.GLOBE_RADIUS,0,1],k=[0,0,0,1];s.transformMat4$1(C,C,S),s.transformMat4$1(z,z,S),s.transformMat4$1(k,k,S);const F=new s.Point(C[0]/C[3],C[1]/C[3]),$=new s.Point(z[0]/z[3],z[1]/z[3]),X=s.polygonContainsPoint(v,F)&&C[3]<k[3],Y=s.polygonContainsPoint(v,$)&&z[3]<k[3];if(!X&&!Y)return null;const K=function(_e,Ee,Te){for(let ze=1;ze<_e.length;ze++){const nt=Yt(Ee.pointCoordinate3D(_e[ze-1]).x),Pe=Yt(Ee.pointCoordinate3D(_e[ze]).x);if(Te<0){if(nt<Pe)return{idx:ze,t:-nt/(Pe-1-nt)}}else if(Pe<nt)return{idx:ze,t:(1-nt)/(Pe+1-nt)}}return null}(v,T,X?-1:1);if(!K)return null;const{idx:J,t:B}=K;let H=J>1?Nt(v.slice(0,J),T):[],ie=J<v.length?Nt(v.slice(J),T):[];H=H.map(_e=>new s.Point(Yt(_e.x),_e.y)),ie=ie.map(_e=>new s.Point(Yt(_e.x),_e.y));const oe=[...H];oe.length===0&&oe.push(ie[ie.length-1]);const me=s.number(oe[oe.length-1].y,(ie.length===0?H[0]:ie[0]).y,B);let ge;return ge=X?[new s.Point(0,me),new s.Point(0,0),new s.Point(1,0),new s.Point(1,me)]:[new s.Point(1,me),new s.Point(1,1),new s.Point(0,1),new s.Point(0,me)],oe.push(...ge),ie.length===0?oe.push(H[0]):oe.push(...ie),{polygon:oe.map(_e=>new s.MercatorCoordinate(_e.x,_e.y)),unwrapped:!1}}(i,l);if(f)return f;const g=function(v,T){let S=!1,C=-1/0,z=0;for(let F=0;F<v.length-1;F++)v[F].x>C&&(C=v[F].x,z=F);for(let F=0;F<v.length-1;F++){const $=(z+F)%(v.length-1),X=v[$],Y=v[$+1];Math.abs(X.x-Y.x)>.5&&(X.x<Y.x?(X.x+=1,$===0&&(v[v.length-1].x+=1)):(Y.x+=1,$+1===v.length-1&&(v[0].x+=1)),S=!0)}const k=s.mercatorXfromLng(T.center.lng);return S&&k<Math.abs(k-1)&&v.forEach(F=>{F.x-=1}),{polygon:v,unwrapped:S}}(Nt(i,l).map(v=>new s.Point(Yt(v.x),v.y)),l);return{polygon:g.polygon.map(v=>new s.MercatorCoordinate(v.x,v.y)),unwrapped:g.unwrapped}}}function Nt(h,i){return s.resample(h,l=>{const f=i.pointCoordinate3D(l);l.x=f.x,l.y=f.y},1/256)}function Yt(h){return h<0?1+h%1:h%1}function Yn(h){return 100*h|0}function In(h,i,l,f,g){const v=function(T,S){if(T)return g(T);if(S){h.url&&S.tiles&&h.tiles&&delete h.tiles;const C=s.pick(s.extend(S,h),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);S.vector_layers&&(C.vectorLayers=S.vector_layers,C.vectorLayerIds=C.vectorLayers.map(z=>z.id)),C.tiles=i.canonicalizeTileset(C,h.url),g(null,C)}};return h.url?s.getJSON(i.transformRequest(i.normalizeSourceURL(h.url,null,l,f),s.ResourceType.Source),v):s.exported.frame(()=>v(null,h))}class Nn{constructor(i,l,f){this.bounds=s.LngLatBounds.convert(this.validateBounds(i)),this.minzoom=l||0,this.maxzoom=f||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const l=Math.pow(2,i.z),f=Math.floor(s.mercatorXfromLng(this.bounds.getWest())*l),g=Math.floor(s.mercatorYfromLat(this.bounds.getNorth())*l),v=Math.ceil(s.mercatorXfromLng(this.bounds.getEast())*l),T=Math.ceil(s.mercatorYfromLat(this.bounds.getSouth())*l);return i.x>=f&&i.x<v&&i.y>=g&&i.y<T}}class xo{constructor(i,l,f){this.context=i;const g=i.gl;this.buffer=g.createBuffer(),this.dynamicDraw=!!f,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||l.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const l=this.context.gl;this.context.unbindVAO(),this.bind(),l.bufferSubData(l.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const wo={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Jo{constructor(i,l,f,g){this.length=l.length,this.attributes=f,this.itemSize=l.bytesPerElement,this.dynamicDraw=g,this.context=i;const v=i.gl;this.buffer=v.createBuffer(),i.bindVertexBuffer.set(this.buffer),v.bufferData(v.ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||l.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){const l=this.context.gl;this.bind(),l.bufferSubData(l.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,l){for(let f=0;f<this.attributes.length;f++){const g=l.attributes[this.attributes[f].name];g!==void 0&&i.enableVertexAttribArray(g)}}setVertexAttribPointers(i,l,f){for(let g=0;g<this.attributes.length;g++){const v=this.attributes[g],T=l.attributes[v.name];T!==void 0&&i.vertexAttribPointer(T,v.components,i[wo[v.type]],!1,this.itemSize,v.offset+this.itemSize*(f||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Ft{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class fi extends Ft{getDefault(){return s.Color.transparent}set(i){const l=this.current;(i.r!==l.r||i.g!==l.g||i.b!==l.b||i.a!==l.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class kr extends Ft{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class vs extends Ft{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class dn extends Ft{getDefault(){return[!0,!0,!0,!0]}set(i){const l=this.current;(i[0]!==l[0]||i[1]!==l[1]||i[2]!==l[2]||i[3]!==l[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Zr extends Ft{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class ea extends Ft{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class zi extends Ft{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const l=this.current;(i.func!==l.func||i.ref!==l.ref||i.mask!==l.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class Or extends Ft{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const l=this.current;(i[0]!==l[0]||i[1]!==l[1]||i[2]!==l[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class xs extends Ft{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;i?l.enable(l.STENCIL_TEST):l.disable(l.STENCIL_TEST),this.current=i,this.dirty=!1}}class mi extends Ft{getDefault(){return[0,1]}set(i){const l=this.current;(i[0]!==l[0]||i[1]!==l[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class Qo extends Ft{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;i?l.enable(l.DEPTH_TEST):l.disable(l.DEPTH_TEST),this.current=i,this.dirty=!1}}class _i extends Ft{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class Ur extends Ft{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;i?l.enable(l.BLEND):l.disable(l.BLEND),this.current=i,this.dirty=!1}}class Xi extends Ft{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const l=this.current;(i[0]!==l[0]||i[1]!==l[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class ws extends Ft{getDefault(){return s.Color.transparent}set(i){const l=this.current;(i.r!==l.r||i.g!==l.g||i.b!==l.b||i.a!==l.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Er extends Ft{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class Ki extends Ft{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;i?l.enable(l.CULL_FACE):l.disable(l.CULL_FACE),this.current=i,this.dirty=!1}}class qr extends Ft{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class Yi extends Ft{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}let bo,es=class extends Ft{getDefault(){return null}set(h){(h!==this.current||this.dirty)&&(this.gl.useProgram(h),this.current=h,this.dirty=!1)}};class To extends Ft{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class Li extends Ft{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const l=this.current;(i[0]!==l[0]||i[1]!==l[1]||i[2]!==l[2]||i[3]!==l[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class gi extends Ft{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;l.bindFramebuffer(l.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class Ji extends Ft{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;l.bindRenderbuffer(l.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Qi extends Ft{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;l.bindTexture(l.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class ta extends Ft{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;l.bindBuffer(l.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class ue extends Ft{getDefault(){return null}set(i){const l=this.gl;l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class N extends Ft{constructor(i){super(i),this.vao=i.extVertexArrayObject}getDefault(){return null}set(i){this.vao&&(i!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(i),this.current=i,this.dirty=!1)}}class G extends Ft{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class ae extends Ft{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class j extends Ft{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class W extends Ft{constructor(i,l){super(i),this.context=i,this.parent=l}getDefault(){return null}}class re extends W{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class he extends W{attachment(){return this.gl.DEPTH_ATTACHMENT}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,this.attachment(),l.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class le extends he{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class be{constructor(i,l,f,g){this.context=i,this.width=l,this.height=f;const v=this.framebuffer=i.gl.createFramebuffer();this.colorAttachment=new re(i,v),g&&(this.depthAttachment=new he(i,v))}destroy(){const i=this.context.gl,l=this.colorAttachment.get();if(l&&i.deleteTexture(l),this.depthAttachment){const f=this.depthAttachment.get();f&&i.deleteRenderbuffer(f)}i.deleteFramebuffer(this.framebuffer)}}class Oe{constructor(i,l=!1){if(this.gl=i,this.isWebGL2=l,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),l){const f=i;this.extVertexArrayObject={createVertexArrayOES:f.createVertexArray.bind(i),deleteVertexArrayOES:f.deleteVertexArray.bind(i),bindVertexArrayOES:f.bindVertexArray.bind(i)}}this.clearColor=new fi(this),this.clearDepth=new kr(this),this.clearStencil=new vs(this),this.colorMask=new dn(this),this.depthMask=new Zr(this),this.stencilMask=new ea(this),this.stencilFunc=new zi(this),this.stencilOp=new Or(this),this.stencilTest=new xs(this),this.depthRange=new mi(this),this.depthTest=new Qo(this),this.depthFunc=new _i(this),this.blend=new Ur(this),this.blendFunc=new Xi(this),this.blendColor=new ws(this),this.blendEquation=new Er(this),this.cullFace=new Ki(this),this.cullFaceSide=new qr(this),this.frontFace=new Yi(this),this.program=new es(this),this.activeTexture=new To(this),this.viewport=new Li(this),this.bindFramebuffer=new gi(this),this.bindRenderbuffer=new Ji(this),this.bindTexture=new Qi(this),this.bindVertexBuffer=new ta(this),this.bindElementBuffer=new ue(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new N(this),this.pixelStoreUnpack=new G(this),this.pixelStoreUnpackPremultiplyAlpha=new ae(this),this.pixelStoreUnpackFlipY=new j(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=i.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=i.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=i.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),l||(this.extTextureHalfFloat=i.getExtension("OES_texture_half_float")),(l||this.extTextureHalfFloat&&i.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=i.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=l||i.getExtension("OES_standard_derivatives"),this.extTimerQuery=i.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,l){return new xo(this,i,l)}createVertexBuffer(i,l,f){return new Jo(this,i,l,f)}createRenderbuffer(i,l,f){const g=this.gl,v=g.createRenderbuffer();return this.bindRenderbuffer.set(v),g.renderbufferStorage(g.RENDERBUFFER,i,l,f),this.bindRenderbuffer.set(null),v}createFramebuffer(i,l,f){return new be(this,i,l,f)}clear({color:i,depth:l,stencil:f}){const g=this.gl;let v=0;i&&(v|=g.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),l!==void 0&&(v|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(l),this.depthMask.set(!0)),f!==void 0&&(v|=g.STENCIL_BUFFER_BIT,this.clearStencil.set(f),this.stencilMask.set(255)),g.clear(v)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){P(i.blendFunction,s.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class je extends s.Evented{constructor(i,l,f,g){if(super(),this.id=i,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.extend(this,s.pick(l,["url","scheme","tileSize","promoteId"])),this._options=s.extend({type:"vector"},l),this._collectResourceTiming=l.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g),this._tileWorkers={},this._deduped=new s.DedupedRequest}load(i){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"}));const l=Array.isArray(this.map._language)?this.map._language.join():this.map._language,f=this.map._worldview;this._tileJSONRequest=In(this._options,this.map._requestManager,l,f,(g,v)=>{this._tileJSONRequest=null,this._loaded=!0,g?(l&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${l}`),f&&f.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${f}`),this.fire(new s.ErrorEvent(g))):v&&(s.extend(this,v),v.bounds&&(this.tileBounds=new Nn(v.bounds,this.minzoom,this.maxzoom)),s.postTurnstileEvent(v.tiles,this.map._requestManager._customAccessToken),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))),i&&i(g)})}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(i){return this._options.tiles=i,this.reload(),this}setUrl(i){return this.url=i,this._options.url=i,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return s.extend({},this._options)}loadTile(i,l){const f=this.map._requestManager.normalizeTileURL(i.tileID.canonical.url(this.tiles,this.scheme)),g={request:this.map._requestManager.transformRequest(f,s.ResourceType.Tile),data:void 0,uid:i.uid,tileID:i.tileID,tileZoom:i.tileZoom,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:s.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:i.isSymbolTile};if(g.request.collectResourceTiming=this._collectResourceTiming,i.actor&&i.state!=="expired")i.state==="loading"?i.reloadCallback=l:i.request=i.actor.send("reloadTile",g,v.bind(this));else if(i.actor=this._tileWorkers[f]=this._tileWorkers[f]||this.dispatcher.getActor(),this.dispatcher.ready)i.request=i.actor.send("loadTile",g,v.bind(this),void 0,!0);else{const T=s.loadVectorTile.call({deduped:this._deduped},g,(S,C)=>{S||!C?v.call(this,S):(g.data={cacheControl:C.cacheControl,expires:C.expires,rawData:C.rawData.slice(0)},i.actor&&i.actor.send("loadTile",g,v.bind(this),void 0,!0))},!0);i.request={cancel:T}}function v(T,S){return delete i.request,i.aborted?l(null):T&&T.status!==404?l(T):(S&&S.resourceTiming&&(i.resourceTiming=S.resourceTiming),this.map._refreshExpiredTiles&&S&&i.setExpiryData(S),i.loadVectorData(S,this.map.painter),s.cacheEntryPossiblyAdded(this.dispatcher),l(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id})}unloadTile(i){i.unloadVectorData(),i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class De extends s.Evented{constructor(i,l,f,g){super(),this.id=i,this.dispatcher=f,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.extend({type:"raster"},l),s.extend(this,s.pick(l,["url","scheme","tileSize"]))}load(i){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=In(this._options,this.map._requestManager,null,null,(l,f)=>{this._tileJSONRequest=null,this._loaded=!0,l?this.fire(new s.ErrorEvent(l)):f&&(s.extend(this,f),f.bounds&&(this.tileBounds=new Nn(f.bounds,this.minzoom,this.maxzoom)),s.postTurnstileEvent(f.tiles),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))),i&&i(l)})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(i){return this._options.tiles=i,this.reload(),this}setUrl(i){return this.url=i,this._options.url=i,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return s.extend({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,l){const f=s.exported.devicePixelRatio>=2,g=this.map._requestManager.normalizeTileURL(i.tileID.canonical.url(this.tiles,this.scheme),f,this.tileSize);i.request=s.getImage(this.map._requestManager.transformRequest(g,s.ResourceType.Tile),(v,T,S,C)=>(delete i.request,i.aborted?(i.state="unloaded",l(null)):v?(i.state="errored",l(v)):T?(this.map._refreshExpiredTiles&&i.setExpiryData({cacheControl:S,expires:C}),i.setTexture(T,this.map.painter),i.state="loaded",s.cacheEntryPossiblyAdded(this.dispatcher),void l(null)):l(null)))}static loadTileData(i,l,f){i.setTexture(l,f)}static unloadTileData(i,l){i.texture&&l.saveTileTexture(i.texture)}abortTile(i,l){i.request&&(i.request.cancel(),delete i.request),l()}unloadTile(i,l){i.texture&&this.map.painter.saveTileTexture(i.texture),l()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function gt(h,i,l,f,g,v,T,S){const C=[h,l,g,i,f,v,1,1,1],z=[T,S,1],k=s.adjoint([],C),[F,$,X]=s.transformMat3(z,z,s.transpose(k,k));return s.multiply$1(C,[F,0,0,0,$,0,0,0,X],C)}class It extends s.Evented{constructor(i,l,f,g){super(),this.id=i,this.dispatcher=f,this.coordinates=l.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=l,this._dirty=!1}load(i,l){this._loaded=l||!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=s.getImage(this.map._requestManager.transformRequest(this.url,s.ResourceType.Image),(f,g)=>{if(this._imageRequest=null,this._loaded=!0,f)this.fire(new s.ErrorEvent(f));else if(g){const{HTMLImageElement:v}=s.window;this.image=g instanceof v?s.exported.getImageData(g):g,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,i&&(this.coordinates=i),this._finishLoading()}})}loaded(){return this._loaded}updateImage(i){return this.image&&i.url?(this._imageRequest&&i.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=i.url,this.load(i.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(i){this.coordinates=i,this._boundsArray=void 0;const l=i.map(s.MercatorCoordinate.fromLngLat);return this.tileID=function(f){let g=1/0,v=1/0,T=-1/0,S=-1/0;for(const F of f)g=Math.min(g,F.x),v=Math.min(v,F.y),T=Math.max(T,F.x),S=Math.max(S,F.y);const C=Math.max(T-g,S-v),z=Math.max(0,Math.floor(-Math.log(C)/Math.LN2)),k=Math.pow(2,z);return new s.CanonicalTileID(z,Math.floor((g+T)/2*k),Math.floor((v+S)/2*k))}(l),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(i){for(const C in this.tiles){const z=this.tiles[C];z.state!=="loaded"&&(z.state="loaded",z.texture=this.texture)}if(this._boundsArray)return;const l=s.tileTransform(this.tileID,this.map.transform.projection),[f,g,v,T]=this.coordinates.map(C=>{const z=l.projection.project(C[0],C[1]);return s.getTilePoint(l,z)._round()});this.perspectiveTransform=function(C,z,k,F,$,X,Y,K,J,B){const H=gt(0,0,C,0,0,z,C,z),ie=gt(k,F,$,X,Y,K,J,B);return s.multiply$1(ie,s.adjoint(H,H),ie),[ie[6]/ie[8]*C/s.EXTENT,ie[7]/ie[8]*z/s.EXTENT]}(this.width,this.height,f.x,f.y,g.x,g.y,T.x,T.y,v.x,v.y);const S=this._boundsArray=new s.StructArrayLayout4i8;S.emplaceBack(f.x,f.y,0,0),S.emplaceBack(g.x,g.y,s.EXTENT,0),S.emplaceBack(T.x,T.y,0,s.EXTENT),S.emplaceBack(v.x,v.y,s.EXTENT,s.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=i.createVertexBuffer(S,s.boundsAttributes.members),this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const i=this.map.painter.context,l=i.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new s.Texture(i,this.image,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(i)}loadTile(i,l){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},l(null)):(i.state="errored",l(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const pt={vector:je,raster:De,"raster-dem":class extends De{constructor(h,i,l,f){super(h,i,l,f),this.type="raster-dem",this.maxzoom=22,this._options=s.extend({type:"raster-dem"},i),this.encoding=i.encoding||"mapbox"}loadTile(h,i){const l=this.map._requestManager.normalizeTileURL(h.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function f(g,v){g&&(h.state="errored",i(g)),v&&(h.dem=v,h.dem.onDeserialize(),h.needsHillshadePrepare=!0,h.needsDEMTextureUpload=!0,h.state="loaded",i(null))}h.request=s.getImage(this.map._requestManager.transformRequest(l,s.ResourceType.Tile),(function(g,v,T,S){if(delete h.request,h.aborted)h.state="unloaded",i(null);else if(g)h.state="errored",i(g);else if(v){this.map._refreshExpiredTiles&&h.setExpiryData({cacheControl:T,expires:S});const C=s.window.ImageBitmap&&v instanceof s.window.ImageBitmap&&(bo==null&&(bo=s.window.OffscreenCanvas&&new s.window.OffscreenCanvas(1,1).getContext("2d")&&typeof s.window.createImageBitmap=="function"),bo),z=1-(v.width-s.prevPowerOfTwo(v.width))/2;z<1||h.neighboringTiles||(h.neighboringTiles=this._getNeighboringTiles(h.tileID));const k=C?v:s.exported.getImageData(v,z),F={uid:h.uid,coord:h.tileID,source:this.id,rawImageData:k,encoding:this.encoding,padding:z};h.actor&&h.state!=="expired"||(h.actor=this.dispatcher.getActor(),h.actor.send("loadDEMTile",F,f.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(h){const i=h.canonical,l=Math.pow(2,i.z),f=(i.x-1+l)%l,g=i.x===0?h.wrap-1:h.wrap,v=(i.x+1+l)%l,T=i.x+1===l?h.wrap+1:h.wrap,S={};return S[new s.OverscaledTileID(h.overscaledZ,g,i.z,f,i.y).key]={backfilled:!1},S[new s.OverscaledTileID(h.overscaledZ,T,i.z,v,i.y).key]={backfilled:!1},i.y>0&&(S[new s.OverscaledTileID(h.overscaledZ,g,i.z,f,i.y-1).key]={backfilled:!1},S[new s.OverscaledTileID(h.overscaledZ,h.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},S[new s.OverscaledTileID(h.overscaledZ,T,i.z,v,i.y-1).key]={backfilled:!1}),i.y+1<l&&(S[new s.OverscaledTileID(h.overscaledZ,g,i.z,f,i.y+1).key]={backfilled:!1},S[new s.OverscaledTileID(h.overscaledZ,h.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},S[new s.OverscaledTileID(h.overscaledZ,T,i.z,v,i.y+1).key]={backfilled:!1}),S}unloadTile(h){h.demTexture&&this.map.painter.saveTileTexture(h.demTexture),h.fbo&&(h.fbo.destroy(),delete h.fbo),h.dem&&delete h.dem,delete h.neighboringTiles,h.state="unloaded"}},geojson:class extends s.Evented{constructor(h,i,l,f){super(),this.id=h,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=l.getActor(),this.setEventedParent(f),this._data=i.data,this._options=s.extend({},i),this._collectResourceTiming=i.collectResourceTiming,i.maxzoom!==void 0&&(this.maxzoom=i.maxzoom),i.type&&(this.type=i.type),i.attribution&&(this.attribution=i.attribution),this.promoteId=i.promoteId;const g=s.EXTENT/this.tileSize;this.workerOptions=s.extend({source:this.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(i.buffer!==void 0?i.buffer:128)*g,tolerance:(i.tolerance!==void 0?i.tolerance:.375)*g,extent:s.EXTENT,maxZoom:this.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:i.clusterMaxZoom!==void 0?i.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:s.EXTENT,radius:(i.clusterRadius!==void 0?i.clusterRadius:50)*g,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter},i.workerOptions)}onAdd(h){this.map=h,this.setData(this._data)}setData(h){return this._data=h,this._updateWorkerData(),this}getClusterExpansionZoom(h,i){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:h,source:this.id},i),this}getClusterChildren(h,i){return this.actor.send("geojson.getClusterChildren",{clusterId:h,source:this.id},i),this}getClusterLeaves(h,i,l,f){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:h,limit:i,offset:l},f),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new s.Event("dataloading",{dataType:"source"})),this._loaded=!1;const h=s.extend({},this.workerOptions),i=this._data;typeof i=="string"?(h.request=this.map._requestManager.transformRequest(s.exported.resolveURL(i),s.ResourceType.Source),h.request.collectResourceTiming=this._collectResourceTiming):h.data=JSON.stringify(i),this._pendingLoad=this.actor.send(`${this.type}.loadData`,h,(l,f)=>{if(this._loaded=!0,this._pendingLoad=null,l)this.fire(new s.ErrorEvent(l));else{const g={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&f&&f.resourceTiming&&f.resourceTiming[this.id]&&(g.resourceTiming=f.resourceTiming[this.id]),this.fire(new s.Event("data",g)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(h,i){const l=h.actor?"reloadTile":"loadTile";h.actor=this.actor,h.request=this.actor.send(l,{type:this.type,uid:h.uid,tileID:h.tileID,tileZoom:h.tileZoom,zoom:h.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:s.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(f,g)=>(delete h.request,h.unloadVectorData(),h.aborted?i(null):f?i(f):(h.loadVectorData(g,this.map.painter,l==="reloadTile"),i(null))),void 0,l==="loadTile")}abortTile(h){h.request&&(h.request.cancel(),delete h.request),h.aborted=!0}unloadTile(h){h.unloadVectorData(),this.actor.send("removeTile",{uid:h.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return s.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends It{constructor(h,i,l,f){super(h,i,l,f),this.roundZoom=!0,this.type="video",this.options=i}load(){this._loaded=!1;const h=this.options;this.urls=[];for(const i of h.urls)this.urls.push(this.map._requestManager.transformRequest(i,s.ResourceType.Source).url);s.getVideo(this.urls,(i,l)=>{this._loaded=!0,i?this.fire(new s.ErrorEvent(i)):l&&(this.video=l,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(h){if(this.video){const i=this.video.seekable;h<i.start(0)||h>i.end(0)?this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${i.start(0)} and ${i.end(0)}-second mark.`))):this.video.currentTime=h}}getVideo(){return this.video}onAdd(h){this.map||(this.map=h,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const h=this.map.painter.context,i=h.gl;this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new s.Texture(h,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(h)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:It,canvas:class extends It{constructor(h,i,l,f){super(h,i,l,f),i.coordinates?Array.isArray(i.coordinates)&&i.coordinates.length===4&&!i.coordinates.some(g=>!Array.isArray(g)||g.length!==2||g.some(v=>typeof v!="number"))||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${h}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${h}`,null,'missing required property "coordinates"'))),i.animate&&typeof i.animate!="boolean"&&this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${h}`,null,'optional "animate" property must be a boolean value'))),i.canvas?typeof i.canvas=="string"||i.canvas instanceof s.window.HTMLCanvasElement||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${h}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${h}`,null,'missing required property "canvas"'))),this.options=i,this.animate=i.animate===void 0||i.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof s.window.HTMLCanvasElement?this.options.canvas:s.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(h){this.map=h,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let h=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,h=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,h=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const i=this.map.painter.context;this.texture?(h||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new s.Texture(i,this.canvas,i.gl.RGBA,{premultiply:!0}),this._prepareData(i)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const h of[this.canvas.width,this.canvas.height])if(isNaN(h)||h<=0)return!0;return!1}},custom:class extends s.Evented{constructor(h,i,l,f){super(),this.id=h,this.type="custom",this._dataType="raster",this._dispatcher=l,this._implementation=i,this.setEventedParent(f),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new s.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new s.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Nn(this._implementation.bounds,this.minzoom,this.maxzoom)),i.update=this._update.bind(this),i.clearTiles=this._clearTiles.bind(this),i.coveringTiles=this._coveringTiles.bind(this),s.extend(this,s.pick(i,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return s.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(h){this._map=h,this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(h),this.load()}onRemove(h){this._implementation.onRemove&&this._implementation.onRemove(h)}hasTile(h){if(this._implementation.hasTile){const{x:i,y:l,z:f}=h.canonical;return this._implementation.hasTile({x:i,y:l,z:f})}return!this.tileBounds||this.tileBounds.contains(h.canonical)}loadTile(h,i){const{x:l,y:f,z:g}=h.tileID.canonical,v=new s.window.AbortController;h.request=Promise.resolve(this._implementation.loadTile({x:l,y:f,z:g},{signal:v.signal})).then((function(T){return delete h.request,h.aborted?(h.state="unloaded",i(null)):T===void 0?(h.state="errored",i(null)):T===null?(this.loadTileData(h,{width:this.tileSize,height:this.tileSize,data:null}),h.state="loaded",i(null)):function(S){return S instanceof s.window.ImageData||S instanceof s.window.HTMLCanvasElement||S instanceof s.window.ImageBitmap||S instanceof s.window.HTMLImageElement}(T)?(this.loadTileData(h,T),h.state="loaded",void i(null)):(h.state="errored",i(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(T=>{T.code!==20&&(h.state="errored",i(T))}),h.request.cancel=()=>v.abort()}loadTileData(h,i){De.loadTileData(h,i,this._map.painter)}unloadTileData(h){De.unloadTileData(h,this._map.painter)}unloadTile(h,i){if(this.unloadTileData(h),this._implementation.unloadTile){const{x:l,y:f,z:g}=h.tileID.canonical;this._implementation.unloadTile({x:l,y:f,z:g})}i()}abortTile(h,i){h.request&&h.request.cancel&&(h.request.cancel(),delete h.request),i()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(h=>({x:h.canonical.x,y:h.canonical.y,z:h.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Et=function(h,i,l,f){const g=new pt[i.type](h,i,l,f);if(g.id!==h)throw new Error(`Expected Source id to be ${h} instead of ${g.id}`);return s.bindAll(["load","abort","unload","serialize","prepare"],g),g};function Dt(h,i){const l=s.identity([]);return s.scale(l,l,[.5*h.width,.5*-h.height,1]),s.translate(l,l,[1,-1,0]),s.multiply(l,l,h.calculateProjMatrix(i.toUnwrapped())),Float32Array.from(l)}function tn(h,i,l,f,g,v,T,S=!1){const C=h.tilesIn(f,T,S);C.sort(jn);const z=[];for(const F of C)z.push({wrappedTileID:F.tile.tileID.wrapped().key,queryResults:F.tile.queryRenderedFeatures(i,l,h._state,F,g,v,Dt(h.transform,F.tile.tileID),S)});const k=function(F){const $={},X={};for(const Y of F){const K=Y.queryResults,J=Y.wrappedTileID,B=X[J]=X[J]||{};for(const H in K){const ie=K[H],oe=B[H]=B[H]||{},me=$[H]=$[H]||[];for(const ge of ie)oe[ge.featureIndex]||(oe[ge.featureIndex]=!0,me.push(ge))}}return $}(z);for(const F in k)k[F].forEach($=>{const X=$.feature,Y=X.layer;Y&&Y.type!=="background"&&Y.type!=="sky"&&(X.source=Y.source,Y["source-layer"]&&(X.sourceLayer=Y["source-layer"]),X.state=X.id!==void 0?h.getFeatureState(Y["source-layer"],X.id):{})});return k}function en(h,i){const l=h.getRenderableIds().map(v=>h.getTileByID(v)),f=[],g={};for(let v=0;v<l.length;v++){const T=l[v],S=T.tileID.canonical.key;g[S]||(g[S]=!0,T.querySourceFeatures(f,i))}return f}function jn(h,i){const l=h.tileID,f=i.tileID;return l.overscaledZ-f.overscaledZ||l.canonical.y-f.canonical.y||l.wrap-f.wrap||l.canonical.x-f.canonical.x}function Bn(){return xa.workerClass!=null?new xa.workerClass:new s.window.Worker(xa.workerUrl)}const Sr="mapboxgl_preloaded_worker_pool";class kn{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<kn.workerCount;)this.workers.push(new Bn);return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(l=>{l.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Sr]}numActive(){return Object.keys(this.active).length}}let Vn;function eo(){return Vn||(Vn=new kn),Vn}function bs(h,i){const l={};for(const f in h)f!=="ref"&&(l[f]=h[f]);return s.refProperties.forEach(f=>{f in i&&(l[f]=i[f])}),l}function na(h){h=h.slice();const i=Object.create(null);for(let l=0;l<h.length;l++)i[h[l].id]=h[l];for(let l=0;l<h.length;l++)"ref"in h[l]&&(h[l]=bs(h[l],i[h[l].ref]));return h}kn.workerCount=2;const Jt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function ts(h,i,l){l.push({command:Jt.addSource,args:[h,i[h]]})}function nn(h,i,l){i.push({command:Jt.removeSource,args:[h]}),l[h]=!0}function mn(h,i,l,f){nn(h,l,f),ts(h,i,l)}function fr(h,i,l){let f;for(f in h[l])if(h[l].hasOwnProperty(f)&&f!=="data"&&!P(h[l][f],i[l][f]))return!1;for(f in i[l])if(i[l].hasOwnProperty(f)&&f!=="data"&&!P(h[l][f],i[l][f]))return!1;return!0}function Nr(h,i,l,f,g,v){let T;for(T in i=i||{},h=h||{})h.hasOwnProperty(T)&&(P(h[T],i[T])||l.push({command:v,args:[f,T,i[T],g]}));for(T in i)i.hasOwnProperty(T)&&!h.hasOwnProperty(T)&&(P(h[T],i[T])||l.push({command:v,args:[f,T,i[T],g]}))}function Di(h){return h.id}function eu(h,i){return h[i.id]=i,h}class tu{constructor(i,l){this.reset(i,l)}reset(i,l){this.points=i||[],this._distances=[0];for(let f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(l||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=s.clamp(i,0,1);let l=1,f=this._distances[l];const g=i*this.paddedLength+this.padding;for(;f<g&&l<this._distances.length;)f=this._distances[++l];const v=l-1,T=this._distances[v],S=f-T,C=S>0?(g-T)/S:0;return this.points[v].mult(1-C).add(this.points[l].mult(C))}}class Ts{constructor(i,l,f){const g=this.boxCells=[],v=this.circleCells=[];this.xCellCount=Math.ceil(i/f),this.yCellCount=Math.ceil(l/f);for(let T=0;T<this.xCellCount*this.yCellCount;T++)g.push([]),v.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=l,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/l,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,l,f,g,v){this._forEachCell(l,f,g,v,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(l),this.bboxes.push(f),this.bboxes.push(g),this.bboxes.push(v)}insertCircle(i,l,f,g){this._forEachCell(l-g,f-g,l+g,f+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(l),this.circles.push(f),this.circles.push(g)}_insertBoxCell(i,l,f,g,v,T){this.boxCells[v].push(T)}_insertCircleCell(i,l,f,g,v,T){this.circleCells[v].push(T)}_query(i,l,f,g,v,T){if(f<0||i>this.width||g<0||l>this.height)return!v&&[];const S=[];if(i<=0&&l<=0&&this.width<=f&&this.height<=g){if(v)return!0;for(let C=0;C<this.boxKeys.length;C++)S.push({key:this.boxKeys[C],x1:this.bboxes[4*C],y1:this.bboxes[4*C+1],x2:this.bboxes[4*C+2],y2:this.bboxes[4*C+3]});for(let C=0;C<this.circleKeys.length;C++){const z=this.circles[3*C],k=this.circles[3*C+1],F=this.circles[3*C+2];S.push({key:this.circleKeys[C],x1:z-F,y1:k-F,x2:z+F,y2:k+F})}return T?S.filter(T):S}return this._forEachCell(i,l,f,g,this._queryCell,S,{hitTest:v,seenUids:{box:{},circle:{}}},T),v?S.length>0:S}_queryCircle(i,l,f,g,v){const T=i-f,S=i+f,C=l-f,z=l+f;if(S<0||T>this.width||z<0||C>this.height)return!g&&[];const k=[];return this._forEachCell(T,C,S,z,this._queryCellCircle,k,{hitTest:g,circle:{x:i,y:l,radius:f},seenUids:{box:{},circle:{}}},v),g?k.length>0:k}query(i,l,f,g,v){return this._query(i,l,f,g,!1,v)}hitTest(i,l,f,g,v){return this._query(i,l,f,g,!0,v)}hitTestCircle(i,l,f,g){return this._queryCircle(i,l,f,!0,g)}_queryCell(i,l,f,g,v,T,S,C){const z=S.seenUids,k=this.boxCells[v];if(k!==null){const $=this.bboxes;for(const X of k)if(!z.box[X]){z.box[X]=!0;const Y=4*X;if(i<=$[Y+2]&&l<=$[Y+3]&&f>=$[Y+0]&&g>=$[Y+1]&&(!C||C(this.boxKeys[X]))){if(S.hitTest)return T.push(!0),!0;T.push({key:this.boxKeys[X],x1:$[Y],y1:$[Y+1],x2:$[Y+2],y2:$[Y+3]})}}}const F=this.circleCells[v];if(F!==null){const $=this.circles;for(const X of F)if(!z.circle[X]){z.circle[X]=!0;const Y=3*X;if(this._circleAndRectCollide($[Y],$[Y+1],$[Y+2],i,l,f,g)&&(!C||C(this.circleKeys[X]))){if(S.hitTest)return T.push(!0),!0;{const K=$[Y],J=$[Y+1],B=$[Y+2];T.push({key:this.circleKeys[X],x1:K-B,y1:J-B,x2:K+B,y2:J+B})}}}}}_queryCellCircle(i,l,f,g,v,T,S,C){const z=S.circle,k=S.seenUids,F=this.boxCells[v];if(F!==null){const X=this.bboxes;for(const Y of F)if(!k.box[Y]){k.box[Y]=!0;const K=4*Y;if(this._circleAndRectCollide(z.x,z.y,z.radius,X[K+0],X[K+1],X[K+2],X[K+3])&&(!C||C(this.boxKeys[Y])))return T.push(!0),!0}}const $=this.circleCells[v];if($!==null){const X=this.circles;for(const Y of $)if(!k.circle[Y]){k.circle[Y]=!0;const K=3*Y;if(this._circlesCollide(X[K],X[K+1],X[K+2],z.x,z.y,z.radius)&&(!C||C(this.circleKeys[Y])))return T.push(!0),!0}}}_forEachCell(i,l,f,g,v,T,S,C){const z=this._convertToXCellCoord(i),k=this._convertToYCellCoord(l),F=this._convertToXCellCoord(f),$=this._convertToYCellCoord(g);for(let X=z;X<=F;X++)for(let Y=k;Y<=$;Y++)if(v.call(this,i,l,f,g,this.xCellCount*Y+X,T,S,C))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,l,f,g,v,T){const S=g-i,C=v-l,z=f+T;return z*z>S*S+C*C}_circleAndRectCollide(i,l,f,g,v,T,S){const C=(T-g)/2,z=Math.abs(i-(g+C));if(z>C+f)return!1;const k=(S-v)/2,F=Math.abs(l-(v+k));if(F>k+f)return!1;if(z<=C||F<=k)return!0;const $=z-C,X=F-k;return $*$+X*X<=f*f}}const Eo={unknown:0,flipRequired:1,flipNotRequired:2},il=Math.tan(85*Math.PI/180);function Ve(h,i,l,f,g,v,T){const S=s.create();if(l)if(v.name==="globe"){const C=s.calculateGlobeLabelMatrix(g,i);s.multiply(S,S,C)}else{const C=Me([],T);S[0]=C[0],S[1]=C[1],S[4]=C[2],S[5]=C[3],f||s.rotateZ(S,S,g.angle)}else s.multiply(S,g.labelPlaneMatrix,h);return S}function So(h,i,l,f,g,v,T){const S=Ve(h,i,l,f,g,v,T);return v.name==="globe"&&l||(S[2]=S[6]=S[10]=S[14]=0),S}function Jn(h,i,l,f,g,v,T){if(l){if(v.name==="globe"){const S=Ve(h,i,l,f,g,v,T);return s.invert(S,S),s.multiply(S,h,S),S}{const S=s.clone(h),C=s.identity([]);return C[0]=T[0],C[1]=T[1],C[4]=T[2],C[5]=T[3],s.multiply(S,S,C),f||s.rotateZ(S,S,-g.angle),S}}return g.glCoordMatrix}function yr(h,i,l,f){const g=[h,i,l,1];l?s.transformMat4$1(g,g,f):Xt(g,g,f);const v=g[3];return g[0]/=v,g[1]/=v,g[2]/=v,g}function F2(h,i){return Math.min(.5+h/i*.5,1.5)}function to(h,i){const l=h[0]/h[3],f=h[1]/h[3];return l>=-i[0]&&l<=i[0]&&f>=-i[1]&&f<=i[1]}function nu(h,i,l,f,g,v,T,S,C,z){const k=l.transform,F=f?h.textSizeData:h.iconSizeData,$=s.evaluateSizeForZoom(F,l.transform.zoom),X=k.projection.name==="globe",Y=[256/l.width*2+1,256/l.height*2+1],K=f?h.text.dynamicLayoutVertexArray:h.icon.dynamicLayoutVertexArray;K.clear();let J=null;X&&(J=f?h.text.globeExtVertexArray:h.icon.globeExtVertexArray);const B=h.lineVertexArray,H=f?h.text.placedSymbolArray:h.icon.placedSymbolArray,ie=l.transform.width/l.transform.height;let oe,me=!1;for(let ge=0;ge<H.length;ge++){const _e=H.get(ge),{numGlyphs:Ee,writingMode:Te}=_e;if(Te!==s.WritingMode.vertical||me||oe===s.WritingMode.horizontal||(me=!0),oe=Te,(_e.hidden||Te===s.WritingMode.vertical)&&!me){Ri(Ee,K);continue}me=!1;const ze=new s.Point(_e.tileAnchorX,_e.tileAnchorY);let{x:nt,y:Pe,z:qe}=k.projection.projectTilePoint(ze.x,ze.y,z.canonical);if(C){const[Ot,xt,zt]=C(ze);nt+=Ot,Pe+=xt,qe+=zt}const Re=[nt,Pe,qe,1];if(s.transformMat4$1(Re,Re,i),!to(Re,Y)){Ri(Ee,K);continue}const tt=F2(l.transform.cameraToCenterDistance,Re[3]),ke=s.evaluateSizeForFeature(F,$,_e),Ze=T?ke/tt:ke*tt,it=yr(nt,Pe,qe,g);if(it[3]<=0){Ri(Ee,K);continue}let Qe={};const ot=T?null:C,Ct=_t(_e,Ze,!1,S,i,g,v,h.glyphOffsetArray,B,K,J,it,ze,Qe,ie,ot,k.projection,z,T);me=Ct.useVertical,ot&&Ct.needsFlipping&&(Qe={}),(Ct.notEnoughRoom||me||Ct.needsFlipping&&_t(_e,Ze,!0,S,i,g,v,h.glyphOffsetArray,B,K,J,it,ze,Qe,ie,ot,k.projection,z,T).notEnoughRoom)&&Ri(Ee,K)}f?(h.text.dynamicLayoutVertexBuffer.updateData(K),J&&h.text.globeExtVertexBuffer.updateData(J)):(h.icon.dynamicLayoutVertexBuffer.updateData(K),J&&h.icon.globeExtVertexBuffer.updateData(J))}function B2(h,i,l,f,g,v,T,S,C,z,k,F,$,X,Y,K){const{lineStartIndex:J,glyphStartIndex:B,segment:H}=S,ie=B+S.numGlyphs,oe=J+S.lineLength,me=i.getoffsetX(B),ge=i.getoffsetX(ie-1),_e=si(h*me,l,f,g,v,T,H,J,oe,C,z,k,F,$,!0,X,Y,K);if(!_e)return null;const Ee=si(h*ge,l,f,g,v,T,H,J,oe,C,z,k,F,$,!0,X,Y,K);return Ee?{first:_e,last:Ee}:null}function ra(h,i,l,f){return h===s.WritingMode.horizontal&&Math.abs(f)>Math.abs(l)?{useVertical:!0}:h===s.WritingMode.vertical?f>0?{needsFlipping:!0}:null:i!==Eo.unknown&&function(g,v){return g===0||Math.abs(v/g)>il}(l,f)?i===Eo.flipRequired?{needsFlipping:!0}:null:l<0?{needsFlipping:!0}:null}function _t(h,i,l,f,g,v,T,S,C,z,k,F,$,X,Y,K,J,B,H){const ie=i/24,oe=h.lineOffsetX*ie,me=h.lineOffsetY*ie,{lineStartIndex:ge,glyphStartIndex:_e,numGlyphs:Ee,segment:Te,writingMode:ze,flipState:nt}=h,Pe=ge+h.lineLength,qe=Re=>{if(k){const[it,Qe,ot]=Re.up,Ct=z.length;s.updateGlobeVertexNormal(k,Ct+0,it,Qe,ot),s.updateGlobeVertexNormal(k,Ct+1,it,Qe,ot),s.updateGlobeVertexNormal(k,Ct+2,it,Qe,ot),s.updateGlobeVertexNormal(k,Ct+3,it,Qe,ot)}const[tt,ke,Ze]=Re.point;s.addDynamicAttributes(z,tt,ke,Ze,Re.angle)};if(Ee>1){const Re=B2(ie,S,oe,me,l,F,$,h,C,v,X,K,!1,J,B,H);if(!Re)return{notEnoughRoom:!0};if(f&&!l){let[tt,ke,Ze]=Re.first.point,[it,Qe,ot]=Re.last.point;[tt,ke]=yr(tt,ke,Ze,T),[it,Qe]=yr(it,Qe,ot,T);const Ct=ra(ze,nt,(it-tt)*Y,Qe-ke);if(h.flipState=Ct&&Ct.needsFlipping?Eo.flipRequired:Eo.flipNotRequired,Ct)return Ct}qe(Re.first);for(let tt=_e+1;tt<_e+Ee-1;tt++){const ke=si(ie*S.getoffsetX(tt),oe,me,l,F,$,Te,ge,Pe,C,v,X,K,!1,!1,J,B,H);if(!ke)return z.length-=4*(tt-_e),{notEnoughRoom:!0};qe(ke)}qe(Re.last)}else{if(f&&!l){const tt=yr($.x,$.y,0,g),ke=ge+Te+1,Ze=new s.Point(C.getx(ke),C.gety(ke)),it=yr(Ze.x,Ze.y,0,g),Qe=it[3]>0?it:Ht($,Ze,tt,1,g,void 0,J,B.canonical),ot=ra(ze,nt,(Qe[0]-tt[0])*Y,Qe[1]-tt[1]);if(h.flipState=ot&&ot.needsFlipping?Eo.flipRequired:Eo.flipNotRequired,ot)return ot}const Re=si(ie*S.getoffsetX(_e),oe,me,l,F,$,Te,ge,Pe,C,v,X,K,!1,!1,J,B,H);if(!Re)return{notEnoughRoom:!0};qe(Re)}return{}}function Qt(h,i,l,f,g){const{x:v,y:T,z:S}=f.projectTilePoint(h.x,h.y,i);if(!g)return yr(v,T,S,l);const[C,z,k]=g(h);return yr(v+C,T+z,S+k,l)}function Ht(h,i,l,f,g,v,T,S){const C=Qt(h.sub(i)._unit()._add(h),S,g,T,v);return s.sub(C,l,C),s.normalize(C,C),s.scaleAndAdd(C,l,C,f)}function si(h,i,l,f,g,v,T,S,C,z,k,F,$,X,Y,K,J,B){const H=f?h-i:h+i;let ie=H>0?1:-1,oe=0;f&&(ie*=-1,oe=Math.PI),ie<0&&(oe+=Math.PI);let me=S+T+(ie>0?0:1)|0,ge=g,_e=g,Ee=0,Te=0;const ze=Math.abs(H),nt=[],Pe=[];let qe=v,Re=qe;const tt=()=>Ht(Re,qe,_e,ze-Ee+1,k,$,K,J.canonical);for(;Ee+Te<=ze;){if(me+=ie,me<S||me>=C)return null;if(_e=ge,Re=qe,nt.push(_e),X&&Pe.push(Re),qe=new s.Point(z.getx(me),z.gety(me)),ge=F[me],!ge){const zt=Qt(qe,J.canonical,k,K,$);ge=zt[3]>0?F[me]=zt:tt()}Ee+=Te,Te=s.distance(_e,ge)}Y&&$&&(F[me]&&(ge=tt(),Te=s.distance(_e,ge)),F[me]=ge);const ke=(ze-Ee)/Te,Ze=qe.sub(Re)._mult(ke)._add(Re),it=s.sub([],ge,_e),Qe=s.scaleAndAdd([],_e,it,ke);let ot=[0,0,1],Ct=it[0],Ot=it[1];if(B&&(ot=K.upVector(J.canonical,Ze.x,Ze.y),ot[0]!==0||ot[1]!==0||ot[2]!==1)){const zt=[ot[2],0,-ot[0]],Kt=s.cross([],ot,zt);s.normalize(zt,zt),s.normalize(Kt,Kt),Ct=s.dot(it,zt),Ot=s.dot(it,Kt)}if(l){const zt=s.cross([],ot,it);s.normalize(zt,zt),s.scaleAndAdd(Qe,Qe,zt,l*ie)}const xt=oe+Math.atan2(Ot,Ct);return nt.push(Qe),X&&Pe.push(Ze),{point:Qe,angle:xt,path:nt,tilePath:Pe,up:ot}}function Ri(h,i){const l=i.length,f=l+4*h;i.resize(f),i.float32.fill(-1/0,4*l,4*f)}function Xt(h,i,l){const f=i[0],g=i[1];return h[0]=l[0]*f+l[4]*g+l[12],h[1]=l[1]*f+l[5]*g+l[13],h[3]=l[3]*f+l[7]*g+l[15],h}const ai=100;class ol{constructor(i,l,f=new Ts(i.width+200,i.height+200,25),g=new Ts(i.width+200,i.height+200,25)){this.transform=i,this.grid=f,this.ignoredGrid=g,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+ai,this.screenBottomBoundary=i.height+ai,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.fogState=l}placeCollisionBox(i,l,f,g,v,T,S,C){let z=f.projectedAnchorX,k=f.projectedAnchorY,F=f.projectedAnchorZ;const $=f.elevation,X=f.tileID,Y=i.getProjection();if($&&X){const[ge,_e,Ee]=Y.upVector(X.canonical,f.tileAnchorX,f.tileAnchorY),Te=Y.upVectorScale(X.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;z+=ge*$*Te,k+=_e*$*Te,F+=Ee*$*Te}const K=this.projectAndGetPerspectiveRatio(S,z,k,F,f.tileID,Y.name==="globe"||!!$||this.transform.pitch>0,Y),J=T*K.perspectiveRatio,B=(f.x1*l+g.x-f.padding)*J+K.point.x,H=(f.y1*l+g.y-f.padding)*J+K.point.y,ie=(f.x2*l+g.x+f.padding)*J+K.point.x,oe=(f.y2*l+g.y+f.padding)*J+K.point.y,me=K.perspectiveRatio<=.55||K.occluded;return!this.isInsideGrid(B,H,ie,oe)||!v&&this.grid.hitTest(B,H,ie,oe,C)||me?{box:[],offscreen:!1,occluded:K.occluded}:{box:[B,H,ie,oe],offscreen:this.isOffscreen(B,H,ie,oe),occluded:!1}}placeCollisionCircles(i,l,f,g,v,T,S,C,z,k,F,$,X,Y,K){const J=[],B=this.transform.elevation,H=i.getProjection(),ie=B?B.getAtTileOffsetFunc(K,this.transform.center.lat,this.transform.worldSize,H):null,oe=new s.Point(f.tileAnchorX,f.tileAnchorY);let{x:me,y:ge,z:_e}=H.projectTilePoint(oe.x,oe.y,K.canonical);if(ie){const[Ze,it,Qe]=ie(oe);me+=Ze,ge+=it,_e+=Qe}const Ee=H.name==="globe",Te=this.projectAndGetPerspectiveRatio(S,me,ge,_e,K,Ee||!!B||this.transform.pitch>0,H),{perspectiveRatio:ze}=Te,nt=(F?T/ze:T*ze)/s.ONE_EM,Pe=yr(me,ge,_e,C),qe=Te.signedDistanceFromCamera>0?B2(nt,v,f.lineOffsetX*nt,f.lineOffsetY*nt,!1,Pe,oe,f,g,C,{},B&&!F?ie:null,F&&!!B,H,K,F):null;let Re=!1,tt=!1,ke=!0;if(qe&&!Te.occluded){const Ze=.5*X*ze+Y,it=new s.Point(-100,-100),Qe=new s.Point(this.screenRightBoundary,this.screenBottomBoundary),ot=new tu,{first:Ct,last:Ot}=qe,xt=Ct.path.length;let zt=[];for(let St=xt-1;St>=1;St--)zt.push(Ct.path[St]);for(let St=1;St<Ot.path.length;St++)zt.push(Ot.path[St]);const Kt=2.5*Ze;z&&(zt=zt.map(([St,pn,gn],yn)=>(ie&&!Ee&&(gn=ie(yn<xt-1?Ct.tilePath[xt-1-yn]:Ot.tilePath[yn-xt+2])[2]),yr(St,pn,gn,z))),zt.some(St=>St[3]<=0)&&(zt=[]));let Wt=[];if(zt.length>0){let St=1/0,pn=-1/0,gn=1/0,yn=-1/0;for(const vn of zt)St=Math.min(St,vn[0]),gn=Math.min(gn,vn[1]),pn=Math.max(pn,vn[0]),yn=Math.max(yn,vn[1]);pn>=it.x&&St<=Qe.x&&yn>=it.y&&gn<=Qe.y&&(Wt=[zt.map(vn=>new s.Point(vn[0],vn[1]))],(St<it.x||pn>Qe.x||gn<it.y||yn>Qe.y)&&(Wt=s.clipLine(Wt,it.x,it.y,Qe.x,Qe.y)))}for(const St of Wt){ot.reset(St,.25*Ze);let pn=0;pn=ot.length<=.5*Ze?1:Math.ceil(ot.paddedLength/Kt)+1;for(let gn=0;gn<pn;gn++){const yn=gn/Math.max(pn-1,1),vn=ot.lerp(yn),Lr=vn.x+ai,xr=vn.y+ai;J.push(Lr,xr,Ze,0);const bi=Lr-Ze,oo=xr-Ze,Rn=Lr+Ze,xn=xr+Ze;if(ke=ke&&this.isOffscreen(bi,oo,Rn,xn),tt=tt||this.isInsideGrid(bi,oo,Rn,xn),!l&&this.grid.hitTestCircle(Lr,xr,Ze,$)&&(Re=!0,!k))return{circles:[],offscreen:!1,collisionDetected:Re,occluded:!1}}}}return{circles:!k&&Re||!tt?[]:J,offscreen:ke,collisionDetected:Re,occluded:Te.occluded}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const l=[];let f=1/0,g=1/0,v=-1/0,T=-1/0;for(const k of i){const F=new s.Point(k.x+ai,k.y+ai);f=Math.min(f,F.x),g=Math.min(g,F.y),v=Math.max(v,F.x),T=Math.max(T,F.y),l.push(F)}const S=this.grid.query(f,g,v,T).concat(this.ignoredGrid.query(f,g,v,T)),C={},z={};for(const k of S){const F=k.key;if(C[F.bucketInstanceId]===void 0&&(C[F.bucketInstanceId]={}),C[F.bucketInstanceId][F.featureIndex])continue;const $=[new s.Point(k.x1,k.y1),new s.Point(k.x2,k.y1),new s.Point(k.x2,k.y2),new s.Point(k.x1,k.y2)];s.polygonIntersectsPolygon(l,$)&&(C[F.bucketInstanceId][F.featureIndex]=!0,z[F.bucketInstanceId]===void 0&&(z[F.bucketInstanceId]=[]),z[F.bucketInstanceId].push(F.featureIndex))}return z}insertCollisionBox(i,l,f,g,v){(l?this.ignoredGrid:this.grid).insert({bucketInstanceId:f,featureIndex:g,collisionGroupID:v},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,l,f,g,v){const T=l?this.ignoredGrid:this.grid,S={bucketInstanceId:f,featureIndex:g,collisionGroupID:v};for(let C=0;C<i.length;C+=4)T.insertCircle(S,i[C],i[C+1],i[C+2])}projectAndGetPerspectiveRatio(i,l,f,g,v,T,S){const C=[l,f,g,1];let z=!1;g||this.transform.pitch>0?(s.transformMat4$1(C,C,i),this.fogState&&v&&S.name!=="globe"&&(z=function($,X,Y,K,J,B){const H=B.calculateFogTileMatrix(J),ie=[X,Y,K];return s.transformMat4(ie,ie,H),Je($,ie,B.pitch,B._fov)}(this.fogState,l,f,g,v.toUnwrapped(),this.transform)>.9)):Xt(C,C,i);const k=C[3];return{point:new s.Point((C[0]/k+1)/2*this.transform.width+ai,(-C[1]/k+1)/2*this.transform.height+ai),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(S)/k*.5,1.5),signedDistanceFromCamera:k,occluded:T&&C[2]>k||z}}isOffscreen(i,l,f,g){return f<ai||i>=this.screenRightBoundary||g<ai||l>this.screenBottomBoundary}isInsideGrid(i,l,f,g){return f>=0&&i<this.gridRightBoundary&&g>=0&&l<this.gridBottomBoundary}getViewportMatrix(){const i=s.identity([]);return s.translate(i,i,[-100,-100,0]),i}}function Es(h,i,l){const f=i.createTileMatrix(h,h.worldSize,l.toUnwrapped());return s.multiply(new Float32Array(16),h.projMatrix,f)}function yi(h,i,l){if(i.projection.name===l.projection.name)return h.projMatrix;const f=l.clone();return f.setProjection(i.projection),Es(f,i.getProjection(),h)}function Dn(h,i,l){return i.name===l.projection.name?h.projMatrix:Es(l,i,h)}class O2{constructor(i,l,f,g){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?l:-l))):g&&f?1:0,this.placed=f}isHidden(){return this.opacity===0&&!this.placed}}class Mo{constructor(i,l,f,g,v,T=!1){this.text=new O2(i?i.text:null,l,f,v),this.icon=new O2(i?i.icon:null,l,g,v),this.clipped=T}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class sl{constructor(i,l,f,g=!1){this.text=i,this.icon=l,this.skipFade=f,this.clipped=g}}class al{constructor(){this.invProjMatrix=s.create(),this.viewportMatrix=s.create(),this.circles=[]}}class ru{constructor(i,l,f,g,v){this.bucketInstanceId=i,this.featureIndex=l,this.sourceLayerIndex=f,this.bucketIndex=g,this.tileID=v}}class U2{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const l=++this.maxGroupID;this.collisionGroups[i]={ID:l,predicate:f=>f.collisionGroupID===l}}return this.collisionGroups[i]}}function ll(h,i,l,f,g){const{horizontalAlign:v,verticalAlign:T}=s.getAnchorAlignment(h),S=-(v-.5)*i,C=-(T-.5)*l,z=s.evaluateVariableOffset(h,f);return new s.Point(S+z[0]*g,C+z[1]*g)}function cl(h,i,l,f,g){const v=new s.Point(h,i);return l&&v._rotate(f?g:-g),v}class u1{constructor(i,l,f,g,v){this.transform=i.clone(),this.projection=i.projection.name,this.collisionIndex=new ol(this.transform,v),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=l,this.retainedQueryData={},this.collisionGroups=new U2(f),this.collisionCircleArrays={},this.prevPlacement=g,g&&(g.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,l,f,g){const v=f.getBucket(l),T=f.latestFeatureIndex;if(!v||!T||l.id!==v.layerIds[0])return;const S=v.layers[0].layout,C=f.collisionBoxArray,z=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),k=f.tileSize/s.EXTENT,F=f.tileID.toUnwrapped();this.transform.setProjection(v.projection);const $=(X=f.tileID,Y=v.getProjection(),K=this.transform,Y.name===this.projection?K.calculateProjMatrix(X.toUnwrapped()):Es(K,Y,X));var X,Y,K;const J=S.get("text-pitch-alignment")==="map",B=S.get("text-rotation-alignment")==="map";l.compileFilter();const H=l.dynamicFilter(),ie=l.dynamicFilterNeedsFeature(),oe=this.transform.calculatePixelsToTileUnitsMatrix(f),me=So($,f.tileID.canonical,J,B,this.transform,v.getProjection(),oe);let ge=null;if(J){const Te=Jn($,f.tileID.canonical,J,B,this.transform,v.getProjection(),oe);ge=s.multiply([],this.transform.labelPlaneMatrix,Te)}let _e=null;H&&f.latestFeatureIndex&&(_e={unwrappedTileID:F,dynamicFilter:H,dynamicFilterNeedsFeature:ie,featureIndex:f.latestFeatureIndex}),this.retainedQueryData[v.bucketInstanceId]=new ru(v.bucketInstanceId,T,v.sourceLayerIndex,v.index,f.tileID);const Ee={bucket:v,layout:S,posMatrix:$,textLabelPlaneMatrix:me,labelToScreenMatrix:ge,clippingData:_e,scale:z,textPixelRatio:k,holdingForFade:f.holdingForFade(),collisionBoxArray:C,partiallyEvaluatedTextSize:s.evaluateSizeForZoom(v.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:s.evaluateSizeForZoom(v.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(v.sourceID)};if(g)for(const Te of v.sortKeyRanges){const{sortKey:ze,symbolInstanceStart:nt,symbolInstanceEnd:Pe}=Te;i.push({sortKey:ze,symbolInstanceStart:nt,symbolInstanceEnd:Pe,parameters:Ee})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:v.symbolInstances.length,parameters:Ee})}attemptAnchorPlacement(i,l,f,g,v,T,S,C,z,k,F,$,X,Y,K,J,B,H){const{textOffset0:ie,textOffset1:oe,crossTileID:me}=$,ge=[ie,oe],_e=ll(i,f,g,ge,v),Ee=this.collisionIndex.placeCollisionBox(Y,v,l,cl(_e.x,_e.y,T,S,this.transform.angle),F,C,z,k.predicate);if(J){const Te=Y.getSymbolInstanceIconSize(H,this.transform.zoom,$.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(Y,Te,J,cl(_e.x,_e.y,T,S,this.transform.angle),F,C,z,k.predicate).box.length===0)return}if(Ee.box.length>0){let Te;return this.prevPlacement&&this.prevPlacement.variableOffsets[me]&&this.prevPlacement.placements[me]&&this.prevPlacement.placements[me].text&&(Te=this.prevPlacement.variableOffsets[me].anchor),this.variableOffsets[me]={textOffset:ge,width:f,height:g,anchor:i,textScale:v,prevAnchor:Te},this.markUsedJustification(Y,i,$,K),Y.allowVerticalPlacement&&(this.markUsedOrientation(Y,K,$),this.placedOrientations[me]=K),{shift:_e,placedGlyphBoxes:Ee}}}placeLayerBucketPart(i,l,f,g){const{bucket:v,layout:T,posMatrix:S,textLabelPlaneMatrix:C,labelToScreenMatrix:z,clippingData:k,textPixelRatio:F,holdingForFade:$,collisionBoxArray:X,partiallyEvaluatedTextSize:Y,partiallyEvaluatedIconSize:K,collisionGroup:J}=i.parameters,B=T.get("text-optional"),H=T.get("icon-optional"),ie=T.get("text-allow-overlap"),oe=T.get("icon-allow-overlap"),me=T.get("text-rotation-alignment")==="map",ge=T.get("text-pitch-alignment")==="map",_e=T.get("icon-text-fit")!=="none",Ee=T.get("symbol-z-order")==="viewport-y";this.transform.setProjection(v.projection);let Te=ie&&(oe||!v.hasIconData()||H),ze=oe&&(ie||!v.hasTextData()||B);!v.collisionArrays&&X&&v.deserializeCollisionBoxes(X),f&&g&&v.updateCollisionDebugBuffers(this.transform.zoom,X);const nt=(Pe,qe,Re)=>{const{crossTileID:tt,numVerticalGlyphVertices:ke}=Pe;if(k){const Rn={zoom:this.transform.zoom,pitch:this.transform.pitch};let xn=null;if(k.dynamicFilterNeedsFeature){const an=this.retainedQueryData[v.bucketInstanceId];xn=k.featureIndex.loadFeature({featureIndex:Pe.featureIndex,bucketIndex:an.bucketIndex,sourceLayerIndex:an.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,k.dynamicFilter)(Rn,xn,this.retainedQueryData[v.bucketInstanceId].tileID.canonical,new s.Point(Pe.tileAnchorX,Pe.tileAnchorY),this.transform.calculateDistanceTileData(k.unwrappedTileID)))return this.placements[tt]=new sl(!1,!1,!1,!0),void l.add(tt)}if(l.has(tt))return;if($)return void(this.placements[tt]=new sl(!1,!1,!1));let Ze=!1,it=!1,Qe=!0,ot=!1,Ct=!1,Ot=null,xt={box:null,offscreen:null,occluded:null},zt={box:null,offscreen:null,occluded:null},Kt=null,Wt=null,St=null,pn=0,gn=0,yn=0;Re.textFeatureIndex?pn=Re.textFeatureIndex:Pe.useRuntimeCollisionCircles&&(pn=Pe.featureIndex),Re.verticalTextFeatureIndex&&(gn=Re.verticalTextFeatureIndex);const vn=Rn=>{Rn.tileID=this.retainedQueryData[v.bucketInstanceId].tileID;const xn=this.transform.elevation;(xn||Rn.elevation)&&(Rn.elevation=xn?xn.getAtTileOffset(Rn.tileID,Rn.tileAnchorX,Rn.tileAnchorY):0)},Lr=Re.textBox;if(Lr){vn(Lr);const Rn=an=>{let Qn=s.WritingMode.horizontal;if(v.allowVerticalPlacement&&!an&&this.prevPlacement){const jr=this.prevPlacement.placedOrientations[tt];jr&&(this.placedOrientations[tt]=jr,Qn=jr,this.markUsedOrientation(v,Qn,Pe))}return Qn},xn=(an,Qn)=>{if(v.allowVerticalPlacement&&ke>0&&Re.verticalTextBox){for(const jr of v.writingModes)if(jr===s.WritingMode.vertical?(xt=Qn(),zt=xt):xt=an(),xt&&xt.box&&xt.box.length)break}else xt=an()};if(T.get("text-variable-anchor")){let an=T.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[tt]){const zn=this.prevPlacement.variableOffsets[tt];an.indexOf(zn.anchor)>0&&(an=an.filter(Xr=>Xr!==zn.anchor),an.unshift(zn.anchor))}const Qn=(zn,Xr,B1)=>{const zs=v.getSymbolInstanceTextSize(Y,Pe,this.transform.zoom,qe),Al=(zn.x2-zn.x1)*zs+2*zn.padding,Lo=(zn.y2-zn.y1)*zs+2*zn.padding,is=_e&&!oe?Xr:null;is&&vn(is);let Ls={box:[],offscreen:!1,occluded:!1};const O1=ie?2*an.length:an.length;for(let Il=0;Il<O1;++Il){const Wu=this.attemptAnchorPlacement(an[Il%an.length],zn,Al,Lo,zs,me,ge,F,S,J,Il>=an.length,Pe,qe,v,B1,is,Y,K);if(Wu&&(Ls=Wu.placedGlyphBoxes,Ls&&Ls.box&&Ls.box.length)){Ze=!0,Ot=Wu.shift;break}}return Ls};xn(()=>Qn(Lr,Re.iconBox,s.WritingMode.horizontal),()=>{const zn=Re.verticalTextBox;return zn&&vn(zn),v.allowVerticalPlacement&&!(xt&&xt.box&&xt.box.length)&&ke>0&&zn?Qn(zn,Re.verticalIconBox,s.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),xt&&(Ze=xt.box,Qe=xt.offscreen,ot=xt.occluded);const jr=Rn(!(!xt||!xt.box));if(!Ze&&this.prevPlacement){const zn=this.prevPlacement.variableOffsets[tt];zn&&(this.variableOffsets[tt]=zn,this.markUsedJustification(v,zn.anchor,Pe,jr))}}else{const an=(Qn,jr)=>{const zn=v.getSymbolInstanceTextSize(Y,Pe,this.transform.zoom,qe),Xr=this.collisionIndex.placeCollisionBox(v,zn,Qn,new s.Point(0,0),ie,F,S,J.predicate);return Xr&&Xr.box&&Xr.box.length&&(this.markUsedOrientation(v,jr,Pe),this.placedOrientations[tt]=jr),Xr};xn(()=>an(Lr,s.WritingMode.horizontal),()=>{const Qn=Re.verticalTextBox;return v.allowVerticalPlacement&&ke>0&&Qn?(vn(Qn),an(Qn,s.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),Rn(!!(xt&&xt.box&&xt.box.length))}}if(Kt=xt,Ze=Kt&&Kt.box&&Kt.box.length>0,Qe=Kt&&Kt.offscreen,ot=Kt&&Kt.occluded,Pe.useRuntimeCollisionCircles){const Rn=v.text.placedSymbolArray.get(Pe.centerJustifiedTextSymbolIndex>=0?Pe.centerJustifiedTextSymbolIndex:Pe.verticalPlacedTextSymbolIndex),xn=s.evaluateSizeForFeature(v.textSizeData,Y,Rn),an=T.get("text-padding");Wt=this.collisionIndex.placeCollisionCircles(v,ie,Rn,v.lineVertexArray,v.glyphOffsetArray,xn,S,C,z,f,ge,J.predicate,Pe.collisionCircleDiameter*xn/s.ONE_EM,an,this.retainedQueryData[v.bucketInstanceId].tileID),Ze=ie||Wt.circles.length>0&&!Wt.collisionDetected,Qe=Qe&&Wt.offscreen,ot=Wt.occluded}if(Re.iconFeatureIndex&&(yn=Re.iconFeatureIndex),Re.iconBox){const Rn=xn=>{vn(xn);const an=_e&&Ot?cl(Ot.x,Ot.y,me,ge,this.transform.angle):new s.Point(0,0),Qn=v.getSymbolInstanceIconSize(K,this.transform.zoom,Pe.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(v,Qn,xn,an,oe,F,S,J.predicate)};zt&&zt.box&&zt.box.length&&Re.verticalIconBox?(St=Rn(Re.verticalIconBox),it=St.box.length>0):(St=Rn(Re.iconBox),it=St.box.length>0),Qe=Qe&&St.offscreen,Ct=St.occluded}const xr=B||Pe.numHorizontalGlyphVertices===0&&ke===0,bi=H||Pe.numIconVertices===0;if(xr||bi?bi?xr||(it=it&&Ze):Ze=it&&Ze:it=Ze=it&&Ze,Ze&&Kt&&Kt.box&&this.collisionIndex.insertCollisionBox(Kt.box,T.get("text-ignore-placement"),v.bucketInstanceId,zt&&zt.box&&gn?gn:pn,J.ID),it&&St&&this.collisionIndex.insertCollisionBox(St.box,T.get("icon-ignore-placement"),v.bucketInstanceId,yn,J.ID),Wt&&(Ze&&this.collisionIndex.insertCollisionCircles(Wt.circles,T.get("text-ignore-placement"),v.bucketInstanceId,pn,J.ID),f)){const Rn=v.bucketInstanceId;let xn=this.collisionCircleArrays[Rn];xn===void 0&&(xn=this.collisionCircleArrays[Rn]=new al);for(let an=0;an<Wt.circles.length;an+=4)xn.circles.push(Wt.circles[an+0]),xn.circles.push(Wt.circles[an+1]),xn.circles.push(Wt.circles[an+2]),xn.circles.push(Wt.collisionDetected?1:0)}const oo=v.projection.name!=="globe";Te=Te&&(oo||!ot),ze=ze&&(oo||!Ct),this.placements[tt]=new sl(Ze||Te,it||ze,Qe||v.justReloaded),l.add(tt)};if(Ee){const Pe=v.getSortedSymbolIndexes(this.transform.angle);for(let qe=Pe.length-1;qe>=0;--qe){const Re=Pe[qe];nt(v.symbolInstances.get(Re),Re,v.collisionArrays[Re])}}else for(let Pe=i.symbolInstanceStart;Pe<i.symbolInstanceEnd;Pe++)nt(v.symbolInstances.get(Pe),Pe,v.collisionArrays[Pe]);if(f&&v.bucketInstanceId in this.collisionCircleArrays){const Pe=this.collisionCircleArrays[v.bucketInstanceId];s.invert(Pe.invProjMatrix,S),Pe.viewportMatrix=this.collisionIndex.getViewportMatrix()}v.justReloaded=!1}markUsedJustification(i,l,f,g){const{leftJustifiedTextSymbolIndex:v,centerJustifiedTextSymbolIndex:T,rightJustifiedTextSymbolIndex:S,verticalPlacedTextSymbolIndex:C,crossTileID:z}=f,k=s.getAnchorJustification(l),F=g===s.WritingMode.vertical?C:k==="left"?v:k==="center"?T:k==="right"?S:-1;v>=0&&(i.text.placedSymbolArray.get(v).crossTileID=F>=0&&v!==F?0:z),T>=0&&(i.text.placedSymbolArray.get(T).crossTileID=F>=0&&T!==F?0:z),S>=0&&(i.text.placedSymbolArray.get(S).crossTileID=F>=0&&S!==F?0:z),C>=0&&(i.text.placedSymbolArray.get(C).crossTileID=F>=0&&C!==F?0:z)}markUsedOrientation(i,l,f){const g=l===s.WritingMode.horizontal||l===s.WritingMode.horizontalOnly?l:0,v=l===s.WritingMode.vertical?l:0,{leftJustifiedTextSymbolIndex:T,centerJustifiedTextSymbolIndex:S,rightJustifiedTextSymbolIndex:C,verticalPlacedTextSymbolIndex:z}=f,k=i.text.placedSymbolArray;T>=0&&(k.get(T).placedOrientation=g),S>=0&&(k.get(S).placedOrientation=g),C>=0&&(k.get(C).placedOrientation=g),z>=0&&(k.get(z).placedOrientation=v)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const l=this.prevPlacement;let f=!1;this.prevZoomAdjustment=l?l.zoomAdjustment(this.transform.zoom):0;const g=l?l.symbolFadeChange(i):1,v=l?l.opacities:{},T=l?l.variableOffsets:{},S=l?l.placedOrientations:{};for(const C in this.placements){const z=this.placements[C],k=v[C];k?(this.opacities[C]=new Mo(k,g,z.text,z.icon,null,z.clipped),f=f||z.text!==k.text.placed||z.icon!==k.icon.placed):(this.opacities[C]=new Mo(null,g,z.text,z.icon,z.skipFade,z.clipped),f=f||z.text||z.icon)}for(const C in v){const z=v[C];if(!this.opacities[C]){const k=new Mo(z,g,!1,!1);k.isHidden()||(this.opacities[C]=k,f=f||z.text.placed||z.icon.placed)}}for(const C in T)this.variableOffsets[C]||!this.opacities[C]||this.opacities[C].isHidden()||(this.variableOffsets[C]=T[C]);for(const C in S)this.placedOrientations[C]||!this.opacities[C]||this.opacities[C].isHidden()||(this.placedOrientations[C]=S[C]);f?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=l?l.lastPlacementChangeTime:i)}updateLayerOpacities(i,l){const f=new Set;for(const g of l){const v=g.getBucket(i);v&&g.latestFeatureIndex&&i.id===v.layerIds[0]&&this.updateBucketOpacities(v,f,g.collisionBoxArray)}}updateBucketOpacities(i,l,f){i.hasTextData()&&i.text.opacityVertexArray.clear(),i.hasIconData()&&i.icon.opacityVertexArray.clear(),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const g=i.layers[0].layout,v=!!i.layers[0].dynamicFilter(),T=new Mo(null,0,!1,!1,!0),S=g.get("text-allow-overlap"),C=g.get("icon-allow-overlap"),z=g.get("text-variable-anchor"),k=g.get("text-rotation-alignment")==="map",F=g.get("text-pitch-alignment")==="map",$=g.get("icon-text-fit")!=="none",X=new Mo(null,0,S&&(C||!i.hasIconData()||g.get("icon-optional")),C&&(S||!i.hasTextData()||g.get("text-optional")),!0);!i.collisionArrays&&f&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(f);const Y=(J,B,H)=>{for(let ie=0;ie<B/4;ie++)J.opacityVertexArray.emplaceBack(H)};let K=0;for(let J=0;J<i.symbolInstances.length;J++){const B=i.symbolInstances.get(J),{numHorizontalGlyphVertices:H,numVerticalGlyphVertices:ie,crossTileID:oe,numIconVertices:me}=B,ge=l.has(oe);let _e=this.opacities[oe];ge?_e=T:_e||(_e=X,this.opacities[oe]=_e),l.add(oe);const Ee=H>0||ie>0,Te=me>0,ze=this.placedOrientations[oe],nt=ze===s.WritingMode.vertical,Pe=ze===s.WritingMode.horizontal||ze===s.WritingMode.horizontalOnly;if(!Ee&&!Te||_e.isHidden()||K++,Ee){const qe=ul(_e.text);Y(i.text,H,nt?Gn:qe),Y(i.text,ie,Pe?Gn:qe);const Re=_e.text.isHidden(),{leftJustifiedTextSymbolIndex:tt,centerJustifiedTextSymbolIndex:ke,rightJustifiedTextSymbolIndex:Ze,verticalPlacedTextSymbolIndex:it}=B,Qe=i.text.placedSymbolArray,ot=Re||nt?1:0;tt>=0&&(Qe.get(tt).hidden=ot),ke>=0&&(Qe.get(ke).hidden=ot),Ze>=0&&(Qe.get(Ze).hidden=ot),it>=0&&(Qe.get(it).hidden=Re||Pe?1:0);const Ct=this.variableOffsets[oe];Ct&&this.markUsedJustification(i,Ct.anchor,B,ze);const Ot=this.placedOrientations[oe];Ot&&(this.markUsedJustification(i,"left",B,Ot),this.markUsedOrientation(i,Ot,B))}if(Te){const qe=ul(_e.icon),{placedIconSymbolIndex:Re,verticalPlacedIconSymbolIndex:tt}=B,ke=i.icon.placedSymbolArray,Ze=_e.icon.isHidden()?1:0;Re>=0&&(Y(i.icon,me,nt?Gn:qe),ke.get(Re).hidden=Ze),tt>=0&&(Y(i.icon,B.numVerticalIconVertices,Pe?Gn:qe),ke.get(tt).hidden=Ze)}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const qe=i.collisionArrays[J];if(qe){let Re=new s.Point(0,0),tt=!0;if(qe.textBox||qe.verticalTextBox){if(z){const Ze=this.variableOffsets[oe];Ze?(Re=ll(Ze.anchor,Ze.width,Ze.height,Ze.textOffset,Ze.textScale),k&&Re._rotate(F?this.transform.angle:-this.transform.angle)):tt=!1}v&&(tt=!_e.clipped),qe.textBox&&ia(i.textCollisionBox.collisionVertexArray,_e.text.placed,!tt||nt,Re.x,Re.y),qe.verticalTextBox&&ia(i.textCollisionBox.collisionVertexArray,_e.text.placed,!tt||Pe,Re.x,Re.y)}const ke=tt&&!!(!Pe&&qe.verticalIconBox);qe.iconBox&&ia(i.iconCollisionBox.collisionVertexArray,_e.icon.placed,ke,$?Re.x:0,$?Re.y:0),qe.verticalIconBox&&ia(i.iconCollisionBox.collisionVertexArray,_e.icon.placed,!ke,$?Re.x:0,$?Re.y:0)}}}if(i.fullyClipped=K===0,i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.bucketInstanceId in this.collisionCircleArrays){const J=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=J.invProjMatrix,i.placementViewportMatrix=J.viewportMatrix,i.collisionCircleArray=J.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,l){const f=this.zoomAtLastRecencyCheck===l?1-this.zoomAdjustment(l):1;return this.zoomAtLastRecencyCheck=l,this.commitTime+this.fadeDuration*f>i}setStale(){this.stale=!0}}function ia(h,i,l,f,g){h.emplaceBack(i?1:0,l?1:0,f||0,g||0),h.emplaceBack(i?1:0,l?1:0,f||0,g||0),h.emplaceBack(i?1:0,l?1:0,f||0,g||0),h.emplaceBack(i?1:0,l?1:0,f||0,g||0)}const Wr=Math.pow(2,25),Wn=Math.pow(2,24),iu=Math.pow(2,17),ou=Math.pow(2,16),Hr=Math.pow(2,9),vi=Math.pow(2,8),N2=Math.pow(2,1);function ul(h){if(h.opacity===0&&!h.placed)return 0;if(h.opacity===1&&h.placed)return 4294967295;const i=h.placed?1:0,l=Math.floor(127*h.opacity);return l*Wr+i*Wn+l*iu+i*ou+l*Hr+i*vi+l*N2+i}const Gn=0;class hl{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&i.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(i,l,f,g,v){const T=this._bucketParts;for(;this._currentTileIndex<i.length;)if(l.getBucketParts(T,g,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,v())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,T.sort((S,C)=>S.sortKey-C.sortKey));this._currentPartIndex<T.length;){const S=T[this._currentPartIndex];if(l.placeLayerBucketPart(S,this._seenCrossTileIDs,f,S.symbolInstanceStart===0),this._currentPartIndex++,v())return!0}return!1}}class su{constructor(i,l,f,g,v,T,S,C){this.placement=new u1(i,v,T,S,C),this._currentPlacementIndex=l.length-1,this._forceFullPlacement=f,this._showCollisionBoxes=g,this._done=!1}isDone(){return this._done}continuePlacement(i,l,f){const g=s.exported.now(),v=()=>{const T=s.exported.now()-g;return!this._forceFullPlacement&&T>2};for(;this._currentPlacementIndex>=0;){const T=l[i[this._currentPlacementIndex]],S=this.placement.collisionIndex.transform.zoom;if(T.type==="symbol"&&(!T.minzoom||T.minzoom<=S)&&(!T.maxzoom||T.maxzoom>S)){if(this._inProgressLayer||(this._inProgressLayer=new hl(T)),this._inProgressLayer.continuePlacement(f[T.source],this.placement,this._showCollisionBoxes,T,v))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const Ss=512/s.EXTENT/2;class Mr{constructor(i,l,f){this.tileID=i,this.bucketInstanceId=f,this.index=new s.KDBush(l.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const g=i.canonical.x*s.EXTENT,v=i.canonical.y*s.EXTENT;for(let T=0;T<l.length;T++){const{key:S,crossTileID:C,tileAnchorX:z,tileAnchorY:k}=l.get(T),F=Math.floor((g+z)*Ss),$=Math.floor((v+k)*Ss);this.index.add(F,$),this.keys.push(S),this.crossTileIDs.push(C)}this.index.finish()}findMatches(i,l,f){const g=this.tileID.canonical.z<l.canonical.z?1:Math.pow(2,this.tileID.canonical.z-l.canonical.z),v=Ss/Math.pow(2,l.canonical.z-this.tileID.canonical.z),T=l.canonical.x*s.EXTENT,S=l.canonical.y*s.EXTENT;for(let C=0;C<i.length;C++){const z=i.get(C);if(z.crossTileID)continue;const{key:k,tileAnchorX:F,tileAnchorY:$}=z,X=Math.floor((T+F)*v),Y=Math.floor((S+$)*v),K=this.index.range(X-g,Y-g,X+g,Y+g);for(const J of K){const B=this.crossTileIDs[J];if(this.keys[J]===k&&!f.has(B)){f.add(B),z.crossTileID=B;break}}}}}class au{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class lu{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const l=Math.round((i-this.lng)/360);if(l!==0)for(const f in this.indexes){const g=this.indexes[f],v={};for(const T in g){const S=g[T];S.tileID=S.tileID.unwrapTo(S.tileID.wrap+l),v[S.tileID.key]=S}this.indexes[f]=v}this.lng=i}addBucket(i,l,f){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===l.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let v=0;v<l.symbolInstances.length;v++)l.symbolInstances.get(v).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]=new Set);const g=this.usedCrossTileIDs[i.overscaledZ];for(const v in this.indexes){const T=this.indexes[v];if(Number(v)>i.overscaledZ)for(const S in T){const C=T[S];C.tileID.isChildOf(i)&&C.findMatches(l.symbolInstances,i,g)}else{const S=T[i.scaledTo(Number(v)).key];S&&S.findMatches(l.symbolInstances,i,g)}}for(let v=0;v<l.symbolInstances.length;v++){const T=l.symbolInstances.get(v);T.crossTileID||(T.crossTileID=f.generate(),g.add(T.crossTileID))}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new Mr(i,l.symbolInstances,l.bucketInstanceId),!0}removeBucketCrossTileIDs(i,l){for(const f of l.crossTileIDs)this.usedCrossTileIDs[i].delete(f)}removeStaleBuckets(i){let l=!1;for(const f in this.indexes){const g=this.indexes[f];for(const v in g)i[g[v].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,g[v]),delete g[v],l=!0)}return l}}class Co{constructor(){this.layerIndexes={},this.crossTileIDs=new au,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,l,f,g){let v=this.layerIndexes[i.id];v===void 0&&(v=this.layerIndexes[i.id]=new lu);let T=!1;const S={};g.name!=="globe"&&v.handleWrapJump(f);for(const C of l){const z=C.getBucket(i);z&&i.id===z.layerIds[0]&&(z.bucketInstanceId||(z.bucketInstanceId=++this.maxBucketInstanceId),v.addBucket(C.tileID,z,this.crossTileIDs)&&(T=!0),S[z.bucketInstanceId]=!0)}return v.removeStaleBuckets(S)&&(T=!0),T}pruneUnusedLayers(i){const l={};i.forEach(f=>{l[f]=!0});for(const f in this.layerIndexes)l[f]||delete this.layerIndexes[f]}}const ns=(h,i)=>s.emitValidationErrors(h,i&&i.filter(l=>l.identifier!=="source.canvas")),h1=s.pick(Jt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),$5=s.pick(Jt,["setCenter","setZoom","setBearing","setPitch"]),cu={version:8,layers:[],sources:{}},oa={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class no extends s.Evented{constructor(i,l={}){super(),this.map=i,this.dispatcher=new ht(eo(),this),this.imageManager=new Ut,this.imageManager.setEventedParent(this),this.glyphManager=new s.GlyphManager(i._requestManager,l.localFontFamily?s.LocalGlyphMode.all:l.localIdeographFontFamily?s.LocalGlyphMode.ideographs:s.LocalGlyphMode.none,l.localFontFamily||l.localIdeographFontFamily),this.crossTileSymbolIndex=new Co,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",s.getReferrer());const f=this;this._rtlTextPluginCallback=no.registerForPluginStateChange(g=>{f.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:g.pluginStatus,pluginURL:g.pluginURL},(v,T)=>{if(s.triggerPluginCompletionEvent(v),T&&T.every(S=>S))for(const S in f._sourceCaches){const C=f._sourceCaches[S],z=C.getSource().type;z!=="vector"&&z!=="geojson"||C.reload()}})}),this.on("data",g=>{if(g.dataType!=="source"||g.sourceDataType!=="metadata")return;const v=this.getSource(g.sourceId);if(v&&v.vectorLayerIds)for(const T in this._layers){const S=this._layers[T];S.source===v.id&&this._validateLayer(S)}})}loadURL(i,l={}){this.fire(new s.Event("dataloading",{dataType:"style"}));const f=typeof l.validate=="boolean"?l.validate:!s.isMapboxURL(i);i=this.map._requestManager.normalizeStyleURL(i,l.accessToken);const g=this.map._requestManager.transformRequest(i,s.ResourceType.Style);this._request=s.getJSON(g,(v,T)=>{this._request=null,v?this.fire(new s.ErrorEvent(v)):T&&this._load(T,f)})}loadJSON(i,l={}){this.fire(new s.Event("dataloading",{dataType:"style"})),this._request=s.exported.frame(()=>{this._request=null,this._load(i,l.validate!==!1)})}loadEmpty(){this.fire(new s.Event("dataloading",{dataType:"style"})),this._load(cu,!1)}_updateLayerCount(i,l){const f=l?1:-1;i.is3D()&&(this._num3DLayers+=f),i.type==="circle"&&(this._numCircleLayers+=f),i.type==="symbol"&&(this._numSymbolLayers+=f)}_load(i,l){if(l&&ns(this,s.validateStyle(i)))return;this._loaded=!0,this.stylesheet=s.clone$1(i),this._updateMapProjection();for(const g in i.sources)this.addSource(g,i.sources[g],{validate:!1});this._changed=!1,i.sprite?this._loadSprite(i.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(i.glyphs);const f=na(this.stylesheet.layers);this._order=f.map(g=>g.id),this._layers={},this._serializedLayers={};for(const g of f){const v=s.createStyleLayer(g);v.setEventedParent(this,{layer:{id:v.id}}),this._layers[v.id]=v,this._serializedLayers[v.id]=v.serialize(),this._updateLayerCount(v,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Bt(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new s.Event("data",{dataType:"style"})),this.fire(new s.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(i){i?this.stylesheet.projection=i:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(i){this._spriteRequest=function(l,f,g){let v,T,S;const C=s.exported.devicePixelRatio>1?"@2x":"";let z=s.getJSON(f.transformRequest(f.normalizeSpriteURL(l,C,".json"),s.ResourceType.SpriteJSON),($,X)=>{z=null,S||(S=$,v=X,F())}),k=s.getImage(f.transformRequest(f.normalizeSpriteURL(l,C,".png"),s.ResourceType.SpriteImage),($,X)=>{k=null,S||(S=$,T=X,F())});function F(){if(S)g(S);else if(v&&T){const $=s.exported.getImageData(T),X={};for(const Y in v){const{width:K,height:J,x:B,y:H,sdf:ie,pixelRatio:oe,stretchX:me,stretchY:ge,content:_e}=v[Y],Ee=new s.RGBAImage({width:K,height:J});s.RGBAImage.copy($,Ee,{x:B,y:H},{x:0,y:0},{width:K,height:J}),X[Y]={data:Ee,pixelRatio:oe,sdf:ie,stretchX:me,stretchY:ge,content:_e}}g(null,X)}}return{cancel(){z&&(z.cancel(),z=null),k&&(k.cancel(),k=null)}}}(i,this.map._requestManager,(l,f)=>{if(this._spriteRequest=null,l)this.fire(new s.ErrorEvent(l));else if(f)for(const g in f)this.imageManager.addImage(g,f[g]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new s.Event("data",{dataType:"style"}))})}_validateLayer(i){const l=this.getSource(i.source);if(!l)return;const f=i.sourceLayer;f&&(l.type==="geojson"||l.vectorLayerIds&&l.vectorLayerIds.indexOf(f)===-1)&&this.fire(new s.ErrorEvent(new Error(`Source layer "${f}" does not exist on source "${l.id}" as specified by style layer "${i.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this._sourceCaches)if(!this._sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(i){const l=[];for(const f of i){const g=this._layers[f];g.type!=="custom"&&l.push(g.serialize())}return l}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const i in this._sourceCaches)if(this._sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(i){return!!this.terrain&&(typeof i.isLayerDraped=="function"?i.isLayerDraped():oa[i.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(i){if(!this._loaded)return;const l=this._changed;if(this._changed){const g=Object.keys(this._updatedLayers),v=Object.keys(this._removedLayers);(g.length||v.length)&&this._updateWorkerLayers(g,v);for(const T in this._updatedSources){const S=this._updatedSources[T];S==="reload"?this._reloadSource(T):S==="clear"&&this._clearSource(T)}this._updateTilesForChangedImages();for(const T in this._updatedPaintProps)this._layers[T].updateTransitions(i);this.light.updateTransitions(i),this.fog&&this.fog.updateTransitions(i),this._resetUpdates()}const f={};for(const g in this._sourceCaches){const v=this._sourceCaches[g];f[g]=v.used,v.used=!1}for(const g of this._order){const v=this._layers[g];if(v.recalculate(i,this._availableImages),!v.isHidden(i.zoom)){const S=this._getLayerSourceCache(v);S&&(S.used=!0)}const T=this.map.painter;if(T){const S=v.getProgramIds();if(!S)continue;const C=v.getProgramConfiguration(i.zoom);for(const z of S)T.useProgram(z,C)}}for(const g in f){const v=this._sourceCaches[g];f[g]!==v.used&&v.getSource().fire(new s.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:v.getSource().id}))}this.light.recalculate(i),this.terrain&&this.terrain.recalculate(i),this.fog&&this.fog.recalculate(i),this.z=i.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),l&&this.fire(new s.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const l in this._sourceCaches)this._sourceCaches[l].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateWorkerLayers(i,l){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(i),removedIds:l})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(i){if(this._checkLoaded(),ns(this,s.validateStyle(i)))return!1;(i=s.clone$1(i)).layers=na(i.layers);const l=function(g,v){if(!g)return[{command:Jt.setStyle,args:[v]}];let T=[];try{if(!P(g.version,v.version))return[{command:Jt.setStyle,args:[v]}];P(g.center,v.center)||T.push({command:Jt.setCenter,args:[v.center]}),P(g.zoom,v.zoom)||T.push({command:Jt.setZoom,args:[v.zoom]}),P(g.bearing,v.bearing)||T.push({command:Jt.setBearing,args:[v.bearing]}),P(g.pitch,v.pitch)||T.push({command:Jt.setPitch,args:[v.pitch]}),P(g.sprite,v.sprite)||T.push({command:Jt.setSprite,args:[v.sprite]}),P(g.glyphs,v.glyphs)||T.push({command:Jt.setGlyphs,args:[v.glyphs]}),P(g.transition,v.transition)||T.push({command:Jt.setTransition,args:[v.transition]}),P(g.light,v.light)||T.push({command:Jt.setLight,args:[v.light]}),P(g.fog,v.fog)||T.push({command:Jt.setFog,args:[v.fog]}),P(g.projection,v.projection)||T.push({command:Jt.setProjection,args:[v.projection]});const S={},C=[];(function(F,$,X,Y){let K;for(K in $=$||{},F=F||{})F.hasOwnProperty(K)&&($.hasOwnProperty(K)||nn(K,X,Y));for(K in $){if(!$.hasOwnProperty(K))continue;const J=$[K];F.hasOwnProperty(K)?P(F[K],J)||(F[K].type==="geojson"&&J.type==="geojson"&&fr(F,$,K)?X.push({command:Jt.setGeoJSONSourceData,args:[K,J.data]}):mn(K,$,X,Y)):ts(K,$,X)}})(g.sources,v.sources,C,S);const z=[];g.layers&&g.layers.forEach(F=>{F.source&&S[F.source]?T.push({command:Jt.removeLayer,args:[F.id]}):z.push(F)});let k=g.terrain;k&&S[k.source]&&(T.push({command:Jt.setTerrain,args:[void 0]}),k=void 0),T=T.concat(C),P(k,v.terrain)||T.push({command:Jt.setTerrain,args:[v.terrain]}),function(F,$,X){$=$||[];const Y=(F=F||[]).map(Di),K=$.map(Di),J=F.reduce(eu,{}),B=$.reduce(eu,{}),H=Y.slice(),ie=Object.create(null);let oe,me,ge,_e,Ee,Te,ze;for(oe=0,me=0;oe<Y.length;oe++)ge=Y[oe],B.hasOwnProperty(ge)?me++:(X.push({command:Jt.removeLayer,args:[ge]}),H.splice(H.indexOf(ge,me),1));for(oe=0,me=0;oe<K.length;oe++)ge=K[K.length-1-oe],H[H.length-1-oe]!==ge&&(J.hasOwnProperty(ge)?(X.push({command:Jt.removeLayer,args:[ge]}),H.splice(H.lastIndexOf(ge,H.length-me),1)):me++,Te=H[H.length-oe],X.push({command:Jt.addLayer,args:[B[ge],Te]}),H.splice(H.length-oe,0,ge),ie[ge]=!0);for(oe=0;oe<K.length;oe++)if(ge=K[oe],_e=J[ge],Ee=B[ge],!ie[ge]&&!P(_e,Ee))if(P(_e.source,Ee.source)&&P(_e["source-layer"],Ee["source-layer"])&&P(_e.type,Ee.type)){for(ze in Nr(_e.layout,Ee.layout,X,ge,null,Jt.setLayoutProperty),Nr(_e.paint,Ee.paint,X,ge,null,Jt.setPaintProperty),P(_e.filter,Ee.filter)||X.push({command:Jt.setFilter,args:[ge,Ee.filter]}),P(_e.minzoom,Ee.minzoom)&&P(_e.maxzoom,Ee.maxzoom)||X.push({command:Jt.setLayerZoomRange,args:[ge,Ee.minzoom,Ee.maxzoom]}),_e)_e.hasOwnProperty(ze)&&ze!=="layout"&&ze!=="paint"&&ze!=="filter"&&ze!=="metadata"&&ze!=="minzoom"&&ze!=="maxzoom"&&(ze.indexOf("paint.")===0?Nr(_e[ze],Ee[ze],X,ge,ze.slice(6),Jt.setPaintProperty):P(_e[ze],Ee[ze])||X.push({command:Jt.setLayerProperty,args:[ge,ze,Ee[ze]]}));for(ze in Ee)Ee.hasOwnProperty(ze)&&!_e.hasOwnProperty(ze)&&ze!=="layout"&&ze!=="paint"&&ze!=="filter"&&ze!=="metadata"&&ze!=="minzoom"&&ze!=="maxzoom"&&(ze.indexOf("paint.")===0?Nr(_e[ze],Ee[ze],X,ge,ze.slice(6),Jt.setPaintProperty):P(_e[ze],Ee[ze])||X.push({command:Jt.setLayerProperty,args:[ge,ze,Ee[ze]]}))}else X.push({command:Jt.removeLayer,args:[ge]}),Te=H[H.lastIndexOf(ge)+1],X.push({command:Jt.addLayer,args:[Ee,Te]})}(z,v.layers,T)}catch(S){console.warn("Unable to compute style diff:",S),T=[{command:Jt.setStyle,args:[v]}]}return T}(this.serialize(),i).filter(g=>!(g.command in $5));if(l.length===0)return!1;const f=l.filter(g=>!(g.command in h1));if(f.length>0)throw new Error(`Unimplemented: ${f.map(g=>g.command).join(", ")}.`);return l.forEach(g=>{g.command!=="setTransition"&&g.command!=="setProjection"&&this[g.command].apply(this,g.args)}),this.stylesheet=i,this._updateMapProjection(),!0}addImage(i,l){return this.getImage(i)?this.fire(new s.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(i,l),this._afterImageUpdated(i),this)}updateImage(i,l){this.imageManager.updateImage(i,l)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){return this.getImage(i)?(this.imageManager.removeImage(i),this._afterImageUpdated(i),this):this.fire(new s.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(i,l,f={}){if(this._checkLoaded(),this.getSource(i)!==void 0)throw new Error("There is already a source with this ID");if(!l.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(l).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(l.type)>=0&&this._validate(s.validateSource,`sources.${i}`,l,null,f))return;this.map&&this.map._collectResourceTiming&&(l.collectResourceTiming=!0);const g=Et(i,l,this.dispatcher,this);g.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(i),source:g.serialize(),sourceId:i}));const v=T=>{const S=(T?"symbol:":"other:")+i,C=this._sourceCaches[S]=new s.SourceCache(S,g,T);(T?this._symbolSourceCaches:this._otherSourceCaches)[i]=C,C.style=this,C.onAdd(this.map)};v(!1),l.type!=="vector"&&l.type!=="geojson"||v(!0),g.onAdd&&g.onAdd(this.map),this._changed=!0}removeSource(i){this._checkLoaded();const l=this.getSource(i);if(!l)throw new Error("There is no source with this ID");for(const g in this._layers)if(this._layers[g].source===i)return this.fire(new s.ErrorEvent(new Error(`Source "${i}" cannot be removed while layer "${g}" is using it.`)));if(this.terrain&&this.terrain.get().source===i)return this.fire(new s.ErrorEvent(new Error(`Source "${i}" cannot be removed while terrain is using it.`)));const f=this._getSourceCaches(i);for(const g of f)delete this._sourceCaches[g.id],delete this._updatedSources[g.id],g.fire(new s.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:g.getSource().id})),g.setEventedParent(null),g.clearTiles();return delete this._otherSourceCaches[i],delete this._symbolSourceCaches[i],l.setEventedParent(null),l.onRemove&&l.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(i,l){this._checkLoaded(),this.getSource(i).setData(l),this._changed=!0}getSource(i){const l=this._getSourceCache(i);return l&&l.getSource()}_getSources(){const i=[];for(const l in this._otherSourceCaches){const f=this._getSourceCache(l);f&&i.push(f.getSource())}return i}addLayer(i,l,f={}){this._checkLoaded();const g=i.id;if(this.getLayer(g))return void this.fire(new s.ErrorEvent(new Error(`Layer with id "${g}" already exists on this map`)));let v;if(i.type==="custom"){if(ns(this,s.validateCustomStyleLayer(i)))return;v=s.createStyleLayer(i)}else{if(typeof i.source=="object"&&(this.addSource(g,i.source),i=s.clone$1(i),i=s.extend(i,{source:g})),this._validate(s.validateLayer,`layers.${g}`,i,{arrayIndex:-1},f))return;v=s.createStyleLayer(i),this._validateLayer(v),v.setEventedParent(this,{layer:{id:g}}),this._serializedLayers[v.id]=v.serialize(),this._updateLayerCount(v,!0)}const T=l?this._order.indexOf(l):this._order.length;if(l&&T===-1)return void this.fire(new s.ErrorEvent(new Error(`Layer with id "${l}" does not exist on this map.`)));this._order.splice(T,0,g),this._layerOrderChanged=!0,this._layers[g]=v;const S=this._getLayerSourceCache(v);if(this._removedLayers[g]&&v.source&&S&&v.type!=="custom"){const C=this._removedLayers[g];delete this._removedLayers[g],C.type!==v.type?this._updatedSources[v.source]="clear":(this._updatedSources[v.source]="reload",S.pause())}this._updateLayer(v),v.onAdd&&v.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(i,l){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new s.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===l)return;const f=this._order.indexOf(i);this._order.splice(f,1);const g=l?this._order.indexOf(l):this._order.length;l&&g===-1?this.fire(new s.ErrorEvent(new Error(`Layer with id "${l}" does not exist on this map.`))):(this._order.splice(g,0,i),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(i){this._checkLoaded();const l=this._layers[i];if(!l)return void this.fire(new s.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be removed.`)));l.setEventedParent(null),this._updateLayerCount(l,!1);const f=this._order.indexOf(i);this._order.splice(f,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=l,delete this._layers[i],delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],l.onRemove&&l.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(i){return this._layers[i]}hasLayer(i){return i in this._layers}hasLayerType(i){for(const l in this._layers)if(this._layers[l].type===i)return!0;return!1}setLayerZoomRange(i,l,f){this._checkLoaded();const g=this.getLayer(i);g?g.minzoom===l&&g.maxzoom===f||(l!=null&&(g.minzoom=l),f!=null&&(g.maxzoom=f),this._updateLayer(g)):this.fire(new s.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(i,l,f={}){this._checkLoaded();const g=this.getLayer(i);if(g){if(!P(g.filter,l))return l==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(s.validateFilter,`layers.${g.id}.filter`,l,{layerType:g.type},f)||(g.filter=s.clone$1(l),this._updateLayer(g)))}else this.fire(new s.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be filtered.`)))}getFilter(i){const l=this.getLayer(i);return l&&s.clone$1(l.filter)}setLayoutProperty(i,l,f,g={}){this._checkLoaded();const v=this.getLayer(i);v?P(v.getLayoutProperty(l),f)||(v.setLayoutProperty(l,f,g),this._updateLayer(v)):this.fire(new s.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(i,l){const f=this.getLayer(i);if(f)return f.getLayoutProperty(l);this.fire(new s.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style.`)))}setPaintProperty(i,l,f,g={}){this._checkLoaded();const v=this.getLayer(i);v?P(v.getPaintProperty(l),f)||(v.setPaintProperty(l,f,g)&&this._updateLayer(v),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new s.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(i,l){const f=this.getLayer(i);return f&&f.getPaintProperty(l)}setFeatureState(i,l){this._checkLoaded();const f=i.source,g=i.sourceLayer,v=this.getSource(f);if(!v)return void this.fire(new s.ErrorEvent(new Error(`The source '${f}' does not exist in the map's style.`)));const T=v.type;if(T==="geojson"&&g)return void this.fire(new s.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(T==="vector"&&!g)return void this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));i.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided.")));const S=this._getSourceCaches(f);for(const C of S)C.setFeatureState(g,i.id,l)}removeFeatureState(i,l){this._checkLoaded();const f=i.source,g=this.getSource(f);if(!g)return void this.fire(new s.ErrorEvent(new Error(`The source '${f}' does not exist in the map's style.`)));const v=g.type,T=v==="vector"?i.sourceLayer:void 0;if(v==="vector"&&!T)return void this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(l&&typeof i.id!="string"&&typeof i.id!="number")return void this.fire(new s.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const S=this._getSourceCaches(f);for(const C of S)C.removeFeatureState(T,i.id,l)}getFeatureState(i){this._checkLoaded();const l=i.source,f=i.sourceLayer,g=this.getSource(l);if(g){if(g.type!=="vector"||f)return i.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(l)[0].getFeatureState(f,i.id);this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new s.ErrorEvent(new Error(`The source '${l}' does not exist in the map's style.`)))}getTransition(){return s.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const i={};for(const l in this._sourceCaches){const f=this._sourceCaches[l].getSource();i[f.id]||(i[f.id]=f.serialize())}return s.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:i,layers:this._serializeLayers(this._order)},l=>l!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0;const l=this._getLayerSourceCache(i);i.source&&!this._updatedSources[i.source]&&l&&l.getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",l.pause()),this._changed=!0,i.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(i){const l=T=>this._layers[T].type==="fill-extrusion",f={},g=[];for(let T=this._order.length-1;T>=0;T--){const S=this._order[T];if(l(S)){f[S]=T;for(const C of i){const z=C[S];if(z)for(const k of z)g.push(k)}}}g.sort((T,S)=>S.intersectionZ-T.intersectionZ);const v=[];for(let T=this._order.length-1;T>=0;T--){const S=this._order[T];if(l(S))for(let C=g.length-1;C>=0;C--){const z=g[C].feature;if(f[z.layer.id]<T)break;v.push(z),g.pop()}else for(const C of i){const z=C[S];if(z)for(const k of z)v.push(k.feature)}}return v}queryRenderedFeatures(i,l,f){l&&l.filter&&this._validate(s.validateFilter,"queryRenderedFeatures.filter",l.filter,null,l);const g={};if(l&&l.layers){if(!Array.isArray(l.layers))return this.fire(new s.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const C of l.layers){const z=this._layers[C];if(!z)return this.fire(new s.ErrorEvent(new Error(`The layer '${C}' does not exist in the map's style and cannot be queried for features.`))),[];g[z.source]=!0}}const v=[];l.availableImages=this._availableImages;const T=l&&l.layers?l.layers.some(C=>{const z=this.getLayer(C);return z&&z.is3D()}):this.has3DLayers(),S=Rt.createFromScreenPoints(i,f);for(const C in this._sourceCaches){const z=this._sourceCaches[C].getSource().id;l.layers&&!g[z]||v.push(tn(this._sourceCaches[C],this._layers,this._serializedLayers,S,l,f,T,!!this.map._showQueryGeometry))}return this.placement&&v.push(function(C,z,k,F,$,X,Y){const K={},J=X.queryRenderedSymbols(F),B=[];for(const H of Object.keys(J).map(Number))B.push(Y[H]);B.sort(jn);for(const H of B){const ie=H.featureIndex.lookupSymbolFeatures(J[H.bucketInstanceId],z,H.bucketIndex,H.sourceLayerIndex,$.filter,$.layers,$.availableImages,C);for(const oe in ie){const me=K[oe]=K[oe]||[],ge=ie[oe];ge.sort((_e,Ee)=>{const Te=H.featureSortOrder;if(Te){const ze=Te.indexOf(_e.featureIndex);return Te.indexOf(Ee.featureIndex)-ze}return Ee.featureIndex-_e.featureIndex});for(const _e of ge)me.push(_e)}}for(const H in K)K[H].forEach(ie=>{const oe=ie.feature,me=k(C[H]);if(!me)return;const ge=me.getFeatureState(oe.layer["source-layer"],oe.id);oe.source=oe.layer.source,oe.layer["source-layer"]&&(oe.sourceLayer=oe.layer["source-layer"]),oe.state=ge});return K}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),S.screenGeometry,l,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(v)}querySourceFeatures(i,l){l&&l.filter&&this._validate(s.validateFilter,"querySourceFeatures.filter",l.filter,null,l);const f=this._getSourceCaches(i);let g=[];for(const v of f)g=g.concat(en(v,l));return g}addSourceType(i,l,f){return no.getSourceType(i)?f(new Error(`A source type called "${i}" already exists.`)):(no.setSourceType(i,l),l.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:l.workerSourceURL},f):f(null,null))}getLight(){return this.light.getLight()}setLight(i,l={}){this._checkLoaded();const f=this.light.getLight();let g=!1;for(const T in i)if(!P(i[T],f[T])){g=!0;break}if(!g)return;const v=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(i,l),this.light.updateTransitions(v)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(i,l=1){if(this._checkLoaded(),!i)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let f=i;if(l===1){if(typeof f.source=="object"){const g="terrain-dem-src";this.addSource(g,f.source),f=s.clone$1(f),f=s.extend(f,{source:g})}if(this._validate(s.validateTerrain,"terrain",f))return}if(!this.terrain||this.terrain&&l!==this.terrain.drapeRenderMode){if(!f)return;this._createTerrain(f,l)}else{const g=this.terrain,v=g.get();for(const T of Object.keys(s.spec.terrain))!f.hasOwnProperty(T)&&s.spec.terrain[T].default&&(f[T]=s.spec.terrain[T].default);for(const T in f)if(!P(f[T],v[T])){g.set(f),this.stylesheet.terrain=f;const S=this._setTransitionParameters({duration:0});g.updateTransitions(S);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(i){const l=this.fog=new st(i,this.map.transform);this.stylesheet.fog=i;const f=this._setTransitionParameters({duration:0});l.updateTransitions(f)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const i of this.map._markers)i._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(i){if(this._checkLoaded(),!i)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const l=this.fog,f=l.get();Object.keys(i).length===0&&l.set(i);for(const g in i)if(!P(i[g],f[g])){l.set(i),this.stylesheet.fog=i;const v=this._setTransitionParameters({duration:0});l.updateTransitions(v);break}}else this._createFog(i);this._markersNeedUpdate=!0}_setTransitionParameters(i){return{now:s.exported.now(),transition:s.extend(i,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const i=this._order.filter(f=>this.isLayerDraped(this._layers[f])),l=this._order.filter(f=>!this.isLayerDraped(this._layers[f]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...i),this._drapedFirstOrder.push(...l)}_createTerrain(i,l){const f=this.terrain=new Ge(i,l);this.stylesheet.terrain=i,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const g=this._setTransitionParameters({duration:0});f.updateTransitions(g)}_force3DLayerUpdate(){for(const i in this._layers){const l=this._layers[i];l.type==="fill-extrusion"&&this._updateLayer(l)}}_forceSymbolLayerUpdate(){for(const i in this._layers){const l=this._layers[i];l.type==="symbol"&&this._updateLayer(l)}}_validate(i,l,f,g,v={}){return(!v||v.validate!==!1)&&ns(this,i.call(s.validateStyle,s.extend({key:l,style:this.serialize(),value:f,styleSpec:s.spec},g)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),s.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const i in this._layers)this._layers[i].setEventedParent(null);for(const i in this._sourceCaches)this._sourceCaches[i].clearTiles(),this._sourceCaches[i].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(i){const l=this._getSourceCaches(i);for(const f of l)f.clearTiles()}_reloadSource(i){const l=this._getSourceCaches(i);for(const f of l)f.resume(),f.reload()}_reloadSources(){for(const i of this._getSources())i.reload&&i.reload()}_updateSources(i){for(const l in this._sourceCaches)this._sourceCaches[l].update(i)}_generateCollisionBoxes(){for(const i in this._sourceCaches){const l=this._sourceCaches[i];l.resume(),l.reload()}}_updatePlacement(i,l,f,g,v=!1){let T=!1,S=!1;const C={};for(const z of this._order){const k=this._layers[z];if(k.type!=="symbol")continue;if(!C[k.source]){const $=this._getLayerSourceCache(k);if(!$)continue;C[k.source]=$.getRenderableIds(!0).map(X=>$.getTileByID(X)).sort((X,Y)=>Y.tileID.overscaledZ-X.tileID.overscaledZ||(X.tileID.isLessThan(Y.tileID)?-1:1))}const F=this.crossTileSymbolIndex.addLayer(k,C[k.source],i.center.lng,i.projection);T=T||F}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),v=v||this._layerOrderChanged||f===0,this._layerOrderChanged&&this.fire(new s.Event("neworder")),(v||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(s.exported.now(),i.zoom))&&(this.pauseablePlacement=new su(i,this._order,v,l,f,g,this.placement,this.fog&&i.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,C),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(s.exported.now()),S=!0),T&&this.pauseablePlacement.placement.setStale()),S||T)for(const z of this._order){const k=this._layers[z];k.type==="symbol"&&this.placement.updateLayerOpacities(k,C[k.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(s.exported.now())}_releaseSymbolFadeTiles(){for(const i in this._sourceCaches)this._sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,l,f){this.imageManager.getImages(l.icons,f),this._updateTilesForChangedImages();const g=v=>{v&&v.setDependencies(l.tileID.key,l.type,l.icons)};g(this._otherSourceCaches[l.source]),g(this._symbolSourceCaches[l.source])}getGlyphs(i,l,f){this.glyphManager.getGlyphs(l.stacks,f)}getResource(i,l,f){return s.makeRequest(l,f)}_getSourceCache(i){return this._otherSourceCaches[i]}_getLayerSourceCache(i){return i.type==="symbol"?this._symbolSourceCaches[i.source]:this._otherSourceCaches[i.source]}_getSourceCaches(i){const l=[];return this._otherSourceCaches[i]&&l.push(this._otherSourceCaches[i]),this._symbolSourceCaches[i]&&l.push(this._symbolSourceCaches[i]),l}_isSourceCacheLoaded(i){const l=this._getSourceCaches(i);return l.length===0?(this.fire(new s.ErrorEvent(new Error(`There is no source with ID '${i}'`))),!1):l.every(f=>f.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}no.getSourceType=function(h){return pt[h]},no.setSourceType=function(h,i){pt[h]=i},no.registerForPluginStateChange=s.registerForPluginStateChange;var uu=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,Ms="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",Po=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,dl=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,Ao=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let d1={},sa={};const pl=[];aa(uu,pl),aa(Po,pl),aa(dl,pl),aa(Ao,pl),d1=un("",Po),sa=un(Ao,dl);const j2=un(`
#if __VERSION__ >=300
#define varying in
#define gl_FragColor glFragColor
#define texture2D texture
#define textureCube texture
out vec4 glFragColor;
#endif
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
#if __VERSION__ >=300
#define attribute in
#define varying out
#define texture2D texture
#endif
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),p1=uu,hu=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var du={background:un(`uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
varying vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform vec4 u_color;varying vec4 v_color;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(u_color);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:un(`uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:un(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:un("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:un(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:un(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:un("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:un("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:un("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:un(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:un(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:un(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:un(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:un(`varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
vec3 normal=v_normal;
#endif
float z;vec4 color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);
#else
color=v_color;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
#ifdef ZERO_ROOF_RADIUS
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#endif
color.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
v_normal=normal;
#endif
base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(color,NdotL);
#else
v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_color*=u_opacity;
#ifdef ZERO_ROOF_RADIUS
v_roof_color=vec4(0.0,0.0,0.0,1.0);
#ifdef LIGHTING_3D_MODE
v_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));
#else
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:un(`uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
varying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,v_NdotL)*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_NdotL=NdotL;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:un(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:un(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
gl_FragColor=apply_lighting(gl_FragColor);
#endif
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:un(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
uniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture2D(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trimmed=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
#ifdef RENDER_LINE_BORDER
float edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);
#ifdef RENDER_LINE_BORDER_AUTO
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}
#else
out_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);
#endif
}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:un(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
color=apply_lighting(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:un(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:un(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:un(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:un(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:un(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=wireframeOffset;
#endif
v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:un(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:un(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ms),skyboxGradient:un(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ms),skyboxCapture:un(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:un(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:un(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function aa(h,i){const l=h.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let f of l)if(f=f.trim(),f[0]==="#"&&f.includes("if")&&!f.includes("endif")){f=f.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const g=f.split(" ");for(const v of g)i.includes(v)||i.push(v)}}function un(h,i){const l=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f=i.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),g={},v=[...pl];return aa(h,v),aa(i,v),{fragmentSource:h=h.replace(l,(T,S,C,z,k)=>(g[k]=!0,S==="define"?`
#ifndef HAS_UNIFORM_u_${k}
varying ${C} ${z} ${k};
#else
uniform ${C} ${z} u_${k};
#endif
`:`
#ifdef HAS_UNIFORM_u_${k}
    ${C} ${z} ${k} = u_${k};
#endif
`)),vertexSource:i=i.replace(l,(T,S,C,z,k)=>{const F=z==="float"?"vec2":"vec4",$=k.match(/color/)?"color":F;return g[k]?S==="define"?`
#ifndef HAS_UNIFORM_u_${k}
uniform lowp float u_${k}_t;
attribute ${C} ${F} a_${k};
varying ${C} ${z} ${k};
#else
uniform ${C} ${z} u_${k};
#endif
`:$==="vec4"?`
#ifndef HAS_UNIFORM_u_${k}
    ${k} = a_${k};
#else
    ${C} ${z} ${k} = u_${k};
#endif
`:`
#ifndef HAS_UNIFORM_u_${k}
    ${k} = unpack_mix_${$}(a_${k}, u_${k}_t);
#else
    ${C} ${z} ${k} = u_${k};
#endif
`:S==="define"?`
#ifndef HAS_UNIFORM_u_${k}
uniform lowp float u_${k}_t;
attribute ${C} ${F} a_${k};
#else
uniform ${C} ${z} u_${k};
#endif
`:$==="vec4"?`
#ifndef HAS_UNIFORM_u_${k}
    ${C} ${z} ${k} = a_${k};
#else
    ${C} ${z} ${k} = u_${k};
#endif
`:`
#ifndef HAS_UNIFORM_u_${k}
    ${C} ${z} ${k} = unpack_mix_${$}(a_${k}, u_${k}_t);
#else
    ${C} ${z} ${k} = u_${k};
#endif
`}),staticAttributes:f,usedDefines:v}}class Z5{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(i,l,f,g,v,T,S){this.context=i;let C=this.boundPaintVertexBuffers.length!==g.length;for(let k=0;!C&&k<g.length;k++)this.boundPaintVertexBuffers[k]!==g[k]&&(C=!0);let z=this.boundDynamicVertexBuffers.length!==S.length;for(let k=0;!z&&k<S.length;k++)this.boundDynamicVertexBuffers[k]!==S[k]&&(z=!0);if(!i.extVertexArrayObject||!this.vao||this.boundProgram!==l||this.boundLayoutVertexBuffer!==f||C||z||this.boundIndexBuffer!==v||this.boundVertexOffset!==T)this.freshBind(l,f,g,v,T,S);else{i.bindVertexArrayOES.set(this.vao);for(const k of S)k&&k.bind();v&&v.dynamicDraw&&v.bind()}}freshBind(i,l,f,g,v,T){let S;const C=i.numAttributes,z=this.context,k=z.gl;if(z.extVertexArrayObject)this.vao&&this.destroy(),this.vao=z.extVertexArrayObject.createVertexArrayOES(),z.bindVertexArrayOES.set(this.vao),S=0,this.boundProgram=i,this.boundLayoutVertexBuffer=l,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=g,this.boundVertexOffset=v,this.boundDynamicVertexBuffers=T;else{S=z.currentNumAttributes||0;for(let F=C;F<S;F++)k.disableVertexAttribArray(F)}l.enableAttributes(k,i),l.bind(),l.setVertexAttribPointers(k,i,v);for(const F of f)F.enableAttributes(k,i),F.bind(),F.setVertexAttribPointers(k,i,v);for(const F of T)F&&(F.enableAttributes(k,i),F.bind(),F.setVertexAttribPointers(k,i,v));g&&g.bind(),z.currentNumAttributes=C}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function pu(h,i){const l=Math.pow(2,i.canonical.z),f=i.canonical.y;return[new s.MercatorCoordinate(0,f/l).toLngLat().lat,new s.MercatorCoordinate(0,(f+1)/l).toLngLat().lat]}function V2(h,i,l,f,g,v,T){const S=h.context,C=S.gl,z=l.fbo;if(!z)return;h.prepareDrawTile();const k=h.useProgram("hillshade");S.activeTexture.set(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,z.colorAttachment.get());const F=((K,J,B,H)=>{const ie=B.paint.get("hillshade-shadow-color"),oe=B.paint.get("hillshade-highlight-color"),me=B.paint.get("hillshade-accent-color");let ge=B.paint.get("hillshade-illumination-direction")*(Math.PI/180);B.paint.get("hillshade-illumination-anchor")==="viewport"&&(ge-=K.transform.angle);const _e=!K.options.moving;return{u_matrix:H||K.transform.calculateProjMatrix(J.tileID.toUnwrapped(),_e),u_image:0,u_latrange:pu(0,J.tileID),u_light:[B.paint.get("hillshade-exaggeration"),ge],u_shadow:ie,u_highlight:oe,u_accent:me}})(h,l,f,h.terrain?i.projMatrix:null);h.prepareDrawProgram(S,k,i.toUnwrapped());const{tileBoundsBuffer:$,tileBoundsIndexBuffer:X,tileBoundsSegments:Y}=h.getTileBoundsBuffers(l);k.draw(S,C.TRIANGLES,g,v,T,s.CullFaceMode.disabled,F,f.id,$,X,Y)}function fu(h,i,l){if(!i.needsDEMTextureUpload)return;const f=h.context,g=f.gl;f.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||h.getTileTexture(l.stride);const v=l.getPixels();i.demTexture?i.demTexture.update(v,{premultiply:!1}):i.demTexture=new s.Texture(f,v,g.RGBA,{premultiply:!1}),i.needsDEMTextureUpload=!1}function G2(h,i,l,f,g,v){const T=h.context,S=T.gl;if(!i.dem)return;const C=i.dem;if(T.activeTexture.set(S.TEXTURE1),fu(h,i,C),!i.demTexture)return;i.demTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE);const z=C.dim;T.activeTexture.set(S.TEXTURE0);let k=i.fbo;if(!k){const Y=new s.Texture(T,{width:z,height:z,data:null},S.RGBA);Y.bind(S.LINEAR,S.CLAMP_TO_EDGE),k=i.fbo=T.createFramebuffer(z,z,!0),k.colorAttachment.set(Y.texture)}T.bindFramebuffer.set(k.framebuffer),T.viewport.set([0,0,z,z]);const{tileBoundsBuffer:F,tileBoundsIndexBuffer:$,tileBoundsSegments:X}=h.getMercatorTileBoundsBuffers();h.useProgram("hillshadePrepare").draw(T,S.TRIANGLES,f,g,v,s.CullFaceMode.disabled,((Y,K)=>{const J=K.stride,B=s.create();return s.ortho(B,0,s.EXTENT,-s.EXTENT,0,0,1),s.translate(B,B,[0,-s.EXTENT,0]),{u_matrix:B,u_image:1,u_dimension:[J,J],u_zoom:Y.overscaledZ,u_unpack:K.unpackVector}})(i.tileID,C),l.id,F,$,X),i.needsHillshadePrepare=!1}const mu=h=>({u_matrix:new s.UniformMatrix4f(h),u_image0:new s.Uniform1i(h),u_skirt_height:new s.Uniform1f(h)}),la=(h,i)=>({u_matrix:h,u_image0:0,u_skirt_height:i}),f1=(h,i,l,f,g,v,T,S,C,z,k,F,$,X,Y)=>({u_proj_matrix:Float32Array.from(h),u_globe_matrix:i,u_normalize_matrix:Float32Array.from(f),u_merc_matrix:l,u_zoom_transition:g,u_merc_center:v,u_image0:0,u_frustum_tl:T,u_frustum_tr:S,u_frustum_br:C,u_frustum_bl:z,u_globe_pos:k,u_globe_radius:F,u_viewport:$,u_grid_matrix:Y?Float32Array.from(Y):new Float32Array(9),u_skirt_height:X});function ca(h,i){return h!=null&&i!=null&&!(!h.hasData()||!i.hasData())&&h.demTexture!=null&&i.demTexture!=null&&h.tileID.key!==i.tileID.key}const Io=new class{constructor(){this.operations={}}newMorphing(h,i,l,f,g){if(h in this.operations){const v=this.operations[h];v.to.tileID.key!==l.tileID.key&&(v.queued=l)}else this.operations[h]={startTime:f,phase:0,duration:g,from:i,to:l,queued:null}}getMorphValuesForProxy(h){if(!(h in this.operations))return null;const i=this.operations[h];return{from:i.from,to:i.to,phase:i.phase}}update(h){for(const i in this.operations){const l=this.operations[i];for(l.phase=(h-l.startTime)/l.duration;l.phase>=1||!this._validOp(l);)if(!this._nextOp(l,h)){delete this.operations[i];break}}}_nextOp(h,i){return!!h.queued&&(h.from=h.to,h.to=h.queued,h.queued=null,h.phase=0,h.startTime=i,!0)}_validOp(h){return h.from.hasData()&&h.to.hasData()}},Cs={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function m1(h){return 6*Math.pow(1.5,22-h)}function $2(h,i){const l=1<<h.z;return!i&&(h.x===0||h.x===l-1)||h.y===0||h.y===l-1}const fl=h=>({u_matrix:h});function _u(h,i,l,f,g){if(g>0){const v=s.exported.now(),T=(v-h.timeAdded)/g,S=i?(v-i.timeAdded)/g:-1,C=l.getSource(),z=f.coveringZoomLevel({tileSize:C.tileSize,roundZoom:C.roundZoom}),k=!i||Math.abs(i.tileID.overscaledZ-z)>Math.abs(h.tileID.overscaledZ-z),F=k&&h.refreshedUponExpiration?1:s.clamp(k?T:1-S,0,1);return h.refreshedUponExpiration&&T>=1&&(h.refreshedUponExpiration=!1),i?{opacity:1,mix:1-F}:{opacity:F,mix:0}}return{opacity:1,mix:0}}class gu extends s.SourceCache{constructor(i){const l={type:"raster-dem",maxzoom:i.transform.maxZoom},f=new ht(eo(),null),g=Et("mock-dem",l,f,i.style);super("mock-dem",g,!1),g.setEventedParent(this),this._sourceLoaded=!0}_loadTile(i,l){i.state="loaded",l(null)}}class _1 extends s.SourceCache{constructor(i){const l=Et("proxy",{type:"geojson",maxzoom:i.transform.maxZoom},new ht(eo(),null),i.style);super("proxy",l,!1),l.setEventedParent(this),this.map=this.getSource().map=i,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(i,l,f){if(i.freezeTileCoverage)return;this.transform=i;const g=i.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((v,T)=>{if(v[T.key]="",!this._tiles[T.key]){const S=new s.Tile(T,this._source.tileSize*T.overscaleFactor(),i.tileZoom);S.state="loaded",this._tiles[T.key]=S}return v},{});for(const v in this._tiles)v in g||(this.freeFBO(v),this._tiles[v].unloadVectorData(),delete this._tiles[v])}freeFBO(i){const l=this.proxyCachedFBO[i];if(l!==void 0){const f=Object.values(l);this.renderCachePool.push(...f),delete this.proxyCachedFBO[i]}}deallocRenderCache(){this.renderCache.forEach(i=>i.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class g1 extends s.OverscaledTileID{constructor(i,l,f){super(i.overscaledZ,i.wrap,i.canonical.z,i.canonical.x,i.canonical.y),this.proxyTileKey=l,this.projMatrix=f}}class yu extends s.Elevation{constructor(i,l){super(),this.painter=i,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[f,g,v]=function(C){const z=new s.StructArrayLayout2i4,k=new s.StructArrayLayout3ui6,F=131;z.reserve(17161),k.reserve(33800);const $=s.EXTENT/128,X=s.EXTENT+$/2,Y=X+$;for(let J=-$;J<Y;J+=$)for(let B=-$;B<Y;B+=$){const H=B<0||B>X||J<0||J>X?24575:0,ie=s.clamp(Math.round(B),0,s.EXTENT),oe=s.clamp(Math.round(J),0,s.EXTENT);z.emplaceBack(ie+H,oe)}const K=(J,B)=>{const H=B*F+J;k.emplaceBack(H+1,H,H+F),k.emplaceBack(H+F,H+F+1,H+1)};for(let J=1;J<129;J++)for(let B=1;B<129;B++)K(B,J);return[0,129].forEach(J=>{for(let B=0;B<130;B++)K(B,J),K(J,B)}),[z,k,32768]}(),T=i.context;this.gridBuffer=T.createVertexBuffer(f,s.posAttributes.members),this.gridIndexBuffer=T.createIndexBuffer(g),this.gridSegments=s.SegmentVector.simpleSegment(0,0,f.length,g.length),this.gridNoSkirtSegments=s.SegmentVector.simpleSegment(0,0,f.length,v),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new _1(l.map),this.orthoMatrix=s.create(),s.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,s.EXTENT,0,s.EXTENT,0,1);const S=T.gl;this._overlapStencilMode=new s.StencilMode({func:S.GEQUAL,mask:255},0,255,S.KEEP,S.KEEP,S.REPLACE),this._previousZoom=i.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=l,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new gu(l.map)}set style(i){i.on("data",this._onStyleDataEvent.bind(this)),i.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=i,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(i,l,f){if(i&&i.terrain){this._style!==i&&(this.style=i),this.enabled=!0;const g=i.terrain.properties;this.sourceCache=i.terrain.drapeRenderMode===0?this._mockSourceCache:i._getSourceCache(g.get("source")),this._exaggeration=g.get("exaggeration");const v=()=>{this.sourceCache.used&&s.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const T=this.getScaledDemTileSize();this.sourceCache.update(l,T,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,v(),this._initializing=!0),v(),l.updateElevation(!0,f),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(l),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(i){this._findCoveringTileCache[i]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const i=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||i.efficiency!==100&&s.warnOnce(`Terrain render cache efficiency is not optimal (${i.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${i.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(i){i.coord&&i.dataType==="source"?this._clearRenderCacheForTile(i.sourceCacheId,i.coord):i.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const i in this._style._sourceCaches)this._style._sourceCaches[i].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(i=>i.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const i=2*this.proxySourceCache.getSource().tileSize;return[i,i]}set useVertexMorphing(i){this._useVertexMorphing=i}updateTileBinding(i){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const l=this.proxySourceCache,f=this.painter.transform;this._initializing&&(this._initializing=f._centerAltitude===0&&this.getAtPointOrZero(s.MercatorCoordinate.fromLngLat(f.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const g=this.proxyCoords=l.getIds().map(C=>{const z=l.getTileByID(C).tileID;return z.projMatrix=f.calculateProjMatrix(z.toUnwrapped()),z});(function(C,z){const k=z.transform.pointCoordinate(z.transform.getCameraPoint()),F=new s.Point(k.x,k.y);C.sort(($,X)=>{if(X.overscaledZ-$.overscaledZ)return X.overscaledZ-$.overscaledZ;const Y=new s.Point($.canonical.x+(1<<$.canonical.z)*$.wrap,$.canonical.y),K=new s.Point(X.canonical.x+(1<<X.canonical.z)*X.wrap,X.canonical.y),J=F.mult(1<<$.canonical.z);return J.x-=.5,J.y-=.5,J.distSqr(Y)-J.distSqr(K)})})(g,this.painter),this._previousZoom=f.zoom;const v=this.proxyToSource||{};this.proxyToSource={},g.forEach(C=>{this.proxyToSource[C.key]={}}),this.terrainTileForTile={};const T=this._style._sourceCaches;for(const C in T){const z=T[C];if(!z.used||(z!==this.sourceCache&&this.resetTileLookupCache(z.id),this._setupProxiedCoordsForOrtho(z,i[C],v),z.usedForTerrain))continue;const k=i[C];z.getSource().reparseOverscaled&&this._assignTerrainTiles(k)}this.proxiedCoords[l.id]=g.map(C=>new g1(C,C.key,this.orthoMatrix)),this._assignTerrainTiles(g),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(v),this.renderingToTexture=!1,this._updateTimestamp=s.exported.now();const S={};this._visibleDemTiles=[];for(const C of this.proxyCoords){const z=this.terrainTileForTile[C.key];if(!z)continue;const k=z.tileID.key;k in S||(this._visibleDemTiles.push(z),S[k]=k)}}_assignTerrainTiles(i){this._initializing||i.forEach(l=>{if(this.terrainTileForTile[l.key])return;const f=this._findTileCoveringTileID(l,this.sourceCache);f&&(this.terrainTileForTile[l.key]=f)})}_prepareDEMTextures(){const i=this.painter.context,l=i.gl;for(const f in this.terrainTileForTile){const g=this.terrainTileForTile[f],v=g.dem;!v||g.demTexture&&!g.needsDEMTextureUpload||(i.activeTexture.set(l.TEXTURE1),fu(this.painter,g,v))}}_prepareDemTileUniforms(i,l,f,g){if(!l||l.demTexture==null)return!1;const v=i.tileID.canonical,T=Math.pow(2,l.tileID.canonical.z-v.z),S=g||"";return f[`u_dem_tl${S}`]=[v.x*T%1,v.y*T%1],f[`u_dem_scale${S}`]=T,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const i=this.painter.context,l=i.gl;if(!this._emptyDepthBufferTexture){const f=new s.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new s.Texture(i,f,l.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let i=0;const l=this._visibleDemTiles.reduce((f,g)=>{if(!g.dem)return f;const v=g.dem.tree.minimums[0];return v>0&&i++,f+v},0);return i?l/i:0}_updateEmptyDEMTexture(){const i=this.painter.context,l=i.gl;i.activeTexture.set(l.TEXTURE2);const f=this._getLoadedAreaMinimum(),g=new s.RGBAImage({width:1,height:1},new Uint8Array(s.DEMData.pack(f,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let v=this._emptyDEMTexture;return v?v.update(g,{premultiply:!1}):v=this._emptyDEMTexture=new s.Texture(i,g,l.RGBA,{premultiply:!1}),v}setupElevationDraw(i,l,f){const g=this.painter.context,v=g.gl,T=(S=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:s.DEMData.getUnpackVector(S),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var S;T.u_dem_size=this.sourceCache.getSource().tileSize,T.u_exaggeration=this.exaggeration();let C=null,z=null,k=1;if(f&&f.morphing&&this._useVertexMorphing){const F=f.morphing.srcDemTile,$=f.morphing.dstDemTile;k=f.morphing.phase,F&&$&&(this._prepareDemTileUniforms(i,F,T,"_prev")&&(z=F),this._prepareDemTileUniforms(i,$,T)&&(C=$))}if(z&&C?(g.activeTexture.set(v.TEXTURE2),C.demTexture.bind(v.NEAREST,v.CLAMP_TO_EDGE,v.NEAREST),g.activeTexture.set(v.TEXTURE4),z.demTexture.bind(v.NEAREST,v.CLAMP_TO_EDGE,v.NEAREST),T.u_dem_lerp=k):(C=this.terrainTileForTile[i.tileID.key],g.activeTexture.set(v.TEXTURE2),(this._prepareDemTileUniforms(i,C,T)?C.demTexture:this.emptyDEMTexture).bind(v.NEAREST,v.CLAMP_TO_EDGE)),g.activeTexture.set(v.TEXTURE3),f&&f.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(v.NEAREST,v.CLAMP_TO_EDGE),this._depthFBO&&(T.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(v.NEAREST,v.CLAMP_TO_EDGE),T.u_depth_size_inv=[1,1]),f&&f.useMeterToDem&&C){const F=(1<<C.tileID.canonical.z)*s.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;T.u_meter_to_dem=F}if(f&&f.labelPlaneMatrixInv&&(T.u_label_plane_matrix_inv=f.labelPlaneMatrixInv),l.setTerrainUniformValues(g,T),this.painter.transform.projection.name==="globe"){const F=this.globeUniformValues(this.painter.transform,i.tileID.canonical,f&&f.useDenormalizedUpVectorScale);l.setGlobeUniformValues(g,F)}}globeUniformValues(i,l,f){const g=i.projection;return{u_tile_tl_up:g.upVector(l,0,0),u_tile_tr_up:g.upVector(l,s.EXTENT,0),u_tile_br_up:g.upVector(l,s.EXTENT,s.EXTENT),u_tile_bl_up:g.upVector(l,0,s.EXTENT),u_tile_up_scale:f?s.globeMetersToEcef(1):g.upVectorScale(l,i.center.lat,i.worldSize).metersToTile}}renderToBackBuffer(i){const l=this.painter,f=this.painter.context;i.length!==0&&(f.bindFramebuffer.set(null),f.viewport.set([0,0,l.width,l.height]),l.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(g,v,T,S,C){if(g.transform.projection.name==="globe")(function(z,k,F,$,X){const Y=z.context,K=Y.gl;let J,B;const H=z.options.showTerrainWireframe?2:0,ie=z.transform,oe=s.globeUseCustomAntiAliasing(z,Y,ie),me=(tt,ke)=>{if(B===tt)return;const Ze=[Cs[tt],"PROJECTION_GLOBE_VIEW"];oe&&Ze.push("CUSTOM_ANTIALIASING"),ke&&Ze.push(Cs[H]),J=z.useProgram("globeRaster",null,Ze),B=tt},ge=z.colorModeForRenderPass(),_e=new s.DepthMode(K.LEQUAL,s.DepthMode.ReadWrite,z.depthRangeFor3D);Io.update(X);const Ee=s.calculateGlobeMercatorMatrix(ie),Te=[s.mercatorXfromLng(ie.center.lng),s.mercatorYfromLat(ie.center.lat)],ze=H?[!1,!0]:[!1],nt=z.globeSharedBuffers,Pe=[ie.width*s.exported.devicePixelRatio,ie.height*s.exported.devicePixelRatio],qe=Float32Array.from(ie.globeMatrix),Re={useDenormalizedUpVectorScale:!0};if(ze.forEach(tt=>{const ke=z.transform,Ze=m1(ke.zoom)*k.exaggeration();B=-1;const it=tt?K.LINES:K.TRIANGLES;for(const Qe of $){const ot=F.getTile(Qe),Ct=s.StencilMode.disabled,Ot=k.prevTerrainTileForTile[Qe.key],xt=k.terrainTileForTile[Qe.key];ca(Ot,xt)&&Io.newMorphing(Qe.key,Ot,xt,X,250),Y.activeTexture.set(K.TEXTURE0),ot.texture.bind(K.LINEAR,K.CLAMP_TO_EDGE);const zt=Io.getMorphValuesForProxy(Qe.key),Kt=zt?1:0;zt&&s.extend$1(Re,{morphing:{srcDemTile:zt.from,dstDemTile:zt.to,phase:s.easeCubicInOut(zt.phase)}});const Wt=s.tileCornersToBounds(Qe.canonical),St=s.getLatitudinalLod(Wt.getCenter().lat),pn=s.getGridMatrix(Qe.canonical,Wt,St,ke.worldSize/ke._pixelsPerMercatorPixel),gn=s.globeNormalizeECEF(s.globeTileBounds(Qe.canonical)),yn=f1(ke.projMatrix,qe,Ee,gn,s.globeToMercatorTransition(ke.zoom),Te,ke.frustumCorners.TL,ke.frustumCorners.TR,ke.frustumCorners.BR,ke.frustumCorners.BL,ke.globeCenterInViewSpace,ke.globeRadius,Pe,Ze,pn);if(me(Kt,tt),k.setupElevationDraw(ot,J,Re),z.prepareDrawProgram(Y,J,Qe.toUnwrapped()),nt){const[vn,Lr,xr]=tt?nt.getWirefameBuffers(z.context,St):nt.getGridBuffers(St,Ze!==0);J.draw(Y,it,_e,Ct,ge,s.CullFaceMode.backCCW,yn,"globe_raster",vn,Lr,xr)}}}),nt){const tt=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];oe&&tt.push("CUSTOM_ANTIALIASING"),J=z.useProgram("globeRaster",null,tt);for(const ke of $){const{x:Ze,y:it,z:Qe}=ke.canonical,ot=it===0,Ct=it===(1<<Qe)-1,[Ot,xt,zt,Kt]=nt.getPoleBuffers(Qe);if(Kt&&(ot||Ct)){const Wt=F.getTile(ke);Y.activeTexture.set(K.TEXTURE0),Wt.texture.bind(K.LINEAR,K.CLAMP_TO_EDGE);let St=s.globePoleMatrixForTile(Qe,Ze,ie);const pn=s.globeNormalizeECEF(s.globeTileBounds(ke.canonical)),gn=(yn,vn)=>yn.draw(Y,K.TRIANGLES,_e,s.StencilMode.disabled,ge,s.CullFaceMode.disabled,f1(ie.projMatrix,St,St,pn,0,Te,ie.frustumCorners.TL,ie.frustumCorners.TR,ie.frustumCorners.BR,ie.frustumCorners.BL,ie.globeCenterInViewSpace,ie.globeRadius,Pe,0),"globe_pole_raster",vn,zt,Kt);k.setupElevationDraw(Wt,J,Re),z.prepareDrawProgram(Y,J,ke.toUnwrapped()),ot&&gn(J,Ot),Ct&&(St=s.scale(s.create(),St,[1,-1,1]),gn(J,xt))}}}})(g,v,T,S,C);else{const z=g.context,k=z.gl;let F,$;const X=g.options.showTerrainWireframe?2:0,Y=(ie,oe)=>{if($===ie)return;const me=[Cs[ie]];oe&&me.push(Cs[X]),F=g.useProgram("terrainRaster",null,me),$=ie},K=g.colorModeForRenderPass(),J=new s.DepthMode(k.LEQUAL,s.DepthMode.ReadWrite,g.depthRangeFor3D);Io.update(C);const B=g.transform,H=m1(B.zoom)*v.exaggeration();(X?[!1,!0]:[!1]).forEach(ie=>{$=-1;const oe=ie?k.LINES:k.TRIANGLES,[me,ge]=ie?v.getWirefameBuffer():[v.gridIndexBuffer,v.gridSegments];for(const _e of S){const Ee=T.getTile(_e),Te=s.StencilMode.disabled,ze=v.prevTerrainTileForTile[_e.key],nt=v.terrainTileForTile[_e.key];ca(ze,nt)&&Io.newMorphing(_e.key,ze,nt,C,250),z.activeTexture.set(k.TEXTURE0),Ee.texture.bind(k.LINEAR,k.CLAMP_TO_EDGE,k.LINEAR_MIPMAP_NEAREST);const Pe=Io.getMorphValuesForProxy(_e.key),qe=Pe?1:0;let Re;Pe&&(Re={morphing:{srcDemTile:Pe.from,dstDemTile:Pe.to,phase:s.easeCubicInOut(Pe.phase)}});const tt=la(_e.projMatrix,$2(_e.canonical,B.renderWorldCopies)?H/10:H);Y(qe,ie),v.setupElevationDraw(Ee,F,Re),g.prepareDrawProgram(z,F,_e.toUnwrapped()),F.draw(z,oe,J,Te,K,s.CullFaceMode.backCCW,tt,"terrain_raster",v.gridBuffer,me,ge)}})}}(l,this,this.proxySourceCache,i,this._updateTimestamp),this.renderingToTexture=!0,l.gpuTimingDeferredRenderEnd(),i.splice(0,i.length))}renderBatch(i){if(this._drapedRenderBatches.length===0)return i+1;this.renderingToTexture=!0;const l=this.painter,f=this.painter.context,g=this.proxySourceCache,v=this.proxiedCoords[g.id],T=this._drapedRenderBatches.shift(),S=[],C=l.style.order;let z=0;for(const k of v){const F=g.getTileByID(k.proxyTileKey),$=g.proxyCachedFBO[k.key]?g.proxyCachedFBO[k.key][i]:void 0,X=$!==void 0?g.renderCache[$]:this.pool[z++],Y=$!==void 0;if(F.texture=X.tex,Y&&!X.dirty){S.push(F.tileID);continue}let K;f.bindFramebuffer.set(X.fb.framebuffer),this.renderedToTile=!1,X.dirty&&(f.clear({color:s.Color.transparent,stencil:0}),X.dirty=!1);for(let J=T.start;J<=T.end;++J){const B=l.style._layers[C[J]];if(B.isHidden(l.transform.zoom))continue;const H=l.style._getLayerSourceCache(B),ie=H?this.proxyToSource[k.key][H.id]:[k];if(!ie)continue;const oe=ie;f.viewport.set([0,0,X.fb.width,X.fb.height]),K!==(H?H.id:null)&&(this._setupStencil(X,ie,B,H),K=H?H.id:null),l.renderLayer(l,H,B,oe)}this.renderedToTile?(X.dirty=!0,S.push(F.tileID)):Y||--z,z===5&&(z=0,this.renderToBackBuffer(S))}return this.renderToBackBuffer(S),this.renderingToTexture=!1,f.bindFramebuffer.set(null),f.viewport.set([0,0,l.width,l.height]),T.end+1}postRender(){}renderCacheEfficiency(i){const l=i.order.length;if(l===0)return{efficiency:100};let f,g=0,v=0,T=!1;for(let S=0;S<l;++S){const C=i._layers[i.order[S]];this._style.isLayerDraped(C)?(T&&++g,++v):T||(T=!0,f=C.id)}return v===0?{efficiency:100}:{efficiency:100*(1-g/v),firstUndrapedLayer:f}}getMinElevationBelowMSL(){let i=0;return this._visibleDemTiles.filter(l=>l.dem).forEach(l=>{i=Math.min(i,l.dem.tree.minimums[0])}),i===0?i:(i-30)*this._exaggeration}raycast(i,l,f){if(!this._visibleDemTiles)return null;const g=this._visibleDemTiles.filter(v=>v.dem).map(v=>{const T=v.tileID,S=1<<T.overscaledZ,{x:C,y:z}=T.canonical,k=C/S,F=(C+1)/S,$=z/S,X=(z+1)/S;return{minx:k,miny:$,maxx:F,maxy:X,t:v.dem.tree.raycastRoot(k,$,F,X,i,l,f),tile:v}});g.sort((v,T)=>(v.t!==null?v.t:Number.MAX_VALUE)-(T.t!==null?T.t:Number.MAX_VALUE));for(const v of g){if(v.t==null)return null;const T=v.tile.dem.tree.raycast(v.minx,v.miny,v.maxx,v.maxy,i,l,f);if(T!=null)return T}return null}_createFBO(){const i=this.painter.context,l=i.gl,f=this.drapeBufferSize;i.activeTexture.set(l.TEXTURE0);const g=new s.Texture(i,{width:f[0],height:f[1],data:null},l.RGBA);g.bind(l.LINEAR,l.CLAMP_TO_EDGE);const v=i.createFramebuffer(f[0],f[1],!1);return v.colorAttachment.set(g.texture),v.depthAttachment=new le(i,v.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=i.createRenderbuffer(i.gl.DEPTH_STENCIL,f[0],f[1]),this._stencilRef=0,v.depthAttachment.set(this._sharedDepthStencil),i.clear({stencil:0})):v.depthAttachment.set(this._sharedDepthStencil),i.extTextureFilterAnisotropic&&!i.extTextureFilterAnisotropicForceOff&&l.texParameterf(l.TEXTURE_2D,i.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,i.extTextureFilterAnisotropicMax),{fb:v,tex:g,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const i in this._style._sourceCaches)if(this._style._sourceCaches[i].hasTransition())return!0;return this._style.order.some(i=>{const l=this._style._layers[i],f=l.isHidden(this.painter.transform.zoom);return l.type==="custom"?!f&&l.shouldRedrape():!f&&l.hasTransition()})}_clearLineLayersFromRenderCache(){let i=!1;for(const f of this._style._getSources())if(f instanceof je){i=!0;break}if(!i)return;const l={};for(let f=0;f<this._style.order.length;++f){const g=this._style._layers[this._style.order[f]],v=this._style._getLayerSourceCache(g);if(v&&!l[v.id]&&!g.isHidden(this.painter.transform.zoom)&&g.type==="line"&&g.widthExpression()instanceof s.ZoomDependentExpression){l[v.id]=!0;for(const T of this.proxyCoords){const S=this.proxyToSource[T.key][v.id];if(S)for(const C of S)this._clearRenderCacheForTile(v.id,C)}}}}_clearRasterLayersFromRenderCache(){let i=!1;for(const f in this._style._sourceCaches)if(this._style._sourceCaches[f]._source instanceof De){i=!0;break}if(!i)return;const l={};for(let f=0;f<this._style.order.length;++f){const g=this._style._layers[this._style.order[f]],v=this._style._getLayerSourceCache(g);if(!v||l[v.id]||g.isHidden(this.painter.transform.zoom)||g.type!=="raster")continue;const T=g.paint.get("raster-fade-duration");for(const S of this.proxyCoords){const C=this.proxyToSource[S.key][v.id];if(C)for(const z of C){const k=_u(v.getTile(z),v.findLoadedParent(z,0),v,this.painter.transform,T);(k.opacity!==1||k.mix!==0)&&this._clearRenderCacheForTile(v.id,z)}}}}_setupDrapedRenderBatches(){const i=this._style.order,l=i.length;if(l===0)return;const f=[];let g,v=0,T=this._style._layers[i[v]];for(;!this._style.isLayerDraped(T)&&T.isHidden(this.painter.transform.zoom)&&++v<l;)T=this._style._layers[i[v]];for(;v<l;++v){const S=this._style._layers[i[v]];S.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(S)?g===void 0&&(g=v):g!==void 0&&(f.push({start:g,end:v-1}),g=void 0))}g!==void 0&&f.push({start:g,end:v-1}),this._drapedRenderBatches=f}_setupRenderCache(i){const l=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,l.renderCache.length>l.renderCachePool.length){const T=Object.values(l.proxyCachedFBO);l.proxyCachedFBO={};for(let S=0;S<T.length;++S){const C=Object.values(T[S]);l.renderCachePool.push(...C)}}return}this._clearRasterLayersFromRenderCache();const f=this.proxyCoords,g=this._tilesDirty;for(let T=f.length-1;T>=0;T--){const S=f[T];if(l.getTileByID(S.key),l.proxyCachedFBO[S.key]!==void 0){const C=i[S.key],z=this.proxyToSource[S.key];let k=0;for(const F in z){const $=z[F],X=C[F];if(!X||X.length!==$.length||$.some((Y,K)=>Y!==X[K]||g[F]&&g[F].hasOwnProperty(Y.key))){k=-1;break}++k}for(const F in l.proxyCachedFBO[S.key])l.renderCache[l.proxyCachedFBO[S.key][F]].dirty=k<0||k!==Object.values(C).length}}const v=[...this._drapedRenderBatches];v.sort((T,S)=>S.end-S.start-(T.end-T.start));for(const T of v)for(const S of f){if(l.proxyCachedFBO[S.key])continue;let C=l.renderCachePool.pop();C===void 0&&l.renderCache.length<50&&(C=l.renderCache.length,l.renderCache.push(this._createFBO())),C!==void 0&&(l.proxyCachedFBO[S.key]={},l.proxyCachedFBO[S.key][T.start]=C,l.renderCache[C].dirty=!0)}this._tilesDirty={}}_setupStencil(i,l,f,g){if(!g||!this._sourceTilesOverlap[g.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const v=this.painter.context,T=v.gl;if(l.length<=1)return void(this._overlapStencilType=!1);let S;if(f.isTileClipped())S=l.length,this._overlapStencilMode.test={func:T.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(l[0].overscaledZ>l[l.length-1].overscaledZ))return void(this._overlapStencilType=!1);S=1,this._overlapStencilMode.test={func:T.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+S>255&&(v.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=S,this._overlapStencilMode.ref=this._stencilRef,f.isTileClipped()&&this._renderTileClippingMasks(l,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(i){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[i.key]),this._overlapStencilMode):s.StencilMode.disabled}_renderTileClippingMasks(i,l){const f=this.painter,g=this.painter.context,v=g.gl;f._tileClippingMaskIDs={},g.setColorMode(s.ColorMode.disabled),g.setDepthMode(s.DepthMode.disabled);const T=f.useProgram("clippingMask");for(const S of i){const C=f._tileClippingMaskIDs[S.key]=--l;T.draw(g,v.TRIANGLES,s.DepthMode.disabled,new s.StencilMode({func:v.ALWAYS,mask:0},C,255,v.KEEP,v.KEEP,v.REPLACE),s.ColorMode.disabled,s.CullFaceMode.disabled,fl(S.projMatrix),"$clipping",f.tileExtentBuffer,f.quadTriangleIndexBuffer,f.tileExtentSegments)}}pointCoordinate(i){const l=this.painter.transform;if(i.x<0||i.x>l.width||i.y<0||i.y>l.height)return null;const f=[i.x,i.y,1,1];s.transformMat4$1(f,f,l.pixelMatrixInverse),s.scale$1(f,f,1/f[3]),f[0]/=l.worldSize,f[1]/=l.worldSize;const g=l._camera.position,v=s.mercatorZfromAltitude(1,l.center.lat),T=[g[0],g[1],g[2]/v,0],S=s.subtract([],f.slice(0,3),T);s.normalize(S,S);const C=this.raycast(T,S,this._exaggeration);return C!==null&&C?(s.scaleAndAdd(T,T,S,C),T[3]=T[2],T[2]*=v,T):null}drawDepth(){const i=this.painter,l=i.context,f=this.proxySourceCache,g=Math.ceil(i.width),v=Math.ceil(i.height);if(!this._depthFBO||this._depthFBO.width===g&&this._depthFBO.height===v||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const T=l.gl,S=l.createFramebuffer(g,v,!0);l.activeTexture.set(T.TEXTURE0);const C=new s.Texture(l,{width:g,height:v,data:null},T.RGBA);C.bind(T.NEAREST,T.CLAMP_TO_EDGE),S.colorAttachment.set(C.texture);const z=l.createRenderbuffer(l.gl.DEPTH_COMPONENT16,g,v);S.depthAttachment.set(z),this._depthFBO=S,this._depthTexture=C}l.bindFramebuffer.set(this._depthFBO.framebuffer),l.viewport.set([0,0,g,v]),function(T,S,C,z){if(T.transform.projection.name==="globe")return;const k=T.context,F=k.gl;k.clear({depth:1});const $=T.useProgram("terrainDepth"),X=new s.DepthMode(F.LESS,s.DepthMode.ReadWrite,T.depthRangeFor3D);for(const Y of z){const K=C.getTile(Y),J=la(Y.projMatrix,0);S.setupElevationDraw(K,$),$.draw(k,F.TRIANGLES,X,s.StencilMode.disabled,s.ColorMode.unblended,s.CullFaceMode.backCCW,J,"terrain_depth",S.gridBuffer,S.gridIndexBuffer,S.gridNoSkirtSegments)}}(i,this,f,this.proxyCoords)}_setupProxiedCoordsForOrtho(i,l,f){if(i.getSource()instanceof It)return this._setupProxiedCoordsForImageSource(i,l,f);this._findCoveringTileCache[i.id]=this._findCoveringTileCache[i.id]||{};const g=this.proxiedCoords[i.id]=[],v=this.proxyCoords;for(let S=0;S<v.length;S++){const C=v[S],z=this._findTileCoveringTileID(C,i);if(z){const k=this._createProxiedId(C,z,f[C.key]&&f[C.key][i.id]);g.push(k),this.proxyToSource[C.key][i.id]=[k]}}let T=!1;for(let S=0;S<l.length;S++){const C=i.getTile(l[S]);if(!C||!C.hasData())continue;const z=this._findTileCoveringTileID(C.tileID,this.proxySourceCache);if(z&&z.tileID.canonical.z!==C.tileID.canonical.z){const k=this.proxyToSource[z.tileID.key][i.id],F=this._createProxiedId(z.tileID,C,f[z.tileID.key]&&f[z.tileID.key][i.id]);k?k.splice(k.length-1,0,F):this.proxyToSource[z.tileID.key][i.id]=[F],g.push(F),T=!0}}this._sourceTilesOverlap[i.id]=T}_setupProxiedCoordsForImageSource(i,l,f){if(!i.getSource().loaded())return;const g=this.proxiedCoords[i.id]=[],v=this.proxyCoords,T=i.getSource(),S=new s.Point(T.tileID.x,T.tileID.y)._div(1<<T.tileID.z),C=T.coordinates.map(s.MercatorCoordinate.fromLngLat).reduce((k,F)=>(k.min.x=Math.min(k.min.x,F.x-S.x),k.min.y=Math.min(k.min.y,F.y-S.y),k.max.x=Math.max(k.max.x,F.x-S.x),k.max.y=Math.max(k.max.y,F.y-S.y),k),{min:new s.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new s.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),z=(k,F)=>{const $=k.wrap+k.canonical.x/(1<<k.canonical.z),X=k.canonical.y/(1<<k.canonical.z),Y=s.EXTENT/(1<<k.canonical.z),K=F.wrap+F.canonical.x/(1<<F.canonical.z),J=F.canonical.y/(1<<F.canonical.z);return $+Y<K+C.min.x||$>K+C.max.x||X+Y<J+C.min.y||X>J+C.max.y};for(let k=0;k<v.length;k++){const F=v[k];for(let $=0;$<l.length;$++){const X=i.getTile(l[$]);if(!X||!X.hasData()||z(F,X.tileID))continue;const Y=this._createProxiedId(F,X,f[F.key]&&f[F.key][i.id]),K=this.proxyToSource[F.key][i.id];K?K.push(Y):this.proxyToSource[F.key][i.id]=[Y],g.push(Y)}}}_createProxiedId(i,l,f){let g=this.orthoMatrix;if(f){const v=f.find(T=>T.key===l.tileID.key);if(v)return v}if(l.tileID.key!==i.key){const v=i.canonical.z-l.tileID.canonical.z;let T,S,C;g=s.create();const z=l.tileID.wrap-i.wrap<<i.overscaledZ;v>0?(T=s.EXTENT>>v,S=T*((l.tileID.canonical.x<<v)-i.canonical.x+z),C=T*((l.tileID.canonical.y<<v)-i.canonical.y)):(T=s.EXTENT<<-v,S=s.EXTENT*(l.tileID.canonical.x-(i.canonical.x+z<<-v)),C=s.EXTENT*(l.tileID.canonical.y-(i.canonical.y<<-v))),s.ortho(g,0,T,0,T,0,1),s.translate(g,g,[S,C,0])}return new g1(l.tileID,i.key,g)}_findTileCoveringTileID(i,l){let f=l.getTile(i);if(f&&f.hasData())return f;const g=this._findCoveringTileCache[l.id],v=g[i.key];if(f=v?l.getTileByID(v):null,f&&f.hasData()||v===null)return f;let T=f?f.tileID:i,S=T.overscaledZ;const C=l.getSource().minzoom,z=[];if(!v){const F=l.getSource().maxzoom;if(i.canonical.z>=F){const $=i.canonical.z-F;l.getSource().reparseOverscaled?(S=Math.max(i.canonical.z+2,l.transform.tileZoom),T=new s.OverscaledTileID(S,i.wrap,F,i.canonical.x>>$,i.canonical.y>>$)):$!==0&&(S=F,T=new s.OverscaledTileID(S,i.wrap,F,i.canonical.x>>$,i.canonical.y>>$))}T.key!==i.key&&(z.push(T.key),f=l.getTile(T))}const k=F=>{z.forEach($=>{g[$]=F}),z.length=0};for(S-=1;S>=C&&(!f||!f.hasData());S--){f&&k(f.tileID.key);const F=T.calculateScaledKey(S);if(f=l.getTileByID(F),f&&f.hasData())break;const $=g[F];if($===null)break;$===void 0?z.push(F):f=l.getTileByID($)}return k(f?f.tileID.key:null),f&&f.hasData()?f:null}findDEMTileFor(i){return this.enabled?this._findTileCoveringTileID(i,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(i,l){let f=this._tilesDirty[i];f||(f=this._tilesDirty[i]={}),f[l.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const i=function(l){let f=0;const g=new s.StructArrayLayout2ui4,v=131;for(let T=1;T<129;T++){for(let S=1;S<129;S++)f=T*v+S,g.emplaceBack(f,f+1),g.emplaceBack(f,f+v),g.emplaceBack(f+1,f+v),T===128&&g.emplaceBack(f+v,f+v+1);g.emplaceBack(f+1,f+1+v)}return g}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(i),this.wireframeSegments=s.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,i.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class rn{static cacheKey(i,l,f,g){let v=`${l}${g?g.cacheKey:""}`;for(const T of f)i.usedDefines.includes(T)&&(v+=`/${T}`);return v}constructor(i,l,f,g,v,T){const S=i.gl;this.program=S.createProgram();const C=function(B){const H=[];for(let ie=0;ie<B.length;ie++){if(B[ie]===null)continue;const oe=B[ie].split(" ");H.push(oe.pop())}return H}(f.staticAttributes),z=g?g.getBinderAttributes():[],k=C.concat(z);let F=g?g.defines():[];F=F.concat(T.map(B=>`#define ${B}`));const $=i.isWebGL2?`#version 300 es
`:"",X=$+F.concat(i.extStandardDerivatives&&$.length===0?`#extension GL_OES_standard_derivatives : enable
`.concat(hu):hu,hu,p1,j2.fragmentSource,sa.fragmentSource,f.fragmentSource).join(`
`),Y=$+F.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,p1,j2.vertexSource,sa.vertexSource,d1.vertexSource,f.vertexSource).join(`
`),K=S.createShader(S.FRAGMENT_SHADER);if(S.isContextLost())return void(this.failedToCreate=!0);S.shaderSource(K,X),S.compileShader(K),S.attachShader(this.program,K);const J=S.createShader(S.VERTEX_SHADER);if(S.isContextLost())this.failedToCreate=!0;else{S.shaderSource(J,Y),S.compileShader(J),S.attachShader(this.program,J),this.attributes={},this.numAttributes=k.length;for(let B=0;B<this.numAttributes;B++)k[B]&&(S.bindAttribLocation(this.program,B,k[B]),this.attributes[k[B]]=B);S.linkProgram(this.program),S.deleteShader(J),S.deleteShader(K),this.fixedUniforms=v(i),this.binderUniforms=g?g.getUniforms(i):[],T.includes("TERRAIN")&&(this.terrainUniforms=(B=>({u_dem:new s.Uniform1i(B),u_dem_prev:new s.Uniform1i(B),u_dem_unpack:new s.Uniform4f(B),u_dem_tl:new s.Uniform2f(B),u_dem_scale:new s.Uniform1f(B),u_dem_tl_prev:new s.Uniform2f(B),u_dem_scale_prev:new s.Uniform1f(B),u_dem_size:new s.Uniform1f(B),u_dem_lerp:new s.Uniform1f(B),u_exaggeration:new s.Uniform1f(B),u_depth:new s.Uniform1i(B),u_depth_size_inv:new s.Uniform2f(B),u_meter_to_dem:new s.Uniform1f(B),u_label_plane_matrix_inv:new s.UniformMatrix4f(B)}))(i)),T.includes("GLOBE")&&(this.globeUniforms=(B=>({u_tile_tl_up:new s.Uniform3f(B),u_tile_tr_up:new s.Uniform3f(B),u_tile_br_up:new s.Uniform3f(B),u_tile_bl_up:new s.Uniform3f(B),u_tile_up_scale:new s.Uniform1f(B)}))(i)),T.includes("FOG")&&(this.fogUniforms=(B=>({u_fog_matrix:new s.UniformMatrix4f(B),u_fog_range:new s.Uniform2f(B),u_fog_color:new s.Uniform4f(B),u_fog_horizon_blend:new s.Uniform1f(B),u_fog_temporal_offset:new s.Uniform1f(B),u_frustum_tl:new s.Uniform3f(B),u_frustum_tr:new s.Uniform3f(B),u_frustum_br:new s.Uniform3f(B),u_frustum_bl:new s.Uniform3f(B),u_globe_pos:new s.Uniform3f(B),u_globe_radius:new s.Uniform1f(B),u_globe_transition:new s.Uniform1f(B),u_is_globe:new s.Uniform1i(B),u_viewport:new s.Uniform2f(B)}))(i))}}setTerrainUniformValues(i,l){if(!this.terrainUniforms)return;const f=this.terrainUniforms;if(!this.failedToCreate){i.program.set(this.program);for(const g in l)f[g]&&f[g].set(this.program,g,l[g])}}setGlobeUniformValues(i,l){if(!this.globeUniforms)return;const f=this.globeUniforms;if(!this.failedToCreate){i.program.set(this.program);for(const g in l)f[g]&&f[g].set(this.program,g,l[g])}}setFogUniformValues(i,l){if(!this.fogUniforms)return;const f=this.fogUniforms;if(!this.failedToCreate){i.program.set(this.program);for(const g in l)f[g].set(this.program,g,l[g])}}draw(i,l,f,g,v,T,S,C,z,k,F,$,X,Y,K){const J=i.gl;if(this.failedToCreate)return;i.program.set(this.program),i.setDepthMode(f),i.setStencilMode(g),i.setColorMode(v),i.setCullFace(T);for(const H of Object.keys(this.fixedUniforms))this.fixedUniforms[H].set(this.program,H,S[H]);Y&&Y.setUniforms(this.program,i,this.binderUniforms,$,{zoom:X});const B={[J.LINES]:2,[J.TRIANGLES]:3,[J.LINE_STRIP]:1}[l];for(const H of F.get()){const ie=H.vaos||(H.vaos={});(ie[C]||(ie[C]=new Z5)).bind(i,this,z,Y?Y.getPaintVertexBuffers():[],k,H.vertexOffset,K||[]),J.drawElements(l,H.primitiveLength*B,J.UNSIGNED_SHORT,H.primitiveOffset*B*2)}}}function ml(h,i){const l=Math.pow(2,i.tileID.overscaledZ),f=i.tileSize*Math.pow(2,h.transform.tileZoom)/l,g=f*(i.tileID.canonical.x+i.tileID.wrap*l),v=f*i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture.size,u_tile_units_to_pixels:1/Tt(i,1,h.transform.tileZoom),u_pixel_coord_upper:[g>>16,v>>16],u_pixel_coord_lower:[65535&g,65535&v]}}const Z2=s.create(),vu=(h,i,l,f,g,v,T,S,C,z,k)=>{const F=i.style.light,$=F.properties.get("position"),X=[$.x,$.y,$.z],Y=s.create$1();F.properties.get("anchor")==="viewport"&&(s.fromRotation(Y,-i.transform.angle),s.transformMat3(X,X,Y));const K=F.properties.get("color"),J=i.transform,B={u_matrix:h,u_lightpos:X,u_lightintensity:F.properties.get("intensity"),u_lightcolor:[K.r,K.g,K.b],u_vertical_gradient:+l,u_opacity:f,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Z2,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:g,u_edge_radius:v};return J.projection.name==="globe"&&(B.u_tile_id=[T.canonical.x,T.canonical.y,1<<T.canonical.z],B.u_zoom_transition=C,B.u_inv_rot_matrix=k,B.u_merc_center=z,B.u_up_dir=J.projection.upVector(new s.CanonicalTileID(0,0,0),z[0]*s.EXTENT,z[1]*s.EXTENT),B.u_height_lift=S),B},q2=(h,i,l,f,g,v,T,S,C,z,k,F)=>{const $=vu(h,i,l,f,g,v,T,C,z,k,F),X={u_height_factor:-Math.pow(2,T.overscaledZ)/S.tileSize/8};return s.extend($,ml(i,S),X)},Ps=h=>({u_matrix:h}),xu=(h,i,l)=>s.extend(Ps(h),ml(i,l)),q5=(h,i)=>({u_matrix:h,u_world:i}),W5=(h,i,l,f)=>s.extend(xu(h,i,l),{u_world:f}),H5=s.create(),wu=(h,i,l,f,g,v)=>{const T=h.transform,S=T.projection.name==="globe";let C;if(v.paint.get("circle-pitch-alignment")==="map")if(S){const k=s.globePixelsToTileUnits(T.zoom,i.canonical)*T._pixelsPerMercatorPixel;C=Float32Array.from([k,0,0,k])}else C=T.calculatePixelsToTileUnitsMatrix(l);else C=new Float32Array([T.pixelsToGLUnits[0],0,0,T.pixelsToGLUnits[1]]);const z={u_camera_to_center_distance:T.cameraToCenterDistance,u_matrix:h.translatePosMatrix(i.projMatrix,l,v.paint.get("circle-translate"),v.paint.get("circle-translate-anchor")),u_device_pixel_ratio:s.exported.devicePixelRatio,u_extrude_scale:C,u_inv_rot_matrix:H5,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(S){z.u_inv_rot_matrix=f,z.u_merc_center=g,z.u_tile_id=[i.canonical.x,i.canonical.y,1<<i.canonical.z],z.u_zoom_transition=s.globeToMercatorTransition(T.zoom);const k=g[0]*s.EXTENT,F=g[1]*s.EXTENT;z.u_up_dir=T.projection.upVector(new s.CanonicalTileID(0,0,0),k,F)}return z},bu=h=>{const i=[];return h.paint.get("circle-pitch-alignment")==="map"&&i.push("PITCH_WITH_MAP"),h.paint.get("circle-pitch-scale")==="map"&&i.push("SCALE_WITH_MAP"),i},Tu=(h,i,l,f)=>{const g=s.EXTENT/l.tileSize;return{u_matrix:h,u_camera_to_center_distance:i.getCameraToCenterDistance(f),u_extrude_scale:[i.pixelsToGLUnits[0]/g,i.pixelsToGLUnits[1]/g]}},y1=(h,i,l=1)=>({u_matrix:h,u_color:i,u_overlay:0,u_overlay_scale:l}),W2=s.create(),H2=(h,i,l,f,g,v,T)=>{const S=h.transform,C=S.projection.name==="globe",z=C?s.globePixelsToTileUnits(S.zoom,i.canonical)*S._pixelsPerMercatorPixel:Tt(l,1,v),k={u_matrix:i.projMatrix,u_extrude_scale:z,u_intensity:T,u_inv_rot_matrix:W2,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(C){k.u_inv_rot_matrix=f,k.u_merc_center=g,k.u_tile_id=[i.canonical.x,i.canonical.y,1<<i.canonical.z],k.u_zoom_transition=s.globeToMercatorTransition(S.zoom);const F=g[0]*s.EXTENT,$=g[1]*s.EXTENT;k.u_up_dir=S.projection.upVector(new s.CanonicalTileID(0,0,0),F,$)}return k},X5=(h,i,l,f,g,v,T)=>{const S=h.transform,C=S.calculatePixelsToTileUnitsMatrix(i);return{u_matrix:Eu(h,i,l,f),u_pixels_to_tile_units:C,u_device_pixel_ratio:v,u_units_to_pixels:[1/S.pixelsToGLUnits[0],1/S.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:g,u_texsize:gl(l)?i.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:ua(i,h.transform),u_alpha_discard_threshold:0,u_trim_offset:T}},_l=(h,i,l,f,g)=>{const v=h.transform;return{u_matrix:Eu(h,i,l,f),u_texsize:i.imageAtlasTexture.size,u_pixels_to_tile_units:v.calculatePixelsToTileUnitsMatrix(i),u_device_pixel_ratio:g,u_image:0,u_tile_units_to_pixels:ua(i,v),u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function ua(h,i){return 1/Tt(h,1,i.tileZoom)}function Eu(h,i,l,f){return h.translatePosMatrix(f||i.tileID.projMatrix,i,l.paint.get("line-translate"),l.paint.get("line-translate-anchor"))}function gl(h){const i=h.paint.get("line-dasharray").value;return i.value||i.kind!=="constant"}const Su=(h,i,l,f,g,v)=>{return{u_matrix:h,u_tl_parent:i,u_scale_parent:l,u_fade_t:f.mix,u_opacity:f.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(S=g.paint.get("raster-saturation"),S>0?1-1/(1.001-S):-S),u_contrast_factor:(T=g.paint.get("raster-contrast"),T>0?1/(1-T):1+T),u_spin_weights:ro(g.paint.get("raster-hue-rotate")),u_perspective_transform:v};var T,S};function ro(h){h*=Math.PI/180;const i=Math.sin(h),l=Math.cos(h);return[(2*l+1)/3,(-Math.sqrt(3)*i-l+1)/3,(Math.sqrt(3)*i-l+1)/3]}const v1=s.create(),Mu=(h,i,l,f,g,v,T,S,C,z,k,F,$,X,Y,K)=>{const J=g.transform,B={u_is_size_zoom_constant:+(h==="constant"||h==="source"),u_is_size_feature_constant:+(h==="constant"||h==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:J.cameraToCenterDistance,u_rotate_symbol:+l,u_aspect_ratio:J.width/J.height,u_fade_change:g.options.fadeDuration?g.symbolFadeChange:1,u_matrix:v,u_label_plane_matrix:T,u_coord_matrix:S,u_is_text:+C,u_pitch_with_map:+f,u_texsize:z,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:v1,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:v1,u_up_vector:[0,-1,0]};return K.name==="globe"&&(B.u_tile_id=[k.canonical.x,k.canonical.y,1<<k.canonical.z],B.u_zoom_transition=F,B.u_inv_rot_matrix=X,B.u_merc_center=$,B.u_camera_forward=J._camera.forward(),B.u_ecef_origin=s.globeECEFOrigin(J.globeMatrix,k.toUnwrapped()),B.u_tile_matrix=Float32Array.from(J.globeMatrix),B.u_up_vector=Y),B},x1=(h,i,l,f,g,v,T,S,C,z,k,F,$,X,Y,K,J)=>s.extend(Mu(h,i,l,f,g,v,T,S,C,z,F,$,X,Y,K,J),{u_gamma_scale:f?g.transform.cameraToCenterDistance*Math.cos(g.terrain?0:g.transform._pitch):1,u_device_pixel_ratio:s.exported.devicePixelRatio,u_is_halo:+k}),X2=(h,i,l,f,g,v,T,S,C,z,k,F,$,X,Y,K)=>s.extend(x1(h,i,l,f,g,v,T,S,!0,C,!0,k,F,$,X,Y,K),{u_texsize_icon:z,u_texture_icon:1}),Cu=(h,i,l)=>({u_matrix:h,u_opacity:i,u_color:l}),K5=(h,i,l,f,g)=>s.extend(function(v,T,S){const C=T.imageManager.getPattern(v.toString()),{width:z,height:k}=T.imageManager.getPixelSize(),F=Math.pow(2,S.tileID.overscaledZ),$=S.tileSize*Math.pow(2,T.transform.tileZoom)/F,X=$*(S.tileID.canonical.x+S.tileID.wrap*F),Y=$*S.tileID.canonical.y;return{u_image:0,u_pattern_tl:C.tl,u_pattern_br:C.br,u_texsize:[z,k],u_pattern_size:C.displaySize,u_tile_units_to_pixels:1/Tt(S,1,T.transform.tileZoom),u_pixel_coord_upper:[X>>16,Y>>16],u_pixel_coord_lower:[65535&X,65535&Y]}}(f,l,g),{u_matrix:h,u_opacity:i}),Pu={fillExtrusion:h=>({u_matrix:new s.UniformMatrix4f(h),u_lightpos:new s.Uniform3f(h),u_lightintensity:new s.Uniform1f(h),u_lightcolor:new s.Uniform3f(h),u_vertical_gradient:new s.Uniform1f(h),u_opacity:new s.Uniform1f(h),u_edge_radius:new s.Uniform1f(h),u_ao:new s.Uniform2f(h),u_tile_id:new s.Uniform3f(h),u_zoom_transition:new s.Uniform1f(h),u_inv_rot_matrix:new s.UniformMatrix4f(h),u_merc_center:new s.Uniform2f(h),u_up_dir:new s.Uniform3f(h),u_height_lift:new s.Uniform1f(h)}),fillExtrusionPattern:h=>({u_matrix:new s.UniformMatrix4f(h),u_lightpos:new s.Uniform3f(h),u_lightintensity:new s.Uniform1f(h),u_lightcolor:new s.Uniform3f(h),u_vertical_gradient:new s.Uniform1f(h),u_height_factor:new s.Uniform1f(h),u_edge_radius:new s.Uniform1f(h),u_ao:new s.Uniform2f(h),u_tile_id:new s.Uniform3f(h),u_zoom_transition:new s.Uniform1f(h),u_inv_rot_matrix:new s.UniformMatrix4f(h),u_merc_center:new s.Uniform2f(h),u_up_dir:new s.Uniform3f(h),u_height_lift:new s.Uniform1f(h),u_image:new s.Uniform1i(h),u_texsize:new s.Uniform2f(h),u_pixel_coord_upper:new s.Uniform2f(h),u_pixel_coord_lower:new s.Uniform2f(h),u_tile_units_to_pixels:new s.Uniform1f(h),u_opacity:new s.Uniform1f(h)}),fill:h=>({u_matrix:new s.UniformMatrix4f(h)}),fillPattern:h=>({u_matrix:new s.UniformMatrix4f(h),u_image:new s.Uniform1i(h),u_texsize:new s.Uniform2f(h),u_pixel_coord_upper:new s.Uniform2f(h),u_pixel_coord_lower:new s.Uniform2f(h),u_tile_units_to_pixels:new s.Uniform1f(h)}),fillOutline:h=>({u_matrix:new s.UniformMatrix4f(h),u_world:new s.Uniform2f(h)}),fillOutlinePattern:h=>({u_matrix:new s.UniformMatrix4f(h),u_world:new s.Uniform2f(h),u_image:new s.Uniform1i(h),u_texsize:new s.Uniform2f(h),u_pixel_coord_upper:new s.Uniform2f(h),u_pixel_coord_lower:new s.Uniform2f(h),u_tile_units_to_pixels:new s.Uniform1f(h)}),circle:h=>({u_camera_to_center_distance:new s.Uniform1f(h),u_extrude_scale:new s.UniformMatrix2f(h),u_device_pixel_ratio:new s.Uniform1f(h),u_matrix:new s.UniformMatrix4f(h),u_inv_rot_matrix:new s.UniformMatrix4f(h),u_merc_center:new s.Uniform2f(h),u_tile_id:new s.Uniform3f(h),u_zoom_transition:new s.Uniform1f(h),u_up_dir:new s.Uniform3f(h)}),collisionBox:h=>({u_matrix:new s.UniformMatrix4f(h),u_camera_to_center_distance:new s.Uniform1f(h),u_extrude_scale:new s.Uniform2f(h)}),collisionCircle:h=>({u_matrix:new s.UniformMatrix4f(h),u_inv_matrix:new s.UniformMatrix4f(h),u_camera_to_center_distance:new s.Uniform1f(h),u_viewport_size:new s.Uniform2f(h)}),debug:h=>({u_color:new s.UniformColor(h),u_matrix:new s.UniformMatrix4f(h),u_overlay:new s.Uniform1i(h),u_overlay_scale:new s.Uniform1f(h)}),clippingMask:h=>({u_matrix:new s.UniformMatrix4f(h)}),heatmap:h=>({u_extrude_scale:new s.Uniform1f(h),u_intensity:new s.Uniform1f(h),u_matrix:new s.UniformMatrix4f(h),u_inv_rot_matrix:new s.UniformMatrix4f(h),u_merc_center:new s.Uniform2f(h),u_tile_id:new s.Uniform3f(h),u_zoom_transition:new s.Uniform1f(h),u_up_dir:new s.Uniform3f(h)}),heatmapTexture:h=>({u_image:new s.Uniform1i(h),u_color_ramp:new s.Uniform1i(h),u_opacity:new s.Uniform1f(h)}),hillshade:h=>({u_matrix:new s.UniformMatrix4f(h),u_image:new s.Uniform1i(h),u_latrange:new s.Uniform2f(h),u_light:new s.Uniform2f(h),u_shadow:new s.UniformColor(h),u_highlight:new s.UniformColor(h),u_accent:new s.UniformColor(h)}),hillshadePrepare:h=>({u_matrix:new s.UniformMatrix4f(h),u_image:new s.Uniform1i(h),u_dimension:new s.Uniform2f(h),u_zoom:new s.Uniform1f(h),u_unpack:new s.Uniform4f(h)}),line:h=>({u_matrix:new s.UniformMatrix4f(h),u_pixels_to_tile_units:new s.UniformMatrix2f(h),u_device_pixel_ratio:new s.Uniform1f(h),u_units_to_pixels:new s.Uniform2f(h),u_dash_image:new s.Uniform1i(h),u_gradient_image:new s.Uniform1i(h),u_image_height:new s.Uniform1f(h),u_texsize:new s.Uniform2f(h),u_tile_units_to_pixels:new s.Uniform1f(h),u_alpha_discard_threshold:new s.Uniform1f(h),u_trim_offset:new s.Uniform2f(h)}),linePattern:h=>({u_matrix:new s.UniformMatrix4f(h),u_texsize:new s.Uniform2f(h),u_pixels_to_tile_units:new s.UniformMatrix2f(h),u_device_pixel_ratio:new s.Uniform1f(h),u_image:new s.Uniform1i(h),u_units_to_pixels:new s.Uniform2f(h),u_tile_units_to_pixels:new s.Uniform1f(h),u_alpha_discard_threshold:new s.Uniform1f(h)}),raster:h=>({u_matrix:new s.UniformMatrix4f(h),u_tl_parent:new s.Uniform2f(h),u_scale_parent:new s.Uniform1f(h),u_fade_t:new s.Uniform1f(h),u_opacity:new s.Uniform1f(h),u_image0:new s.Uniform1i(h),u_image1:new s.Uniform1i(h),u_brightness_low:new s.Uniform1f(h),u_brightness_high:new s.Uniform1f(h),u_saturation_factor:new s.Uniform1f(h),u_contrast_factor:new s.Uniform1f(h),u_spin_weights:new s.Uniform3f(h),u_perspective_transform:new s.Uniform2f(h)}),symbolIcon:h=>({u_is_size_zoom_constant:new s.Uniform1i(h),u_is_size_feature_constant:new s.Uniform1i(h),u_size_t:new s.Uniform1f(h),u_size:new s.Uniform1f(h),u_camera_to_center_distance:new s.Uniform1f(h),u_rotate_symbol:new s.Uniform1i(h),u_aspect_ratio:new s.Uniform1f(h),u_fade_change:new s.Uniform1f(h),u_matrix:new s.UniformMatrix4f(h),u_label_plane_matrix:new s.UniformMatrix4f(h),u_coord_matrix:new s.UniformMatrix4f(h),u_is_text:new s.Uniform1i(h),u_pitch_with_map:new s.Uniform1i(h),u_texsize:new s.Uniform2f(h),u_tile_id:new s.Uniform3f(h),u_zoom_transition:new s.Uniform1f(h),u_inv_rot_matrix:new s.UniformMatrix4f(h),u_merc_center:new s.Uniform2f(h),u_camera_forward:new s.Uniform3f(h),u_tile_matrix:new s.UniformMatrix4f(h),u_up_vector:new s.Uniform3f(h),u_ecef_origin:new s.Uniform3f(h),u_texture:new s.Uniform1i(h)}),symbolSDF:h=>({u_is_size_zoom_constant:new s.Uniform1i(h),u_is_size_feature_constant:new s.Uniform1i(h),u_size_t:new s.Uniform1f(h),u_size:new s.Uniform1f(h),u_camera_to_center_distance:new s.Uniform1f(h),u_rotate_symbol:new s.Uniform1i(h),u_aspect_ratio:new s.Uniform1f(h),u_fade_change:new s.Uniform1f(h),u_matrix:new s.UniformMatrix4f(h),u_label_plane_matrix:new s.UniformMatrix4f(h),u_coord_matrix:new s.UniformMatrix4f(h),u_is_text:new s.Uniform1i(h),u_pitch_with_map:new s.Uniform1i(h),u_texsize:new s.Uniform2f(h),u_texture:new s.Uniform1i(h),u_gamma_scale:new s.Uniform1f(h),u_device_pixel_ratio:new s.Uniform1f(h),u_tile_id:new s.Uniform3f(h),u_zoom_transition:new s.Uniform1f(h),u_inv_rot_matrix:new s.UniformMatrix4f(h),u_merc_center:new s.Uniform2f(h),u_camera_forward:new s.Uniform3f(h),u_tile_matrix:new s.UniformMatrix4f(h),u_up_vector:new s.Uniform3f(h),u_ecef_origin:new s.Uniform3f(h),u_is_halo:new s.Uniform1i(h)}),symbolTextAndIcon:h=>({u_is_size_zoom_constant:new s.Uniform1i(h),u_is_size_feature_constant:new s.Uniform1i(h),u_size_t:new s.Uniform1f(h),u_size:new s.Uniform1f(h),u_camera_to_center_distance:new s.Uniform1f(h),u_rotate_symbol:new s.Uniform1i(h),u_aspect_ratio:new s.Uniform1f(h),u_fade_change:new s.Uniform1f(h),u_matrix:new s.UniformMatrix4f(h),u_label_plane_matrix:new s.UniformMatrix4f(h),u_coord_matrix:new s.UniformMatrix4f(h),u_is_text:new s.Uniform1i(h),u_pitch_with_map:new s.Uniform1i(h),u_texsize:new s.Uniform2f(h),u_texsize_icon:new s.Uniform2f(h),u_texture:new s.Uniform1i(h),u_texture_icon:new s.Uniform1i(h),u_gamma_scale:new s.Uniform1f(h),u_device_pixel_ratio:new s.Uniform1f(h),u_is_halo:new s.Uniform1i(h)}),background:h=>({u_matrix:new s.UniformMatrix4f(h),u_opacity:new s.Uniform1f(h),u_color:new s.UniformColor(h)}),backgroundPattern:h=>({u_matrix:new s.UniformMatrix4f(h),u_opacity:new s.Uniform1f(h),u_image:new s.Uniform1i(h),u_pattern_tl:new s.Uniform2f(h),u_pattern_br:new s.Uniform2f(h),u_texsize:new s.Uniform2f(h),u_pattern_size:new s.Uniform2f(h),u_pixel_coord_upper:new s.Uniform2f(h),u_pixel_coord_lower:new s.Uniform2f(h),u_tile_units_to_pixels:new s.Uniform1f(h)}),terrainRaster:mu,terrainDepth:mu,skybox:h=>({u_matrix:new s.UniformMatrix4f(h),u_sun_direction:new s.Uniform3f(h),u_cubemap:new s.Uniform1i(h),u_opacity:new s.Uniform1f(h),u_temporal_offset:new s.Uniform1f(h)}),skyboxGradient:h=>({u_matrix:new s.UniformMatrix4f(h),u_color_ramp:new s.Uniform1i(h),u_center_direction:new s.Uniform3f(h),u_radius:new s.Uniform1f(h),u_opacity:new s.Uniform1f(h),u_temporal_offset:new s.Uniform1f(h)}),skyboxCapture:h=>({u_matrix_3f:new s.UniformMatrix3f(h),u_sun_direction:new s.Uniform3f(h),u_sun_intensity:new s.Uniform1f(h),u_color_tint_r:new s.Uniform4f(h),u_color_tint_m:new s.Uniform4f(h),u_luminance:new s.Uniform1f(h)}),globeRaster:h=>({u_proj_matrix:new s.UniformMatrix4f(h),u_globe_matrix:new s.UniformMatrix4f(h),u_normalize_matrix:new s.UniformMatrix4f(h),u_merc_matrix:new s.UniformMatrix4f(h),u_zoom_transition:new s.Uniform1f(h),u_merc_center:new s.Uniform2f(h),u_image0:new s.Uniform1i(h),u_grid_matrix:new s.UniformMatrix3f(h),u_skirt_height:new s.Uniform1f(h),u_frustum_tl:new s.Uniform3f(h),u_frustum_tr:new s.Uniform3f(h),u_frustum_br:new s.Uniform3f(h),u_frustum_bl:new s.Uniform3f(h),u_globe_pos:new s.Uniform3f(h),u_globe_radius:new s.Uniform1f(h),u_viewport:new s.Uniform2f(h)}),globeAtmosphere:h=>({u_frustum_tl:new s.Uniform3f(h),u_frustum_tr:new s.Uniform3f(h),u_frustum_br:new s.Uniform3f(h),u_frustum_bl:new s.Uniform3f(h),u_horizon:new s.Uniform1f(h),u_transition:new s.Uniform1f(h),u_fadeout_range:new s.Uniform1f(h),u_color:new s.Uniform4f(h),u_high_color:new s.Uniform4f(h),u_space_color:new s.Uniform4f(h),u_star_intensity:new s.Uniform1f(h),u_star_density:new s.Uniform1f(h),u_star_size:new s.Uniform1f(h),u_temporal_offset:new s.Uniform1f(h),u_horizon_angle:new s.Uniform1f(h),u_rotation_matrix:new s.UniformMatrix4f(h)})};let w1;function yl(h,i,l,f,g,v,T){const S=h.context,C=S.gl,z=h.transform,k=h.useProgram("collisionBox"),F=[];let $=0,X=0;for(let oe=0;oe<f.length;oe++){const me=f[oe],ge=i.getTile(me),_e=ge.getBucket(l);if(!_e)continue;const Ee=yi(me,_e,z);let Te=Ee;g[0]===0&&g[1]===0||(Te=h.translatePosMatrix(Ee,ge,g,v));const ze=T?_e.textCollisionBox:_e.iconCollisionBox,nt=_e.collisionCircleArray;if(nt.length>0){const Pe=s.create(),qe=Te;s.mul(Pe,_e.placementInvProjMatrix,z.glCoordMatrix),s.mul(Pe,Pe,_e.placementViewportMatrix),F.push({circleArray:nt,circleOffset:X,transform:qe,invTransform:Pe,projection:_e.getProjection()}),$+=nt.length/4,X=$}ze&&(h.terrain&&h.terrain.setupElevationDraw(ge,k),k.draw(S,C.LINES,s.DepthMode.disabled,s.StencilMode.disabled,h.colorModeForRenderPass(),s.CullFaceMode.disabled,Tu(Te,z,ge,_e.getProjection()),l.id,ze.layoutVertexBuffer,ze.indexBuffer,ze.segments,null,z.zoom,null,[ze.collisionVertexBuffer,ze.collisionVertexBufferExt]))}if(!T||!F.length)return;const Y=h.useProgram("collisionCircle"),K=new s.StructArrayLayout2f1f2i16;K.resize(4*$),K._trim();let J=0;for(const oe of F)for(let me=0;me<oe.circleArray.length/4;me++){const ge=4*me,_e=oe.circleArray[ge+0],Ee=oe.circleArray[ge+1],Te=oe.circleArray[ge+2],ze=oe.circleArray[ge+3];K.emplace(J++,_e,Ee,Te,ze,0),K.emplace(J++,_e,Ee,Te,ze,1),K.emplace(J++,_e,Ee,Te,ze,2),K.emplace(J++,_e,Ee,Te,ze,3)}(!w1||w1.length<2*$)&&(w1=function(oe){const me=2*oe,ge=new s.StructArrayLayout3ui6;ge.resize(me),ge._trim();for(let _e=0;_e<me;_e++){const Ee=6*_e;ge.uint16[Ee+0]=4*_e+0,ge.uint16[Ee+1]=4*_e+1,ge.uint16[Ee+2]=4*_e+2,ge.uint16[Ee+3]=4*_e+2,ge.uint16[Ee+4]=4*_e+3,ge.uint16[Ee+5]=4*_e+0}return ge}($));const B=S.createIndexBuffer(w1,!0),H=S.createVertexBuffer(K,s.collisionCircleLayout.members,!0);for(const oe of F){const me={u_matrix:oe.transform,u_inv_matrix:oe.invTransform,u_camera_to_center_distance:(ie=z).getCameraToCenterDistance(oe.projection),u_viewport_size:[ie.width,ie.height]};Y.draw(S,C.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,h.colorModeForRenderPass(),s.CullFaceMode.disabled,me,l.id,H,B,s.SegmentVector.simpleSegment(0,2*oe.circleOffset,oe.circleArray.length,oe.circleArray.length/2),null,z.zoom)}var ie;H.destroy(),B.destroy()}const K2=s.create();function Au({width:h,height:i,anchor:l,textOffset:f,textScale:g},v){const{horizontalAlign:T,verticalAlign:S}=s.getAnchorAlignment(l),C=-(T-.5)*h,z=-(S-.5)*i,k=s.evaluateVariableOffset(l,f);return new s.Point((C/g+k[0])*v,(z/g+k[1])*v)}function Y5(h,i,l,f,g,v,T,S,C,z,k){const F=h.text.placedSymbolArray,$=h.text.dynamicLayoutVertexArray,X=h.icon.dynamicLayoutVertexArray,Y={},K=h.getProjection(),J=Dn(S,K,v),B=v.elevation,H=K.upVectorScale(S.canonical,v.center.lat,v.worldSize).metersToTile;$.clear();for(let ie=0;ie<F.length;ie++){const oe=F.get(ie),{tileAnchorX:me,tileAnchorY:ge,numGlyphs:_e}=oe,Ee=oe.hidden||!oe.crossTileID||h.allowVerticalPlacement&&!oe.placedOrientation?null:f[oe.crossTileID];if(Ee){let Te=0,ze=0,nt=0;if(B){const ot=B?B.getAtTileOffset(S,me,ge):0,[Ct,Ot,xt]=K.upVector(S.canonical,me,ge);Te=ot*Ct*H,ze=ot*Ot*H,nt=ot*xt*H}let[Pe,qe,Re,tt]=yr(oe.projectedAnchorX+Te,oe.projectedAnchorY+ze,oe.projectedAnchorZ+nt,l?J:T);const ke=F2(v.getCameraToCenterDistance(K),tt);let Ze=g.evaluateSizeForFeature(h.textSizeData,z,oe)*ke/s.ONE_EM;l&&(Ze*=h.tilePixelRatio/C);const it=Au(Ee,Ze);l?({x:Pe,y:qe,z:Re}=K.projectTilePoint(me+it.x,ge+it.y,S.canonical),[Pe,qe,Re]=yr(Pe+Te,qe+ze,Re+nt,T)):(i&&it._rotate(-v.angle),Pe+=it.x,qe+=it.y,Re=0);const Qe=h.allowVerticalPlacement&&oe.placedOrientation===s.WritingMode.vertical?Math.PI/2:0;for(let ot=0;ot<_e;ot++)s.addDynamicAttributes($,Pe,qe,Re,Qe);k&&oe.associatedIconIndex>=0&&(Y[oe.associatedIconIndex]={x:Pe,y:qe,z:Re,angle:Qe})}else Ri(_e,$)}if(k){X.clear();const ie=h.icon.placedSymbolArray;for(let oe=0;oe<ie.length;oe++){const me=ie.get(oe),{numGlyphs:ge}=me,_e=Y[oe];if(me.hidden||!_e)Ri(ge,X);else{const{x:Ee,y:Te,z:ze,angle:nt}=_e;for(let Pe=0;Pe<ge;Pe++)s.addDynamicAttributes(X,Ee,Te,ze,nt)}}h.icon.dynamicLayoutVertexBuffer.updateData(X)}h.text.dynamicLayoutVertexBuffer.updateData($)}function Iu(h,i,l){return l.iconsInText&&i?"symbolTextAndIcon":h?"symbolSDF":"symbolIcon"}function Y2(h,i,l,f,g,v,T,S,C,z,k,F){const $=h.context,X=$.gl,Y=h.transform,K=S==="map",J=C==="map",B=K&&l.layout.get("symbol-placement")!=="point",H=K&&!J&&!B,ie=l.layout.get("symbol-sort-key").constantOr(1)!==void 0;let oe=!1;const me=h.depthModeForSublayer(0,s.DepthMode.ReadOnly),ge=[s.mercatorXfromLng(Y.center.lng),s.mercatorYfromLat(Y.center.lat)],_e=l.layout.get("text-variable-anchor"),Ee=Y.projection.name==="globe",Te=[],ze=[0,-1,0];let nt=ze;!Ee&&!Y.mercatorFromTransition||K||(nt=function(Pe){const qe=Pe._camera.getWorldToCamera(Pe.worldSize,1),Re=s.multiply([],qe,Pe.globeMatrix);s.invert(Re,Re);const tt=[0,0,0],ke=[0,1,0,0];return s.transformMat4$1(ke,ke,Re),tt[0]=ke[0],tt[1]=ke[1],tt[2]=ke[2],s.normalize(tt,tt),tt}(Y));for(const Pe of f){const qe=i.getTile(Pe),Re=qe.getBucket(l);if(!Re||Re.projection.name==="mercator"&&Ee)continue;const tt=g?Re.text:Re.icon;if(!tt||Re.fullyClipped||!tt.segments.get().length)continue;const ke=tt.programConfigurations.get(l.id),Ze=g||Re.sdfIcons,it=g?Re.textSizeData:Re.iconSizeData,Qe=J||Y.pitch!==0,ot=s.evaluateSizeForZoom(it,Y.zoom);let Ct,Ot,xt,zt,Kt=[0,0],Wt=null;if(g)Ot=qe.glyphAtlasTexture,xt=X.LINEAR,Ct=qe.glyphAtlasTexture.size,Re.iconsInText&&(Kt=qe.imageAtlasTexture.size,Wt=qe.imageAtlasTexture,zt=Qe||h.options.rotating||h.options.zooming||it.kind==="composite"||it.kind==="camera"?X.LINEAR:X.NEAREST);else{const Lo=l.layout.get("icon-size").constantOr(0)!==1||Re.iconsNeedLinear;Ot=qe.imageAtlasTexture,xt=Ze||h.options.rotating||h.options.zooming||Lo||Qe?X.LINEAR:X.NEAREST,Ct=qe.imageAtlasTexture.size}const St=Re.projection.name==="globe",pn=St?nt:ze,gn=St?s.globeToMercatorTransition(Y.zoom):0,yn=Dn(Pe,Re.getProjection(),Y),vn=Y.calculatePixelsToTileUnitsMatrix(qe),Lr=Ve(yn,qe.tileID.canonical,J,K,Y,Re.getProjection(),vn),xr=h.terrain&&J&&B?s.invert(s.create(),Lr):K2,bi=Jn(yn,qe.tileID.canonical,J,K,Y,Re.getProjection(),vn),oo=_e&&Re.hasTextData(),Rn=l.layout.get("icon-text-fit")!=="none"&&oo&&Re.hasIconData();if(B){const Lo=Y.elevation,is=Lo?Lo.getAtTileOffsetFunc(Pe,Y.center.lat,Y.worldSize,Re.getProjection()):null,Ls=So(yn,qe.tileID.canonical,J,K,Y,Re.getProjection(),vn);nu(Re,yn,h,g,Ls,bi,J,z,is,Pe)}const xn=B||g&&_e||Rn,an=h.translatePosMatrix(yn,qe,v,T),Qn=xn?K2:Lr,jr=h.translatePosMatrix(bi,qe,v,T,!0),zn=Re.getProjection().createInversionMatrix(Y,Pe.canonical),Xr=[];h.terrainRenderModeElevated()&&J&&Xr.push("PITCH_WITH_MAP_TERRAIN"),St&&Xr.push("PROJECTION_GLOBE_VIEW"),xn&&Xr.push("PROJECTED_POS_ON_VIEWPORT");const B1=Ze&&l.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let zs;zs=Ze?Re.iconsInText?X2(it.kind,ot,H,J,h,an,Qn,jr,Ct,Kt,Pe,gn,ge,zn,pn,Re.getProjection()):x1(it.kind,ot,H,J,h,an,Qn,jr,g,Ct,!0,Pe,gn,ge,zn,pn,Re.getProjection()):Mu(it.kind,ot,H,J,h,an,Qn,jr,g,Ct,Pe,gn,ge,zn,pn,Re.getProjection());const Al={program:h.useProgram(Iu(Ze,g,Re),ke,Xr),buffers:tt,uniformValues:zs,atlasTexture:Ot,atlasTextureIcon:Wt,atlasInterpolation:xt,atlasInterpolationIcon:zt,isSDF:Ze,hasHalo:B1,tile:qe,labelPlaneMatrixInv:xr};if(ie&&Re.canOverlap){oe=!0;const Lo=tt.segments.get();for(const is of Lo)Te.push({segments:new s.SegmentVector([is]),sortKey:is.sortKey,state:Al})}else Te.push({segments:tt.segments,sortKey:0,state:Al})}oe&&Te.sort((Pe,qe)=>Pe.sortKey-qe.sortKey);for(const Pe of Te){const qe=Pe.state;if(h.terrain&&h.terrain.setupElevationDraw(qe.tile,qe.program,{useDepthForOcclusion:!Ee,labelPlaneMatrixInv:qe.labelPlaneMatrixInv}),$.activeTexture.set(X.TEXTURE0),qe.atlasTexture.bind(qe.atlasInterpolation,X.CLAMP_TO_EDGE),qe.atlasTextureIcon&&($.activeTexture.set(X.TEXTURE1),qe.atlasTextureIcon&&qe.atlasTextureIcon.bind(qe.atlasInterpolationIcon,X.CLAMP_TO_EDGE)),qe.isSDF){const Re=qe.uniformValues;qe.hasHalo&&(Re.u_is_halo=1,vl(qe.buffers,Pe.segments,l,h,qe.program,me,k,F,Re)),Re.u_is_halo=0}vl(qe.buffers,Pe.segments,l,h,qe.program,me,k,F,qe.uniformValues)}}function vl(h,i,l,f,g,v,T,S,C){const z=f.context,k=[h.dynamicLayoutVertexBuffer,h.opacityVertexBuffer,h.globeExtVertexBuffer];g.draw(z,z.gl.TRIANGLES,v,T,S,s.CullFaceMode.disabled,C,l.id,h.layoutVertexBuffer,h.indexBuffer,i,l.paint,f.transform.zoom,h.programConfigurations.get(l.id),k)}function J2(h,i,l,f,g,v,T){const S=h.context.gl,C=l.paint.get("fill-pattern"),z=C&&C.constantOr(1);let k,F,$,X,Y;T?(F=z&&!l.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",k=S.LINES):(F=z?"fillPattern":"fill",k=S.TRIANGLES);for(const K of f){const J=i.getTile(K);if(z&&!J.patternsLoaded())continue;const B=J.getBucket(l);if(!B)continue;h.prepareDrawTile();const H=B.programConfigurations.get(l.id),ie=h.useProgram(F,H);z&&(h.context.activeTexture.set(S.TEXTURE0),J.imageAtlasTexture.bind(S.LINEAR,S.CLAMP_TO_EDGE),H.updatePaintBuffers());const oe=C.constantOr(null);if(oe&&J.imageAtlas){const ge=J.imageAtlas.patternPositions[oe.toString()];ge&&H.setConstantPatternPositions(ge)}const me=h.translatePosMatrix(K.projMatrix,J,l.paint.get("fill-translate"),l.paint.get("fill-translate-anchor"));if(T){X=B.indexBuffer2,Y=B.segments2;const ge=h.terrain&&h.terrain.renderingToTexture?h.terrain.drapeBufferSize:[S.drawingBufferWidth,S.drawingBufferHeight];$=F==="fillOutlinePattern"&&z?W5(me,h,J,ge):q5(me,ge)}else X=B.indexBuffer,Y=B.segments,$=z?xu(me,h,J):Ps(me);h.prepareDrawProgram(h.context,ie,K.toUnwrapped()),ie.draw(h.context,k,g,h.stencilModeForClipping(K),v,s.CullFaceMode.disabled,$,l.id,B.layoutVertexBuffer,X,Y,l.paint,h.transform.zoom,H)}}function b1(h,i,l,f,g,v,T){const S=h.context,C=S.gl,z=h.transform,k=l.paint.get("fill-extrusion-pattern"),F=k.constantOr(1),$=l.paint.get("fill-extrusion-opacity"),X=[l.paint.get("fill-extrusion-ambient-occlusion-intensity"),l.paint.get("fill-extrusion-ambient-occlusion-radius")],Y=l.layout.get("fill-extrusion-edge-radius"),K=Y>0&&!l.paint.get("fill-extrusion-rounded-roof"),J=K?0:Y,B=z.projection.name==="globe"?s.fillExtrusionHeightLift():0,H=z.projection.name==="globe",ie=H?s.globeToMercatorTransition(z.zoom):0,oe=[s.mercatorXfromLng(z.center.lng),s.mercatorYfromLat(z.center.lat)],me=[];H&&me.push("PROJECTION_GLOBE_VIEW"),X[0]>0&&me.push("FAUX_AO"),K&&me.push("ZERO_ROOF_RADIUS");for(const ge of f){const _e=i.getTile(ge),Ee=_e.getBucket(l);if(!Ee||Ee.projection.name!==z.projection.name)continue;const Te=Ee.programConfigurations.get(l.id),ze=h.useProgram(F?"fillExtrusionPattern":"fillExtrusion",Te,me);if(h.terrain){const Ze=h.terrain;if(h.style.terrainSetForDrapingOnly())Ze.setupElevationDraw(_e,ze,{useMeterToDem:!0});else{if(!Ee.enableTerrain)continue;if(Ze.setupElevationDraw(_e,ze,{useMeterToDem:!0}),Q2(S,i,ge,Ee,l,Ze),!Ee.centroidVertexBuffer){const it=ze.attributes.a_centroid_pos;it!==void 0&&C.vertexAttrib2f(it,0,0)}}}F&&(h.context.activeTexture.set(C.TEXTURE0),_e.imageAtlasTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE),Te.updatePaintBuffers());const nt=k.constantOr(null);if(nt&&_e.imageAtlas){const Ze=_e.imageAtlas.patternPositions[nt.toString()];Ze&&Te.setConstantPatternPositions(Ze)}const Pe=h.translatePosMatrix(ge.projMatrix,_e,l.paint.get("fill-extrusion-translate"),l.paint.get("fill-extrusion-translate-anchor")),qe=z.projection.createInversionMatrix(z,ge.canonical),Re=l.paint.get("fill-extrusion-vertical-gradient"),tt=F?q2(Pe,h,Re,$,X,J,ge,_e,B,ie,oe,qe):vu(Pe,h,Re,$,X,J,ge,B,ie,oe,qe);h.prepareDrawProgram(S,ze,ge.toUnwrapped());const ke=[];h.terrain&&ke.push(Ee.centroidVertexBuffer),H&&ke.push(Ee.layoutVertexExtBuffer),ze.draw(S,S.gl.TRIANGLES,g,v,T,s.CullFaceMode.backCCW,tt,l.id,Ee.layoutVertexBuffer,Ee.indexBuffer,Ee.segments,l.paint,h.transform.zoom,Te,ke)}}function Q2(h,i,l,f,g,v){const T=[B=>{let H=B.canonical.x-1,ie=B.wrap;return H<0&&(H=(1<<B.canonical.z)-1,ie--),new s.OverscaledTileID(B.overscaledZ,ie,B.canonical.z,H,B.canonical.y)},B=>{let H=B.canonical.x+1,ie=B.wrap;return H===1<<B.canonical.z&&(H=0,ie++),new s.OverscaledTileID(B.overscaledZ,ie,B.canonical.z,H,B.canonical.y)},B=>new s.OverscaledTileID(B.overscaledZ,B.wrap,B.canonical.z,B.canonical.x,(B.canonical.y===0?1<<B.canonical.z:B.canonical.y)-1),B=>new s.OverscaledTileID(B.overscaledZ,B.wrap,B.canonical.z,B.canonical.x,B.canonical.y===(1<<B.canonical.z)-1?0:B.canonical.y+1)],S=B=>{const H=i.getSource().minzoom,ie=me=>{const ge=i.getTileByID(me);if(ge&&ge.hasData())return ge.getBucket(g)},oe=[0,-1,1];for(const me of oe){if(B.overscaledZ+me<H)continue;const ge=ie(B.calculateScaledKey(B.overscaledZ+me));if(ge)return ge}},C=[0,0,0],z=(B,H)=>(C[0]=Math.min(B.min.y,H.min.y),C[1]=Math.max(B.max.y,H.max.y),C[2]=s.EXTENT-H.min.x>B.max.x?H.min.x-s.EXTENT:B.max.x,C),k=(B,H)=>(C[0]=Math.min(B.min.x,H.min.x),C[1]=Math.max(B.max.x,H.max.x),C[2]=s.EXTENT-H.min.y>B.max.y?H.min.y-s.EXTENT:B.max.y,C),F=[(B,H)=>z(B,H),(B,H)=>z(H,B),(B,H)=>k(B,H),(B,H)=>k(H,B)],$=new s.Point(0,0);let X,Y,K;const J=(B,H,ie,oe,me)=>{const ge=[[oe?ie:B,oe?B:ie,0],[oe?ie:H,oe?H:ie,0]],_e=me<0?s.EXTENT+me:me,Ee=[oe?_e:(B+H)/2,oe?(B+H)/2:_e,0];return ie===0&&me<0||ie!==0&&me>0?v.getForTilePoints(K,[Ee],!0,Y):ge.push(Ee),v.getForTilePoints(l,ge,!0,X),Math.max(ge[0][2],ge[1][2],Ee[2])/v.exaggeration()};for(let B=0;B<4;B++){const H=(B<2?1:5)-B,ie=f.borders[B];if(ie.length===0)continue;const oe=K=T[B](l),me=S(oe);if(!(me&&me instanceof s.FillExtrusionBucket&&me.enableTerrain)||f.borderDoneWithNeighborZ[B]===me.canonical.z&&me.borderDoneWithNeighborZ[H]===f.canonical.z||(Y=v.findDEMTileFor(oe),!Y||!Y.dem))continue;if(!X){const Te=v.findDEMTileFor(l);if(!Te||!Te.dem)return;X=Te}const ge=me.borders[H];let _e=0;const Ee=me.borderDoneWithNeighborZ[H]!==f.canonical.z;if(f.canonical.z===me.canonical.z){for(let Te=0;Te<ie.length;Te++){const ze=f.featuresOnBorder[ie[Te]],nt=ze.borders[B];let Pe;for(;_e<ge.length&&(Pe=me.featuresOnBorder[ge[_e]],!(Pe.borders[H][1]>nt[0]+3));)Ee&&me.encodeCentroid(void 0,Pe,!1),_e++;if(Pe&&_e<ge.length){const qe=_e;let Re=0;for(;!(Pe.borders[H][0]>nt[1]-3)&&(Re++,++_e!==ge.length);)Pe=me.featuresOnBorder[ge[_e]];if(Pe=me.featuresOnBorder[ge[qe]],ze.intersectsCount()>1||Pe.intersectsCount()>1||Re!==1){Re!==1&&(_e=qe),f.encodeCentroid(void 0,ze,!1),Ee&&me.encodeCentroid(void 0,Pe,!1);continue}const tt=F[B](ze,Pe),ke=B%2?s.EXTENT-1:0;$.x=J(tt[0],Math.min(s.EXTENT-1,tt[1]),ke,B<2,tt[2]),$.y=0,f.encodeCentroid($,ze,!1),Ee&&me.encodeCentroid($,Pe,!1)}else f.encodeCentroid(void 0,ze,!1)}f.borderDoneWithNeighborZ[B]=me.canonical.z,f.needsCentroidUpdate=!0,Ee&&(me.borderDoneWithNeighborZ[H]=f.canonical.z,me.needsCentroidUpdate=!0)}else{for(const Te of ie)f.encodeCentroid(void 0,f.featuresOnBorder[Te],!1);if(Ee){for(const Te of ge)me.encodeCentroid(void 0,me.featuresOnBorder[Te],!1);me.borderDoneWithNeighborZ[H]=f.canonical.z,me.needsCentroidUpdate=!0}f.borderDoneWithNeighborZ[B]=me.canonical.z,f.needsCentroidUpdate=!0}}(f.needsCentroidUpdate||!f.centroidVertexBuffer&&f.centroidVertexArray.length!==0)&&f.uploadCentroid(h)}const ha=new s.Color(1,0,0,1),J5=new s.Color(0,1,0,1),Q5=new s.Color(0,0,1,1),ed=new s.Color(1,0,1,1),td=new s.Color(0,1,1,1);function nd(h,i,l){const f=h.context,g=h.transform,v=f.gl,T=g.projection.name==="globe",S=T?["PROJECTION_GLOBE_VIEW"]:null;let C=l.projMatrix;if(T&&s.globeToMercatorTransition(g.zoom)>0){const ze=s.transitionTileAABBinECEF(l.canonical,g),nt=s.globeDenormalizeECEF(ze);C=s.multiply(new Float32Array(16),g.globeMatrix,nt),s.multiply(C,g.projMatrix,C)}const z=h.useProgram("debug",null,S),k=i.getTileByID(l.key);h.terrain&&h.terrain.setupElevationDraw(k,z);const F=s.DepthMode.disabled,$=s.StencilMode.disabled,X=h.colorModeForRenderPass(),Y="$debug";f.activeTexture.set(v.TEXTURE0),h.emptyTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE),T?k._makeGlobeTileDebugBuffers(h.context,g):k._makeDebugTileBoundsBuffers(h.context,g.projection);const K=k._tileDebugBuffer||h.debugBuffer,J=k._tileDebugIndexBuffer||h.debugIndexBuffer,B=k._tileDebugSegments||h.debugSegments;z.draw(f,v.LINE_STRIP,F,$,X,s.CullFaceMode.disabled,y1(C,s.Color.red),Y,K,J,B,null,null,null,[k._globeTileDebugBorderBuffer]);const H=k.latestRawTileData,ie=Math.floor((H&&H.byteLength||0)/1024),oe=i.getTile(l).tileSize,me=512/Math.min(oe,512)*(l.overscaledZ/g.zoom)*.5;let ge=l.canonical.toString();l.overscaledZ!==l.canonical.z&&(ge+=` => ${l.overscaledZ}`),ge+=` ${ie}kb`,function(ze,nt){ze.initDebugOverlayCanvas();const Pe=ze.debugOverlayCanvas,qe=ze.context.gl,Re=ze.debugOverlayCanvas.getContext("2d");Re.clearRect(0,0,Pe.width,Pe.height),Re.shadowColor="white",Re.shadowBlur=2,Re.lineWidth=1.5,Re.strokeStyle="white",Re.textBaseline="top",Re.font="bold 36px Open Sans, sans-serif",Re.fillText(nt,5,5),Re.strokeText(nt,5,5),ze.debugOverlayTexture.update(Pe),ze.debugOverlayTexture.bind(qe.LINEAR,qe.CLAMP_TO_EDGE)}(h,ge);const _e=k._tileDebugTextBuffer||h.debugBuffer,Ee=k._tileDebugTextIndexBuffer||h.quadTriangleIndexBuffer,Te=k._tileDebugTextSegments||h.debugSegments;z.draw(f,v.TRIANGLES,F,$,s.ColorMode.alphaBlended,s.CullFaceMode.disabled,y1(C,s.Color.transparent,me),Y,_e,Ee,Te,null,null,null,[k._globeTileDebugTextBuffer])}function eh(h,i,l,f){da(h,0,i+l/2,h.transform.width,l,f)}function T1(h,i,l,f){da(h,i-l/2,0,l,h.transform.height,f)}function da(h,i,l,f,g,v){const T=h.context,S=T.gl;S.enable(S.SCISSOR_TEST),S.scissor(i*s.exported.devicePixelRatio,l*s.exported.devicePixelRatio,f*s.exported.devicePixelRatio,g*s.exported.devicePixelRatio),T.clear({color:v}),S.disable(S.SCISSOR_TEST)}const th=s.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:nh}=th;function ko(h,i,l,f){h.emplaceBack(i,l,f)}class E1{constructor(i){this.vertexArray=new s.StructArrayLayout3f12,this.indices=new s.StructArrayLayout3ui6,ko(this.vertexArray,-1,-1,1),ko(this.vertexArray,1,-1,1),ko(this.vertexArray,-1,1,1),ko(this.vertexArray,1,1,1),ko(this.vertexArray,-1,-1,-1),ko(this.vertexArray,1,-1,-1),ko(this.vertexArray,-1,1,-1),ko(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=i.createVertexBuffer(this.vertexArray,nh),this.indexBuffer=i.createIndexBuffer(this.indices),this.segment=s.SegmentVector.simpleSegment(0,0,36,12)}}function xi(h,i,l,f,g,v){const T=h.gl,S=i.paint.get("sky-atmosphere-color"),C=i.paint.get("sky-atmosphere-halo-color"),z=i.paint.get("sky-atmosphere-sun-intensity"),k=((F,$,X,Y,K)=>({u_matrix_3f:F,u_sun_direction:$,u_sun_intensity:X,u_color_tint_r:[Y.r,Y.g,Y.b,Y.a],u_color_tint_m:[K.r,K.g,K.b,K.a],u_luminance:5e-5}))(s.fromMat4(s.create$1(),f),g,z,S,C);T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_CUBE_MAP_POSITIVE_X+v,i.skyboxTexture,0),l.draw(h,T.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,s.ColorMode.unblended,s.CullFaceMode.frontCW,k,"skyboxCapture",i.skyboxGeometry.vertexBuffer,i.skyboxGeometry.indexBuffer,i.skyboxGeometry.segment)}const xl=s.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class rh{constructor(i){const l=new s.StructArrayLayout5f20;l.emplaceBack(-1,1,1,0,0),l.emplaceBack(1,1,1,1,0),l.emplaceBack(1,-1,1,1,1),l.emplaceBack(-1,-1,1,0,1);const f=new s.StructArrayLayout3ui6;f.emplaceBack(0,1,2),f.emplaceBack(2,3,0),this.vertexBuffer=i.createVertexBuffer(l,xl.members),this.indexBuffer=i.createIndexBuffer(f),this.segments=s.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const As={symbol:function(h,i,l,f,g){if(h.renderPass!=="translucent")return;const v=s.StencilMode.disabled,T=h.colorModeForRenderPass();l.layout.get("text-variable-anchor")&&function(S,C,z,k,F,$,X){const Y=C.transform,K=F==="map",J=$==="map";for(const B of S){const H=k.getTile(B),ie=H.getBucket(z);if(!ie||!ie.text||!ie.text.segments.get().length)continue;const oe=s.evaluateSizeForZoom(ie.textSizeData,Y.zoom),me=Dn(B,ie.getProjection(),Y),ge=Y.calculatePixelsToTileUnitsMatrix(H),_e=Ve(me,H.tileID.canonical,J,K,Y,ie.getProjection(),ge),Ee=z.layout.get("icon-text-fit")!=="none"&&ie.hasIconData();if(oe){const Te=Math.pow(2,Y.zoom-H.tileID.overscaledZ);Y5(ie,K,J,X,s.symbolSize,Y,_e,B,Te,oe,Ee)}}}(f,h,l,i,l.layout.get("text-rotation-alignment"),l.layout.get("text-pitch-alignment"),g),l.paint.get("icon-opacity").constantOr(1)!==0&&Y2(h,i,l,f,!1,l.paint.get("icon-translate"),l.paint.get("icon-translate-anchor"),l.layout.get("icon-rotation-alignment"),l.layout.get("icon-pitch-alignment"),l.layout.get("icon-keep-upright"),v,T),l.paint.get("text-opacity").constantOr(1)!==0&&Y2(h,i,l,f,!0,l.paint.get("text-translate"),l.paint.get("text-translate-anchor"),l.layout.get("text-rotation-alignment"),l.layout.get("text-pitch-alignment"),l.layout.get("text-keep-upright"),v,T),i.map.showCollisionBoxes&&(yl(h,i,l,f,l.paint.get("text-translate"),l.paint.get("text-translate-anchor"),!0),yl(h,i,l,f,l.paint.get("icon-translate"),l.paint.get("icon-translate-anchor"),!1))},circle:function(h,i,l,f){if(h.renderPass!=="translucent")return;const g=l.paint.get("circle-opacity"),v=l.paint.get("circle-stroke-width"),T=l.paint.get("circle-stroke-opacity"),S=l.layout.get("circle-sort-key").constantOr(1)!==void 0;if(g.constantOr(1)===0&&(v.constantOr(1)===0||T.constantOr(1)===0))return;const C=h.context,z=C.gl,k=h.transform,F=h.depthModeForSublayer(0,s.DepthMode.ReadOnly),$=s.StencilMode.disabled,X=h.colorModeForRenderPass(),Y=k.projection.name==="globe",K=[s.mercatorXfromLng(k.center.lng),s.mercatorYfromLat(k.center.lat)],J=[];for(let H=0;H<f.length;H++){const ie=f[H],oe=i.getTile(ie),me=oe.getBucket(l);if(!me||me.projection.name!==k.projection.name)continue;const ge=me.programConfigurations.get(l.id),_e=bu(l);Y&&_e.push("PROJECTION_GLOBE_VIEW");const Ee=h.useProgram("circle",ge,_e),Te=me.layoutVertexBuffer,ze=me.globeExtVertexBuffer,nt=me.indexBuffer,Pe=k.projection.createInversionMatrix(k,ie.canonical),qe={programConfiguration:ge,program:Ee,layoutVertexBuffer:Te,globeExtVertexBuffer:ze,indexBuffer:nt,uniformValues:wu(h,ie,oe,Pe,K,l),tile:oe};if(S){const Re=me.segments.get();for(const tt of Re)J.push({segments:new s.SegmentVector([tt]),sortKey:tt.sortKey,state:qe})}else J.push({segments:me.segments,sortKey:0,state:qe})}S&&J.sort((H,ie)=>H.sortKey-ie.sortKey);const B={useDepthForOcclusion:!Y};for(const H of J){const{programConfiguration:ie,program:oe,layoutVertexBuffer:me,globeExtVertexBuffer:ge,indexBuffer:_e,uniformValues:Ee,tile:Te}=H.state,ze=H.segments;h.terrain&&h.terrain.setupElevationDraw(Te,oe,B),h.prepareDrawProgram(C,oe,Te.tileID.toUnwrapped()),oe.draw(C,z.TRIANGLES,F,$,X,s.CullFaceMode.disabled,Ee,l.id,me,_e,ze,l.paint,k.zoom,ie,[ge])}},heatmap:function(h,i,l,f){if(l.paint.get("heatmap-opacity")!==0)if(h.renderPass==="offscreen"){const g=h.context,v=g.gl,T=s.StencilMode.disabled,S=new s.ColorMode([v.ONE,v.ONE],s.Color.transparent,[!0,!0,!0,!0]);(function(X,Y,K,J){const B=X.gl,H=Y.width*J,ie=Y.height*J;X.activeTexture.set(B.TEXTURE1),X.viewport.set([0,0,H,ie]);let oe=K.heatmapFbo;if(!oe||oe&&(oe.width!==H||oe.height!==ie)){oe&&oe.destroy();const me=B.createTexture();B.bindTexture(B.TEXTURE_2D,me),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_S,B.CLAMP_TO_EDGE),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_T,B.CLAMP_TO_EDGE),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MIN_FILTER,B.LINEAR),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MAG_FILTER,B.LINEAR),oe=K.heatmapFbo=X.createFramebuffer(H,ie,!1),function(ge,_e,Ee,Te,ze,nt){const Pe=ge.gl;Pe.texImage2D(Pe.TEXTURE_2D,0,ge.isWebGL2&&ge.extRenderToTextureHalfFloat?Pe.RGBA16F:Pe.RGBA,ze,nt,0,Pe.RGBA,ge.extRenderToTextureHalfFloat?ge.isWebGL2?Pe.HALF_FLOAT:ge.extTextureHalfFloat.HALF_FLOAT_OES:Pe.UNSIGNED_BYTE,null),Te.colorAttachment.set(Ee)}(X,0,me,oe,H,ie)}else B.bindTexture(B.TEXTURE_2D,oe.colorAttachment.get()),X.bindFramebuffer.set(oe.framebuffer)})(g,h,l,h.transform.projection.name==="globe"?.5:.25),g.clear({color:s.Color.transparent});const C=h.transform,z=C.projection.name==="globe",k=z?["PROJECTION_GLOBE_VIEW"]:null,F=z?s.CullFaceMode.frontCCW:s.CullFaceMode.disabled,$=[s.mercatorXfromLng(C.center.lng),s.mercatorYfromLat(C.center.lat)];for(let X=0;X<f.length;X++){const Y=f[X];if(i.hasRenderableParent(Y))continue;const K=i.getTile(Y),J=K.getBucket(l);if(!J||J.projection.name!==C.projection.name)continue;const B=J.programConfigurations.get(l.id),H=h.useProgram("heatmap",B,k),{zoom:ie}=h.transform;h.terrain&&h.terrain.setupElevationDraw(K,H),h.prepareDrawProgram(g,H,Y.toUnwrapped());const oe=C.projection.createInversionMatrix(C,Y.canonical);H.draw(g,v.TRIANGLES,s.DepthMode.disabled,T,S,F,H2(h,Y,K,oe,$,ie,l.paint.get("heatmap-intensity")),l.id,J.layoutVertexBuffer,J.indexBuffer,J.segments,l.paint,h.transform.zoom,B,z?[J.globeExtVertexBuffer]:null)}g.viewport.set([0,0,h.width,h.height])}else h.renderPass==="translucent"&&(h.context.setColorMode(h.colorModeForRenderPass()),function(g,v){const T=g.context,S=T.gl,C=v.heatmapFbo;if(!C)return;T.activeTexture.set(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,C.colorAttachment.get()),T.activeTexture.set(S.TEXTURE1);let z=v.colorRampTexture;z||(z=v.colorRampTexture=new s.Texture(T,v.colorRamp,S.RGBA)),z.bind(S.LINEAR,S.CLAMP_TO_EDGE),g.useProgram("heatmapTexture").draw(T,S.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,g.colorModeForRenderPass(),s.CullFaceMode.disabled,((k,F,$,X)=>({u_image:0,u_color_ramp:1,u_opacity:F.paint.get("heatmap-opacity")}))(0,v),v.id,g.viewportBuffer,g.quadTriangleIndexBuffer,g.viewportSegments,v.paint,g.transform.zoom)}(h,l))},line:function(h,i,l,f){if(h.renderPass!=="translucent")return;const g=l.paint.get("line-opacity"),v=l.paint.get("line-width");if(g.constantOr(1)===0||v.constantOr(1)===0)return;const T=h.depthModeForSublayer(0,s.DepthMode.ReadOnly),S=h.colorModeForRenderPass(),C=h.terrain&&h.terrain.renderingToTexture?1:s.exported.devicePixelRatio,z=l.paint.get("line-dasharray"),k=z.constantOr(1),F=l.layout.get("line-cap"),$=l.paint.get("line-pattern"),X=$.constantOr(1),Y=l.paint.get("line-gradient"),K=X?"linePattern":"line",J=h.context,B=J.gl,H=(oe=>{const me=[];gl(oe)&&me.push("RENDER_LINE_DASH"),oe.paint.get("line-gradient")&&me.push("RENDER_LINE_GRADIENT");const ge=oe.paint.get("line-trim-offset");ge[0]===0&&ge[1]===0||me.push("RENDER_LINE_TRIM_OFFSET");const _e=oe.paint.get("line-pattern").constantOr(1),Ee=oe.paint.get("line-opacity").constantOr(1)!==1;return!_e&&Ee&&me.push("RENDER_LINE_ALPHA_DISCARD"),me})(l);let ie=H.includes("RENDER_LINE_ALPHA_DISCARD");h.terrain&&h.terrain.clipOrMaskOverlapStencilType()&&(ie=!1);for(const oe of f){const me=i.getTile(oe);if(X&&!me.patternsLoaded())continue;const ge=me.getBucket(l);if(!ge)continue;h.prepareDrawTile();const _e=ge.programConfigurations.get(l.id),Ee=h.useProgram(K,_e,H),Te=$.constantOr(null);if(Te&&me.imageAtlas){const Ze=me.imageAtlas.patternPositions[Te.toString()];Ze&&_e.setConstantPatternPositions(Ze)}const ze=z.constantOr(null),nt=F.constantOr(null);if(!X&&ze&&nt&&me.lineAtlas){const Ze=me.lineAtlas.getDash(ze,nt);Ze&&_e.setConstantPatternPositions(Ze)}let[Pe,qe]=l.paint.get("line-trim-offset");(nt==="round"||nt==="square")&&Pe!==qe&&(Pe===0&&(Pe-=1),qe===1&&(qe+=1));const Re=h.terrain?oe.projMatrix:null,tt=X?_l(h,me,l,Re,C):X5(h,me,l,Re,ge.lineClipsArray.length,C,[Pe,qe]);if(Y){const Ze=ge.gradients[l.id];let it=Ze.texture;if(l.gradientVersion!==Ze.version){let Qe=256;if(l.stepInterpolant){const ot=i.getSource().maxzoom,Ct=oe.canonical.z===ot?Math.ceil(1<<h.transform.maxZoom-oe.canonical.z):1;Qe=s.clamp(s.nextPowerOfTwo(ge.maxLineLength/s.EXTENT*1024*Ct),256,J.maxTextureSize)}Ze.gradient=s.renderColorRamp({expression:l.gradientExpression(),evaluationKey:"lineProgress",resolution:Qe,image:Ze.gradient||void 0,clips:ge.lineClipsArray}),Ze.texture?Ze.texture.update(Ze.gradient):Ze.texture=new s.Texture(J,Ze.gradient,B.RGBA),Ze.version=l.gradientVersion,it=Ze.texture}J.activeTexture.set(B.TEXTURE1),it.bind(l.stepInterpolant?B.NEAREST:B.LINEAR,B.CLAMP_TO_EDGE)}k&&(J.activeTexture.set(B.TEXTURE0),me.lineAtlasTexture.bind(B.LINEAR,B.REPEAT),_e.updatePaintBuffers()),X&&(J.activeTexture.set(B.TEXTURE0),me.imageAtlasTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE),_e.updatePaintBuffers()),h.prepareDrawProgram(J,Ee,oe.toUnwrapped());const ke=Ze=>{Ee.draw(J,B.TRIANGLES,T,Ze,S,s.CullFaceMode.disabled,tt,l.id,ge.layoutVertexBuffer,ge.indexBuffer,ge.segments,l.paint,h.transform.zoom,_e,[ge.layoutVertexBuffer2])};if(ie){const Ze=h.stencilModeForClipping(oe).ref;Ze===0&&h.terrain&&J.clear({stencil:0});const it={func:B.EQUAL,mask:255};tt.u_alpha_discard_threshold=.8,ke(new s.StencilMode(it,Ze,255,B.KEEP,B.KEEP,B.INVERT)),tt.u_alpha_discard_threshold=0,ke(new s.StencilMode(it,Ze,255,B.KEEP,B.KEEP,B.KEEP))}else ke(h.stencilModeForClipping(oe))}ie&&(h.resetStencilClippingMasks(),h.terrain&&J.clear({stencil:0}))},fill:function(h,i,l,f){const g=l.paint.get("fill-color"),v=l.paint.get("fill-opacity");if(v.constantOr(1)===0)return;const T=h.colorModeForRenderPass(),S=l.paint.get("fill-pattern"),C=h.opaquePassEnabledForLayer()&&!S.constantOr(1)&&g.constantOr(s.Color.transparent).a===1&&v.constantOr(0)===1?"opaque":"translucent";if(h.renderPass===C){const z=h.depthModeForSublayer(1,h.renderPass==="opaque"?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly);J2(h,i,l,f,z,T,!1)}if(h.renderPass==="translucent"&&l.paint.get("fill-antialias")){const z=h.depthModeForSublayer(l.getPaintProperty("fill-outline-color")?2:0,s.DepthMode.ReadOnly);J2(h,i,l,f,z,T,!0)}},"fill-extrusion":function(h,i,l,f){const g=l.paint.get("fill-extrusion-opacity");if(g!==0&&h.renderPass==="translucent"){const v=new s.DepthMode(h.context.gl.LEQUAL,s.DepthMode.ReadWrite,h.depthRangeFor3D);if(g!==1||l.paint.get("fill-extrusion-pattern").constantOr(1))b1(h,i,l,f,v,s.StencilMode.disabled,s.ColorMode.disabled),b1(h,i,l,f,v,h.stencilModeFor3D(),h.colorModeForRenderPass()),h.resetStencilClippingMasks();else{const T=h.colorModeForRenderPass();b1(h,i,l,f,v,s.StencilMode.disabled,T)}}},hillshade:function(h,i,l,f){if(h.renderPass!=="offscreen"&&h.renderPass!=="translucent")return;const g=h.context,v=h.depthModeForSublayer(0,s.DepthMode.ReadOnly),T=h.colorModeForRenderPass(),S=h.terrain&&h.terrain.renderingToTexture,[C,z]=h.renderPass!=="translucent"||S?[{},f]:h.stencilConfigForOverlap(f);for(const k of z){const F=i.getTile(k);if(F.needsHillshadePrepare&&h.renderPass==="offscreen")G2(h,F,l,v,s.StencilMode.disabled,T);else if(h.renderPass==="translucent"){const $=S&&h.terrain?h.terrain.stencilModeForRTTOverlap(k):C[k.overscaledZ];V2(h,k,F,l,v,$,T)}}g.viewport.set([0,0,h.width,h.height]),h.resetStencilClippingMasks()},raster:function(h,i,l,f,g,v){if(h.renderPass!=="translucent"||l.paint.get("raster-opacity")===0||!f.length)return;const T=h.context,S=T.gl,C=i.getSource(),z=h.useProgram("raster"),k=h.colorModeForRenderPass(),F=h.terrain&&h.terrain.renderingToTexture,[$,X]=C instanceof It||F?[{},f]:h.stencilConfigForOverlap(f),Y=X[X.length-1].overscaledZ,K=!h.options.moving;for(const J of X){const B=F?s.DepthMode.disabled:h.depthModeForSublayer(J.overscaledZ-Y,l.paint.get("raster-opacity")===1?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly,S.LESS),H=J.toUnwrapped(),ie=i.getTile(J);if(F&&(!ie||!ie.hasData()))continue;const oe=F?J.projMatrix:h.transform.calculateProjMatrix(H,K),me=h.terrain&&F?h.terrain.stencilModeForRTTOverlap(J):$[J.overscaledZ],ge=v?0:l.paint.get("raster-fade-duration");ie.registerFadeDuration(ge);const _e=i.findLoadedParent(J,0),Ee=_u(ie,_e,i,h.transform,ge);let Te,ze;h.terrain&&h.terrain.prepareDrawTile();const nt=l.paint.get("raster-resampling")==="nearest"?S.NEAREST:S.LINEAR;T.activeTexture.set(S.TEXTURE0),ie.texture.bind(nt,S.CLAMP_TO_EDGE),T.activeTexture.set(S.TEXTURE1),_e?(_e.texture.bind(nt,S.CLAMP_TO_EDGE),Te=Math.pow(2,_e.tileID.overscaledZ-ie.tileID.overscaledZ),ze=[ie.tileID.canonical.x*Te%1,ie.tileID.canonical.y*Te%1]):ie.texture.bind(nt,S.CLAMP_TO_EDGE),ie.texture.useMipmap&&T.extTextureFilterAnisotropic&&h.transform.pitch>20&&S.texParameterf(S.TEXTURE_2D,T.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,T.extTextureFilterAnisotropicMax);const Pe=Su(oe,ze||[0,0],Te||1,Ee,l,C instanceof It?C.perspectiveTransform:[0,0]);if(h.prepareDrawProgram(T,z,H),C instanceof It)C.boundsBuffer&&C.boundsSegments&&z.draw(T,S.TRIANGLES,B,s.StencilMode.disabled,k,s.CullFaceMode.disabled,Pe,l.id,C.boundsBuffer,h.quadTriangleIndexBuffer,C.boundsSegments);else{const{tileBoundsBuffer:qe,tileBoundsIndexBuffer:Re,tileBoundsSegments:tt}=h.getTileBoundsBuffers(ie);z.draw(T,S.TRIANGLES,B,me,k,s.CullFaceMode.disabled,Pe,l.id,qe,Re,tt)}}h.resetStencilClippingMasks()},background:function(h,i,l,f){const g=l.paint.get("background-color"),v=l.paint.get("background-opacity");if(v===0)return;const T=h.context,S=T.gl,C=h.transform,z=C.tileSize,k=l.paint.get("background-pattern");if(h.isPatternMissing(k))return;const F=!k&&g.a===1&&v===1&&h.opaquePassEnabledForLayer()?"opaque":"translucent";if(h.renderPass!==F)return;const $=s.StencilMode.disabled,X=h.depthModeForSublayer(0,F==="opaque"?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly),Y=h.colorModeForRenderPass(),K=h.useProgram(k?"backgroundPattern":"background");let J,B=f;B||(J=h.getBackgroundTiles(),B=Object.values(J).map(H=>H.tileID)),k&&(T.activeTexture.set(S.TEXTURE0),h.imageManager.bind(h.context));for(const H of B){const ie=H.toUnwrapped(),oe=f?H.projMatrix:h.transform.calculateProjMatrix(ie);h.prepareDrawTile();const me=i?i.getTile(H):J?J[H.key]:new s.Tile(H,z,C.zoom,h),ge=k?K5(oe,v,h,k,{tileID:H,tileSize:z}):Cu(oe,v,g);h.prepareDrawProgram(T,K,ie);const{tileBoundsBuffer:_e,tileBoundsIndexBuffer:Ee,tileBoundsSegments:Te}=h.getTileBoundsBuffers(me);K.draw(T,S.TRIANGLES,X,$,Y,s.CullFaceMode.disabled,ge,l.id,_e,Ee,Te)}},sky:function(h,i,l){const f=h.transform,g=f.projection.name==="mercator"||f.projection.name==="globe"?1:s.smoothstep(7,8,f.zoom),v=l.paint.get("sky-opacity")*g;if(v===0)return;const T=h.context,S=l.paint.get("sky-type"),C=new s.DepthMode(T.gl.LEQUAL,s.DepthMode.ReadOnly,[0,1]),z=h.frameCounter/1e3%1;S==="atmosphere"?h.renderPass==="offscreen"?l.needsSkyboxCapture(h)&&(function(k,F,$,X){const Y=k.context,K=Y.gl;let J=F.skyboxFbo;if(!J){J=F.skyboxFbo=Y.createFramebuffer(32,32,!1),F.skyboxGeometry=new E1(Y),F.skyboxTexture=Y.gl.createTexture(),K.bindTexture(K.TEXTURE_CUBE_MAP,F.skyboxTexture),K.texParameteri(K.TEXTURE_CUBE_MAP,K.TEXTURE_WRAP_S,K.CLAMP_TO_EDGE),K.texParameteri(K.TEXTURE_CUBE_MAP,K.TEXTURE_WRAP_T,K.CLAMP_TO_EDGE),K.texParameteri(K.TEXTURE_CUBE_MAP,K.TEXTURE_MIN_FILTER,K.LINEAR),K.texParameteri(K.TEXTURE_CUBE_MAP,K.TEXTURE_MAG_FILTER,K.LINEAR);for(let oe=0;oe<6;++oe)K.texImage2D(K.TEXTURE_CUBE_MAP_POSITIVE_X+oe,0,K.RGBA,32,32,0,K.RGBA,K.UNSIGNED_BYTE,null)}Y.bindFramebuffer.set(J.framebuffer),Y.viewport.set([0,0,32,32]);const B=F.getCenter(k,!0),H=k.useProgram("skyboxCapture"),ie=new Float64Array(16);s.identity(ie),s.rotateY(ie,ie,.5*-Math.PI),xi(Y,F,H,ie,B,0),s.identity(ie),s.rotateY(ie,ie,.5*Math.PI),xi(Y,F,H,ie,B,1),s.identity(ie),s.rotateX(ie,ie,.5*-Math.PI),xi(Y,F,H,ie,B,2),s.identity(ie),s.rotateX(ie,ie,.5*Math.PI),xi(Y,F,H,ie,B,3),s.identity(ie),xi(Y,F,H,ie,B,4),s.identity(ie),s.rotateY(ie,ie,Math.PI),xi(Y,F,H,ie,B,5),Y.viewport.set([0,0,k.width,k.height])}(h,l),l.markSkyboxValid(h)):h.renderPass==="sky"&&function(k,F,$,X,Y){const K=k.context,J=K.gl,B=k.transform,H=k.useProgram("skybox");K.activeTexture.set(J.TEXTURE0),J.bindTexture(J.TEXTURE_CUBE_MAP,F.skyboxTexture);const ie=((oe,me,ge,_e,Ee)=>({u_matrix:oe,u_sun_direction:me,u_cubemap:0,u_opacity:_e,u_temporal_offset:Ee}))(B.skyboxMatrix,F.getCenter(k,!1),0,X,Y);k.prepareDrawProgram(K,H),H.draw(K,J.TRIANGLES,$,s.StencilMode.disabled,k.colorModeForRenderPass(),s.CullFaceMode.backCW,ie,"skybox",F.skyboxGeometry.vertexBuffer,F.skyboxGeometry.indexBuffer,F.skyboxGeometry.segment)}(h,l,C,v,z):S==="gradient"&&h.renderPass==="sky"&&function(k,F,$,X,Y){const K=k.context,J=K.gl,B=k.transform,H=k.useProgram("skyboxGradient");F.skyboxGeometry||(F.skyboxGeometry=new E1(K)),K.activeTexture.set(J.TEXTURE0);let ie=F.colorRampTexture;ie||(ie=F.colorRampTexture=new s.Texture(K,F.colorRamp,J.RGBA)),ie.bind(J.LINEAR,J.CLAMP_TO_EDGE);const oe=((me,ge,_e,Ee,Te)=>({u_matrix:me,u_color_ramp:0,u_center_direction:ge,u_radius:s.degToRad(_e),u_opacity:Ee,u_temporal_offset:Te}))(B.skyboxMatrix,F.getCenter(k,!1),F.paint.get("sky-gradient-radius"),X,Y);k.prepareDrawProgram(K,H),H.draw(K,J.TRIANGLES,$,s.StencilMode.disabled,k.colorModeForRenderPass(),s.CullFaceMode.backCW,oe,"skyboxGradient",F.skyboxGeometry.vertexBuffer,F.skyboxGeometry.indexBuffer,F.skyboxGeometry.segment)}(h,l,C,v,z)},debug:function(h,i,l){for(let f=0;f<l.length;f++)nd(h,i,l[f])},custom:function(h,i,l,f){const g=h.context,v=l.implementation;if(!h.transform.projection.unsupportedLayers||!h.transform.projection.unsupportedLayers.includes("custom")||h.terrain&&(h.terrain.renderingToTexture||h.renderPass==="offscreen")&&l.isLayerDraped()){if(h.renderPass==="offscreen"){const T=v.prerender;if(T){if(h.setCustomLayerDefaults(),g.setColorMode(h.colorModeForRenderPass()),h.transform.projection.name==="globe"){const S=h.transform.pointMerc;T.call(v,g.gl,h.transform.customLayerMatrix(),h.transform.getProjection(),h.transform.globeToMercatorMatrix(),s.globeToMercatorTransition(h.transform.zoom),[S.x,S.y],h.transform.pixelsPerMeterRatio)}else T.call(v,g.gl,h.transform.customLayerMatrix());g.setDirty(),h.setBaseState()}}else if(h.renderPass==="translucent"){if(h.terrain&&h.terrain.renderingToTexture){const S=v.renderToTile;if(S){const C=f[0].canonical,z=new s.MercatorCoordinate(C.x+f[0].wrap*(1<<C.z),C.y,C.z);g.setDepthMode(s.DepthMode.disabled),g.setStencilMode(s.StencilMode.disabled),g.setColorMode(h.colorModeForRenderPass()),h.setCustomLayerDefaults(),S.call(v,g.gl,z),g.setDirty(),h.setBaseState()}return}h.setCustomLayerDefaults(),g.setColorMode(h.colorModeForRenderPass()),g.setStencilMode(s.StencilMode.disabled);const T=v.renderingMode==="3d"?new s.DepthMode(h.context.gl.LEQUAL,s.DepthMode.ReadWrite,h.depthRangeFor3D):h.depthModeForSublayer(0,s.DepthMode.ReadOnly);if(g.setDepthMode(T),h.transform.projection.name==="globe"){const S=h.transform.pointMerc;v.render(g.gl,h.transform.customLayerMatrix(),h.transform.getProjection(),h.transform.globeToMercatorMatrix(),s.globeToMercatorTransition(h.transform.zoom),[S.x,S.y],h.transform.pixelsPerMeterRatio)}else v.render(g.gl,h.transform.customLayerMatrix());g.setDirty(),h.setBaseState(),g.bindFramebuffer.set(null)}}else s.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class pa{constructor(i,l,f=!1){this.context=new Oe(i,f),this.transform=l,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=s.SourceCache.maxUnderzooming+s.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(i,l){const f=!!i&&!!i.terrain&&this.transform.projection.supportsTerrain;if(!(f||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new yu(this,i));const g=this._terrain;this.transform.elevation=f?g:null,g.update(i,this.transform,l)}_updateFog(i){const l=i.fog;if(!l||this.transform.projection.name==="globe"||l.getOpacity(this.transform.pitch)<1||l.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[f,g]=l.getFovAdjustedRange(this.transform._fov);if(f>g)return void(this.transform.fogCullDistSq=null);const v=f+.78*(g-f);this.transform.fogCullDistSq=v*v}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(i,l){if(this.width=i*s.exported.devicePixelRatio,this.height=l*s.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const f of this.style.order)this.style._layers[f].resize()}setup(){const i=this.context,l=new s.StructArrayLayout2i4;l.emplaceBack(0,0),l.emplaceBack(s.EXTENT,0),l.emplaceBack(0,s.EXTENT),l.emplaceBack(s.EXTENT,s.EXTENT),this.tileExtentBuffer=i.createVertexBuffer(l,s.posAttributes.members),this.tileExtentSegments=s.SegmentVector.simpleSegment(0,0,4,2);const f=new s.StructArrayLayout2i4;f.emplaceBack(0,0),f.emplaceBack(s.EXTENT,0),f.emplaceBack(0,s.EXTENT),f.emplaceBack(s.EXTENT,s.EXTENT),this.debugBuffer=i.createVertexBuffer(f,s.posAttributes.members),this.debugSegments=s.SegmentVector.simpleSegment(0,0,4,5);const g=new s.StructArrayLayout2i4;g.emplaceBack(-1,-1),g.emplaceBack(1,-1),g.emplaceBack(-1,1),g.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(g,s.posAttributes.members),this.viewportSegments=s.SegmentVector.simpleSegment(0,0,4,2);const v=new s.StructArrayLayout4i8;v.emplaceBack(0,0,0,0),v.emplaceBack(s.EXTENT,0,s.EXTENT,0),v.emplaceBack(0,s.EXTENT,0,s.EXTENT),v.emplaceBack(s.EXTENT,s.EXTENT,s.EXTENT,s.EXTENT),this.mercatorBoundsBuffer=i.createVertexBuffer(v,s.boundsAttributes.members),this.mercatorBoundsSegments=s.SegmentVector.simpleSegment(0,0,4,2);const T=new s.StructArrayLayout3ui6;T.emplaceBack(0,1,2),T.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(T);const S=new s.StructArrayLayout1ui2;for(const z of[0,1,3,2,0])S.emplaceBack(z);this.debugIndexBuffer=i.createIndexBuffer(S),this.emptyTexture=new s.Texture(i,new s.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),i.gl.RGBA),this.identityMat=s.create();const C=this.context.gl;this.stencilClearMode=new s.StencilMode({func:C.ALWAYS,mask:0},0,255,C.ZERO,C.ZERO,C.ZERO),this.loadTimeStamps.push(s.window.performance.now()),this.atmosphereBuffer=new rh(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(i){return i._makeTileBoundsBuffers(this.context,this.transform.projection),i._tileBoundsBuffer?{tileBoundsBuffer:i._tileBoundsBuffer,tileBoundsIndexBuffer:i._tileBoundsIndexBuffer,tileBoundsSegments:i._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const i=this.context,l=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(i,l.TRIANGLES,s.DepthMode.disabled,this.stencilClearMode,s.ColorMode.disabled,s.CullFaceMode.disabled,fl(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(i,l,f){if(!l||this.currentStencilSource===l.id||!i.isTileClipped()||!f||f.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let S=!1;for(const C of f)if(this._tileClippingMaskIDs[C.key]===void 0){S=!0;break}if(!S)return}this.currentStencilSource=l.id;const g=this.context,v=g.gl;this.nextStencilID+f.length>256&&this.clearStencil(),g.setColorMode(s.ColorMode.disabled),g.setDepthMode(s.DepthMode.disabled);const T=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const S of f){const C=l.getTile(S),z=this._tileClippingMaskIDs[S.key]=this.nextStencilID++,{tileBoundsBuffer:k,tileBoundsIndexBuffer:F,tileBoundsSegments:$}=this.getTileBoundsBuffers(C);T.draw(g,v.TRIANGLES,s.DepthMode.disabled,new s.StencilMode({func:v.ALWAYS,mask:0},z,255,v.KEEP,v.KEEP,v.REPLACE),s.ColorMode.disabled,s.CullFaceMode.disabled,fl(S.projMatrix),"$clipping",k,F,$)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,l=this.context.gl;return new s.StencilMode({func:l.NOTEQUAL,mask:255},i,255,l.KEEP,l.KEEP,l.REPLACE)}stencilModeForClipping(i){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(i);const l=this.context.gl;return new s.StencilMode({func:l.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,l.KEEP,l.KEEP,l.REPLACE)}stencilConfigForOverlap(i){const l=this.context.gl,f=i.sort((T,S)=>S.overscaledZ-T.overscaledZ),g=f[f.length-1].overscaledZ,v=f[0].overscaledZ-g+1;if(v>1){this.currentStencilSource=void 0,this.nextStencilID+v>256&&this.clearStencil();const T={};for(let S=0;S<v;S++)T[S+g]=new s.StencilMode({func:l.GEQUAL,mask:255},S+this.nextStencilID,255,l.KEEP,l.KEEP,l.REPLACE);return this.nextStencilID+=v,[T,f]}return[{[g]:s.StencilMode.disabled},f]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new s.ColorMode([i.CONSTANT_COLOR,i.ONE],new s.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?s.ColorMode.unblended:s.ColorMode.alphaBlended}depthModeForSublayer(i,l,f){if(!this.opaquePassEnabledForLayer())return s.DepthMode.disabled;const g=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new s.DepthMode(f||this.context.gl.LEQUAL,l,[g,g])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,l){this.style=i,this.options=l,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(s.exported.now()),this.imageManager.beginFrame();const f=this.style.order,g=this.style._sourceCaches;for(const z in g){const k=g[z];k.used&&k.prepare(this.context)}const v={},T={},S={};for(const z in g){const k=g[z];v[z]=k.getVisibleCoordinates(),T[z]=v[z].slice().reverse(),S[z]=k.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let z=0;z<f.length;z++)if(this.style._layers[f[z]].is3D()){this.opaquePassCutoff=z;break}if(this.terrain&&(this.terrain.updateTileBinding(S),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new s.GlobeSharedBuffers(this.context)),!s.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const z of f){const k=this.style._layers[z],F=i._getLayerSourceCache(k);if(!k.hasOffscreenPass()||k.isHidden(this.transform.zoom))continue;const $=F?T[F.id]:void 0;(k.type==="custom"||k.isSky()||$&&$.length)&&this.renderLayer(this,F,k,$)}this.depthRangeFor3D=[0,1-(i.order.length+2)*this.numSublayers*this.depthEpsilon];const C=this.terrain;if(C&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&C.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:l.showOverdrawInspector?s.Color.black:s.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=l.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=f.length-1;this.currentLayer>=0;this.currentLayer--){const z=this.style._layers[f[this.currentLayer]],k=i._getLayerSourceCache(z);if(z.isSky())continue;const F=k?T[k.id]:void 0;this._renderTileClippingMasks(z,k,F),this.renderLayer(this,k,z,F)}if(this.style.fog&&this.transform.projection.supportsFog&&function(z,k){const F=z.context,$=F.gl,X=z.transform,Y=new s.DepthMode($.LEQUAL,s.DepthMode.ReadOnly,[0,1]),K=z.useProgram("globeAtmosphere",null,X.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),J=s.globeToMercatorTransition(X.zoom),B=k.properties.get("color").toArray01(),H=k.properties.get("high-color").toArray01(),ie=k.properties.get("space-color").toArray01PremultipliedAlpha(),oe=s.identity$1([]);s.rotateY$1(oe,oe,-s.degToRad(X._center.lng)),s.rotateX$1(oe,oe,s.degToRad(X._center.lat)),s.rotateZ$1(oe,oe,X.angle),s.rotateX$1(oe,oe,-X._pitch);const me=s.fromQuat(new Float32Array(16),oe),ge=s.mapValue(k.properties.get("star-intensity"),0,1,0,.25),_e=5e-4,Ee=s.mapValue(k.properties.get("horizon-blend"),0,1,_e,.25),Te=s.globeUseCustomAntiAliasing(z,F,X)&&Ee===_e?X.worldSize/(2*Math.PI*1.025)-1:X.globeRadius,ze=z.frameCounter/1e3%1,nt=s.length(X.globeCenterInViewSpace),Pe=Math.sqrt(Math.pow(nt,2)-Math.pow(Te,2)),qe=Math.acos(Pe/nt),Re=((ke,Ze,it,Qe,ot,Ct,Ot,xt,zt,Kt,Wt,St,pn,gn)=>({u_frustum_tl:ke,u_frustum_tr:Ze,u_frustum_br:it,u_frustum_bl:Qe,u_horizon:ot,u_transition:Ct,u_fadeout_range:Ot,u_color:xt,u_high_color:zt,u_space_color:Kt,u_star_intensity:Wt,u_star_size:5*s.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:St,u_horizon_angle:pn,u_rotation_matrix:gn}))(X.frustumCorners.TL,X.frustumCorners.TR,X.frustumCorners.BR,X.frustumCorners.BL,X.frustumCorners.horizon,J,Ee,B,H,ie,ge,ze,qe,me);z.prepareDrawProgram(F,K);const tt=z.atmosphereBuffer;tt&&K.draw(F,$.TRIANGLES,Y,s.StencilMode.disabled,s.ColorMode.alphaBlended,s.CullFaceMode.backCW,Re,"skybox",tt.vertexBuffer,tt.indexBuffer,tt.segments)}(this,this.style.fog),this.renderPass="sky",(s.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<f.length;this.currentLayer++){const z=this.style._layers[f[this.currentLayer]],k=i._getLayerSourceCache(z);z.isSky()&&this.renderLayer(this,k,z,k?T[k.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<f.length;){const z=this.style._layers[f[this.currentLayer]],k=i._getLayerSourceCache(z);if(z.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(z)){if(z.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const F=k?(z.type==="symbol"?S:T)[k.id]:void 0;this._renderTileClippingMasks(z,k,k?v[k.id]:void 0),this.renderLayer(this,k,z,F),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let z=null;s.values(this.style._layers).forEach(k=>{const F=i._getLayerSourceCache(k);F&&!k.isHidden(this.transform.zoom)&&(!z||z.getSource().maxzoom<F.getSource().maxzoom)&&(z=F)}),z&&this.options.showTileBoundaries&&As.debug(this,z,z.getVisibleCoordinates())}this.options.showPadding&&function(z){const k=z.transform.padding;eh(z,z.transform.height-(k.top||0),3,ha),eh(z,k.bottom||0,3,J5),T1(z,k.left||0,3,Q5),T1(z,z.transform.width-(k.right||0),3,ed);const F=z.transform.centerPoint;(function($,X,Y,K){da($,X-1,Y-10,2,20,K),da($,X-10,Y-1,20,2,K)})(z,F.x,z.transform.height-F.y,td)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(s.window.performance.now()),this.saveCanvasCopy())}renderLayer(i,l,f,g){f.isHidden(this.transform.zoom)||(f.type==="background"||f.type==="sky"||f.type==="custom"||g&&g.length)&&(this.id=f.id,this.gpuTimingStart(f),(!i.transform.projection.unsupportedLayers||!i.transform.projection.unsupportedLayers.includes(f.type)||i.terrain&&f.type==="custom")&&As[f.type](i,l,f,g,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(i){if(!this.options.gpuTiming)return;const l=this.context.extTimerQuery;let f=this.gpuTimers[i.id];f||(f=this.gpuTimers[i.id]={calls:0,cpuTime:0,query:l.createQueryEXT()}),f.calls++,l.beginQueryEXT(l.TIME_ELAPSED_EXT,f.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const i=this.context.extTimerQuery,l=i.createQueryEXT();this.deferredRenderGpuTimeQueries.push(l),i.beginQueryEXT(i.TIME_ELAPSED_EXT,l)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const i=this.context.extTimerQuery;i.endQueryEXT(i.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const i=this.context.extTimerQuery;i.endQueryEXT(i.TIME_ELAPSED_EXT)}collectGpuTimers(){const i=this.gpuTimers;return this.gpuTimers={},i}collectDeferredRenderGpuQueries(){const i=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],i}queryGpuTimers(i){const l={};for(const f in i){const g=i[f],v=this.context.extTimerQuery,T=v.getQueryObjectEXT(g.query,v.QUERY_RESULT_EXT)/1e6;v.deleteQueryEXT(g.query),l[f]=T}return l}queryGpuTimeDeferredRender(i){if(!this.options.gpuTimingDeferredRender)return 0;const l=this.context.extTimerQuery;let f=0;for(const g of i)f+=l.getQueryObjectEXT(g,l.QUERY_RESULT_EXT)/1e6,l.deleteQueryEXT(g);return f}translatePosMatrix(i,l,f,g,v){if(!f[0]&&!f[1])return i;const T=v?g==="map"?this.transform.angle:0:g==="viewport"?-this.transform.angle:0;if(T){const z=Math.sin(T),k=Math.cos(T);f=[f[0]*k-f[1]*z,f[0]*z+f[1]*k]}const S=[v?f[0]:Tt(l,f[0],this.transform.zoom),v?f[1]:Tt(l,f[1],this.transform.zoom),0],C=new Float32Array(16);return s.translate(C,i,S),C}saveTileTexture(i){const l=this._tileTextures[i.size[0]];l?l.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const l=this._tileTextures[i];return l&&l.length>0?l.pop():null}isPatternMissing(i){return i===null||i!==void 0&&!this.imageManager.getPattern(i.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const i=this.terrain&&this.terrain.renderingToTexture,l=this.terrain&&this.terrain.exaggeration()===0,f=this.style&&this.style.fog,g=[];return this.terrainRenderModeElevated()&&g.push("TERRAIN"),this.transform.projection.name==="globe"&&g.push("GLOBE"),l&&g.push("ZERO_EXAGGERATION"),f&&!i&&f.getOpacity(this.transform.pitch)!==0&&g.push("FOG"),i&&g.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&g.push("OVERDRAW_INSPECTOR"),g}useProgram(i,l,f){this.cache=this.cache||{};const g=f||[],v=this.currentGlobalDefines().concat(g),T=rn.cacheKey(du[i],i,v,l);return this.cache[T]||(this.cache[T]=new rn(this.context,i,du[i],l,Pu[i],v)),this.cache[T]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=s.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new s.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(i,l,f){if(this.terrain&&this.terrain.renderingToTexture)return;const g=this.style.fog;if(g){const v=g.getOpacity(this.transform.pitch),T=((S,C,z,k,F,$,X,Y,K,J,B)=>{const H=S.transform,ie=C.properties.get("color").toArray01();ie[3]=k;const oe=S.frameCounter/1e3%1;return{u_fog_matrix:z?H.calculateFogTileMatrix(z):S.identityMat,u_fog_range:C.getFovAdjustedRange(H._fov),u_fog_color:ie,u_fog_horizon_blend:C.properties.get("horizon-blend"),u_fog_temporal_offset:oe,u_frustum_tl:F,u_frustum_tr:$,u_frustum_br:X,u_frustum_bl:Y,u_globe_pos:K,u_globe_radius:J,u_viewport:B,u_globe_transition:s.globeToMercatorTransition(H.zoom),u_is_globe:+(H.projection.name==="globe")}})(this,g,f,v,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*s.exported.devicePixelRatio,this.transform.height*s.exported.devicePixelRatio]);l.setFogUniformValues(i,T)}}setTileLoadedFlag(i){this.tileLoaded=i}saveCanvasCopy(){const i=this.canvasCopy();i&&(this.frameCopies.push(i),this.tileLoaded=!1)}canvasCopy(){const i=this.context.gl,l=i.createTexture();return i.bindTexture(i.TEXTURE_2D,l),i.copyTexImage2D(i.TEXTURE_2D,0,i.RGBA,0,0,i.drawingBufferWidth,i.drawingBufferHeight,0),l}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const i=this.style&&this.style.fog;return!!i&&i.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const i=this._backgroundTiles,l=this._backgroundTiles={},f=this.transform.coveringTiles({tileSize:512});for(const g of f)l[g.key]=i[g.key]||new s.Tile(g,512,this.transform.tileZoom,this);return l}clearBackgroundTiles(){this._backgroundTiles={}}}class S1{constructor(i=0,l=0,f=0,g=0){if(isNaN(i)||i<0||isNaN(l)||l<0||isNaN(f)||f<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=l,this.left=f,this.right=g}interpolate(i,l,f){return l.top!=null&&i.top!=null&&(this.top=s.number(i.top,l.top,f)),l.bottom!=null&&i.bottom!=null&&(this.bottom=s.number(i.bottom,l.bottom,f)),l.left!=null&&i.left!=null&&(this.left=s.number(i.left,l.left,f)),l.right!=null&&i.right!=null&&(this.right=s.number(i.right,l.right,f)),this}getCenter(i,l){const f=s.clamp((this.left+i-this.right)/2,0,i),g=s.clamp((this.top+l-this.bottom)/2,0,l);return new s.Point(f,g)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new S1(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function M1(h,i){const l=s.getColumn(h,3);s.fromQuat(h,i),s.setColumn(h,3,l)}function on(h,i){const l=s.identity$1([]);return s.rotateZ$1(l,l,-i),s.rotateX$1(l,l,-h),l}function wl(h,i){const l=[h[0],h[1],0],f=[i[0],i[1],0];if(s.length(l)>=1e-15){const T=s.normalize([],l);s.scale$2(f,T,s.dot(f,T)),i[0]=f[0],i[1]=f[1]}const g=s.cross([],i,h);if(s.len(g)<1e-15)return null;const v=Math.atan2(-g[1],g[0]);return on(Math.atan2(Math.sqrt(h[0]*h[0]+h[1]*h[1]),-h[2]),v)}class ih{constructor(i,l){this.position=i,this.orientation=l}get position(){return this._position}set position(i){if(i){const l=i instanceof s.MercatorCoordinate?i:new s.MercatorCoordinate(i[0],i[1],i[2]);this._renderWorldCopies&&(l.x=s.wrap(l.x,0,1)),this._position=l}else this._position=null}lookAtPoint(i,l){if(this.orientation=null,!this.position)return;const f=this.position,g=this._elevation?this._elevation.getAtPointOrZero(s.MercatorCoordinate.fromLngLat(i)):0,v=s.MercatorCoordinate.fromLngLat(i,g),T=[v.x-f.x,v.y-f.y,v.z-f.z];l||(l=[0,0,1]),l[2]=Math.abs(l[2]),this.orientation=wl(T,l)}setPitchBearing(i,l){this.orientation=on(s.degToRad(i),s.degToRad(-l))}}class C1{constructor(i,l){this._transform=s.identity([]),this.orientation=l,this.position=i}get mercatorPosition(){const i=this.position;return new s.MercatorCoordinate(i[0],i[1],i[2])}get position(){const i=s.getColumn(this._transform,3);return[i[0],i[1],i[2]]}set position(i){var l;i&&s.setColumn(this._transform,3,[(l=i)[0],l[1],l[2],1])}get orientation(){return this._orientation}set orientation(i){this._orientation=i||s.identity$1([]),i&&M1(this._transform,this._orientation)}getPitchBearing(){const i=this.forward(),l=this.right();return{bearing:Math.atan2(-l[1],l[0]),pitch:Math.atan2(Math.sqrt(i[0]*i[0]+i[1]*i[1]),-i[2])}}setPitchBearing(i,l){this._orientation=on(i,l),M1(this._transform,this._orientation)}forward(){const i=s.getColumn(this._transform,2);return[-i[0],-i[1],-i[2]]}up(){const i=s.getColumn(this._transform,1);return[-i[0],-i[1],-i[2]]}right(){const i=s.getColumn(this._transform,0);return[i[0],i[1],i[2]]}getCameraToWorld(i,l){const f=new Float64Array(16);return s.invert(f,this.getWorldToCamera(i,l)),f}getWorldToCameraPosition(i,l,f){const g=this.position;s.scale$2(g,g,-i);const v=new Float64Array(16);return s.fromScaling(v,[f,f,f]),s.translate(v,v,g),v[10]*=l,v}getWorldToCamera(i,l){const f=new Float64Array(16),g=new Float64Array(4),v=this.position;return s.conjugate(g,this._orientation),s.scale$2(v,v,-i),s.fromQuat(f,g),s.translate(f,f,v),f[1]*=-1,f[5]*=-1,f[9]*=-1,f[13]*=-1,f[8]*=l,f[9]*=l,f[10]*=l,f[11]*=l,f}getCameraToClipPerspective(i,l,f,g){const v=new Float64Array(16);return s.perspective(v,i,l,f,g),v}getDistanceToElevation(i,l=!1){const f=i===0?0:s.mercatorZfromAltitude(i,l?s.latFromMercatorY(this.position[1]):this.position[1]),g=this.forward();return(f-this.position[2])/g[2]}clone(){return new C1([...this.position],[...this.orientation])}}function fa(h,i){const l=P1(h.projection,h.zoom,h.width,h.height),f=function(v,T,S,C,z){const k=new s.LngLat(S.lng-180*zo,S.lat),F=new s.LngLat(S.lng+180*zo,S.lat),$=v.project(k.lng,k.lat),X=v.project(F.lng,F.lat),Y=-Math.atan2(X.y-$.y,X.x-$.x),K=s.MercatorCoordinate.fromLngLat(S);K.y=s.clamp(K.y,-1+zo,1-zo);const J=K.toLngLat(),B=v.project(J.lng,J.lat),H=s.MercatorCoordinate.fromLngLat(J);H.x+=zo;const ie=H.toLngLat(),oe=v.project(ie.lng,ie.lat),me=A1(oe.x-B.x,oe.y-B.y,Y),ge=s.MercatorCoordinate.fromLngLat(J);ge.y+=zo;const _e=ge.toLngLat(),Ee=v.project(_e.lng,_e.lat),Te=A1(Ee.x-B.x,Ee.y-B.y,Y),ze=Math.abs(me.x)/Math.abs(Te.y),nt=s.identity([]);s.rotateZ(nt,nt,-Y*(1-(z?0:C)));const Pe=s.identity([]);return s.scale(Pe,Pe,[1,1-(1-ze)*C,1]),Pe[4]=-Te.x/Te.y*C,s.rotateZ(Pe,Pe,Y),s.multiply(Pe,nt,Pe),Pe}(h.projection,0,h.center,l,i),g=oh(h);return s.scale(f,f,[g,g,1]),f}function oh(h){const i=h.projection,l=P1(h.projection,h.zoom,h.width,h.height),f=sh(i,h.center),g=sh(i,s.LngLat.convert(i.center));return Math.pow(2,f*l+(1-l)*g)}function P1(h,i,l,f,g=1/0){const v=h.range;if(!v)return 0;const T=Math.min(g,Math.max(l,f)),S=Math.log(T/1024)/Math.LN2;return s.smoothstep(v[0]+S,v[1]+S,i)}const zo=1/4e4;function sh(h,i){const l=s.clamp(i.lat,-s.MAX_MERCATOR_LATITUDE,s.MAX_MERCATOR_LATITUDE),f=new s.LngLat(i.lng-180*zo,l),g=new s.LngLat(i.lng+180*zo,l),v=h.project(f.lng,l),T=h.project(g.lng,l),S=s.MercatorCoordinate.fromLngLat(f),C=s.MercatorCoordinate.fromLngLat(g),z=T.x-v.x,k=T.y-v.y,F=C.x-S.x,$=C.y-S.y,X=Math.sqrt((F*F+$*$)/(z*z+k*k));return Math.log(X)/Math.LN2}function A1(h,i,l){const f=Math.cos(l),g=Math.sin(l);return{x:h*f-i*g,y:h*g+i*f}}class ma{constructor(i,l,f,g,v,T,S){this.tileSize=512,this._renderWorldCopies=v===void 0||v,this._minZoom=i||0,this._maxZoom=l||22,this._minPitch=f??0,this._maxPitch=g??60,this.setProjection(T),this.setMaxBounds(S),this.width=0,this.height=0,this._center=new s.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new S1,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new C1,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const i=new ma(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return i._elevation=this._elevation,i._centerAltitude=this._centerAltitude,i._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,i.tileSize=this.tileSize,i.mercatorFromTransition=this.mercatorFromTransition,i.width=this.width,i.height=this.height,i.cameraElevationReference=this.cameraElevationReference,i._center=this._center,i._setZoom(this.zoom),i._seaLevelZoom=this._seaLevelZoom,i.angle=this.angle,i._fov=this._fov,i._pitch=this._pitch,i._nearZ=this._nearZ,i._farZ=this._farZ,i._averageElevation=this._averageElevation,i._unmodified=this._unmodified,i._edgeInsets=this._edgeInsets.clone(),i._camera=this._camera.clone(),i._calcMatrices(),i.freezeTileCoverage=this.freezeTileCoverage,i.frustumCorners=this.frustumCorners,i}get elevation(){return this._elevation}set elevation(i){this._elevation!==i&&(this._elevation=i,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(i,l=!1){const f=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||f)&&this._updateCameraOnTerrain(),(i||f)&&this._constrainCamera(l),this._calcMatrices()}getProjection(){return s.pick(this.projection,["name","center","parallels"])}setProjection(i){this.projectionOptions=i||{name:"mercator"};const l=this.projection?this.getProjection():void 0;this.projection=s.getProjection(this.projectionOptions);const f=!P(l,this.getProjection());return f&&this._calcMatrices(),this.mercatorFromTransition=!1,f}setMercatorFromTransition(){const i=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=s.getProjection({name:"mercator"});const l=i!==this.projection.name;return l&&this._calcMatrices(),l}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const i=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(i))}get cameraWorldSize(){const i=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(i))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return s.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.Point(this.width,this.height)}get bearing(){return s.wrap(this.rotation,-180,180)}set bearing(i){this.rotation=i}get rotation(){return-this.angle/Math.PI*180}set rotation(i){const l=-i*Math.PI/180;var f;this.angle!==l&&(this._unmodified=!1,this.angle=l,this._calcMatrices(),this.rotationMatrix=(f=new s.ARRAY_TYPE(4),s.ARRAY_TYPE!=Float32Array&&(f[1]=0,f[2]=0),f[0]=1,f[3]=1,f),function(g,v,T){var S=v[0],C=v[1],z=v[2],k=v[3],F=Math.sin(T),$=Math.cos(T);g[0]=S*$+z*F,g[1]=C*$+k*F,g[2]=S*-F+z*$,g[3]=C*-F+k*$}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const l=s.clamp(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==l&&(this._unmodified=!1,this._pitch=l,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const i=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/i)}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=s.degToRad(i),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(i){this._averageElevation=i,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(i){const l=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==l&&(this._unmodified=!1,this._setZoom(l),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(i){this._zoom=i,this.scale=this.zoomScale(i),this.tileZoom=Math.floor(i),this.zoomFraction=i-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const i=this._elevation;this._centerAltitude=i.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=i.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const i=this._elevation,l=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],f=this.horizonLineFromTop();let g=0,v=0;for(let T=0;T<l.length;T++){const S=new s.Point(l[T][0]*this.width,f+l[T][1]*(this.height-f)),C=i.pointCoordinate(S);if(!C)continue;const z=1/Math.hypot(C[0]-this._camera.position[0],C[1]-this._camera.position[1]);g+=C[3]*z,v+=z}return v===0?NaN:g/v}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const i=this._seaLevelZoom,l=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),f=this.pixelsPerMeter/this.worldSize*l,g=this._mercatorZfromZoom(i),v=this._mercatorZfromZoom(this._maxZoom),T=Math.max(g-f,v);this._setZoom(this._zoomFromMercatorZ(T))}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}computeZoomRelativeTo(i){const l=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,i.toAltitude()));let f;f=i.z<this._camera.position[2]?[l.x,l.y,l.z]:[i.x,i.y,i.z];const g=s.length(s.sub([],this._camera.position,f));return s.clamp(this._zoomFromMercatorZ(g),this._minZoom,this._maxZoom)}setFreeCameraOptions(i){if(!this.height||!i.position&&!i.orientation)return;this._updateCameraState();let l=!1;if(i.orientation&&!s.exactEquals(i.orientation,this._camera.orientation)&&(l=this._setCameraOrientation(i.orientation)),i.position){const f=[i.position.x,i.position.y,i.position.z];s.exactEquals$1(f,this._camera.position)||(this._setCameraPosition(f),l=!0)}l&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const i=this._camera.position,l=new ih;return l.position=new s.MercatorCoordinate(i[0],i[1],i[2]),l.orientation=this._camera.orientation,l._elevation=this.elevation,l._renderWorldCopies=this.renderWorldCopies,l}_setCameraOrientation(i){if(!s.length$1(i))return!1;s.normalize$1(i,i);const l=s.transformQuat([],[0,0,-1],i),f=s.transformQuat([],[0,-1,0],i);if(f[2]<0)return!1;const g=wl(l,f);return!!g&&(this._camera.orientation=g,!0)}_setCameraPosition(i){const l=this.zoomScale(this.minZoom)*this.tileSize,f=this.zoomScale(this.maxZoom)*this.tileSize,g=this.cameraToCenterDistance;i[2]=s.clamp(i[2],g/f,g/l),this._camera.position=i}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,l,f){this._unmodified=!1,this._edgeInsets.interpolate(i,l,f),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const l=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,l)}getVisibleUnwrappedCoordinates(i){const l=[new s.UnwrappedTileID(0,i)];if(this.renderWorldCopies){const f=this.pointCoordinate(new s.Point(0,0)),g=this.pointCoordinate(new s.Point(this.width,0)),v=this.pointCoordinate(new s.Point(this.width,this.height)),T=this.pointCoordinate(new s.Point(0,this.height)),S=Math.floor(Math.min(f.x,g.x,v.x,T.x)),C=Math.floor(Math.max(f.x,g.x,v.x,T.x)),z=1;for(let k=S-z;k<=C+z;k++)k!==0&&l.push(new s.UnwrappedTileID(k,i))}return l}coveringTiles(i){let l=this.coveringZoomLevel(i);const f=l,g=this.elevation&&!i.isTerrainDEM,v=this.projection.name==="mercator";if(i.minzoom!==void 0&&l<i.minzoom)return[];i.maxzoom!==void 0&&l>i.maxzoom&&(l=i.maxzoom);const T=this.locationCoordinate(this.center),S=this.center.lat,C=1<<l,z=[C*T.x,C*T.y,0],k=this.projection.name==="globe",F=!k,$=s.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,l,F),X=k?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),Y=C*s.mercatorZfromAltitude(1,this.center.lat),K=this._camera.position[2]/s.mercatorZfromAltitude(1,this.center.lat),J=[C*X.x,C*X.y,K*(F?1:Y)],B=this.cameraToCenterDistance/i.tileSize*(i.roundZoom?1:.502),H=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?l:0,ie=i.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,oe=i.isTerrainDEM?-ie:this._elevation?this._elevation.getMinElevationBelowMSL():0,me=this.projection.isReprojectedInTileSpace?oh(this):1,ge=ke=>{const it=new s.MercatorCoordinate(ke.x+25e-6,ke.y,ke.z),Qe=new s.MercatorCoordinate(ke.x,ke.y+25e-6,ke.z),ot=ke.toLngLat(),Ct=it.toLngLat(),Ot=Qe.toLngLat(),xt=this.locationCoordinate(ot),zt=this.locationCoordinate(Ct),Kt=this.locationCoordinate(Ot),Wt=Math.hypot(zt.x-xt.x,zt.y-xt.y),St=Math.hypot(Kt.x-xt.x,Kt.y-xt.y);return Math.sqrt(Wt*St)*me/25e-6},_e=ke=>{const Ze=ie,it=oe;return{aabb:s.tileAABB(this,C,0,0,0,ke,it,Ze,this.projection),zoom:0,x:0,y:0,minZ:it,maxZ:Ze,wrap:ke,fullyVisible:!1}},Ee=[];let Te=[];const ze=l,nt=i.reparseOverscaled?f:l,Pe=ke=>ke*ke,qe=Pe((K-this._centerAltitude)*Y),Re=ke=>{if(!this._elevation||!ke.tileID||!v)return;const Ze=this._elevation.getMinMaxForTile(ke.tileID),it=ke.aabb;Ze?(it.min[2]=Ze.min,it.max[2]=Ze.max,it.center[2]=(it.min[2]+it.max[2])/2):(ke.shouldSplit=tt(ke),ke.shouldSplit||(it.min[2]=it.max[2]=it.center[2]=this._centerAltitude))},tt=ke=>{if(ke.zoom<H)return!0;if(ke.zoom===ze)return!1;if(ke.shouldSplit!=null)return ke.shouldSplit;const Ze=ke.aabb.distanceX(J),it=ke.aabb.distanceY(J);let Qe=qe,ot=1;if(k){Qe=Pe(ke.aabb.distanceZ(J));const xt=Math.pow(2,ke.zoom),zt=s.latFromMercatorY((ke.y+1)/xt),Kt=s.latFromMercatorY(ke.y/xt),Wt=Math.min(Math.max(S,zt),Kt),St=s.circumferenceAtLatitude(Wt)/s.circumferenceAtLatitude(S);if(ot=Wt===S?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,St/this._mercatorScaleRatio),this.zoom<=s.GLOBE_ZOOM_THRESHOLD_MIN&&ke.zoom===ze-1&&St>=.9)return!0}else if(g&&(Qe=Pe(ke.aabb.distanceZ(J)*Y)),this.projection.isReprojectedInTileSpace&&f<=5){const xt=Math.pow(2,ke.zoom),zt=ge(new s.MercatorCoordinate((ke.x+.5)/xt,(ke.y+.5)/xt));ot=zt>.85?1:zt}const Ct=Ze*Ze+it*it+Qe,Ot=Pe((1<<ze-ke.zoom)*B*ot*((xt,zt)=>{if(zt*Pe(.707)<xt)return 1;const Kt=Math.sqrt(zt/xt);return Kt/(1.4144271570014144+(Math.pow(1.1,Kt-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(Qe,qe),Ct));return Ct<Ot};if(this.renderWorldCopies)for(let ke=1;ke<=3;ke++)Ee.push(_e(-ke)),Ee.push(_e(ke));for(Ee.push(_e(0));Ee.length>0;){const ke=Ee.pop(),Ze=ke.x,it=ke.y;let Qe=ke.fullyVisible;if(!Qe){const ot=ke.aabb.intersects($);if(ot===0)continue;Qe=ot===2}if(ke.zoom!==ze&&tt(ke))for(let ot=0;ot<4;ot++){const Ct=(Ze<<1)+ot%2,Ot=(it<<1)+(ot>>1),xt={aabb:v?ke.aabb.quadrant(ot):s.tileAABB(this,C,ke.zoom+1,Ct,Ot,ke.wrap,ke.minZ,ke.maxZ,this.projection),zoom:ke.zoom+1,x:Ct,y:Ot,wrap:ke.wrap,fullyVisible:Qe,tileID:void 0,shouldSplit:void 0,minZ:ke.minZ,maxZ:ke.maxZ};g&&!k&&(xt.tileID=new s.OverscaledTileID(ke.zoom+1===ze?nt:ke.zoom+1,ke.wrap,ke.zoom+1,Ct,Ot),Re(xt)),Ee.push(xt)}else{const ot=ke.zoom===ze?nt:ke.zoom;if(i.minzoom&&i.minzoom>ot)continue;const Ct=z[0]-(.5+Ze+(ke.wrap<<ke.zoom))*(1<<l-ke.zoom),Ot=z[1]-.5-it,xt=ke.tileID?ke.tileID:new s.OverscaledTileID(ot,ke.wrap,ke.zoom,Ze,it);Te.push({tileID:xt,distanceSq:Ct*Ct+Ot*Ot})}}if(this.fogCullDistSq){const ke=this.fogCullDistSq,Ze=this.horizonLineFromTop();Te=Te.filter(it=>{const Qe=[0,0,0,1],ot=[s.EXTENT,s.EXTENT,0,1],Ct=this.calculateFogTileMatrix(it.tileID.toUnwrapped());s.transformMat4$1(Qe,Qe,Ct),s.transformMat4$1(ot,ot,Ct);const Ot=s.getAABBPointSquareDist(Qe,ot);if(Ot===0)return!0;let xt=!1;const zt=this._elevation;if(zt&&Ot>ke&&Ze!==0){const Kt=this.calculateProjMatrix(it.tileID.toUnwrapped());let Wt;i.isTerrainDEM||(Wt=zt.getMinMaxForTile(it.tileID)),Wt||(Wt={min:oe,max:ie});const St=s.furthestTileCorner(this.rotation),pn=[St[0]*s.EXTENT,St[1]*s.EXTENT,Wt.max];s.transformMat4(pn,pn,Kt),xt=(1-pn[1])*this.height*.5<Ze}return Ot<ke||xt})}return Te.sort((ke,Ze)=>ke.distanceSq-Ze.distanceSq).map(ke=>ke.tileID)}resize(i,l){this.width=i,this.height=l,this.pixelsToGLUnits=[2/i,-2/l],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const l=s.clamp(i.lat,-s.MAX_MERCATOR_LATITUDE,s.MAX_MERCATOR_LATITUDE),f=this.projection.project(i.lng,l);return new s.Point(f.x*this.worldSize,f.y*this.worldSize)}unproject(i){return this.projection.unproject(i.x/this.worldSize,i.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/s.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(i,l){let f,g;const v=this.centerPoint;if(this.projection.name==="globe"){const S=this.worldSize;f=(l.x-v.x)/S,g=(l.y-v.y)/S}else{const S=this.pointCoordinate(l),C=this.pointCoordinate(v);f=S.x-C.x,g=S.y-C.y}const T=this.locationCoordinate(i);this.setLocation(new s.MercatorCoordinate(T.x-f,T.y-g))}setLocation(i){this.center=this.coordinateLocation(i),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(i){return this.projection.locationPoint(this,i)}locationPoint3D(i){return this.projection.locationPoint(this,i,!0)}pointLocation(i){return this.coordinateLocation(this.pointCoordinate(i))}pointLocation3D(i){return this.coordinateLocation(this.pointCoordinate3D(i))}locationCoordinate(i,l){const f=l?s.mercatorZfromAltitude(l,i.lat):void 0,g=this.projection.project(i.lng,i.lat);return new s.MercatorCoordinate(g.x,g.y,f)}coordinateLocation(i){return this.projection.unproject(i.x,i.y)}pointRayIntersection(i,l){const f=l??this._centerAltitude,g=[i.x,i.y,0,1],v=[i.x,i.y,1,1];s.transformMat4$1(g,g,this.pixelMatrixInverse),s.transformMat4$1(v,v,this.pixelMatrixInverse);const T=v[3];s.scale$1(g,g,1/g[3]),s.scale$1(v,v,1/T);const S=g[2],C=v[2];return{p0:g,p1:v,t:S===C?0:(f-S)/(C-S)}}screenPointToMercatorRay(i){const l=[i.x,i.y,0,1],f=[i.x,i.y,1,1];return s.transformMat4$1(l,l,this.pixelMatrixInverse),s.transformMat4$1(f,f,this.pixelMatrixInverse),s.scale$1(l,l,1/l[3]),s.scale$1(f,f,1/f[3]),l[2]=s.mercatorZfromAltitude(l[2],this._center.lat)*this.worldSize,f[2]=s.mercatorZfromAltitude(f[2],this._center.lat)*this.worldSize,s.scale$1(l,l,1/this.worldSize),s.scale$1(f,f,1/this.worldSize),new s.Ray([l[0],l[1],l[2]],s.normalize([],s.sub([],f,l)))}rayIntersectionCoordinate(i){const{p0:l,p1:f,t:g}=i,v=s.mercatorZfromAltitude(l[2],this._center.lat),T=s.mercatorZfromAltitude(f[2],this._center.lat);return new s.MercatorCoordinate(s.number(l[0],f[0],g)/this.worldSize,s.number(l[1],f[1],g)/this.worldSize,s.number(v,T,g))}pointCoordinate(i,l=this._centerAltitude){return this.projection.pointCoordinate(this,i.x,i.y,l)}pointCoordinate3D(i){if(!this.elevation)return this.pointCoordinate(i);let l=this.projection.pointCoordinate3D(this,i.x,i.y);if(l)return new s.MercatorCoordinate(l[0],l[1],l[2]);let f=0,g=this.horizonLineFromTop();if(i.y>g)return this.pointCoordinate(i);const v=.02*g,T=i.clone();for(let S=0;S<10&&g-f>v;S++){T.y=s.number(f,g,.66);const C=this.projection.pointCoordinate3D(this,T.x,T.y);C?(g=T.y,l=C):f=T.y}return l?new s.MercatorCoordinate(l[0],l[1],l[2]):this.pointCoordinate(i)}isPointAboveHorizon(i){return this.projection.isPointAboveHorizon(this,i)}isPointOnSurface(i){if(i.y<0||i.y>this.height||i.x<0||i.x>this.width)return!1;if(this.elevation||this.zoom>=s.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(i);const l=this.pointCoordinate(i);return l.y>=0&&l.y<=1}_coordinatePoint(i,l){const f=l&&this.elevation?this.elevation.getAtPointOrZero(i,this._centerAltitude):this._centerAltitude,g=[i.x*this.worldSize,i.y*this.worldSize,f+i.toAltitude(),1];return s.transformMat4$1(g,g,this.pixelMatrix),g[3]>0?new s.Point(g[0]/g[3],g[1]/g[3]):new s.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:i,left:l}=this._edgeInsets,f=this.height-this._edgeInsets.bottom,g=this.width-this._edgeInsets.right,v=this.pointLocation3D(new s.Point(l,i)),T=this.pointLocation3D(new s.Point(g,i)),S=this.pointLocation3D(new s.Point(g,f)),C=this.pointLocation3D(new s.Point(l,f));let z=Math.min(v.lng,T.lng,S.lng,C.lng),k=Math.max(v.lng,T.lng,S.lng,C.lng),F=Math.min(v.lat,T.lat,S.lat,C.lat),$=Math.max(v.lat,T.lat,S.lat,C.lat);const X=Math.pow(2,-this.zoom)/16*270,Y=this.projection.name==="globe"?1:4,K=(J,B,H,ie,oe)=>{const me=(J+H)/2,ge=(B+ie)/2,_e=new s.Point(me,ge),{lng:Ee,lat:Te}=this.pointLocation3D(_e),ze=Math.max(0,z-Ee,F-Te,Ee-k,Te-$);z=Math.min(z,Ee),k=Math.max(k,Ee),F=Math.min(F,Te),$=Math.max($,Te),(oe<Y||ze>X)&&(K(J,B,me,ge,oe+1),K(me,ge,H,ie,oe+1))};if(K(l,i,g,i,1),K(g,i,g,f,1),K(g,f,l,f,1),K(l,f,l,i,1),this.projection.name==="globe"){const[J,B]=s.polesInViewport(this);J?($=90,k=180,z=-180):B&&(F=-90,k=180,z=-180)}return new s.LngLatBounds(new s.LngLat(z,F),new s.LngLat(k,$))}_getBoundsRectangular(i,l){const{top:f,left:g}=this._edgeInsets,v=this.height-this._edgeInsets.bottom,T=this.width-this._edgeInsets.right,S=new s.Point(g,f),C=new s.Point(T,f),z=new s.Point(T,v),k=new s.Point(g,v);let F=this.pointCoordinate(S,i),$=this.pointCoordinate(C,i);const X=this.pointCoordinate(z,l),Y=this.pointCoordinate(k,l),K=(J,B)=>(B.y-J.y)/(B.x-J.x);return F.y>1&&$.y>=0?F=new s.MercatorCoordinate((1-Y.y)/K(Y,F)+Y.x,1):F.y<0&&$.y<=1&&(F=new s.MercatorCoordinate(-Y.y/K(Y,F)+Y.x,0)),$.y>1&&F.y>=0?$=new s.MercatorCoordinate((1-X.y)/K(X,$)+X.x,1):$.y<0&&F.y<=1&&($=new s.MercatorCoordinate(-X.y/K(X,$)+X.x,0)),new s.LngLatBounds().extend(this.coordinateLocation(F)).extend(this.coordinateLocation($)).extend(this.coordinateLocation(Y)).extend(this.coordinateLocation(X))}_getBoundsRectangularTerrain(){const i=this.elevation;if(!i.visibleDemTiles.length||i.isUsingMockSource())return this._getBoundsRectangular(0,0);const l=i.visibleDemTiles.reduce((f,g)=>{if(g.dem){const v=g.dem.tree;f.min=Math.min(f.min,v.minimums[0]),f.max=Math.max(f.max,v.maximums[0])}return f},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(l.min*i.exaggeration(),l.max*i.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(i=!0){const l=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,f=this.height/2-l*(1-this._horizonShift);return i?Math.max(0,f):f}getMaxBounds(){return this.maxBounds}setMaxBounds(i){this.maxBounds=i,this.minLat=-s.MAX_MERCATOR_LATITUDE,this.maxLat=s.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,i&&(this.minLat=i.getSouth(),this.maxLat=i.getNorth(),this.minLng=i.getWest(),this.maxLng=i.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=s.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=s.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=s.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=s.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(i,l){return this.projection.createTileMatrix(this,l,i)}calculateDistanceTileData(i){const l=i.key,f=this._distanceTileDataCache;if(f[l])return f[l];const g=i.canonical,v=1/this.height,T=this.cameraWorldSize,S=T/this.zoomScale(g.z),C=(g.x+Math.pow(2,g.z)*i.wrap)*S,z=g.y*S,k=this.point;k.x*=T/this.worldSize,k.y*=T/this.worldSize;const F=this.angle,$=Math.sin(-F),X=-Math.cos(-F);return f[l]={bearing:[$,X],center:[(k.x-C)*v,(k.y-z)*v],scale:S/s.EXTENT*v},f[l]}calculateFogTileMatrix(i){const l=i.key,f=this._fogTileMatrixCache;if(f[l])return f[l];const g=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,i);return s.multiply(g,this.worldToFogMatrix,g),f[l]=new Float32Array(g),f[l]}calculateProjMatrix(i,l=!1){const f=i.key,g=l?this._alignedProjMatrixCache:this._projMatrixCache;if(g[f])return g[f];const v=this.calculatePosMatrix(i,this.worldSize);return s.multiply(v,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:l?this.alignedProjMatrix:this.projMatrix,v),g[f]=new Float32Array(v),g[f]}calculatePixelsToTileUnitsMatrix(i){const l=i.tileID.key,f=this._pixelsToTileUnitsCache;if(f[l])return f[l];const g=function(v,T){const{scale:S}=v.tileTransform,C=S*s.EXTENT/(v.tileSize*Math.pow(2,T.zoom-v.tileID.overscaledZ+v.tileID.canonical.z));return z=new Float32Array(4),$=(k=T.inverseAdjustmentMatrix)[1],X=k[2],Y=k[3],J=(F=[C,C])[1],z[0]=k[0]*(K=F[0]),z[1]=$*K,z[2]=X*J,z[3]=Y*J,z;var z,k,F,$,X,Y,K,J}(i,this);return f[l]=g,f[l]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const i=1/this.worldSize,l=s.fromScaling([],[i,i,i]);return s.multiply(l,l,this.globeMatrix),l}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const i=this._elevation;this._updateCameraState();const l=s.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,f=this._computeCameraPosition(l),g=this._camera.forward(),v=s.mercatorZfromAltitude(1,this._center.lat);f[2]/=v,g[2]/=v,s.normalize(g,g);const T=i.raycast(f,g,i.exaggeration());if(T){const S=s.scaleAndAdd([],f,g,T),C=new s.MercatorCoordinate(S[0],S[1],s.mercatorZfromAltitude(S[2],s.latFromMercatorY(S[1]))),z=(C.z+s.length([C.x-f[0],C.y-f[1],C.z-f[2]*v]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(z),this._centerAltitude=C.toAltitude(),this._center=this.coordinateLocation(C),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(i=!1){if(!this._elevation)return;const l=this._elevation,f=s.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,g=this._computeCameraPosition(f),v=l.getAtPointOrZero(new s.MercatorCoordinate(...g)),T=this.pixelsPerMeter/this.worldSize*v,S=this._minimumHeightOverTerrain(),C=g[2]-T;if(C<=S)if(C<0||i){const z=this.locationCoordinate(this._center,this._centerAltitude),k=[g[0],g[1],z.z-g[2]],F=s.length(k);k[2]-=(S-C)/this._pixelsPerMercatorPixel;const $=s.length(k);if($===0)return;s.scale$2(k,k,F/$*this._pixelsPerMercatorPixel),this._camera.position=[g[0],g[1],z.z*this._pixelsPerMercatorPixel-k[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const i=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||i){const $=this.center;return $.lat=s.clamp($.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!i)&&($.lng=s.clamp($.lng,this.minLng,this.maxLng)),this.center=$,void(this._constraining=!1)}const l=this._unmodified,{x:f,y:g}=this.point;let v=0,T=f,S=g;const C=this.width/2,z=this.height/2,k=this.worldMinY*this.scale,F=this.worldMaxY*this.scale;if(g-z<k&&(S=k+z),g+z>F&&(S=F-z),F-k<this.height&&(v=Math.max(v,this.height/(F-k)),S=(F+k)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const $=this.worldMinX*this.scale,X=this.worldMaxX*this.scale,Y=this.worldSize/2-($+X)/2;T=(f+Y+this.worldSize)%this.worldSize-Y,T-C<$&&(T=$+C),T+C>X&&(T=X-C),X-$<this.width&&(v=Math.max(v,this.width/(X-$)),T=(X+$)/2)}T===f&&S===g||(this.center=this.unproject(new s.Point(T,S))),v&&(this.zoom+=this.scaleZoom(v)),this._constrainCamera(),this._unmodified=l,this._constraining=!1}_minZoomForBounds(){let i=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(i=Math.max(i,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),i}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,l=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=s.mercatorZfromAltitude(1,this.center.lat)/s.mercatorZfromAltitude(1,s.GLOBE_SCALE_MATCH_LATITUDE));const f=P1(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,f),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const g=this.projection.zAxisUnit==="meters"?l:1,v=this._camera.getWorldToCamera(this.worldSize,g),T=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);T[8]=2*-i.x/this.width,T[9]=2*i.y/this.height;let S=s.mul([],T,v);if(this.projection.isReprojectedInTileSpace){const ge=this.locationCoordinate(this.center),_e=s.identity([]);s.translate(_e,_e,[ge.x*this.worldSize,ge.y*this.worldSize,0]),s.multiply(_e,_e,fa(this)),s.translate(_e,_e,[-ge.x*this.worldSize,-ge.y*this.worldSize,0]),s.multiply(S,S,_e),this.inverseAdjustmentMatrix=function(Ee){const Te=fa(Ee,!0);return Me([],[Te[0],Te[1],Te[4],Te[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=s.scale([],S,[this.worldSize,this.worldSize,this.worldSize/g,1]),this.projMatrix=S,this.invProjMatrix=s.invert(new Float64Array(16),this.projMatrix);const C=s.invert([],T);this.frustumCorners=s.FrustumCorners.fromInvProjectionMatrix(C,this.horizonLineFromTop(),this.height);const z=new Float32Array(16);s.identity(z),s.scale(z,z,[1,-1,1]),s.rotateX(z,z,this._pitch),s.rotateZ(z,z,this.angle);const k=s.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),F=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;k[8]=2*-i.x/this.width,k[9]=2*(i.y+F)/this.height,this.skyboxMatrix=s.multiply(z,k,z);const $=this.point,X=$.x,Y=$.y,K=this.width%2/2,J=this.height%2/2,B=Math.cos(this.angle),H=Math.sin(this.angle),ie=X-Math.round(X)+B*K+H*J,oe=Y-Math.round(Y)+B*J+H*K,me=new Float64Array(S);if(s.translate(me,me,[ie>.5?ie-1:ie,oe>.5?oe-1:oe,0]),this.alignedProjMatrix=me,S=s.create(),s.scale(S,S,[this.width/2,-this.height/2,1]),s.translate(S,S,[1,-1,0]),this.labelPlaneMatrix=S,S=s.create(),s.scale(S,S,[1,-1,1]),s.translate(S,S,[-1,-1,0]),s.scale(S,S,[2/this.width,2/this.height,1]),this.glCoordMatrix=S,this.pixelMatrix=s.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},S=s.invert(new Float64Array(16),this.pixelMatrix),!S)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=S,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=s.calculateGlobeMatrix(this);const ge=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=s.transformMat4(ge,ge,v),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=S;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const i=this.cameraWorldSizeForFog,l=this.cameraPixelsPerMeter,f=this._camera.position,g=1/this.height/this._pixelsPerMercatorPixel,v=[i,i,l];s.scale$2(v,v,g),s.scale$2(f,f,-1),s.multiply$2(f,f,v);const T=s.create();s.translate(T,T,f),s.scale(T,T,v),this.mercatorFogMatrix=T,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(i,l,g)}_computeCameraPosition(i){const l=(i=i||this.pixelsPerMeter)/this.pixelsPerMeter,f=this._camera.forward(),g=this.point,v=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*l-i/this.worldSize*this._centerAltitude;return[g.x/this.worldSize-f[0]*v,g.y/this.worldSize-f[1]*v,i/this.worldSize*this._centerAltitude-f[2]*v]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(i){const l=this._maxCameraBoundsDistance()*Math.cos(this._pitch),f=this._camera.position[2],g=i[2];let v=1;this.projection.wrap&&(this.center=this.center.wrap()),g>0&&(v=Math.min((l-f)/g,1)),this._camera.position=s.scaleAndAdd([],this._camera.position,i,v),this._updateStateFromCamera()}_updateStateFromCamera(){const i=this._camera.position,l=this._camera.forward(),{pitch:f,bearing:g}=this._camera.getPitchBearing(),v=s.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,T=this._mercatorZfromZoom(this._maxZoom)*Math.cos(s.degToRad(this._maxPitch)),S=Math.max((i[2]-v)/Math.cos(f),T),C=this._zoomFromMercatorZ(S);s.scaleAndAdd(i,i,l,S),this._pitch=s.clamp(f,s.degToRad(this.minPitch),s.degToRad(this.maxPitch)),this.angle=s.wrap(g,-Math.PI,Math.PI),this._setZoom(s.clamp(C,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new s.MercatorCoordinate(i[0],i[1],i[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(i){return Math.pow(2,i)*this.tileSize}_mercatorZfromZoom(i){return this.cameraToCenterDistance/this._worldSizeFromZoom(i)}_minimumHeightOverTerrain(){const i=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(i)}_zoomFromMercatorZ(i){return this.scaleZoom(this.cameraToCenterDistance/(i*this.tileSize))}zoomFromMercatorZAdjusted(i){let l=0,f=s.GLOBE_ZOOM_THRESHOLD_MAX,g=0,v=1/0;for(;f-l>1e-6&&f>l;){const T=l+.5*(f-l),S=this.tileSize*Math.pow(2,T),C=this.getCameraToCenterDistance(this.projection,T,S),z=this.scaleZoom(C/(i*this.tileSize)),k=Math.abs(T-z);k<v&&(v=k,g=T),T<z?l=T:f=T}return g}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(s.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(i,l){const f=Math.min(i.x,l.x),g=Math.max(i.x,l.x),v=Math.min(i.y,l.y),T=Math.max(i.y,l.y);if(v<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const S=[new s.Point(f,v),new s.Point(g,T),new s.Point(f,T),new s.Point(g,v)],C=this.renderWorldCopies?-3:0,z=this.renderWorldCopies?4:1;for(const k of S){const F=this.pointRayIntersection(k);if(F.t<0)return!0;const $=this.rayIntersectionCoordinate(F);if($.x<C||$.y<0||$.x>z||$.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+s.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new s.Point(0,0),new s.Point(this.width,this.height))}zoomDeltaToMovement(i,l){const f=s.length(s.sub([],this._camera.position,i)),g=this._zoomFromMercatorZ(f)+l;return f-this._mercatorZfromZoom(g)}getCameraPoint(){if(this.projection.name==="globe"){const i=function([l,f,g],v){const T=[l,f,g,1];s.transformMat4$1(T,T,v);const S=T[3]=Math.max(T[3],1e-6);return T[0]/=S,T[1]/=S,T[2]/=S,T}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new s.Point(i[0],i[1])}{const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.Point(0,i))}}getCameraToCenterDistance(i,l=this.zoom,f=this.worldSize){const g=P1(i,l,this.width,this.height,1024),v=i.pixelSpaceConversion(this.center.lat,f,g);return .5/Math.tan(.5*this._fov)*this.height*v}getWorldToCameraMatrix(){const i=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&s.multiply(i,i,this.globeMatrix),i}}function _a(h,i){let l=!1,f=null;const g=()=>{f=null,l&&(h(),f=setTimeout(g,i),l=!1)};return()=>(l=!0,f||g(),f)}class ku{constructor(i){this._hashName=i&&encodeURIComponent(i),s.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=_a(this._updateHashUnthrottled.bind(this),300)}addTo(i){return this._map=i,s.window.addEventListener("hashchange",this._onHashChange,!1),i.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),s.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const i=this._map;if(!i)return"";const l=bl(i);if(this._hashName){const f=this._hashName;let g=!1;const v=s.window.location.hash.slice(1).split("&").map(T=>{const S=T.split("=")[0];return S===f?(g=!0,`${S}=${l}`):T}).filter(T=>T);return g||v.push(`${f}=${l}`),`#${v.join("&")}`}return`#${l}`}_getCurrentHash(){const i=s.window.location.hash.replace("#","");if(this._hashName){let l;return i.split("&").map(f=>f.split("=")).forEach(f=>{f[0]===this._hashName&&(l=f)}),(l&&l[1]||"").split("/")}return i.split("/")}_onHashChange(){const i=this._map;if(!i)return!1;const l=this._getCurrentHash();if(l.length>=3&&!l.some(f=>isNaN(f))){const f=i.dragRotate.isEnabled()&&i.touchZoomRotate.isEnabled()?+(l[3]||0):i.getBearing();return i.jumpTo({center:[+l[2],+l[1]],zoom:+l[0],bearing:f,pitch:+(l[4]||0)}),!0}return!1}_updateHashUnthrottled(){const i=s.window.location.href.replace(/(#.+)?$/,this.getHashString());s.window.history.replaceState(s.window.history.state,null,i)}}function bl(h,i){const l=h.getCenter(),f=Math.round(100*h.getZoom())/100,g=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),v=Math.pow(10,g),T=Math.round(l.lng*v)/v,S=Math.round(l.lat*v)/v,C=h.getBearing(),z=h.getPitch();let k=i?`/${T}/${S}/${f}`:`${f}/${S}/${T}`;return(C||z)&&(k+="/"+Math.round(10*C)/10),z&&(k+=`/${Math.round(z)}`),k}const Tl={linearity:.3,easing:s.bezier(0,0,.3,1)},I1=s.extend({deceleration:2500,maxSpeed:1400},Tl),k1=s.extend({deceleration:20,maxSpeed:1400},Tl),yt=s.extend({deceleration:1e3,maxSpeed:360},Tl),Fi=s.extend({deceleration:1e3,maxSpeed:90},Tl);class ah{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:s.exported.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,l=s.exported.now();for(;i.length>0&&l-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const l={zoom:0,bearing:0,pitch:0,pan:new s.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:v}of this._inertiaBuffer)l.zoom+=v.zoomDelta||0,l.bearing+=v.bearingDelta||0,l.pitch+=v.pitchDelta||0,v.panDelta&&l.pan._add(v.panDelta),v.around&&(l.around=v.around),v.pinchAround&&(l.pinchAround=v.pinchAround);const f=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,g={};if(l.pan.mag()){const v=Sl(l.pan.mag(),f,s.extend({},I1,i||{}));g.offset=l.pan.mult(v.amount/l.pan.mag()),g.center=this._map.transform.center,El(g,v)}if(l.zoom){const v=Sl(l.zoom,f,k1);g.zoom=this._map.transform.zoom+v.amount,El(g,v)}if(l.bearing){const v=Sl(l.bearing,f,yt);g.bearing=this._map.transform.bearing+s.clamp(v.amount,-179,179),El(g,v)}if(l.pitch){const v=Sl(l.pitch,f,Fi);g.pitch=this._map.transform.pitch+v.amount,El(g,v)}if(g.zoom||g.bearing){const v=l.pinchAround===void 0?l.around:l.pinchAround;g.around=v?this._map.unproject(v):this._map.getCenter()}return this.clear(),g.noMoveStart=!0,g}}function El(h,i){(!h.duration||h.duration<i.duration)&&(h.duration=i.duration,h.easing=i.easing)}function Sl(h,i,l){const{maxSpeed:f,linearity:g,deceleration:v}=l,T=s.clamp(h*g/(i/1e3),-f,f),S=Math.abs(T)/(v*g);return{easing:l.easing,duration:1e3*S,amount:T*(S/2)}}class vr extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,l,f,g={}){const v=Be(l.getCanvasContainer(),f),T=l.unproject(v);super(i,s.extend({point:v,lngLat:T,originalEvent:f},g)),this._defaultPrevented=!1,this.target=l}}class Ml extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,l,f){const g=i==="touchend"?f.changedTouches:f.touches,v=ye(l.getCanvasContainer(),g),T=v.map(C=>l.unproject(C)),S=v.reduce((C,z,k,F)=>C.add(z.div(F.length)),new s.Point(0,0));super(i,{points:v,point:S,lngLats:T,lngLat:l.unproject(S),originalEvent:f}),this._defaultPrevented=!1}}class z1 extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,l,f){super(i,{originalEvent:f}),this._defaultPrevented=!1}}class zu{constructor(i,l){this._map=i,this._clickTolerance=l.clickTolerance}reset(){this._mousedownPos=void 0}wheel(i){return this._firePreventable(new z1(i.type,this._map,i))}mousedown(i,l){return this._mousedownPos=l,this._firePreventable(new vr(i.type,this._map,i))}mouseup(i){this._map.fire(new vr(i.type,this._map,i))}preclick(i){const l=s.extend({},i);l.type="preclick",this._map.fire(new vr(l.type,this._map,l))}click(i,l){this._mousedownPos&&this._mousedownPos.dist(l)>=this._clickTolerance||(this.preclick(i),this._map.fire(new vr(i.type,this._map,i)))}dblclick(i){return this._firePreventable(new vr(i.type,this._map,i))}mouseover(i){this._map.fire(new vr(i.type,this._map,i))}mouseout(i){this._map.fire(new vr(i.type,this._map,i))}touchstart(i){return this._firePreventable(new Ml(i.type,this._map,i))}touchmove(i){this._map.fire(new Ml(i.type,this._map,i))}touchend(i){this._map.fire(new Ml(i.type,this._map,i))}touchcancel(i){this._map.fire(new Ml(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class L1{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(i){this._map.fire(new vr(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new vr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._map.fire(new vr(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class lh{constructor(i,l){this._map=i,this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=l.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,l){this.isEnabled()&&i.shiftKey&&i.button===0&&(te(),this._startPos=this._lastPos=l,this._active=!0)}mousemoveWindow(i,l){if(!this._active)return;const f=l,g=this._startPos,v=this._lastPos;if(!g||!v||v.equals(f)||!this._box&&f.dist(g)<this._clickTolerance)return;this._lastPos=f,this._box||(this._box=q("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",i));const T=Math.min(g.x,f.x),S=Math.max(g.x,f.x),C=Math.min(g.y,f.y),z=Math.max(g.y,f.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${T}px,${C}px)`,this._box.style.width=S-T+"px",this._box.style.height=z-C+"px")})}mouseupWindow(i,l){if(!this._active)return;const f=this._startPos,g=l;if(f&&i.button===0){if(this.reset(),Se(),f.x!==g.x||f.y!==g.y)return this._map.fire(new s.Event("boxzoomend",{originalEvent:i})),{cameraAnimation:v=>v.fitScreenCoordinates(f,g,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",i)}}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),ne(),delete this._startPos,delete this._lastPos}_fireEvent(i,l){return this._map.fire(new s.Event(i,{originalEvent:l}))}}function D1(h,i){const l={};for(let f=0;f<h.length;f++)l[h[f].identifier]=i[f];return l}class ga{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(i,l,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=i.timeStamp),f.length===this.numTouches&&(this.centroid=function(g){const v=new s.Point(0,0);for(const T of g)v._add(T);return v.div(g.length)}(l),this.touches=D1(f,l)))}touchmove(i,l,f){if(this.aborted||!this.centroid)return;const g=D1(f,l);for(const v in this.touches){const T=g[v];(!T||T.dist(this.touches[v])>30)&&(this.aborted=!0)}}touchend(i,l,f){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){const g=!this.aborted&&this.centroid;if(this.reset(),g)return g}}}class Lu{constructor(i){this.singleTap=new ga(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(i,l,f){this.singleTap.touchstart(i,l,f)}touchmove(i,l,f){this.singleTap.touchmove(i,l,f)}touchend(i,l,f){const g=this.singleTap.touchend(i,l,f);if(g){const v=i.timeStamp-this.lastTime<500,T=!this.lastTap||this.lastTap.dist(g)<30;if(v&&T||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}}}class rd{constructor(){this._zoomIn=new Lu({numTouches:1,numTaps:2}),this._zoomOut=new Lu({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,l,f){this._zoomIn.touchstart(i,l,f),this._zoomOut.touchstart(i,l,f)}touchmove(i,l,f){this._zoomIn.touchmove(i,l,f),this._zoomOut.touchmove(i,l,f)}touchend(i,l,f){const g=this._zoomIn.touchend(i,l,f),v=this._zoomOut.touchend(i,l,f);return g?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:T.getZoom()+1,around:T.unproject(g)},{originalEvent:i})}):v?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:T.getZoom()-1,around:T.unproject(v)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const ch={0:1,2:2};class ya{constructor(i){this.reset(),this._clickTolerance=i.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(i,l){return!1}_move(i,l){return{}}mousedown(i,l){if(this._lastPoint)return;const f=Ye(i);this._correctButton(i,f)&&(this._lastPoint=l,this._eventButton=f)}mousemoveWindow(i,l){const f=this._lastPoint;if(f){if(i.preventDefault(),this._eventButton!=null&&function(g,v){const T=ch[v];return g.buttons===void 0||(g.buttons&T)!==T}(i,this._eventButton))this.reset();else if(this._moved||!(l.dist(f)<this._clickTolerance))return this._moved=!0,this._lastPoint=l,this._move(f,l)}}mouseupWindow(i){this._lastPoint&&Ye(i)===this._eventButton&&(this._moved&&Se(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Du extends ya{mousedown(i,l){super.mousedown(i,l),this._lastPoint&&(this._active=!0)}_correctButton(i,l){return l===0&&!i.ctrlKey}_move(i,l){return{around:l,panDelta:l.sub(i)}}}class Ru extends ya{_correctButton(i,l){return l===0&&i.ctrlKey||l===2}_move(i,l){const f=.8*(l.x-i.x);if(f)return this._active=!0,{bearingDelta:f}}contextmenu(i){i.preventDefault()}}class Fu extends ya{_correctButton(i,l){return l===0&&i.ctrlKey||l===2}_move(i,l){const f=-.5*(l.y-i.y);if(f)return this._active=!0,{pitchDelta:f}}contextmenu(i){i.preventDefault()}}class R1{constructor(i,l){this._map=i,this._el=i.getCanvasContainer(),this._minTouches=1,this._clickTolerance=l.clickTolerance||1,this.reset(),s.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new s.Point(0,0)}touchstart(i,l,f){return this._calculateTransform(i,l,f)}touchmove(i,l,f){if(this._active&&!(f.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(f.length===1&&!s.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return i.cancelable&&i.preventDefault(),this._calculateTransform(i,l,f)}}touchend(i,l,f){this._calculateTransform(i,l,f),this._active&&f.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,l,f){f.length>0&&(this._active=!0);const g=D1(f,l),v=new s.Point(0,0),T=new s.Point(0,0);let S=0;for(const z in g){const k=g[z],F=this._touches[z];F&&(v._add(k),T._add(k.sub(F)),S++,g[z]=k)}if(this._touches=g,S<this._minTouches||!T.mag())return;const C=T.div(S);return this._sum._add(C),this._sum.mag()<this._clickTolerance?void 0:{around:v.div(S),panDelta:C}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=q("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class Cl{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(i){}_move(i,l,f){return{}}touchstart(i,l,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([l[0],l[1]]))}touchmove(i,l,f){const g=this._firstTwoTouches;if(!g)return;i.preventDefault();const[v,T]=g,S=Pl(f,l,v),C=Pl(f,l,T);if(!S||!C)return;const z=this._aroundCenter?null:S.add(C).div(2);return this._move([S,C],z,i)}touchend(i,l,f){if(!this._firstTwoTouches)return;const[g,v]=this._firstTwoTouches,T=Pl(f,l,g),S=Pl(f,l,v);T&&S||(this._active&&Se(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Pl(h,i,l){for(let f=0;f<h.length;f++)if(h[f].identifier===l)return i[f]}function Bu(h,i){return Math.log(h/i)/Math.LN2}class uh extends Cl{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,l){const f=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(Bu(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Bu(this._distance,f),pinchAround:l}}}function Ou(h,i){return 180*h.angleWith(i)/Math.PI}class hh extends Cl{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,l){const f=this._vector;if(this._vector=i[0].sub(i[1]),f&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Ou(this._vector,f),pinchAround:l}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const l=25/(Math.PI*this._minDiameter)*360,f=this._startVector;if(!f)return!1;const g=Ou(i,f);return Math.abs(g)<l}}function rs(h){return Math.abs(h.y)>Math.abs(h.x)}class dh extends Cl{constructor(i){super(),this._map=i}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(i){this._lastPoints=i,rs(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,l,f){const g=this._lastPoints;if(!g)return;const v=i[0].sub(g[0]),T=i[1].sub(g[1]);return this._map._cooperativeGestures&&!s.isFullscreen()&&f.touches.length<3||(this._valid=this.gestureBeginsVertically(v,T,f.timeStamp),!this._valid)?void 0:(this._lastPoints=i,this._active=!0,{pitchDelta:(v.y+T.y)/2*-.5})}gestureBeginsVertically(i,l,f){if(this._valid!==void 0)return this._valid;const g=i.mag()>=2,v=l.mag()>=2;if(!g&&!v)return;if(!g||!v)return this._firstMove==null&&(this._firstMove=f),f-this._firstMove<100&&void 0;const T=i.y>0==l.y>0;return rs(i)&&rs(l)&&T}}const ph={panStep:100,bearingStep:15,pitchStep:10};class id{constructor(){const i=ph;this._panStep=i.panStep,this._bearingStep=i.bearingStep,this._pitchStep=i.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let l=0,f=0,g=0,v=0,T=0;switch(i.keyCode){case 61:case 107:case 171:case 187:l=1;break;case 189:case 109:case 173:l=-1;break;case 37:i.shiftKey?f=-1:(i.preventDefault(),v=-1);break;case 39:i.shiftKey?f=1:(i.preventDefault(),v=1);break;case 38:i.shiftKey?g=1:(i.preventDefault(),T=-1);break;case 40:i.shiftKey?g=-1:(i.preventDefault(),T=1);break;default:return}return this._rotationDisabled&&(f=0,g=0),{cameraAnimation:S=>{const C=S.getZoom();S.easeTo({duration:300,easeId:"keyboardHandler",easing:fh,zoom:l?Math.round(C)+l*(i.shiftKey?2:1):C,bearing:S.getBearing()+f*this._bearingStep,pitch:S.getPitch()+g*this._pitchStep,offset:[-v*this._panStep,-T*this._panStep],center:S.getCenter()},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function fh(h){return h*(2-h)}const Uu=4.000244140625;class mh{constructor(i,l){this._map=i,this._el=i.getCanvasContainer(),this._handler=l,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,s.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(i){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(i.ctrlKey||i.metaKey||this.isZooming()||s.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let l=i.deltaMode===s.window.WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const f=s.exported.now(),g=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,l!==0&&l%Uu==0?this._type="wheel":l!==0&&Math.abs(l)<4?this._type="trackpad":g>400?(this._type=null,this._lastValue=l,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(g*l)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,l+=this._lastValue)),i.shiftKey&&l&&(l/=4),this._type&&(this._lastWheelEvent=i,this._delta-=l,this._active||this._start(i)),i.preventDefault()}_onTimeout(i){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(i)}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const l=Be(this._el,i);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:l,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._map.transform;this._type==="wheel"&&i.projection.wrap&&(i._center.lng>=180||i._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const l=()=>i._terrainEnabled()&&this._aroundCoord?i.computeZoomRelativeTo(this._aroundCoord):i.zoom;if(this._delta!==0){const C=this._type==="wheel"&&Math.abs(this._delta)>Uu?this._wheelZoomRate:this._defaultZoomRate;let z=2/(1+Math.exp(-Math.abs(this._delta*C)));this._delta<0&&z!==0&&(z=1/z);const k=l(),F=Math.pow(2,k),$=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):F;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom($*z))),this._type==="wheel"&&(this._startZoom=k,this._easing=this._smoothOutEasing(200)),this._delta=0}const f=typeof this._targetZoom=="number"?this._targetZoom:l(),g=this._startZoom,v=this._easing;let T,S=!1;if(this._type==="wheel"&&g&&v){const C=Math.min((s.exported.now()-this._lastWheelEventTime)/200,1),z=v(C);T=s.number(g,f,z),C<1?this._frameId||(this._frameId=!0):S=!0}else T=f,S=!0;return this._active=!0,S&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!S,zoomDelta:T-l(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let l=s.ease;if(this._prevEase){const f=this._prevEase,g=(s.exported.now()-f.start)/f.duration,v=f.easing(g+.01)-f.easing(g),T=.27/Math.sqrt(v*v+1e-4)*.01,S=Math.sqrt(.0729-T*T);l=s.bezier(T,S,.25,1)}return this._prevEase={start:s.exported.now(),duration:i,easing:l},l}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=q("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(s.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class _h{constructor(i,l){this._clickZoom=i,this._tapZoom=l}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class zr{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(i,l){return i.preventDefault(),{cameraAnimation:f=>{f.easeTo({duration:300,zoom:f.getZoom()+(i.shiftKey?-1:1),around:f.unproject(l)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class od{constructor(){this._tap=new Lu({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(i,l,f){this._swipePoint||(this._tapTime&&i.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?f.length>0&&(this._swipePoint=l[0],this._swipeTouch=f[0].identifier):this._tap.touchstart(i,l,f))}touchmove(i,l,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;const g=l[0],v=g.y-this._swipePoint.y;return this._swipePoint=g,i.preventDefault(),this._active=!0,{zoomDelta:v/128}}}else this._tap.touchmove(i,l,f)}touchend(i,l,f){this._tapTime?this._swipePoint&&f.length===0&&this.reset():this._tap.touchend(i,l,f)&&(this._tapTime=i.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class gh{constructor(i,l,f){this._el=i,this._mousePan=l,this._touchPan=f}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class sd{constructor(i,l,f){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=l,this._mousePitch=f}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class ad{constructor(i,l,f,g){this._el=i,this._touchZoom=l,this._touchRotate=f,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const wi=h=>h.zoom||h.drag||h.pitch||h.rotate;class yh extends s.Event{}class ld{constructor(){this.constants=[1,1,.01],this.radius=0}setup(i,l){const f=s.sub([],l,i);this.radius=s.length(f[2]<0?s.div([],f,this.constants):[f[0],f[1],0])}projectRay(i){s.div(i,i,this.constants),s.normalize(i,i),s.mul$1(i,i,this.constants);const l=s.scale$2([],i,this.radius);if(l[2]>0){const f=s.scale$2([],[0,0,1],s.dot(l,[0,0,1])),g=s.scale$2([],s.normalize([],[l[0],l[1],0]),this.radius),v=s.add([],l,s.scale$2([],s.sub([],s.add([],g,f),l),2));l[0]=v[0],l[1]=v[1]}return l}}function Bi(h){return h.panDelta&&h.panDelta.mag()||h.zoomDelta||h.bearingDelta||h.pitchDelta}class io{constructor(i,l){this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ah(i),this._bearingSnap=l.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new ld,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(l),s.bindAll(["handleEvent","handleWindowEvent"],this);const f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[s.window.document,"mousemove",{capture:!0}],[s.window.document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[s.window,"blur",void 0]];for(const[g,v,T]of this._listeners)g.addEventListener(v,g===s.window.document?this.handleWindowEvent:this.handleEvent,T)}destroy(){for(const[i,l,f]of this._listeners)i.removeEventListener(l,i===s.window.document?this.handleWindowEvent:this.handleEvent,f)}_addDefaultHandlers(i){const l=this._map,f=l.getCanvasContainer();this._add("mapEvent",new zu(l,i));const g=l.boxZoom=new lh(l,i);this._add("boxZoom",g);const v=new rd,T=new zr;l.doubleClickZoom=new _h(T,v),this._add("tapZoom",v),this._add("clickZoom",T);const S=new od;this._add("tapDragZoom",S);const C=l.touchPitch=new dh(l);this._add("touchPitch",C);const z=new Ru(i),k=new Fu(i);l.dragRotate=new sd(i,z,k),this._add("mouseRotate",z,["mousePitch"]),this._add("mousePitch",k,["mouseRotate"]);const F=new Du(i),$=new R1(l,i);l.dragPan=new gh(f,F,$),this._add("mousePan",F),this._add("touchPan",$,["touchZoom","touchRotate"]);const X=new hh,Y=new uh;l.touchZoomRotate=new ad(f,Y,X,S),this._add("touchRotate",X,["touchPan","touchZoom"]),this._add("touchZoom",Y,["touchPan","touchRotate"]),this._add("blockableMapEvent",new L1(l));const K=l.scrollZoom=new mh(l,this);this._add("scrollZoom",K,["mousePan"]);const J=l.keyboard=new id;this._add("keyboard",J);for(const B of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])i.interactive&&i[B]&&l[B].enable(i[B])}_add(i,l,f){this._handlers.push({handlerName:i,handler:l,allowed:f}),this._handlersById[i]=l}stop(i){if(!this._updatingCamera){for(const{handler:l}of this._handlers)l.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!wi(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(i,l,f){for(const g in i)if(g!==f&&(!l||l.indexOf(g)<0))return!0;return!1}handleWindowEvent(i){this.handleEvent(i,`${i.type}Window`)}_getMapTouches(i){const l=[];for(const f of i)this._el.contains(f.target)&&l.push(f);return l}handleEvent(i,l){this._updatingCamera=!0;const f=i.type==="renderFrame",g=f?void 0:i,v={needsRenderFrame:!1},T={},S={},C=i.touches?this._getMapTouches(i.touches):void 0,z=C?ye(this._el,C):f?void 0:Be(this._el,i);for(const{handlerName:$,handler:X,allowed:Y}of this._handlers){if(!X.isEnabled())continue;let K;this._blockedByActive(S,Y,$)?X.reset():X[l||i.type]&&(K=X[l||i.type](i,z,C),this.mergeHandlerResult(v,T,K,$,g),K&&K.needsRenderFrame&&this._triggerRenderFrame()),(K||X.isActive())&&(S[$]=X)}const k={};for(const $ in this._previousActiveHandlers)S[$]||(k[$]=g);this._previousActiveHandlers=S,(Object.keys(k).length||Bi(v))&&(this._changes.push([v,T,k]),this._triggerRenderFrame()),(Object.keys(S).length||Bi(v))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:F}=v;F&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],F(this._map))}mergeHandlerResult(i,l,f,g,v){if(!f)return;s.extend(i,f);const T={handlerName:g,originalEvent:f.originalEvent||v};f.zoomDelta!==void 0&&(l.zoom=T),f.panDelta!==void 0&&(l.drag=T),f.pitchDelta!==void 0&&(l.pitch=T),f.bearingDelta!==void 0&&(l.rotate=T)}_applyChanges(){const i={},l={},f={};for(const[g,v,T]of this._changes)g.panDelta&&(i.panDelta=(i.panDelta||new s.Point(0,0))._add(g.panDelta)),g.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+g.zoomDelta),g.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+g.bearingDelta),g.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+g.pitchDelta),g.around!==void 0&&(i.around=g.around),g.aroundCoord!==void 0&&(i.aroundCoord=g.aroundCoord),g.pinchAround!==void 0&&(i.pinchAround=g.pinchAround),g.noInertia&&(i.noInertia=g.noInertia),s.extend(l,v),s.extend(f,T);this._updateMapTransform(i,l,f),this._changes=[]}_updateMapTransform(i,l,f){const g=this._map,v=g.transform,T=H=>[H.x,H.y,H.z];if((H=>{const ie=this._eventsInProgress.drag;return ie&&!this._handlersById[ie.handlerName].isActive()})()&&!Bi(i)){const H=v.zoom;v.cameraElevationReference="sea",v.recenterOnTerrain(),v.cameraElevationReference="ground",H!==v.zoom&&this._map._update(!0)}if(v._isCameraConstrained&&g._stop(!0),!Bi(i))return void this._fireEvents(l,f,!0);let{panDelta:S,zoomDelta:C,bearingDelta:z,pitchDelta:k,around:F,aroundCoord:$,pinchAround:X}=i;v._isCameraConstrained&&(C>0&&(C=0),v._isCameraConstrained=!1),X!==void 0&&(F=X),(C||(H=>l[H]&&!this._eventsInProgress[H])("drag"))&&F&&(this._dragOrigin=T(v.pointCoordinate3D(F)),this._trackingEllipsoid.setup(v._camera.position,this._dragOrigin)),v.cameraElevationReference="sea",g._stop(!0),F=F||g.transform.centerPoint,z&&(v.bearing+=z),k&&(v.pitch+=k),v._updateCameraState();const Y=[0,0,0];if(S)if(v.projection.name==="mercator"){const H=this._trackingEllipsoid.projectRay(v.screenPointToMercatorRay(F).dir),ie=this._trackingEllipsoid.projectRay(v.screenPointToMercatorRay(F.sub(S)).dir);Y[0]=ie[0]-H[0],Y[1]=ie[1]-H[1]}else{const H=v.pointCoordinate(F);if(v.projection.name==="globe"){S=S.rotate(-v.angle);const ie=v._pixelsPerMercatorPixel/v.worldSize;Y[0]=-S.x*s.mercatorScale(s.latFromMercatorY(H.y))*ie,Y[1]=-S.y*s.mercatorScale(v.center.lat)*ie}else{const ie=v.pointCoordinate(F.sub(S));H&&ie&&(Y[0]=ie.x-H.x,Y[1]=ie.y-H.y)}}const K=v.zoom,J=[0,0,0];if(C){const H=T($||v.pointCoordinate3D(F)),ie={dir:s.normalize([],s.sub([],H,v._camera.position))};if(ie.dir[2]<0){const oe=v.zoomDeltaToMovement(H,C);s.scale$2(J,ie.dir,oe)}}const B=s.add(Y,Y,J);v._translateCameraConstrained(B),C&&Math.abs(v.zoom-K)>1e-4&&v.recenterOnTerrain(),v.cameraElevationReference="ground",this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(l,f,!0)}_fireEvents(i,l,f){const g=wi(this._eventsInProgress),v=wi(i),T={};for(const k in i){const{originalEvent:F}=i[k];this._eventsInProgress[k]||(T[`${k}start`]=F),this._eventsInProgress[k]=i[k]}!g&&v&&this._fireEvent("movestart",v.originalEvent);for(const k in T)this._fireEvent(k,T[k]);v&&this._fireEvent("move",v.originalEvent);for(const k in i){const{originalEvent:F}=i[k];this._fireEvent(k,F)}const S={};let C;for(const k in this._eventsInProgress){const{handlerName:F,originalEvent:$}=this._eventsInProgress[k];this._handlersById[F].isActive()||(delete this._eventsInProgress[k],C=l[F]||$,S[`${k}end`]=C)}for(const k in S)this._fireEvent(k,S[k]);const z=wi(this._eventsInProgress);if(f&&(g||v)&&!z){this._updatingCamera=!0;const k=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),F=$=>$!==0&&-this._bearingSnap<$&&$<this._bearingSnap;k?(F(k.bearing||this._map.getBearing())&&(k.bearing=0),this._map.easeTo(k,{originalEvent:C})):(this._map.fire(new s.Event("moveend",{originalEvent:C})),F(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(i,l){this._map.fire(new s.Event(i,l?{originalEvent:l}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{this._frameId=void 0,this.handleEvent(new yh("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Is="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class F1 extends s.Evented{constructor(i,l){super(),this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=l.bearingSnap,this._respectPrefersReducedMotion=l.respectPrefersReducedMotion!==!1,s.bindAll(["_renderFrameCallback"],this)}getCenter(){return new s.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(i,l){return this.jumpTo({center:i},l)}panBy(i,l,f){return i=s.Point.convert(i).mult(-1),this.panTo(this.transform.center,s.extend({offset:i},l),f)}panTo(i,l,f){return this.easeTo(s.extend({center:i},l),f)}getZoom(){return this.transform.zoom}setZoom(i,l){return this.jumpTo({zoom:i},l),this}zoomTo(i,l,f){return this.easeTo(s.extend({zoom:i},l),f)}zoomIn(i,l){return this.zoomTo(this.getZoom()+1,i,l),this}zoomOut(i,l){return this.zoomTo(this.getZoom()-1,i,l),this}getBearing(){return this.transform.bearing}setBearing(i,l){return this.jumpTo({bearing:i},l),this}getPadding(){return this.transform.padding}setPadding(i,l){return this.jumpTo({padding:i},l),this}rotateTo(i,l,f){return this.easeTo(s.extend({bearing:i},l),f)}resetNorth(i,l){return this.rotateTo(0,s.extend({duration:1e3},i),l),this}resetNorthPitch(i,l){return this.easeTo(s.extend({bearing:0,pitch:0,duration:1e3},i),l),this}snapToNorth(i,l){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,l):this}getPitch(){return this.transform.pitch}setPitch(i,l){return this.jumpTo({pitch:i},l),this}cameraForBounds(i,l){i=s.LngLatBounds.convert(i);const f=l&&l.bearing||0,g=l&&l.pitch||0,v=i.getNorthWest(),T=i.getSouthEast();return this._cameraForBounds(this.transform,v,T,f,g,l)}_extendCameraOptions(i){const l={top:0,bottom:0,right:0,left:0};if(typeof(i=s.extend({padding:l,offset:[0,0],maxZoom:this.transform.maxZoom},i)).padding=="number"){const f=i.padding;i.padding={top:f,bottom:f,right:f,left:f}}return i.padding=s.extend(l,i.padding),i}_minimumAABBFrustumDistance(i,l){const f=l.max[0]-l.min[0],g=l.max[1]-l.min[1];return f/g>i.aspect?f/(2*Math.tan(.5*i.fovX)*i.aspect):g/(2*Math.tan(.5*i.fovY)*i.aspect)}_cameraForBoundsOnGlobe(i,l,f,g,v,T){const S=i.clone(),C=this._extendCameraOptions(T);S.bearing=g,S.pitch=v;const z=s.LngLat.convert(l),k=s.LngLat.convert(f),F=.5*(z.lat+k.lat),$=.5*(z.lng+k.lng),X=s.latLngToECEF(F,$),Y=s.normalize([],X),K=s.normalize([],s.cross([],Y,[0,1,0])),J=s.cross([],K,Y),B=[K[0],K[1],K[2],0,J[0],J[1],J[2],0,Y[0],Y[1],Y[2],0,0,0,0,1],H=[X,s.latLngToECEF(z.lat,z.lng),s.latLngToECEF(k.lat,z.lng),s.latLngToECEF(k.lat,k.lng),s.latLngToECEF(z.lat,k.lng),s.latLngToECEF(F,z.lng),s.latLngToECEF(F,k.lng),s.latLngToECEF(z.lat,$),s.latLngToECEF(k.lat,$)];let ie=s.Aabb.fromPoints(H.map(Qe=>[s.dot(K,Qe),s.dot(J,Qe),s.dot(Y,Qe)]));const oe=s.transformMat4([],ie.center,B);s.squaredLength(oe)===0&&s.set(oe,0,0,1),s.normalize(oe,oe),s.scale$2(oe,oe,s.GLOBE_RADIUS),S.center=s.ecefToLatLng(oe);const me=S.getWorldToCameraMatrix(),ge=s.invert(new Float64Array(16),me);ie=s.Aabb.applyTransform(ie,s.multiply([],me,B)),s.transformMat4(oe,oe,me);const _e=.5*(ie.max[2]-ie.min[2]),Ee=this._minimumAABBFrustumDistance(S,ie),Te=s.scale$2([],[0,0,1],_e),ze=s.add(Te,oe,Te),nt=Ee+(S.pitch===0?0:s.distance(oe,ze)),Pe=S.globeCenterInViewSpace,qe=s.sub([],oe,[Pe[0],Pe[1],Pe[2]]);s.normalize(qe,qe),s.scale$2(qe,qe,nt);const Re=s.add([],oe,qe);s.transformMat4(Re,Re,ge);const tt=s.earthRadius/s.GLOBE_RADIUS,ke=s.length(Re),Ze=s.mercatorZfromAltitude(Math.max(ke*tt-s.earthRadius,Number.EPSILON),0),it=Math.min(S.zoomFromMercatorZAdjusted(Ze),C.maxZoom);return it>.5*(s.GLOBE_ZOOM_THRESHOLD_MIN+s.GLOBE_ZOOM_THRESHOLD_MAX)?(S.setProjection({name:"mercator"}),S.zoom=it,this._cameraForBounds(S,l,f,g,v,T)):{center:S.center,zoom:it,bearing:g,pitch:v}}queryTerrainElevation(i,l){const f=this.transform.elevation;return f?(l=s.extend({},{exaggerated:!0},l),f.getAtPoint(s.MercatorCoordinate.fromLngLat(i),null,l.exaggerated)):null}_cameraForBounds(i,l,f,g,v,T){if(i.projection.name==="globe")return this._cameraForBoundsOnGlobe(i,l,f,g,v,T);const S=i.clone(),C=this._extendCameraOptions(T),z=S.padding;S.bearing=g,S.pitch=v;const k=s.LngLat.convert(l),F=s.LngLat.convert(f),$=new s.LngLat(k.lng,F.lat),X=new s.LngLat(F.lng,k.lat),Y=S.project(k),K=S.project(F),J=this.queryTerrainElevation(k),B=this.queryTerrainElevation(F),H=this.queryTerrainElevation($),ie=this.queryTerrainElevation(X),oe=[[Y.x,Y.y,Math.min(J||0,B||0,H||0,ie||0)],[K.x,K.y,Math.max(J||0,B||0,H||0,ie||0)]];let me=s.Aabb.fromPoints(oe);const ge=S.getWorldToCameraMatrix(),_e=s.invert(new Float64Array(16),ge);me=s.Aabb.applyTransform(me,ge);const Ee=s.sub([],me.max,me.min),Te=z.left||0,ze=z.right||0,nt=z.bottom||0,Pe=z.top||0,{left:qe,right:Re,top:tt,bottom:ke}=C.padding,Ze=.5*(Te+ze),it=.5*(Pe+nt),Qe=Math.min(S.scaleZoom(S.scale*Math.min((S.width-(Te+ze+qe+Re))/Ee[0],(S.height-(nt+Pe+ke+tt))/Ee[1])),C.maxZoom),ot=S.scale/S.zoomScale(Qe);me=new s.Aabb([me.min[0]-(qe+Ze)*ot,me.min[1]-(ke+it)*ot,me.min[2]],[me.max[0]+(Re+Ze)*ot,me.max[1]+(tt+it)*ot,me.max[2]]);const Ct=.5*Ee[2],Ot=this._minimumAABBFrustumDistance(S,me),xt=[0,0,1,0];s.transformMat4$1(xt,xt,ge),s.normalize$2(xt,xt);const zt=s.scale$2([],xt,Ot+Ct),Kt=s.add([],me.center,zt),Wt=(typeof C.offset.x=="number"&&typeof C.offset.y=="number"?new s.Point(C.offset.x,C.offset.y):s.Point.convert(C.offset)).rotate(-s.degToRad(g));me.center[0]-=Wt.x*ot,me.center[1]+=Wt.y*ot,s.transformMat4(me.center,me.center,_e),s.transformMat4(Kt,Kt,_e);const St=[me.center[0],me.center[1],Kt[2]*S.pixelsPerMeter];s.scale$2(St,St,1/S.worldSize);const pn=s.lngFromMercatorX(St[0]),gn=s.latFromMercatorY(St[1]),yn=Math.min(S._zoomFromMercatorZ(St[2]),C.maxZoom),vn=new s.LngLat(pn,gn);return S.mercatorFromTransition&&yn<.5*(s.GLOBE_ZOOM_THRESHOLD_MIN+s.GLOBE_ZOOM_THRESHOLD_MAX)?(S.setProjection({name:"globe"}),S.zoom=yn,this._cameraForBounds(S,l,f,g,v,T)):{center:vn,zoom:yn,bearing:g,pitch:v}}fitBounds(i,l,f){const g=this.cameraForBounds(i,l);return this._fitInternal(g,l,f)}fitScreenCoordinates(i,l,f,g,v){const T=s.Point.convert(i),S=s.Point.convert(l),C=new s.Point(Math.min(T.x,S.x),Math.min(T.y,S.y)),z=new s.Point(Math.max(T.x,S.x),Math.max(T.y,S.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(T,S))return this;const k=this.transform.pointLocation3D(C),F=this.transform.pointLocation3D(z),$=this.transform.pointLocation3D(new s.Point(C.x,z.y)),X=this.transform.pointLocation3D(new s.Point(z.x,C.y)),Y=[Math.min(k.lng,F.lng,$.lng,X.lng),Math.min(k.lat,F.lat,$.lat,X.lat)],K=[Math.max(k.lng,F.lng,$.lng,X.lng),Math.max(k.lat,F.lat,$.lat,X.lat)],J=g&&g.pitch?g.pitch:this.getPitch(),B=this._cameraForBounds(this.transform,Y,K,f,J,g);return this._fitInternal(B,g,v)}_fitInternal(i,l,f){return i?(delete(l=s.extend(i,l)).padding,l.linear?this.easeTo(l,f):this.flyTo(l,f)):this}jumpTo(i,l){this.stop();const f=i.preloadOnly?this.transform.clone():this.transform;let g=!1,v=!1,T=!1;return"zoom"in i&&f.zoom!==+i.zoom&&(g=!0,f.zoom=+i.zoom),i.center!==void 0&&(f.center=s.LngLat.convert(i.center)),"bearing"in i&&f.bearing!==+i.bearing&&(v=!0,f.bearing=+i.bearing),"pitch"in i&&f.pitch!==+i.pitch&&(T=!0,f.pitch=+i.pitch),i.padding==null||f.isPaddingEqual(i.padding)||(f.padding=i.padding),i.preloadOnly?(this._preloadTiles(f),this):(this.fire(new s.Event("movestart",l)).fire(new s.Event("move",l)),g&&this.fire(new s.Event("zoomstart",l)).fire(new s.Event("zoom",l)).fire(new s.Event("zoomend",l)),v&&this.fire(new s.Event("rotatestart",l)).fire(new s.Event("rotate",l)).fire(new s.Event("rotateend",l)),T&&this.fire(new s.Event("pitchstart",l)).fire(new s.Event("pitch",l)).fire(new s.Event("pitchend",l)),this.fire(new s.Event("moveend",l)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||s.warnOnce(Is),this.transform.getFreeCameraOptions()}setFreeCameraOptions(i,l){const f=this.transform;if(!f.projection.supportsFreeCamera)return s.warnOnce(Is),this;this.stop();const g=f.zoom,v=f.pitch,T=f.bearing;f.setFreeCameraOptions(i);const S=g!==f.zoom,C=v!==f.pitch,z=T!==f.bearing;return this.fire(new s.Event("movestart",l)).fire(new s.Event("move",l)),S&&this.fire(new s.Event("zoomstart",l)).fire(new s.Event("zoom",l)).fire(new s.Event("zoomend",l)),z&&this.fire(new s.Event("rotatestart",l)).fire(new s.Event("rotate",l)).fire(new s.Event("rotateend",l)),C&&this.fire(new s.Event("pitchstart",l)).fire(new s.Event("pitch",l)).fire(new s.Event("pitchend",l)),this.fire(new s.Event("moveend",l)),this}easeTo(i,l){this._stop(!1,i.easeId),((i=s.extend({offset:[0,0],duration:500,easing:s.ease},i)).animate===!1||this._prefersReducedMotion(i))&&(i.duration=0);const f=this.transform,g=this.getZoom(),v=this.getBearing(),T=this.getPitch(),S=this.getPadding(),C="zoom"in i?+i.zoom:g,z="bearing"in i?this._normalizeBearing(i.bearing,v):v,k="pitch"in i?+i.pitch:T,F="padding"in i?i.padding:f.padding,$=s.Point.convert(i.offset);let X,Y,K;if(f.projection.name==="globe"){const Te=s.MercatorCoordinate.fromLngLat(f.center),ze=$.rotate(-f.angle);Te.x+=ze.x/f.worldSize,Te.y+=ze.y/f.worldSize;const nt=Te.toLngLat(),Pe=s.LngLat.convert(i.center||nt);this._normalizeCenter(Pe),X=f.centerPoint.add(ze),Y=new s.Point(Te.x,Te.y).mult(f.worldSize),K=new s.Point(s.mercatorXfromLng(Pe.lng),s.mercatorYfromLat(Pe.lat)).mult(f.worldSize).sub(Y)}else{X=f.centerPoint.add($);const Te=f.pointLocation(X),ze=s.LngLat.convert(i.center||Te);this._normalizeCenter(ze),Y=f.project(Te),K=f.project(ze).sub(Y)}const J=f.zoomScale(C-g);let B,H;i.around&&(B=s.LngLat.convert(i.around),H=f.locationPoint(B));const ie=this._zooming||C!==g,oe=this._rotating||v!==z,me=this._pitching||k!==T,ge=!f.isPaddingEqual(F),_e=Te=>ze=>{if(ie&&(Te.zoom=s.number(g,C,ze)),oe&&(Te.bearing=s.number(v,z,ze)),me&&(Te.pitch=s.number(T,k,ze)),ge&&(Te.interpolatePadding(S,F,ze),X=Te.centerPoint.add($)),B)Te.setLocationAtPoint(B,H);else{const nt=Te.zoomScale(Te.zoom-g),Pe=C>g?Math.min(2,J):Math.max(.5,J),qe=Math.pow(Pe,1-ze),Re=Te.unproject(Y.add(K.mult(ze*qe)).mult(nt));Te.setLocationAtPoint(Te.renderWorldCopies?Re.wrap():Re,X)}return i.preloadOnly||this._fireMoveEvents(l),Te};if(i.preloadOnly){const Te=this._emulate(_e,i.duration,f);return this._preloadTiles(Te),this}const Ee={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=ie,this._rotating=oe,this._pitching=me,this._padding=ge,this._easeId=i.easeId,this._prepareEase(l,i.noMoveStart,Ee),this._ease(_e(f),Te=>{f.recenterOnTerrain(),this._afterEase(l,Te)},i),this}_prepareEase(i,l,f={}){this._moving=!0,this.transform.cameraElevationReference="sea",l||f.moving||this.fire(new s.Event("movestart",i)),this._zooming&&!f.zooming&&this.fire(new s.Event("zoomstart",i)),this._rotating&&!f.rotating&&this.fire(new s.Event("rotatestart",i)),this._pitching&&!f.pitching&&this.fire(new s.Event("pitchstart",i))}_fireMoveEvents(i){this.fire(new s.Event("move",i)),this._zooming&&this.fire(new s.Event("zoom",i)),this._rotating&&this.fire(new s.Event("rotate",i)),this._pitching&&this.fire(new s.Event("pitch",i))}_afterEase(i,l){if(this._easeId&&l&&this._easeId===l)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const f=this._zooming,g=this._rotating,v=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,f&&this.fire(new s.Event("zoomend",i)),g&&this.fire(new s.Event("rotateend",i)),v&&this.fire(new s.Event("pitchend",i)),this.fire(new s.Event("moveend",i))}flyTo(i,l){if(this._prefersReducedMotion(i)){const Qe=s.pick(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Qe,l)}this.stop(),i=s.extend({offset:[0,0],speed:1.2,curve:1.42,easing:s.ease},i);const f=this.transform,g=this.getZoom(),v=this.getBearing(),T=this.getPitch(),S=this.getPadding(),C="zoom"in i?s.clamp(+i.zoom,f.minZoom,f.maxZoom):g,z="bearing"in i?this._normalizeBearing(i.bearing,v):v,k="pitch"in i?+i.pitch:T,F="padding"in i?i.padding:f.padding,$=f.zoomScale(C-g),X=s.Point.convert(i.offset);let Y=f.centerPoint.add(X);const K=f.pointLocation(Y),J=s.LngLat.convert(i.center||K);this._normalizeCenter(J);const B=f.project(K),H=f.project(J).sub(B);let ie=i.curve;const oe=Math.max(f.width,f.height),me=oe/$,ge=H.mag();if("minZoom"in i){const Qe=s.clamp(Math.min(i.minZoom,g,C),f.minZoom,f.maxZoom),ot=oe/f.zoomScale(Qe-g);ie=Math.sqrt(ot/ge*2)}const _e=ie*ie;function Ee(Qe){const ot=(me*me-oe*oe+(Qe?-1:1)*_e*_e*ge*ge)/(2*(Qe?me:oe)*_e*ge);return Math.log(Math.sqrt(ot*ot+1)-ot)}function Te(Qe){return(Math.exp(Qe)-Math.exp(-Qe))/2}function ze(Qe){return(Math.exp(Qe)+Math.exp(-Qe))/2}const nt=Ee(0);let Pe=function(Qe){return ze(nt)/ze(nt+ie*Qe)},qe=function(Qe){return oe*((ze(nt)*(Te(ot=nt+ie*Qe)/ze(ot))-Te(nt))/_e)/ge;var ot},Re=(Ee(1)-nt)/ie;if(Math.abs(ge)<1e-6||!isFinite(Re)){if(Math.abs(oe-me)<1e-6)return this.easeTo(i,l);const Qe=me<oe?-1:1;Re=Math.abs(Math.log(me/oe))/ie,qe=function(){return 0},Pe=function(ot){return Math.exp(Qe*ie*ot)}}i.duration="duration"in i?+i.duration:1e3*Re/("screenSpeed"in i?+i.screenSpeed/ie:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0);const tt=v!==z,ke=k!==T,Ze=!f.isPaddingEqual(F),it=Qe=>ot=>{const Ct=ot*Re,Ot=1/Pe(Ct);Qe.zoom=ot===1?C:g+Qe.scaleZoom(Ot),tt&&(Qe.bearing=s.number(v,z,ot)),ke&&(Qe.pitch=s.number(T,k,ot)),Ze&&(Qe.interpolatePadding(S,F,ot),Y=Qe.centerPoint.add(X));const xt=ot===1?J:Qe.unproject(B.add(H.mult(qe(Ct))).mult(Ot));return Qe.setLocationAtPoint(Qe.renderWorldCopies?xt.wrap():xt,Y),Qe._updateCameraOnTerrain(),i.preloadOnly||this._fireMoveEvents(l),Qe};if(i.preloadOnly){const Qe=this._emulate(it,i.duration,f);return this._preloadTiles(Qe),this}return this._zooming=!0,this._rotating=tt,this._pitching=ke,this._padding=Ze,this._prepareEase(l,!1),this._ease(it(f),()=>this._afterEase(l),i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,l){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const f=this._onEaseEnd;this._onEaseEnd=void 0,f.call(this,l)}if(!i){const f=this.handlers;f&&f.stop(!1)}return this}_ease(i,l,f){f.animate===!1||f.duration===0?(i(1),l()):(this._easeStart=s.exported.now(),this._easeOptions=f,this._onEaseFrame=i,this._onEaseEnd=l,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const i=Math.min((s.exported.now()-this._easeStart)/this._easeOptions.duration,1),l=this._onEaseFrame;l&&l(this._easeOptions.easing(i)),i<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(i,l){i=s.wrap(i,-180,180);const f=Math.abs(i-l);return Math.abs(i-360-l)<f&&(i-=360),Math.abs(i+360-l)<f&&(i+=360),i}_normalizeCenter(i){const l=this.transform;if(!l.renderWorldCopies||l.maxBounds)return;const f=i.lng-l.center.lng;i.lng+=f>180?-360:f<-180?360:0}_prefersReducedMotion(i){return this._respectPrefersReducedMotion&&s.exported.prefersReducedMotion&&!(i&&i.essential)}_emulate(i,l,f){const g=Math.ceil(15*l/1e3),v=[],T=i(f.clone());for(let S=0;S<=g;S++){const C=T(S/g);v.push(C.clone())}return v}}class vt{constructor(i={}){this.options=i,s.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(i){const l=this.options&&this.options.compact;return this._map=i,this._container=q("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=q("button","mapboxgl-ctrl-attrib-button",this._container),q("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=q("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),l&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),l===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(i,l){const f=this._map._getUIString(`AttributionControl.${l}`);i.setAttribute("aria-label",f),i.removeAttribute("title"),i.firstElementChild&&i.firstElementChild.setAttribute("title",f)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let i=this._editLink;i||(i=this._editLink=this._container.querySelector(".mapbox-improve-map"));const l=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||s.config.ACCESS_TOKEN}];if(i){const f=l.reduce((g,v,T)=>(v.value&&(g+=`${v.key}=${v.value}${T<l.length-1?"&":""}`),g),"?");i.href=`${s.config.FEEDBACK_URL}/${f}#${bl(this._map,!0)}`,i.rel="noopener nofollow",this._setElementTitle(i,"MapFeedback")}}_updateData(i){!i||i.sourceDataType!=="metadata"&&i.sourceDataType!=="visibility"&&i.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let i=[];if(this._map.style.stylesheet){const g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}const l=this._map.style._sourceCaches;for(const g in l){const v=l[g];if(v.used){const T=v.getSource();T.attribution&&i.indexOf(T.attribution)<0&&i.push(T.attribution)}}i.sort((g,v)=>g.length-v.length),i=i.filter((g,v)=>{for(let T=v+1;T<i.length;T++)if(i[T].indexOf(g)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=[...this.options.customAttribution,...i]:i.unshift(this.options.customAttribution));const f=i.join(" | ");f!==this._attribHTML&&(this._attribHTML=f,i.length?(this._innerContainer.innerHTML=f,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Nu{constructor(){s.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(i){this._map=i,this._container=q("div","mapboxgl-ctrl");const l=q("a","mapboxgl-ctrl-logo");return l.target="_blank",l.rel="noopener nofollow",l.href="https://www.mapbox.com/",l.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),l.setAttribute("rel","noopener nofollow"),this._container.appendChild(l),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(i){i&&i.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const i=this._map.style._sourceCaches;if(Object.entries(i).length===0)return!0;for(const l in i){const f=i[l].getSource();if(f.hasOwnProperty("mapbox_logo")&&!f.mapbox_logo)return!1}return!0}_updateCompact(){const i=this._container.children;if(i.length){const l=i[0];this._map.getCanvasContainer().offsetWidth<250?l.classList.add("mapboxgl-compact"):l.classList.remove("mapboxgl-compact")}}}class ju{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const l=++this._id;return this._queue.push({callback:i,id:l,cancelled:!1}),l}remove(i){const l=this._currentlyRunning,f=l?this._queue.concat(l):this._queue;for(const g of f)if(g.id===i)return void(g.cancelled=!0)}run(i=0){const l=this._currentlyRunning=this._queue;this._queue=[];for(const f of l)if(!f.cancelled&&(f.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function va(h,i,l){if(h=new s.LngLat(h.lng,h.lat),i){const f=new s.LngLat(h.lng-360,h.lat),g=new s.LngLat(h.lng+360,h.lat),v=360*Math.ceil(Math.abs(h.lng-l.center.lng)/360),T=l.locationPoint(h).distSqr(i),S=i.x<0||i.y<0||i.x>l.width||i.y>l.height;l.locationPoint(f).distSqr(i)<T&&(S||Math.abs(f.lng-l.center.lng)<v)?h=f:l.locationPoint(g).distSqr(i)<T&&(S||Math.abs(g.lng-l.center.lng)<v)&&(h=g)}for(;Math.abs(h.lng-l.center.lng)>180;){const f=l.locationPoint(h);if(f.x>=0&&f.y>=0&&f.x<=l.width&&f.y<=l.height)break;h.lng>l.center.lng?h.lng-=360:h.lng+=360}return h}const ks={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class mt extends s.Evented{constructor(i,l){if(super(),(i instanceof s.window.HTMLElement||l)&&(i=s.extend({element:i},l)),s.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=i&&i.occludedOpacity||.2,i&&i.element)this._element=i.element,this._offset=s.Point.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=q("div");const g=41,v=27,T=ve("svg",{display:"block",height:g*this._scale+"px",width:v*this._scale+"px",viewBox:`0 0 ${v} ${g}`},this._element),S=ve("radialGradient",{id:"shadowGradient"},ve("defs",{},T));ve("stop",{offset:"10%","stop-opacity":.4},S),ve("stop",{offset:"100%","stop-opacity":.05},S),ve("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},T),ve("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},T),ve("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},T),ve("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},T),this._offset=s.Point.convert(i&&i.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",g=>{g.preventDefault()}),this._element.addEventListener("mousedown",g=>{g.preventDefault()});const f=this._element.classList;for(const g in ks)f.remove(`mapboxgl-marker-anchor-${g}`);f.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(i){return i===this._map||(this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._updateMoving),i.on("moveend",this._update),i.on("remove",this._clearFadeTimer),i._addMarker(this),this.setDraggable(this._draggable),this._update(),i.on("click",this._onMapClick)),this}remove(){const i=this._map;return i&&(i.off("click",this._onMapClick),i.off("move",this._updateMoving),i.off("moveend",this._update),i.off("mousedown",this._addDragHandler),i.off("touchstart",this._addDragHandler),i.off("mouseup",this._onUp),i.off("touchend",this._onUp),i.off("mousemove",this._onMove),i.off("touchmove",this._onMove),i.off("remove",this._clearFadeTimer),i._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=s.LngLat.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const g=Math.sqrt(Math.pow(13.5,2)/2);i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[g,-1*(38.1-13.5+g)],"bottom-right":[-g,-1*(38.1-13.5+g)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,i._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(i){const l=i.code,f=i.charCode||i.keyCode;l!=="Space"&&l!=="Enter"&&f!==32&&f!==13||this.togglePopup()}_onMapClick(i){const l=i.originalEvent.target,f=this._element;this._popup&&(l===f||f.contains(l))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?(i.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(i.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const i=this._map,l=this._pos;if(!i||!l)return!1;const f=i.unproject(l),g=i.getFreeCameraOptions();if(!g.position)return!1;const v=g.position.toLngLat();return v.distanceTo(f)<.9*v.distanceTo(this._lngLat)}_evaluateOpacity(){const i=this._map;if(!i)return;const l=this._pos;if(!l||l.x<0||l.x>i.transform.width||l.y<0||l.y>i.transform.height)return void this._clearFadeTimer();const f=i.unproject(l);let g;i._showingGlobe()&&s.isLngLatBehindGlobe(i.transform,this._lngLat)?g=0:(g=1-i._queryFogOpacity(f),i.transform._terrainEnabled()&&i.getTerrain()&&this._behindTerrain()&&(g*=this._occludedOpacity)),this._element.style.opacity=`${g}`,this._element.style.pointerEvents=g>0?"auto":"none",this._popup&&this._popup._setOpacity(g),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const i=this._pos;if(!i||!this._map)return;const l=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${i.x}px,${i.y}px)
            ${ks[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${l.x}px,${l.y}px)
        `}_calculateXYTransform(){const i=this._pos,l=this._map,f=this.getPitchAlignment();if(!l||!i||f!=="map")return"";if(!l._showingGlobe()){const C=l.getPitch();return C?`rotateX(${C}deg)`:""}const g=s.radToDeg(s.globeTiltAtLngLat(l.transform,this._lngLat)),v=i.sub(s.globeCenterToScreenPoint(l.transform)),T=Math.abs(v.x)+Math.abs(v.y);if(T===0)return"";const S=g/T;return`rotateX(${-v.y*S}deg) rotateY(${v.x*S}deg)`}_calculateZTransform(){const i=this._pos,l=this._map;if(!l||!i)return"";let f=0;const g=this.getRotationAlignment();if(g==="map")if(l._showingGlobe()){const v=l.project(new s.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),T=l.project(new s.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(v);f=s.radToDeg(Math.atan2(T.y,T.x))-90}else f=-l.getBearing();else if(g==="horizon"){const v=s.smoothstep(4,6,l.getZoom()),T=s.globeCenterToScreenPoint(l.transform);T.y+=v*l.transform.height;const S=i.sub(T),C=s.radToDeg(Math.atan2(S.y,S.x));f=(C>90?C-270:C+90)*(1-v)}return f+=this._rotation,f?`rotateZ(${f}deg)`:""}_update(i){s.window.cancelAnimationFrame(this._updateFrameId);const l=this._map;l&&(l.transform.renderWorldCopies&&(this._lngLat=va(this._lngLat,this._pos,l.transform)),this._pos=l.project(this._lngLat),i===!0?this._updateFrameId=s.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),l._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(l._showingGlobe()||l.getTerrain()||l.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(i){return this._offset=s.Point.convert(i),this._update(),this}_onMove(i){const l=this._map;if(!l)return;const f=this._pointerdownPos,g=this._positionDelta;if(f&&g){if(!this._isDragging){const v=this._clickTolerance||l._clickTolerance;if(i.point.dist(f)<v)return;this._isDragging=!0}this._pos=i.point.sub(g),this._lngLat=l.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.Event("dragstart"))),this.fire(new s.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const i=this._map;i&&(i.off("mousemove",this._onMove),i.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new s.Event("dragend")),this._state="inactive"}_addDragHandler(i){const l=this._map,f=this._pos;l&&f&&this._element.contains(i.originalEvent.target)&&(i.preventDefault(),this._positionDelta=i.point.sub(f),this._pointerdownPos=i.point,this._state="pending",l.on("mousemove",this._onMove),l.on("touchmove",this._onMove),l.once("mouseup",this._onUp),l.once("touchend",this._onUp))}setDraggable(i){this._draggable=!!i;const l=this._map;return l&&(i?(l.on("mousedown",this._addDragHandler),l.on("touchstart",this._addDragHandler)):(l.off("mousedown",this._addDragHandler),l.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(i){return this._occludedOpacity=i||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const Vu={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},cd=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function vh(h=new s.Point(0,0),i="bottom"){if(typeof h=="number"){const l=Math.round(Math.sqrt(.5*Math.pow(h,2)));switch(i){case"top":return new s.Point(0,h);case"top-left":return new s.Point(l,l);case"top-right":return new s.Point(-l,l);case"bottom":return new s.Point(0,-h);case"bottom-left":return new s.Point(l,-l);case"bottom-right":return new s.Point(-l,-l);case"left":return new s.Point(h,0);case"right":return new s.Point(-h,0)}return new s.Point(0,0)}return h instanceof s.Point||Array.isArray(h)?s.Point.convert(h):s.Point.convert(h[i]||[0,0])}class Gu{constructor(i){this.jumpTo(i)}getValue(i){if(i<=this._startTime)return this._start;if(i>=this._endTime)return this._end;const l=s.easeCubicInOut((i-this._startTime)/(this._endTime-this._startTime));return this._start*(1-l)+this._end*l}isEasing(i){return i>=this._startTime&&i<=this._endTime}jumpTo(i){this._startTime=-1/0,this._endTime=-1/0,this._start=i,this._end=i}easeTo(i,l,f){this._start=this.getValue(l),this._end=i,this._startTime=l,this._endTime=l+f}}const xh={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},wh={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},ud={showCompass:!0,showZoom:!0,visualizePitch:!1};class hd{constructor(i,l,f=!1){this._clickTolerance=10,this.element=l,this.mouseRotate=new Ru({clickTolerance:i.dragRotate._mouseRotate._clickTolerance}),this.map=i,f&&(this.mousePitch=new Fu({clickTolerance:i.dragRotate._mousePitch._clickTolerance})),s.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),l.addEventListener("mousedown",this.mousedown),l.addEventListener("touchstart",this.touchstart,{passive:!1}),l.addEventListener("touchmove",this.touchmove),l.addEventListener("touchend",this.touchend),l.addEventListener("touchcancel",this.reset)}down(i,l){this.mouseRotate.mousedown(i,l),this.mousePitch&&this.mousePitch.mousedown(i,l),te()}move(i,l){const f=this.map,g=this.mouseRotate.mousemoveWindow(i,l),v=g&&g.bearingDelta;if(v&&f.setBearing(f.getBearing()+v),this.mousePitch){const T=this.mousePitch.mousemoveWindow(i,l),S=T&&T.pitchDelta;S&&f.setPitch(f.getPitch()+S)}}off(){const i=this.element;i.removeEventListener("mousedown",this.mousedown),i.removeEventListener("touchstart",this.touchstart,{passive:!1}),i.removeEventListener("touchmove",this.touchmove),i.removeEventListener("touchend",this.touchend),i.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){ne(),s.window.removeEventListener("mousemove",this.mousemove),s.window.removeEventListener("mouseup",this.mouseup)}mousedown(i){this.down(s.extend({},i,{ctrlKey:!0,preventDefault:()=>i.preventDefault()}),Be(this.element,i)),s.window.addEventListener("mousemove",this.mousemove),s.window.addEventListener("mouseup",this.mouseup)}mousemove(i){this.move(i,Be(this.element,i))}mouseup(i){this.mouseRotate.mouseupWindow(i),this.mousePitch&&this.mousePitch.mouseupWindow(i),this.offTemp()}touchstart(i){i.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=ye(this.element,i.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>i.preventDefault()},this._startPos))}touchmove(i){i.targetTouches.length!==1?this.reset():(this._lastPos=ye(this.element,i.targetTouches)[0],this.move({preventDefault:()=>i.preventDefault()},this._lastPos))}touchend(i){i.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const $u={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Zu={maxWidth:100,unit:"metric"},qu={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},xa={version:s.version,supported:R,setRTLTextPlugin:s.setRTLTextPlugin,getRTLTextPluginStatus:s.getRTLTextPluginStatus,Map:class extends F1{constructor(h){if(s.LivePerformanceUtils.mark(s.PerformanceMarkers.create),(h=s.extend({},wh,h)).minZoom!=null&&h.maxZoom!=null&&h.minZoom>h.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(h.minPitch!=null&&h.maxPitch!=null&&h.minPitch>h.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(h.minPitch!=null&&h.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(h.maxPitch!=null&&h.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(h.antialias&&s.isSafariWithAntialiasingBug(s.window)&&(h.antialias=!1,s.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new ma(h.minZoom,h.maxZoom,h.minPitch,h.maxPitch,h.renderWorldCopies),h),this._interactive=h.interactive,this._minTileCacheSize=h.minTileCacheSize,this._maxTileCacheSize=h.maxTileCacheSize,this._failIfMajorPerformanceCaveat=h.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=h.preserveDrawingBuffer,this._antialias=h.antialias,this._useWebGL2=h.useWebGL2,this._trackResize=h.trackResize,this._bearingSnap=h.bearingSnap,this._refreshExpiredTiles=h.refreshExpiredTiles,this._fadeDuration=h.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=h.crossSourceCollisions,this._collectResourceTiming=h.collectResourceTiming,this._optimizeForTerrain=h.optimizeForTerrain,this._language=this._parseLanguage(h.language),this._worldview=h.worldview,this._renderTaskQueue=new ju,this._domRenderTaskQueue=new ju,this._controls=[],this._markers=[],this._popups=[],this._mapId=s.uniqueId(),this._locale=s.extend({},xh,h.locale),this._clickTolerance=h.clickTolerance,this._cooperativeGestures=h.cooperativeGestures,this._performanceMetricsCollection=h.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Gu(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new s.RequestManager(h.transformRequest,h.accessToken,h.testMode),this._silenceAuthErrors=!!h.testMode,typeof h.container=="string"){if(this._container=s.window.document.getElementById(h.container),!this._container)throw new Error(`Container '${h.container}' not found.`)}else{if(!(h.container instanceof s.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=h.container}if(this._container.childNodes.length>0&&s.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),h.maxBounds&&this.setMaxBounds(h.maxBounds),s.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),s.window!==void 0&&(s.window.addEventListener("online",this._onWindowOnline,!1),s.window.addEventListener("resize",this._onWindowResize,!1),s.window.addEventListener("orientationchange",this._onWindowResize,!1),s.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),s.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new io(this,h),this._localFontFamily=h.localFontFamily,this._localIdeographFontFamily=h.localIdeographFontFamily,h.style&&this.setStyle(h.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),h.projection&&this.setProjection(h.projection),this._hash=h.hash&&new ku(typeof h.hash=="string"&&h.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:h.center,zoom:h.zoom,bearing:h.bearing,pitch:h.pitch}),h.bounds&&(this.resize(),this.fitBounds(h.bounds,s.extend({},h.fitBoundsOptions,{duration:0})))),this.resize(),h.attributionControl&&this.addControl(new vt({customAttribution:h.customAttribution})),this._logoControl=new Nu,this.addControl(this._logoControl,h.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",i=>{this._update(i.dataType==="style"),this.fire(new s.Event(`${i.dataType}data`,i))}),this.on("dataloading",i=>{this.fire(new s.Event(`${i.dataType}dataloading`,i))})}_getMapId(){return this._mapId}addControl(h,i){if(i===void 0&&(i=h.getDefaultPosition?h.getDefaultPosition():"top-right"),!h||!h.onAdd)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const l=h.onAdd(this);this._controls.push(h);const f=this._controlPositions[i];return i.indexOf("bottom")!==-1?f.insertBefore(l,f.firstChild):f.appendChild(l),this}removeControl(h){if(!h||!h.onRemove)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(h);return i>-1&&this._controls.splice(i,1),h.onRemove(this),this}hasControl(h){return this._controls.indexOf(h)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(h){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const i=!this._moving;return i&&this.fire(new s.Event("movestart",h)).fire(new s.Event("move",h)),this.fire(new s.Event("resize",h)),i&&this.fire(new s.Event("moveend",h)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(h){return this.transform.setMaxBounds(s.LngLatBounds.convert(h)),this._update()}setMinZoom(h){if((h=h??-2)>=-2&&h<=this.transform.maxZoom)return this.transform.minZoom=h,this._update(),this.getZoom()<h?this.setZoom(h):this.fire(new s.Event("zoomstart")).fire(new s.Event("zoom")).fire(new s.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(h){if((h=h??22)>=this.transform.minZoom)return this.transform.maxZoom=h,this._update(),this.getZoom()>h?this.setZoom(h):this.fire(new s.Event("zoomstart")).fire(new s.Event("zoom")).fire(new s.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(h){if((h=h??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(h>=0&&h<=this.transform.maxPitch)return this.transform.minPitch=h,this._update(),this.getPitch()<h?this.setPitch(h):this.fire(new s.Event("pitchstart")).fire(new s.Event("pitch")).fire(new s.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(h){if((h=h??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(h>=this.transform.minPitch)return this.transform.maxPitch=h,this._update(),this.getPitch()>h?this.setPitch(h):this.fire(new s.Event("pitchstart")).fire(new s.Event("pitch")).fire(new s.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(h){return this.transform.renderWorldCopies=h,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(h){return h==="auto"?s.window.navigator.language:Array.isArray(h)?h.length===0?void 0:h.map(i=>i==="auto"?s.window.navigator.language:i):h}setLanguage(h){const i=this._parseLanguage(h);if(!this.style||i===this._language)return this;this._language=i,this.style._reloadSources();for(const l of this._controls)l._setLanguage&&l._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(h){return this.style&&h!==this._worldview?(this._worldview=h,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(h){return this._lazyInitEmptyStyle(),h?typeof h=="string"&&(h={name:h}):h=null,this._useExplicitProjection=!!h,this._prioritizeAndUpdateProjection(h,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const h=this.transform,i=h.projection.name;let l;i==="globe"&&h.zoom>=s.GLOBE_ZOOM_THRESHOLD_MAX?(h.setMercatorFromTransition(),l=!0):i==="mercator"&&h.zoom<s.GLOBE_ZOOM_THRESHOLD_MAX&&(h.setProjection({name:"globe"}),l=!0),l&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(h,i){return this._updateProjection(h||i||{name:"mercator"})}_updateProjection(h){let i;if(i=h.name==="globe"&&this.transform.zoom>=s.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(h),this.style.applyProjectionUpdate(),i){this.painter.clearBackgroundTiles();for(const l in this.style._sourceCaches)this.style._sourceCaches[l].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(h){return this.transform.locationPoint3D(s.LngLat.convert(h))}unproject(h){return this.transform.pointLocation3D(s.Point.convert(h))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(h,i,l){if(h==="mouseenter"||h==="mouseover"){let f=!1;const g=T=>{const S=i.filter(z=>this.getLayer(z)),C=S.length?this.queryRenderedFeatures(T.point,{layers:S}):[];C.length?f||(f=!0,l.call(this,new vr(h,this,T.originalEvent,{features:C}))):f=!1},v=()=>{f=!1};return{layers:new Set(i),listener:l,delegates:{mousemove:g,mouseout:v}}}if(h==="mouseleave"||h==="mouseout"){let f=!1;const g=T=>{const S=i.filter(C=>this.getLayer(C));(S.length?this.queryRenderedFeatures(T.point,{layers:S}):[]).length?f=!0:f&&(f=!1,l.call(this,new vr(h,this,T.originalEvent)))},v=T=>{f&&(f=!1,l.call(this,new vr(h,this,T.originalEvent)))};return{layers:new Set(i),listener:l,delegates:{mousemove:g,mouseout:v}}}{const f=g=>{const v=i.filter(S=>this.getLayer(S)),T=v.length?this.queryRenderedFeatures(g.point,{layers:v}):[];T.length&&(g.features=T,l.call(this,g),delete g.features)};return{layers:new Set(i),listener:l,delegates:{[h]:f}}}}on(h,i,l){if(l===void 0)return super.on(h,i);Array.isArray(i)||(i=[i]);const f=this._createDelegatedListener(h,i,l);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[h]=this._delegatedListeners[h]||[],this._delegatedListeners[h].push(f);for(const g in f.delegates)this.on(g,f.delegates[g]);return this}once(h,i,l){if(l===void 0)return super.once(h,i);Array.isArray(i)||(i=[i]);const f=this._createDelegatedListener(h,i,l);for(const g in f.delegates)this.once(g,f.delegates[g]);return this}off(h,i,l){if(l===void 0)return super.off(h,i);i=new Set(Array.isArray(i)?i:[i]);const f=(v,T)=>{if(v.size!==T.size)return!1;for(const S of v)if(!T.has(S))return!1;return!0},g=this._delegatedListeners?this._delegatedListeners[h]:void 0;return g&&(v=>{for(let T=0;T<v.length;T++){const S=v[T];if(S.listener===l&&f(S.layers,i)){for(const C in S.delegates)this.off(C,S.delegates[C]);return v.splice(T,1),this}}})(g),this}queryRenderedFeatures(h,i){return this.style?(i!==void 0||h===void 0||h instanceof s.Point||Array.isArray(h)||(i=h,h=void 0),this.style.queryRenderedFeatures(h=h||[[0,0],[this.transform.width,this.transform.height]],i=i||{},this.transform)):[]}querySourceFeatures(h,i){return this.style.querySourceFeatures(h,i)}isPointOnSurface(h){const{name:i}=this.transform.projection;return i!=="globe"&&i!=="mercator"&&s.warnOnce(`${i} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(s.Point.convert(h))}setStyle(h,i){return(i=s.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&i.localFontFamily===this._localFontFamily&&this.style&&h?(this._diffStyle(h,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._localFontFamily=i.localFontFamily,this._updateStyle(h,i))}_getUIString(h){const i=this._locale[h];if(i==null)throw new Error(`Missing UI string '${h}'`);return i}_updateStyle(h,i){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),h&&(this.style=new no(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof h=="string"?this.style.loadURL(h):this.style.loadJSON(h)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new no(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(h,i){if(typeof h=="string"){const l=this._requestManager.normalizeStyleURL(h),f=this._requestManager.transformRequest(l,s.ResourceType.Style);s.getJSON(f,(g,v)=>{g?this.fire(new s.ErrorEvent(g)):v&&this._updateDiff(v,i)})}else typeof h=="object"&&this._updateDiff(h,i)}_updateDiff(h,i){try{this.style.setState(h)&&this._update(!0)}catch(l){s.warnOnce(`Unable to perform style diff: ${l.message||l.error||l}.  Rebuilding the style from scratch.`),this._updateStyle(h,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(s.warnOnce("There is no style added to the map."),!1)}addSource(h,i){return this._lazyInitEmptyStyle(),this.style.addSource(h,i),this._update(!0)}isSourceLoaded(h){return!!this.style&&this.style._isSourceCacheLoaded(h)}areTilesLoaded(){const h=this.style&&this.style._sourceCaches;for(const i in h){const l=h[i]._tiles;for(const f in l){const g=l[f];if(g.state!=="loaded"&&g.state!=="errored")return!1}}return!0}addSourceType(h,i,l){this._lazyInitEmptyStyle(),this.style.addSourceType(h,i,l)}removeSource(h){return this.style.removeSource(h),this._updateTerrain(),this._update(!0)}getSource(h){return this.style.getSource(h)}addImage(h,i,{pixelRatio:l=1,sdf:f=!1,stretchX:g,stretchY:v,content:T}={}){if(this._lazyInitEmptyStyle(),i instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&i instanceof s.window.ImageBitmap){const{width:S,height:C,data:z}=s.exported.getImageData(i);this.style.addImage(h,{data:new s.RGBAImage({width:S,height:C},z),pixelRatio:l,stretchX:g,stretchY:v,content:T,sdf:f,version:0})}else if(i.width===void 0||i.height===void 0)this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:S,height:C}=i,z=i;this.style.addImage(h,{data:new s.RGBAImage({width:S,height:C},new Uint8Array(z.data)),pixelRatio:l,stretchX:g,stretchY:v,content:T,sdf:f,version:0,userImage:z}),z.onAdd&&z.onAdd(this,h)}}updateImage(h,i){const l=this.style.getImage(h);if(!l)return void this.fire(new s.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const f=i instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&i instanceof s.window.ImageBitmap?s.exported.getImageData(i):i,{width:g,height:v}=f;g!==void 0&&v!==void 0?g===l.data.width&&v===l.data.height?(l.data.replace(f.data,!(i instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&i instanceof s.window.ImageBitmap)),this.style.updateImage(h,l)):this.fire(new s.ErrorEvent(new Error(`The width and height of the updated image (${g}, ${v})
                must be that same as the previous version of the image
                (${l.data.width}, ${l.data.height})`))):this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(h){return h?!!this.style.getImage(h):(this.fire(new s.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(h){this.style.removeImage(h)}loadImage(h,i){s.getImage(this._requestManager.transformRequest(h,s.ResourceType.Image),(l,f)=>{i(l,f instanceof s.window.HTMLImageElement?s.exported.getImageData(f):f)})}listImages(){return this.style.listImages()}addLayer(h,i){return this._lazyInitEmptyStyle(),this.style.addLayer(h,i),this._update(!0)}moveLayer(h,i){return this.style.moveLayer(h,i),this._update(!0)}removeLayer(h){return this.style.removeLayer(h),this._update(!0)}getLayer(h){return this.style.getLayer(h)}setLayerZoomRange(h,i,l){return this.style.setLayerZoomRange(h,i,l),this._update(!0)}setFilter(h,i,l={}){return this.style.setFilter(h,i,l),this._update(!0)}getFilter(h){return this.style.getFilter(h)}setPaintProperty(h,i,l,f={}){return this.style.setPaintProperty(h,i,l,f),this._update(!0)}getPaintProperty(h,i){return this.style.getPaintProperty(h,i)}setLayoutProperty(h,i,l,f={}){return this.style.setLayoutProperty(h,i,l,f),this._update(!0)}getLayoutProperty(h,i){return this.style.getLayoutProperty(h,i)}setLight(h,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(h,i),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(h){return this._lazyInitEmptyStyle(),!h&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(h),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(h){return this._lazyInitEmptyStyle(),this.style.setFog(h),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(h){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(s.LngLat.convert(h),this.transform):0}setFeatureState(h,i){return this.style.setFeatureState(h,i),this._update()}removeFeatureState(h,i){return this.style.removeFeatureState(h,i),this._update()}getFeatureState(h){return this.style.getFeatureState(h)}_updateContainerDimensions(){if(!this._container)return;const h=this._container.getBoundingClientRect().width||400,i=this._container.getBoundingClientRect().height||300;let l,f,g,v=this._container;for(;v&&(!f||!g);){const T=s.window.getComputedStyle(v).transform;T&&T!=="none"&&(l=T.match(/matrix.*\((.+)\)/)[1].split(", "),l[0]&&l[0]!=="0"&&l[0]!=="1"&&(f=l[0]),l[3]&&l[3]!=="0"&&l[3]!=="1"&&(g=l[3])),v=v.parentElement}this._containerWidth=f?Math.abs(h/f):h,this._containerHeight=g?Math.abs(i/g):i}_detectMissingCSS(){s.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&s.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const h=this._container;h.classList.add("mapboxgl-map"),(this._missingCSSCanary=q("div","mapboxgl-canary",h)).style.visibility="hidden",this._detectMissingCSS();const i=this._canvasContainer=q("div","mapboxgl-canvas-container",h);this._interactive&&i.classList.add("mapboxgl-interactive"),this._canvas=q("canvas","mapboxgl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const l=this._controlContainer=q("div","mapboxgl-control-container",h),f=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(g=>{f[g]=q("div",`mapboxgl-ctrl-${g}`,l)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(h,i){const l=s.exported.devicePixelRatio||1;this._canvas.width=l*Math.ceil(h),this._canvas.height=l*Math.ceil(i),this._canvas.style.width=`${h}px`,this._canvas.style.height=`${i}px`}_addMarker(h){this._markers.push(h)}_removeMarker(h){const i=this._markers.indexOf(h);i!==-1&&this._markers.splice(i,1)}_addPopup(h){this._popups.push(h)}_removePopup(h){const i=this._popups.indexOf(h);i!==-1&&this._popups.splice(i,1)}_setupPainter(){const h=s.extend({},R.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._useWebGL2&&this._canvas.getContext("webgl2",h),l=i||this._canvas.getContext("webgl",h)||this._canvas.getContext("experimental-webgl",h);l?(this._useWebGL2&&!i&&s.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),s.storeAuthState(l,!0),this.painter=new pa(l,this.transform,!!i),this.on("data",f=>{f.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),s.exported$1.testSupport(l)):this.fire(new s.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(h){h.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new s.Event("webglcontextlost",{originalEvent:h}))}_contextRestored(h){this._setupPainter(),this.resize(),this._update(),this.fire(new s.Event("webglcontextrestored",{originalEvent:h}))}_onMapScroll(h){if(h.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(h){return this.style?(this._styleDirty=this._styleDirty||h,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(h){return this._update(),this._renderTaskQueue.add(h)}_cancelRenderFrame(h){this._renderTaskQueue.remove(h)}_requestDomTask(h){!this.loaded()||this.loaded()&&!this.isMoving()?h():this._domRenderTaskQueue.add(h)}_render(h){let i;const l=this.painter.context.extTimerQuery,f=s.exported.now();if(this.listens("gpu-timing-frame")&&(i=l.createQueryEXT(),l.beginQueryEXT(l.TIME_ELAPSED_EXT,i)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],s.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],s.window.performance.now())),this._renderTaskQueue.run(h),this._domRenderTaskQueue.run(h),this._removed)return;this._updateProjectionTransition();const g=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const S=this.transform.zoom,C=this.transform.pitch,z=s.exported.now(),k=new s.EvaluationParameters(S,{now:z,fadeDuration:g,pitch:C,transition:this.style.getTransition()});this.style.update(k)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let v=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),v=this._updateAverageElevation(f),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):v=this._updateAverageElevation(f),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,g,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:g,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new s.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new s.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),i){const S=s.exported.now()-f;l.endQueryEXT(l.TIME_ELAPSED_EXT,i),setTimeout(()=>{const C=l.getQueryObjectEXT(i,l.QUERY_RESULT_EXT)/1e6;l.deleteQueryEXT(i),this.fire(new s.Event("gpu-timing-frame",{cpuTime:S,gpuTime:C})),s.window.performance.mark("frame-gpu",{startTime:f,detail:{gpuTime:C}})},50)}if(this.listens("gpu-timing-layer")){const S=this.painter.collectGpuTimers();setTimeout(()=>{const C=this.painter.queryGpuTimers(S);this.fire(new s.Event("gpu-timing-layer",{layerTimes:C}))},50)}if(this.listens("gpu-timing-deferred-render")){const S=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const C=this.painter.queryGpuTimeDeferredRender(S);this.fire(new s.Event("gpu-timing-deferred-render",{gpuTime:C}))},50)}const T=this._sourcesDirty||this._styleDirty||this._placementDirty||v;if(T||this._repaint)this.triggerRepaint();else{const S=!this.isMoving()&&this.loaded();if(S&&(v=this._updateAverageElevation(f,!0)),v)this.triggerRepaint();else if(this._triggerFrame(!1),S&&(this.fire(new s.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const C=this._calculateSpeedIndex();this.fire(new s.Event("speedindexcompleted",{speedIndex:C})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||T||(this._fullyLoaded=!0,s.LivePerformanceUtils.mark(s.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&s.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(h){for(const i of this._markers)h&&!this.getRenderWorldCopies()&&(i._lngLat=i._lngLat.wrap()),i._update();for(const i of this._popups)!h||this.getRenderWorldCopies()||i._trackPointer||(i._lngLat=i._lngLat.wrap()),i._update()}_updateAverageElevation(h,i=!1){const l=f=>(this.transform.averageElevation=f,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&l(0);if((i||h-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(h)){const f=this.transform.averageElevation;let g=this.transform.sampleAverageElevation(),v=!1;this.transform.elevation&&(v=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(g)?g=0:this._averageElevationLastSampledAt=h;const T=Math.abs(f-g);if(T>1){if(this._isInitialLoad||v)return this._averageElevation.jumpTo(g),l(g);this._averageElevation.easeTo(g,h,300)}else if(T>1e-4)return this._averageElevation.jumpTo(g),l(g)}return!!this._averageElevation.isEasing(h)&&l(this._averageElevation.getValue(h))}_authenticate(){s.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,h=>{if(h&&(h.message===s.AUTH_ERR_MSG||h.status===401)){const i=this.painter.context.gl;s.storeAuthState(i,!1),this._logoControl instanceof Nu&&this._logoControl._updateLogo(),i&&i.clear(i.DEPTH_BUFFER_BIT|i.COLOR_BUFFER_BIT|i.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new s.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),s.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const h=this._isDragging();this.painter.updateTerrain(this.style,h)}_calculateSpeedIndex(){const h=this.painter.canvasCopy(),i=this.painter.getCanvasCopiesAndTimestamps();i.timeStamps.push(performance.now());const l=this.painter.context.gl,f=l.createFramebuffer();function g(v){l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,v,0);const T=new Uint8Array(l.drawingBufferWidth*l.drawingBufferHeight*4);return l.readPixels(0,0,l.drawingBufferWidth,l.drawingBufferHeight,l.RGBA,l.UNSIGNED_BYTE,T),T}return l.bindFramebuffer(l.FRAMEBUFFER,f),this._canvasPixelComparison(g(h),i.canvasCopies.map(g),i.timeStamps)}_canvasPixelComparison(h,i,l){let f=l[1]-l[0];const g=h.length/4;for(let v=0;v<i.length;v++){const T=i[v];let S=0;for(let C=0;C<T.length;C+=4)T[C]===h[C]&&T[C+1]===h[C+1]&&T[C+2]===h[C+2]&&T[C+3]===h[C+3]&&(S+=1);f+=(l[v+2]-l[v+1])*(1-S/g)}return f}remove(){this._hash&&this._hash.remove();for(const i of this._controls)i.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),s.window!==void 0&&(s.window.removeEventListener("resize",this._onWindowResize,!1),s.window.removeEventListener("orientationchange",this._onWindowResize,!1),s.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),s.window.removeEventListener("online",this._onWindowOnline,!1),s.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const h=this.painter.context.gl.getExtension("WEBGL_lose_context");h&&h.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),s.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new s.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(h){this._renderNextFrame=this._renderNextFrame||h,this.style&&!this._frame&&(this._frame=s.exported.frame(i=>{const l=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,l&&this._render(i)}))}_preloadTiles(h){const i=this.style?Object.values(this.style._sourceCaches):[];return s.asyncAll(i,(l,f)=>l._preloadTiles(h,f),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(h){this._trackResize&&this.resize({originalEvent:h})._update()}_onVisibilityChange(){s.window.document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(h){this._showTileBoundaries!==h&&(this._showTileBoundaries=h,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(h){this._showTerrainWireframe!==h&&(this._showTerrainWireframe=h,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(h){this._speedIndexTiming!==h&&(this._speedIndexTiming=h,this._update())}get showPadding(){return!!this._showPadding}set showPadding(h){this._showPadding!==h&&(this._showPadding=h,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(h){this._showCollisionBoxes!==h&&(this._showCollisionBoxes=h,h?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(h){this._showOverdrawInspector!==h&&(this._showOverdrawInspector=h,this._update())}get repaint(){return!!this._repaint}set repaint(h){this._repaint!==h&&(this._repaint=h,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(h){this._vertices=h,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(h){this._showTileAABBs!==h&&(this._showTileAABBs=h,h&&this._update())}_setCacheLimits(h,i){s.setCacheLimits(h,i)}get version(){return s.version}},NavigationControl:class{constructor(h){this.options=s.extend({},ud,h),this._container=q("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(s.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",i=>{this._map&&this._map.zoomIn({},{originalEvent:i})}),q("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",i=>{this._map&&this._map.zoomOut({},{originalEvent:i})}),q("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(s.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",i=>{const l=this._map;l&&(this.options.visualizePitch?l.resetNorthPitch({},{originalEvent:i}):l.resetNorth({},{originalEvent:i}))}),this._compassIcon=q("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const h=this._map;if(!h)return;const i=h.getZoom(),l=i===h.getMaxZoom(),f=i===h.getMinZoom();this._zoomInButton.disabled=l,this._zoomOutButton.disabled=f,this._zoomInButton.setAttribute("aria-disabled",l.toString()),this._zoomOutButton.setAttribute("aria-disabled",f.toString())}_rotateCompassArrow(){const h=this._map;if(!h)return;const i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(h.transform.pitch*(Math.PI/180)),.5)}) rotateX(${h.transform.pitch}deg) rotateZ(${h.transform.angle*(180/Math.PI)}deg)`:`rotate(${h.transform.angle*(180/Math.PI)}deg)`;h._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=i)})}onAdd(h){return this._map=h,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),h.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&h.on("pitch",this._rotateCompassArrow),h.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new hd(h,this._compass,this.options.visualizePitch)),this._container}onRemove(){const h=this._map;h&&(this._container.remove(),this.options.showZoom&&h.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&h.off("pitch",this._rotateCompassArrow),h.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(h,i){const l=q("button",h,this._container);return l.type="button",l.addEventListener("click",i),l}_setButtonTitle(h,i){if(!this._map)return;const l=this._map._getUIString(`NavigationControl.${i}`);h.setAttribute("aria-label",l),h.firstElementChild&&h.firstElementChild.setAttribute("title",l)}},GeolocateControl:class extends s.Evented{constructor(h){super(),this.options=s.extend({geolocation:s.window.navigator.geolocation},$u,h),s.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=_a(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(h){return this._map=h,this._container=q("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(h){const i=(l=!!this.options.geolocation)=>{this._supportsGeolocation=l,h(l)};this._supportsGeolocation!==void 0?h(this._supportsGeolocation):s.window.navigator.permissions!==void 0?s.window.navigator.permissions.query({name:"geolocation"}).then(l=>i(l.state!=="denied")).catch(()=>i()):i()}_isOutOfMapMaxBounds(h){const i=this._map.getMaxBounds(),l=h.coords;return!!i&&(l.longitude<i.getWest()||l.longitude>i.getEast()||l.latitude<i.getSouth()||l.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(h){if(this._map){if(this._isOutOfMapMaxBounds(h))return this._setErrorState(),this.fire(new s.Event("outofmaxbounds",h)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=h,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(h),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(h),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new s.Event("geolocate",h)),this._finish()}}_updateCamera(h){const i=new s.LngLat(h.coords.longitude,h.coords.latitude),l=h.coords.accuracy,f=this._map.getBearing(),g=s.extend({bearing:f},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(l),g,{geolocateSource:!0})}_updateMarker(h){if(h){const i=new s.LngLat(h.coords.longitude,h.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=h.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const h=this._map.transform,i=s.mercatorZfromAltitude(1,h._center.lat)*h.worldSize,l=Math.ceil(2*this._accuracy*i);this._circleElement.style.width=`${l}px`,this._circleElement.style.height=`${l}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(h){if(this._map){if(this.options.trackUserLocation)if(h.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(h.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new s.Event("error",h)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(h){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",i=>i.preventDefault()),this._geolocateButton=q("button","mapboxgl-ctrl-geolocate",this._container),q("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",h===!1){s.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i)}else{const i=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=q("div","mapboxgl-user-location"),this._dotElement.appendChild(q("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(q("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new mt({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=q("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new mt({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",i=>{i.geolocateSource||this._watchState!=="ACTIVE_LOCK"||i.originalEvent&&i.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new s.Event("trackuserlocationend")))})}}_onDeviceOrientation(h){this._userLocationDotMarker&&(h.webkitCompassHeading?this._heading=h.webkitCompassHeading:h.absolute===!0&&(this._heading=-1*h.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return s.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new s.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let h;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(h={maximumAge:6e5,timeout:0},this._noTimeout=!0):(h=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,h),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const h=()=>{s.window.addEventListener("ondeviceorientationabsolute"in s.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};s.window.DeviceMotionEvent!==void 0&&typeof s.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(i=>{i==="granted"&&h()}).catch(console.error):h()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),s.window.removeEventListener("deviceorientation",this._onDeviceOrientation),s.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:vt,ScaleControl:class{constructor(h){this.options=s.extend({},Zu,h),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),s.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const h=this.options.maxWidth||100,i=this._map,l=i._containerHeight/2,f=i._containerWidth/2-h/2,g=i.unproject([f,l]),v=i.unproject([f+h,l]),T=g.distanceTo(v);if(this.options.unit==="imperial"){const S=3.2808*T;S>5280?this._setScale(h,S/5280,"mile"):this._setScale(h,S,"foot")}else this.options.unit==="nautical"?this._setScale(h,T/1852,"nautical-mile"):T>=1e3?this._setScale(h,T/1e3,"kilometer"):this._setScale(h,T,"meter")}_setScale(h,i,l){this._map._requestDomTask(()=>{const f=function(v){const T=Math.pow(10,`${Math.floor(v)}`.length-1);let S=v/T;return S=S>=10?10:S>=5?5:S>=3?3:S>=2?2:S>=1?1:function(C){const z=Math.pow(10,Math.ceil(-Math.log(C)/Math.LN10));return Math.round(C*z)/z}(S),T*S}(i),g=f/i;this._container.innerHTML=this._isNumberFormatSupported&&l!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:l}).format(f):`${f}&nbsp;${qu[l]}`,this._container.style.width=h*g+"px"})}onAdd(h){return this._map=h,this._language=h.getLanguage(),this._container=q("div","mapboxgl-ctrl mapboxgl-ctrl-scale",h.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(h){this._language=h,this._update()}setUnit(h){this.options.unit=h,this._update()}},FullscreenControl:class{constructor(h){this._fullscreen=!1,h&&h.container&&(h.container instanceof s.window.HTMLElement?this._container=h.container:s.warnOnce("Full screen control 'container' must be a DOM element.")),s.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in s.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in s.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(h){return this._map=h,this._container||(this._container=this._map.getContainer()),this._controlContainer=q("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",s.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,s.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!s.window.document.fullscreenEnabled&&!s.window.document.webkitFullscreenEnabled)}_setupUI(){const h=this._fullscreenButton=q("button","mapboxgl-ctrl-fullscreen",this._controlContainer);q("span","mapboxgl-ctrl-icon",h).setAttribute("aria-hidden","true"),h.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),s.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const h=this._getTitle();this._fullscreenButton.setAttribute("aria-label",h),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",h)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(s.window.document.fullscreenElement||s.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?s.window.document.exitFullscreen?s.window.document.exitFullscreen():s.window.document.webkitCancelFullScreen&&s.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends s.Evented{constructor(h){super(),this.options=s.extend(Object.create(Vu),h),s.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(h&&h.className?h.className.trim().split(/\s+/):[])}addTo(h){return this._map&&this.remove(),this._map=h,this.options.closeOnClick&&h.on("preclick",this._onClose),this.options.closeOnMove&&h.on("move",this._onClose),h.on("remove",this.remove),this._update(),h._addPopup(this),this._focusFirstElement(),this._trackPointer?(h.on("mousemove",this._onMouseEvent),h.on("mouseup",this._onMouseEvent),h._canvasContainer.classList.add("mapboxgl-track-pointer")):h.on("move",this._update),this.fire(new s.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const h=this._map;return h&&(h.off("move",this._update),h.off("move",this._onClose),h.off("preclick",this._onClose),h.off("click",this._onClose),h.off("remove",this.remove),h.off("mousemove",this._onMouseEvent),h.off("mouseup",this._onMouseEvent),h.off("drag",this._onMouseEvent),h._canvasContainer&&h._canvasContainer.classList.remove("mapboxgl-track-pointer"),h._removePopup(this),this._map=void 0),this.fire(new s.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(h){this._lngLat=s.LngLat.convert(h),this._pos=null,this._trackPointer=!1,this._update();const i=this._map;return i&&(i.on("move",this._update),i.off("mousemove",this._onMouseEvent),i._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const h=this._map;return h&&(h.off("move",this._update),h.on("mousemove",this._onMouseEvent),h.on("drag",this._onMouseEvent),h._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(h){return this.setDOMContent(s.window.document.createTextNode(h))}setHTML(h){const i=s.window.document.createDocumentFragment(),l=s.window.document.createElement("body");let f;for(l.innerHTML=h;f=l.firstChild,f;)i.appendChild(f);return this.setDOMContent(i)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(h){return this.options.maxWidth=h,this._update(),this}setDOMContent(h){let i=this._content;if(i)for(;i.hasChildNodes();)i.firstChild&&i.removeChild(i.firstChild);else i=this._content=q("div","mapboxgl-popup-content",this._container||void 0);if(i.appendChild(h),this.options.closeButton){const l=this._closeButton=q("button","mapboxgl-popup-close-button",i);l.type="button",l.setAttribute("aria-label","Close popup"),l.setAttribute("aria-hidden","true"),l.innerHTML="&#215;",l.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(h){return this._classList.add(h),this._updateClassList(),this}removeClassName(h){return this._classList.delete(h),this._updateClassList(),this}setOffset(h){return this.options.offset=h,this._update(),this}toggleClassName(h){let i;return this._classList.delete(h)?i=!1:(this._classList.add(h),i=!0),this._updateClassList(),i}_onMouseEvent(h){this._update(h.point)}_getAnchor(h){if(this.options.anchor)return this.options.anchor;const i=this._map,l=this._container,f=this._pos;if(!i||!l||!f)return"bottom";const g=l.offsetWidth,v=l.offsetHeight,T=f.x<g/2,S=f.x>i.transform.width-g/2;if(f.y+h<v)return T?"top-left":S?"top-right":"top";if(f.y>i.transform.height-v){if(T)return"bottom-left";if(S)return"bottom-right"}return T?"left":S?"right":"bottom"}_updateClassList(){const h=this._container;if(!h)return;const i=[...this._classList];i.push("mapboxgl-popup"),this._anchor&&i.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&i.push("mapboxgl-popup-track-pointer"),h.className=i.join(" ")}_update(h){const i=this._map,l=this._content;if(!i||!this._lngLat&&!this._trackPointer||!l)return;let f=this._container;if(f||(f=this._container=q("div","mapboxgl-popup",i.getContainer()),this._tip=q("div","mapboxgl-popup-tip",f),f.appendChild(l)),this.options.maxWidth&&f.style.maxWidth!==this.options.maxWidth&&(f.style.maxWidth=this.options.maxWidth),i.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=va(this._lngLat,this._pos,i.transform)),!this._trackPointer||h){const g=this._pos=this._trackPointer&&h?h:i.project(this._lngLat),v=vh(this.options.offset),T=this._anchor=this._getAnchor(v.y),S=vh(this.options.offset,T),C=g.add(S).round();i._requestDomTask(()=>{this._container&&T&&(this._container.style.transform=`${ks[T]} translate(${C.x}px,${C.y}px)`)})}if(!this._marker&&i._showingGlobe()){const g=s.isLngLatBehindGlobe(i.transform,this._lngLat)?0:1;this._setOpacity(g)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const h=this._container.querySelector(cd);h&&h.focus()}_onClose(){this.remove()}_setOpacity(h){this._container&&(this._container.style.opacity=`${h}`),this._content&&(this._content.style.pointerEvents=h?"auto":"none")}},Marker:mt,Style:no,LngLat:s.LngLat,LngLatBounds:s.LngLatBounds,Point:s.Point,MercatorCoordinate:s.MercatorCoordinate,FreeCameraOptions:ih,Evented:s.Evented,config:s.config,prewarm:function(){eo().acquire(Sr)},clearPrewarmedResources:function(){const h=Vn;h&&(h.isPreloaded()&&h.numActive()===1?(h.release(Sr),Vn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return s.config.ACCESS_TOKEN},set accessToken(h){s.config.ACCESS_TOKEN=h},get baseApiUrl(){return s.config.API_URL},set baseApiUrl(h){s.config.API_URL=h},get workerCount(){return kn.workerCount},set workerCount(h){kn.workerCount=h},get maxParallelImageRequests(){return s.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(h){s.config.MAX_PARALLEL_IMAGE_REQUESTS=h},clearStorage(h){s.clearTileCache(h)},workerUrl:"",workerClass:null,setNow:s.exported.setNow,restoreNow:s.exported.restoreNow};return xa});var E=_;return E})})(Ny);var Vy=Ny.exports;const MC=el(Vy),CC=lp({__proto__:null,default:MC},[Vy]);export{zC as A,UC as F,kC as L,OC as M,NC as N,fn as P,Gs as R,VC as S,t6 as W,GM as _,ap as a,FC as b,BC as c,jC as d,AC as e,G8 as f,DC as g,IC as h,PC as j,LC as p,H0 as q,Ue as r,RC as w};
